import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as a,K as l,L as s,o as t,c as n,w as o,g as r,f as i,s as u,t as d,I as c,v as m,N as p,O as v,B as f,P as h,Q as w,F as g,r as x,p as _,db as y,S as b,e as k,h as I}from"./index-B3PZsRwT.js";import{r as C,s as U,t as z,w as S}from"./index-DqnulfE2.js";import{_ as j}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as $}from"./index-BThgVJ70.js";const T={class:"w-full flex"},O={class:"flex"},A={class:"w-full flex-y-center justify-end gap-12px"},B={class:"ml-3px"},E={class:"ml-3px"},K=a({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:l(["search","reset"],["update:model"]),setup(e,{emit:a}){const l=a,x=s(e,"model");function _(){l("search",x.value)}function y(){x.value.areaId=null,x.value.siteId="HBJL",l("reset",x.value)}return(e,a)=>{const l=c,s=m,b=p,k=v,I=f,C=h,U=w,z=g,S=$;return t(),n(S,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:o((()=>[r(z,{model:x.value,"label-col":{span:5,md:7},class:"search-form"},{default:o((()=>[i("div",T,[r(U,{gutter:[15,8],wrap:"",class:"w-full"},{default:o((()=>[r(b,{span:6},{default:o((()=>[r(s,{label:"作业区域代码",name:"areaId",class:"m-0","label-col":{}},{default:o((()=>[r(l,{value:x.value.areaId,"onUpdate:value":a[0]||(a[0]=e=>x.value.areaId=e),placeholder:"请输入作业区域代码",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:u(_,["enter"])},null,8,["value"])])),_:1})])),_:1}),i("div",O,[r(s,{class:"m-0"},{default:o((()=>[i("div",A,[r(I,{type:"primary",ghost:"",class:"mini-btn",onClick:_},{icon:o((()=>[r(k,{class:"align-sub text-icon"})])),default:o((()=>[i("span",B,d(e.$t("common.search")),1)])),_:1}),r(I,{class:"mini-btn",onClick:y},{icon:o((()=>[r(C,{class:"align-sub text-icon"})])),default:o((()=>[i("span",E,d(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),R={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},q={class:"event-form"},F={class:"modal-footer"},J=Object.assign({name:"erpdatasync_factory-area_area"},{__name:"index",setup(a){const l=x({areaId:""}),s=_({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,a)=>{s.current=e,s.pageSize=a,O()}}),n=x([{key:"index",dataIndex:"index",title:"序号",width:100,align:"center",checked:!0},{key:"areaId",dataIndex:"areaId",title:"作业区域代码",width:260,align:"center",checked:!0,ellipsis:!0},{key:"description",dataIndex:"description",title:"描述",width:200,align:"center",checked:!0,ellipsis:!0},{key:"siteId",dataIndex:"siteId",title:"工厂代码",width:200,align:"center",checked:!0,ellipsis:!0},{key:"lmUser",dataIndex:"lmUser",title:"最后修改用户",width:200,align:"center",checked:!0,ellipsis:!0},{key:"lmTime",dataIndex:"lmTime",title:"最后修改时间",width:200,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>null==e.lmTime?null:y(e.lmTime)}]),u=x({}),d=x(!1),v=x([]),h=x(!1),T=x([]);function O(){h.value=!0,C({pageSize:s.pageSize,pageNum:s.current,...l.value}).then((({data:e,error:a})=>{a||(e.list.forEach(((e,a)=>{e.index=a+1})),v.value=e.list,s.total=e.total)})).finally((()=>{h.value=!1}))}const A=x([]),B=x("");function E(e){A.value=e}function J(){u.value={},d.value=!0,B.value="工厂区域新增"}function L(){var e;if(1!==A.value.length)return null==(e=window.$message)?void 0:e.error("请选择一条数据");const a=v.value.filter((e=>A.value.includes(e.areaUuid)));B.value="工厂区域修改",u.value=a[0],d.value=!0}function N(){var e;if(0==A.value.length)return null==(e=window.$message)?void 0:e.error("请选择数据");window.$modal.confirm({title:"提醒",content:"确认删除所选数据吗？",onOk:()=>{const e=A.value;S(e).then((({error:e,data:a})=>{var l;e||(null==(l=window.$message)||l.success("删除成功"),O())}))},onCancel:()=>{}})}function Q(){s.current=1,O()}O();const H=x(null),M=e=>({style:{background:e.areaUuid===H.value?"#BAEAFA":""},class:e.areaUuid===H.value?"jl-table-row-selected":"",onClick:()=>{H.value=e.areaUuid}});return(a,x)=>{const _=f,y=e,C=b("STable"),S=c,H=m,P=p,D=w,G=g,V=$;return t(),k("div",R,[r(K,{model:l.value,"onUpdate:model":x[0]||(x[0]=e=>l.value=e),onReset:x[1]||(x[1]=e=>Q()),onSearch:x[2]||(x[2]=e=>Q())},null,8,["model"]),r(V,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:o((()=>[r(_,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:J},{default:o((()=>x[9]||(x[9]=[i("span",{class:"ml-3px"},"新增",-1)]))),_:1}),r(_,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:L},{default:o((()=>x[10]||(x[10]=[i("span",{class:"ml-3px"},"修改",-1)]))),_:1}),r(_,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:N},{default:o((()=>x[11]||(x[11]=[i("span",{class:"ml-3px"},"删除",-1)]))),_:1})])),extra:o((()=>[r(y,{columns:n.value,"onUpdate:columns":x[3]||(x[3]=e=>n.value=e)},null,8,["columns"])])),default:o((()=>[r(C,{columns:n.value,"data-source":v.value,size:"small",bordered:"",loading:h.value,"row-selection":{selectedRowKeys:A.value,onChange:E},"default-expanded-row-keys":T.value,"row-key":"areaUuid","default-expand-all-rows":!0,scroll:{x:"auto",y:"auto"},pagination:s,class:"h-full","custom-row":M,"row-height":23},null,8,["columns","data-source","loading","row-selection","default-expanded-row-keys","pagination"]),r(j,{visible:d.value,"onUpdate:visible":x[8]||(x[8]=e=>d.value=e),"destroy-on-close":!0,centered:!0,title:B.value,width:"950px",height:"350px"},{footer:o((()=>[i("div",F,[r(_,{onClick:x[6]||(x[6]=e=>d.value=!1)},{default:o((()=>x[12]||(x[12]=[I("关闭")]))),_:1}),r(_,{type:"primary",onClick:x[7]||(x[7]=e=>{"工厂区域新增"==B.value?U(u.value).then((({data:e,error:a})=>{var l;a||(null==(l=window.$message)||l.success("新增成功"),d.value=!1,O())})):z(u.value).then((({data:e,error:a})=>{var l;a||(null==(l=window.$message)||l.success("修改成功"),d.value=!1,O())}))})},{default:o((()=>x[13]||(x[13]=[I("保存")]))),_:1})])])),default:o((()=>[i("div",q,[r(G,{model:u.value,name:"basic","label-col":{span:6},autocomplete:"off"},{default:o((()=>[r(D,null,{default:o((()=>[r(P,{span:24},{default:o((()=>[r(H,{label:"作业区域代码",name:"areaId",rules:[{required:!0,message:"请选择作业区域代码!"}]},{default:o((()=>[r(S,{value:u.value.areaId,"onUpdate:value":x[4]||(x[4]=e=>u.value.areaId=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),r(P,{span:24},{default:o((()=>[r(H,{label:"描述",name:"description"},{default:o((()=>[r(S,{value:u.value.description,"onUpdate:value":x[5]||(x[5]=e=>u.value.description=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible","title"])])),_:1})])}}});export{J as default};
