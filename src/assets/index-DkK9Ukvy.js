import{g as e,am as t,an as a,ao as n,ap as o,d as l,au as r,av as i,aw as s,b9 as c,bd as d,aX as u,aH as p,aN as f,r as m,j as v,by as g,b7 as h,ax as x,u as y,b,$ as S,o as _,c as w,w as k,f as C,e as T,aj as z,al as j,bU as D,N as I,Q as F,dc as N,i as R,ac as O,E,t as H,_ as P,cH as A,z as M,p as B,h as Y,dd as L,de as U,a as $,aa as Q}from"./index-B3PZsRwT.js";import{S as W,C as X}from"./index-BThgVJ70.js";import{S as J}from"./index-BjkQiJDd.js";import{_ as q}from"./count-to.vue_vue_type_script_setup_true_lang-B2gd1OWh.js";import{l as G,a as V,u as K,e as Z,b as ee,c as te,d as ae,n as ne,g as oe}from"./system-manage-DyXHkc6D.js";import{u as le}from"./echarts-B3HHInsl.js";import{_ as re}from"./index-Cn-BWYp5.js";import"./installCanvasRenderer-Dfk03Uyn.js";import"./fromPairs-BI-MgVCs.js";const ie=t=>{const{value:a,formatter:n,precision:o,decimalSeparator:l,groupSeparator:r="",prefixCls:i}=t;let s;if("function"==typeof n)s=n({value:a});else{const t=String(a),n=t.match(/^(-?)(\d*)(\.(\d+))?$/);if(n){const t=n[1];let a=n[2]||"0",c=n[4]||"";a=a.replace(/\B(?=(\d{3})+(?!\d))/g,r),"number"==typeof o&&(c=c.padEnd(o,"0").slice(0,o>0?o:0)),c&&(c="".concat(l).concat(c)),s=[e("span",{key:"int",class:"".concat(i,"-content-value-int")},[t,a]),c&&e("span",{key:"decimal",class:"".concat(i,"-content-value-decimal")},[c])]}else s=t}return e("span",{class:"".concat(i,"-content-value")},[s])};ie.displayName="StatisticNumber";const se=e=>{const{componentCls:t,marginXXS:a,padding:l,colorTextDescription:r,statisticTitleFontSize:i,colorTextHeading:s,statisticContentFontSize:c,statisticFontFamily:d}=e;return{["".concat(t)]:n(n({},o(e)),{["".concat(t,"-title")]:{marginBottom:a,color:r,fontSize:i},["".concat(t,"-skeleton")]:{paddingTop:l},["".concat(t,"-content")]:{color:s,fontSize:c,fontFamily:d,["".concat(t,"-content-value")]:{display:"inline-block",direction:"ltr"},["".concat(t,"-content-prefix, ").concat(t,"-content-suffix")]:{display:"inline-block"},["".concat(t,"-content-prefix")]:{marginInlineEnd:a},["".concat(t,"-content-suffix")]:{marginInlineStart:a}}})}},ce=t("Statistic",(e=>{const{fontSizeHeading3:t,fontSize:n,fontFamily:o}=e,l=a(e,{statisticTitleFontSize:n,statisticContentFontSize:t,statisticFontFamily:o});return[se(l)]})),de=()=>({prefixCls:String,decimalSeparator:String,groupSeparator:String,format:String,value:c([Number,String,Object]),valueStyle:{type:Object,default:void 0},valueRender:d(),formatter:u(),precision:Number,prefix:p(),suffix:p(),title:p(),loading:f()}),ue=l({compatConfig:{MODE:3},name:"AStatistic",inheritAttrs:!1,props:r(de(),{decimalSeparator:".",groupSeparator:",",loading:!1}),slots:Object,setup(t,a){let{slots:o,attrs:l}=a;const{prefixCls:r,direction:c}=i("statistic",t),[d,u]=ce(r);return()=>{var a,i,p,f,m,v,g;const{value:h=0,valueStyle:x,valueRender:y}=t,b=r.value,S=null!==(a=t.title)&&void 0!==a?a:null===(i=o.title)||void 0===i?void 0:i.call(o),_=null!==(p=t.prefix)&&void 0!==p?p:null===(f=o.prefix)||void 0===f?void 0:f.call(o),w=null!==(m=t.suffix)&&void 0!==m?m:null===(v=o.suffix)||void 0===v?void 0:v.call(o),k=null!==(g=t.formatter)&&void 0!==g?g:o.formatter;let C=e(ie,s({"data-for-update":Date.now()},n(n({},t),{prefixCls:b,value:h,formatter:k})),null);return y&&(C=y(C)),d(e("div",s(s({},l),{},{class:[b,{["".concat(b,"-rtl")]:"rtl"===c.value},l.class,u.value]}),[S&&e("div",{class:"".concat(b,"-title")},[S]),e(W,{paragraph:!1,loading:t.loading},{default:()=>[e("div",{style:x,class:"".concat(b,"-content")},[_&&e("span",{class:"".concat(b,"-content-prefix")},[_]),C,w&&e("span",{class:"".concat(b,"-content-suffix")},[w])])]})]))}}}),pe=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function fe(e,t){const{format:a=""}=t,n=new Date(e).getTime(),o=Date.now();return function(e,t){let a=e;const n=/\[[^\]]*]/g,o=(t.match(n)||[]).map((e=>e.slice(1,-1))),l=t.replace(n,"[]"),r=pe.reduce(((e,t)=>{let[n,o]=t;if(e.includes(n)){const t=Math.floor(a/o);return a-=t*o,e.replace(new RegExp("".concat(n,"+"),"g"),(e=>{const a=e.length;return t.toString().padStart(a,"0")}))}return e}),l);let i=0;return r.replace(n,(()=>{const e=o[i];return i+=1,e}))}(Math.max(n-o,0),a)}const me=1e3/30;function ve(e){return new Date(e).getTime()}const ge=l({compatConfig:{MODE:3},name:"AStatisticCountdown",props:r(n(n({},de()),{value:c([Number,String,Object]),format:String,onFinish:Function,onChange:Function}),{format:"HH:mm:ss"}),setup(t,a){let{emit:o,slots:l}=a;const r=m(),i=m(),c=()=>{const{value:e}=t;ve(e)>=Date.now()?d():u()},d=()=>{if(r.value)return;const e=ve(t.value);r.value=setInterval((()=>{i.value.$forceUpdate(),e>Date.now()&&o("change",e-Date.now()),c()}),me)},u=()=>{const{value:e}=t;if(r.value){clearInterval(r.value),r.value=void 0;ve(e)<Date.now()&&o("finish")}},p=e=>{let{value:a,config:o}=e;const{format:l}=t;return fe(a,n(n({},o),{format:l}))},f=e=>e;return v((()=>{c()})),g((()=>{c()})),h((()=>{u()})),()=>{const a=t.value;return e(ue,s({ref:i},n(n({},x(t,["onFinish","onChange"])),{value:a,valueRender:f,formatter:p})),l)}}});ue.Countdown=ge,ue.install=function(e){return e.component(ue.name,ue),e.component(ue.Countdown.name,ue.Countdown),e},ue.Countdown;const he=l({name:"HeaderBanner",__name:"header-banner",setup(t){y();const a=b((()=>[{id:1,title:S("page.home.todo"),value:"0/0"},{id:2,title:S("page.home.message"),value:"0"}]));return(t,n)=>{const o=I,l=ue,r=J,i=F,s=X;return _(),w(s,{bordered:!1,class:"card-wrapper","body-style":{padding:"8px 24px"}},{default:k((()=>[e(i,{gutter:[16,16]},{default:k((()=>[e(o,{span:24,md:18},{default:k((()=>n[0]||(n[0]=[C("div",{class:"flex-y-center"},null,-1)]))),_:1}),e(o,{span:24,md:6},{default:k((()=>[e(r,{class:"w-full justify-end",size:24},{default:k((()=>[(_(!0),T(z,null,j(a.value,(e=>(_(),w(l,D({key:e.id,class:"whitespace-nowrap",ref_for:!0},e),null,16)))),128))])),_:1})])),_:1})])),_:1})])),_:1})}}}),xe={class:"text-16px"},ye={class:"flex justify-between pt-12px"},be=l({name:"CardData",__name:"card-data",setup(t){const a=m(0),n=m(0),o=m(0),l=m(0);G().then((({error:e,data:t})=>{e||(a.value=t)})),V().then((({error:e,data:t})=>{e||(n.value=t)})),K().then((({error:e,data:t})=>{e||(o.value=t)})),Z().then((({error:e,data:t})=>{e||(l.value=t.deviceConnections)}));const r=b((()=>[{key:"visitCount",title:"日活跃用户数",value:a.value,unit:"",color:{start:"#ec4786",end:"#b955a4"},icon:"ant-design:bar-chart-outlined"},{key:"turnover",title:"日访问次数",value:n.value,unit:"",color:{start:"#865ec0",end:"#5144b4"},icon:"ant-design:trademark-circle-outlined"},{key:"downloadCount",title:"系统用户数",value:o.value,unit:"",color:{start:"#56cdf3",end:"#719de3"},icon:"carbon:document-download"},{key:"dealCount",title:"设备连接数",value:l.value,unit:"",color:{start:"#fcbc25",end:"#f68057"},icon:"ant-design:trademark-circle-outlined"}])),[i,s]=N();return(t,a)=>{const n=P,o=q,l=I,c=F,d=X;return _(),w(d,{bordered:!1,size:"small",class:"card-wrapper"},{default:k((()=>[e(R(i),null,{default:k((({$slots:e,gradientColor:t})=>[C("div",{class:"rd-8px px-16px pb-4px pt-8px text-white",style:O({backgroundImage:t})},[(_(),w(E(e.default)))],4)])),_:1}),e(c,{gutter:[16,16]},{default:k((()=>[(_(!0),T(z,null,j(r.value,(t=>(_(),w(l,{key:t.key,span:24,md:12,lg:6},{default:k((()=>{return[e(R(s),{"gradient-color":(a=t.color,"linear-gradient(to bottom right, ".concat(a.start,", ").concat(a.end,")")),class:"flex-1"},{default:k((()=>[C("h3",xe,H(t.title),1),C("div",ye,[e(n,{icon:t.icon,class:"text-32px"},null,8,["icon"]),e(o,{prefix:t.unit,"start-value":0,"end-value":t.value,class:"text-30px text-white dark:text-dark"},null,8,["prefix","end-value"])])])),_:2},1032,["gradient-color"])];var a})),_:2},1024)))),128))])),_:1})])),_:1})}}}),Se=l({name:"LineChart",__name:"line-chart",setup(t){const a=m(!1),n=["midnightToFourAm","fourAmToEightAm","eightAmToNoon","noonToFourPm","fourPmToEightPm","eightPmToMidnight"],{domRef:o,updateOptions:l}=le((()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["访问用户数","访问量"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[{color:"#8e9dff",name:"访问用户数",type:"line",smooth:!0,stack:"Total",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:.25,color:"#8e9dff"},{offset:1,color:"#fff"}]}},emphasis:{focus:"series"},data:[]},{color:"#26deca",name:"访问量",type:"line",smooth:!0,stack:"Total",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:.25,color:"#26deca"},{offset:1,color:"#fff"}]}},emphasis:{focus:"series"},data:[]}]})),!1);return a.value=!0,new Promise(((e,t)=>{Promise.all([ee(),te()]).then((([t,a])=>{const o=[];t.error||(o[0]=n.map((e=>t.data[e]))),a.error||(o[1]=n.map((e=>t.data[e]))),e(o)}))})).then((e=>{l((t=>(t.xAxis.data=["0-4点","4-8点","8-12点","12-16点","16-20点","20-24点"],t.series[0].data=null==e?void 0:e[1],t.series[1].data=null==e?void 0:e[0],t))).finally((()=>a.value=!1))})),(t,n)=>{const l=A,r=X;return _(),w(r,{bordered:!1,class:"card-wrapper"},{default:k((()=>[e(l,{tip:"数据加载中...",spinning:a.value},{default:k((()=>[C("div",{ref_key:"domRef",ref:o,class:"h-360px overflow-hidden"},null,512)])),_:1},8,["spinning"])])),_:1})}}}),_e=l({name:"PieChart",__name:"pie-chart",setup(t){M();const a=m([]),n=m(!1),{domRef:o,updateOptions:l}=le((()=>({tooltip:{trigger:"item"},legend:{bottom:"1%",left:"center",itemStyle:{borderWidth:0}},series:[{name:"报表信息",type:"pie",radius:["45%","75%"],avoidLabelOverlap:!1,center:["50%","37%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:1},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"12"}},labelLine:{show:!1},data:[]}]})),!1);return n.value=!0,ae().then((({error:e,data:t})=>{e||(Object.entries(t).forEach((([e,t])=>{a.value.push({name:e,value:t})})),l((e=>(e.series[0].data=a.value,e))))})).finally((()=>n.value=!1)),(t,a)=>{const l=A,r=X;return _(),w(r,{bordered:!1,class:"card-wrapper"},{default:k((()=>[e(l,{tip:"数据加载中...",spinning:n.value},{default:k((()=>[C("div",{ref_key:"domRef",ref:o,class:"h-360px overflow-hidden"},null,512)])),_:1},8,["spinning"])])),_:1})}}}),we=l({name:"ProjectNews",__name:"project-news",setup(t){const a=m("1"),n=B({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,t)=>{n.current=e,n.pageSize=t,getData()}}),o=m([]);function l(){ne({noticeType:a.value,pageSize:n.pageSize,pageNum:n.current}).then((({error:e,otherData:t})=>{e||(n.total=(null==t?void 0:t.total)||0,o.value=t.rows)}))}const r=[{key:"noticeTitle",dataIndex:"noticeTitle",title:"标题",width:160,align:"center",checked:!0,ellipsis:!0},{key:"noticeContent",dataIndex:"noticeContent",title:"公告详情",align:"center",checked:!0,ellipsis:!0,customRender:({record:t})=>e("div",{innerHTML:t.noticeContent},null)},{width:120,key:"createBy",dataIndex:"createBy",title:"发布人",align:"center",checked:!0,ellipsis:!0},{width:160,key:"createTime",dataIndex:"createTime",title:"发布时间",align:"center",checked:!0,ellipsis:!0}];return l(),(t,i)=>{const s=L,c=U,d=re,u=X;return _(),w(u,{title:"系统公告",bordered:!1,size:"small",class:"h-full w-full card-wrapper"},{default:k((()=>[e(c,{value:a.value,"onUpdate:value":i[0]||(i[0]=e=>a.value=e),"button-style":"solid",class:"mb-8px",onChange:l},{default:k((()=>[e(s,{value:"1"},{default:k((()=>i[1]||(i[1]=[Y("公告")]))),_:1}),e(s,{value:"2"},{default:k((()=>i[2]||(i[2]=[Y("通知")]))),_:1}),e(s,{value:"3"},{default:k((()=>i[3]||(i[3]=[Y("系统更新")]))),_:1})])),_:1},8,["value"]),e(d,{"data-source":o.value,columns:r,bordered:"",class:"h-full min-h-300px",pagination:n,scroll:{y:"auto"}},null,8,["data-source","pagination"])])),_:1})}}}),ke=l({name:"CreativityBanner",__name:"creativity-banner",setup(t){const a=$(),n=m([]),o=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:65,align:"center",checked:!0,ellipsis:!0},{key:"dateSerialNumber",dataIndex:"dateSerialNumber",title:"流水号",align:"center",checked:!0,ellipsis:!0,customRender:({record:t})=>e("a",{class:"color-blue",onClick:()=>function(e){a.routerPush(e.noticeUrl)}(t)},[t.dateSerialNumber])},{key:"noticeTitle",dataIndex:"noticeTitle",title:"标题",align:"center",checked:!0,ellipsis:!0},{key:"noticeDescription",dataIndex:"noticeDescription",title:"内容",align:"center",checked:!0,ellipsis:!0},{key:"noticeCompletionStatus",dataIndex:"noticeCompletionStatus",title:"状态",align:"center",checked:!0,ellipsis:!0,width:80,customRender:({record:e})=>["未完成","已完成"][e.noticeCompletionStatus]},{key:"createTime",dataIndex:"createTime",title:"时间",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>Q(e.upkeepEndTime).format("YYYY-MM-DD HH:mm:ss")}];const l=B({current:1,pageSize:10,showSizeChanger:!0,pageSizeOptions:["10","50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,t)=>{l.current=e,l.pageSize=t,i()}}),r=m(!1);function i(){r.value=!0,oe({pageNum:l.current,pageSize:l.pageSize,dataFlag:"1"}).then((({data:e,error:t})=>{t||(null==e||e.list.forEach(((e,t)=>{e.dataIndex=t+1})),n.value=null==e?void 0:e.list,l.total=null==e?void 0:e.total)})).finally((()=>r.value=!1))}return i(),(t,a)=>{const i=re,s=X;return _(),w(s,{title:"任务中心",bordered:!1,size:"small",class:"h-400px flex-col-stretch card-wrapper","body-style":{flex:1,overflow:"hidden"}},{default:k((()=>[e(i,{"data-source":n.value,columns:o,bordered:"",class:"h-full",pagination:l,loading:r.value,scroll:{y:"auto"}},null,8,["data-source","pagination","loading"])])),_:1})}}}),Ce=l({name:"home",__name:"index",setup:t=>(t,a)=>{const n=I,o=F,l=J;return _(),w(l,{direction:"vertical",size:16},{default:k((()=>[e(he),e(be),e(o,{gutter:[16,16]},{default:k((()=>[e(n,{span:24,lg:14},{default:k((()=>[e(Se)])),_:1}),e(n,{span:24,lg:10},{default:k((()=>[e(_e)])),_:1})])),_:1}),e(o,{gutter:[16,16]},{default:k((()=>[e(n,{span:24,lg:10},{default:k((()=>[e(ke)])),_:1}),e(n,{span:24,lg:14},{default:k((()=>[e(we)])),_:1})])),_:1})])),_:1})}});export{Ce as default};
