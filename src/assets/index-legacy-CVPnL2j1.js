!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,l,i,r,c=[],o=!0,d=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=i.call(a)).done)&&(c.push(n.value),c.length!==t);o=!0);}catch(e){d=!0,l=e}finally{try{if(!o&&null!=a.return&&(r=a.return(),Object(r)!==r))return}finally{if(d)throw l}}return c}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return n(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}System.register(["./engineering-data-inquiry-legacy-dLfUXwjS.js","./table-legacy-BfQK1xrs.js","./index-legacy-BH1Y34Mi.js","./common-search.vue_vue_type_script_setup_true_lang-legacy-BetNIGyO.js","./resetTableRef-legacy-BB5avnzc.js","./index-legacy-CPUL4mwF.js","./index-legacy-JzSJVdOM.js","./modal.vue_vue_type_style_index_0_lang-legacy-DP5xhvDE.js","./pdf-viewer-legacy-DG9HKUu-.js","./table-column-setting.vue_vue_type_script_setup_true_lang-legacy-zNkjfv7c.js","./api-legacy-B6UkH1eb.js","./isNumber-legacy-CHb6J4gG.js","./SwapOutlined-legacy-DhbaWH6n.js"],(function(a,n){"use strict";var l,i,r,c,o,d,s,u,p,f,h,v,m,g,y,k,w,x,b,I,_,D,N,P,R,C,M,S,T,j,F,Y,E,A,B,Q,H,U,K,z,L,O,q,J;return{setters:[function(e){l=e.g,i=e.d,r=e._,c=e.a,o=e.p,d=e.b},function(e){s=e._},function(e){u=e.r,p=e.b,f=e.o,h=e.e,v=e.f,m=e.g,g=e.w,y=e.a1,k=e.a3,w=e.bh,x=e.a5,b=e.c,I=e.aa,_=e.h,D=e.aj,N=e._,P=e.cF,R=e.i,C=e.a9,M=e.p,S=e.V,T=e.al,j=e.t,F=e.cs,Y=e.ac,E=e.ad,A=e.ae,B=e.B,Q=e.N,H=e.ah,U=e.ai,K=e.Q,z=e.J},function(e){L=e._},function(e){O=e.u},function(e){q=e.I},function(e){J=e.C},null,null,null,null,null,null],execute:function(){var n=document.createElement("style");n.textContent='.module-no-info[data-v-67b0d031]{align-items:center;margin-bottom:5px}.module-no-info[data-v-67b0d031]:last-child{margin-bottom:0}.module-no-info .icon[data-v-67b0d031]{display:flex;align-items:center;margin-right:15px}.module-no-info .icon .icon-warp[data-v-67b0d031]{width:24px;height:24px;text-align:center;line-height:24px;border-radius:6px;background:#e6f4ff}.module-no-info .icon .icon-warp .iconfont[data-v-67b0d031]{color:#0958d9;font-size:14px}.module-no-info .content[data-v-67b0d031]{font-size:14px;display:flex}.module-no-info .content .label[data-v-67b0d031]{margin-right:5px;font-weight:700}.module-no-info .content .label[data-v-67b0d031]:after{content:":"}.module-no-info .content .data[data-v-67b0d031]{-webkit-text-decoration:underline;text-decoration:underline;color:#646cff}.right-table[data-v-67b0d031] .ant-tabs .ant-tabs-nav{margin-bottom:0}.right-table[data-v-67b0d031] .ant-tabs .ant-tabs-content-holder{height:calc(100% - 40px)}.right-table[data-v-67b0d031] .ant-tabs .ant-tabs-content-holder .ant-tabs-content,.right-table[data-v-67b0d031] .ant-tabs .ant-tabs-content-holder .ant-tabs-content .ant-tabs-tabpane{height:100%}.right-table[data-v-67b0d031] .ant-tabs .ant-tabs-nav-list .ant-tabs-tab{border-radius:6px 6px 0 0}.right-table[data-v-67b0d031] .ant-tabs .ant-tabs-nav-list .ant-tabs-tab-active{background:#646cff}.right-table[data-v-67b0d031] .ant-tabs .ant-tabs-nav-list .ant-tabs-tab-active .ant-tabs-tab-btn{color:#fff}\n',document.head.appendChild(n);var G={class:"h-full w-full"},V={class:"h-49.5%"},$={__name:"engineering-instruction",setup:function(e,a){var n=a.expose,i=u(null),r=u({prodId:null,techId:null}),c=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"miName",dataIndex:"miName",title:"项目名称",align:"center",checked:!0,ellipsis:!0,width:130},{key:"miData",dataIndex:"miData",title:"数据项",align:"center",checked:!0,ellipsis:!0,width:130},{key:"remark",dataIndex:"remark",title:"备注",align:"center",checked:!0,ellipsis:!0,width:130},{key:"createBy",dataIndex:"createBy",title:"编写",align:"center",checked:!0,ellipsis:!0,width:130},{key:"createDate",dataIndex:"createDate",title:"编写日期",align:"center",checked:!0,ellipsis:!0,width:160},{key:"updateDate",dataIndex:"updateDate",title:"最后修改日期",align:"center",checked:!0,ellipsis:!0,width:160}],o=u(null),d=u([]);var b=p((function(){return d.value.length?"mb-1% h-49.5%":"h-full"}));return n({getData:function(e){r.value=e,x((function(){i.value.getData(1),o.value.getData(1),l({techId:e.techId}).then((function(e){var a=e.data;if(!e.error&&a.length){var n=a.map((function(e){return{key:e.fieldName,dataIndex:e.fieldName,title:e.caption,align:"center",checked:!0,ellipsis:!0,width:130}}));d.value=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0}].concat(t(n))}else d.value=[]}))}))}}),function(e,t){var a=s;return f(),h("div",G,[v("div",{class:y(b.value)},[m(a,{ref_key:"topTableRef",ref:i,searchParams:r.value,"onUpdate:searchParams":t[0]||(t[0]=function(e){return r.value=e}),class:"h-full",column:c,"show-row-selection":!1,"row-key":"id",scroll:{y:"auto"},"is-init-get-data":!1,url:"/erpsyncmes/Mi/findMiData","auto-generate-uuid":!0,"is-pagination":!1},{title:g((function(){return t[2]||(t[2]=[v("span",{class:"color-#646cff"},"工程指示",-1)])})),_:1},8,["searchParams"])],2),k(v("div",V,[m(a,{ref_key:"bottomTableRef",ref:o,searchParams:r.value,"onUpdate:searchParams":t[1]||(t[1]=function(e){return r.value=e}),class:"h-full",column:d.value,"show-row-selection":!1,"row-key":"id",scroll:{y:"auto"},"is-init-get-data":!1,url:"/erpsyncmes/Mi/findMiData2","auto-generate-uuid":!0,"is-pagination":!1},{title:g((function(){return t[3]||(t[3]=[v("span",{class:"color-#646cff"},"工程数据",-1)])})),_:1},8,["searchParams","column"])],512),[[w,d.value.length]])])}}},W={__name:"production-tools",setup:function(e,t){var a=t.expose,n=u(null),l=u({}),i=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"toolsMouldName",dataIndex:"toolsMouldName",title:"项目名称",align:"center",checked:!0,ellipsis:!0,width:130},{key:"toolsData",dataIndex:"toolsData",title:"数据项",align:"center",checked:!0,ellipsis:!0,width:130},{key:"createBy",dataIndex:"createBy",title:"创建人",align:"center",checked:!0,ellipsis:!0,width:130},{key:"createDate",dataIndex:"createDate",title:"创建时间",align:"center",checked:!0,ellipsis:!0,width:160,customRender:function(e){var t=e.record;return I(t.createDate).format("YYYY-MM-DD HH:mm:ss")}},{key:"updateDate",dataIndex:"updateDate",title:"最后修改时间",align:"center",checked:!0,ellipsis:!0,width:160,customRender:function(e){var t=e.record;return I(t.updateDate).format("YYYY-MM-DD HH:mm:ss")}}];return a({getData:function(e){l.value=e,x((function(){n.value.getData()}))}}),function(e,t){var a=s;return f(),b(a,{ref_key:"tableRef",ref:n,searchParams:l.value,"onUpdate:searchParams":t[0]||(t[0]=function(e){return l.value=e}),class:"h-full",column:i,"show-row-selection":!1,"row-key":"id",scroll:{y:"auto"},"is-init-get-data":!1,url:"/erpsyncmes/mi/tools/mould/list","auto-generate-uuid":!0,"is-pagination":!1},{title:g((function(){return t[1]||(t[1]=[v("span",{class:"color-#646cff"},"生产工具",-1)])})),_:1},8,["searchParams"])}}},X={__name:"process-engineering-document",setup:function(e,t){var a=t.expose,n=u(null),l=u({techId:null}),i=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"fileMouldName",dataIndex:"fileMouldName",title:"项目名称",align:"center",checked:!0,ellipsis:!0,width:130},{key:"fileName",dataIndex:"fileName",title:"文件名",align:"center",checked:!0,ellipsis:!0,width:130},{key:"createBy",dataIndex:"createBy",title:"创建人",align:"center",checked:!0,ellipsis:!0,width:130},{key:"createDate",dataIndex:"createDate",title:"创建时间",align:"center",checked:!0,ellipsis:!0,width:160,customRender:function(e){var t=e.record;return I(t.createDate).format("YYYY-MM-DD HH:mm:ss")}},{key:"updateDate",dataIndex:"updateDate",title:"最后修改时间",align:"center",checked:!0,ellipsis:!0,width:160,customRender:function(e){var t=e.record;return I(t.updateDate).format("YYYY-MM-DD HH:mm:ss")}}];return a({getData:function(e){l.value=e,x((function(){n.value.getData()}))}}),function(e,t){var a=s;return f(),b(a,{ref_key:"tableRef",ref:n,searchParams:l.value,"onUpdate:searchParams":t[0]||(t[0]=function(e){return l.value=e}),class:"h-full",column:i,"show-row-selection":!1,"row-key":"id",scroll:{y:"auto"},"is-init-get-data":!1,url:"/erpsyncmes/mi/file/mould/list","is-pagination":!1,"auto-generate-uuid":!0},{title:g((function(){return t[1]||(t[1]=[v("span",{class:"color-#646cff"},"工艺工程文件",-1)])})),_:1},8,["searchParams"])}}},Z=["onClick"],ee=["onClick"],te={__name:"engineering-document",setup:function(e,t){var a=t.expose,n="localhost"===window.location.hostname,l=u(null),c=u({prodNo:null}),o=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"fileName",dataIndex:"fileName",title:"文件名",align:"center",checked:!0,ellipsis:!0,customRender:function(e){var t=e.record;return m("span",{class:"cursor-pointer color-blue",onClick:function(){return y({record:t})}},[t.fileName])}},{key:"fileSizeKb",dataIndex:"fileSizeKb",title:"文件大小",align:"center",checked:!0,ellipsis:!0,width:130,customRender:function(e){var t=e.record;return"".concat(t.fileSizeKb,"KB")}},{key:"fileModifiedTime",dataIndex:"fileModifiedTime",title:"更改时间",align:"center",checked:!0,ellipsis:!0,width:160}];var d=u(!1),p=u(null);function y(e){d.value=!0,p.value="".concat(n?"http://192.168.166.169:9999/prod-api/":"/prod-api/","rcerp/erpMiFile/downMiFile?prodNo=").concat(e.record.prodNo,"&fileName=").concat(e.record.fileName),e.hidePopup()}return a({getData:function(e){c.value=e,x((function(){l.value.getData()}))}}),function(e,t){var a=N,n=s,u=r;return f(),h(D,null,[m(n,{ref_key:"tableRef",ref:l,searchParams:c.value,"onUpdate:searchParams":t[0]||(t[0]=function(e){return c.value=e}),class:"h-full",column:o,"show-row-selection":!1,"row-key":"id",scroll:{y:"auto"},"is-init-get-data":!1,url:"/rcerp/erpMiFile/getMiFileList","auto-generate-uuid":!0,"is-pagination":!1,onTableRowDblclick:t[1]||(t[1]=function(e){return y({record:e})})},{title:g((function(){return t[3]||(t[3]=[v("span",{class:"color-#646cff"},"工程文件",-1)])})),"contextmenuPopup-orter":g((function(e){var n=e.args;return[v("li",{class:"popup-item",onClick:function(e){return i({prodNo:(t=n).record.prodNo,fileName:t.record.fileName}),void t.hidePopup();var t}},[m(a,{"local-icon":"download",class:"text-16px"}),t[4]||(t[4]=_(" 下载 "))],8,Z),v("li",{class:"popup-item",onClick:function(e){return y(n)}},[m(a,{"local-icon":"preview",class:"text-16px"}),t[5]||(t[5]=_(" 预览 "))],8,ee)]})),_:1},8,["searchParams"]),m(u,{visible:d.value,"onUpdate:visible":t[2]||(t[2]=function(e){return d.value=e}),url:p.value,"pdf-use-iframe":""},null,8,["visible","url"])],64)}}},ae={class:"h-full w-full flex-center"},ne={__name:"engineering-drawing",setup:function(e,t){var a=t.expose,n=P.PRESENTED_IMAGE_SIMPLE,l=u(null),i="localhost"===window.location.hostname;return a({getData:function(e){c(e).then((function(e){var t=e.data;e.error||(t.image?l.value="".concat(i?"http://192.168.166.166/prod-api/":"/prod-api/").concat(t.image):l.value=null)}))}}),function(e,t){var a=q,i=P;return f(),h("div",ae,[l.value?(f(),b(a,{key:0,src:l.value},null,8,["src"])):(f(),b(i,{key:1,image:R(n),description:"暂无工程图纸"},null,8,["image"]))])}}},le={class:"min-h-500px flex-col-stretch gap-8px overflow-hidden lt-sm:overflow-auto"},ie={class:"p-8px"},re=["onClick"],ce=["onClick"],oe={class:"module-no-info flex"},de={class:"content"},se={class:"data"},ue={class:"module-no-info flex"},pe={class:"content"},fe={class:"data"},he={class:"module-no-info flex"},ve={class:"content"},me={class:"data"},ge={class:"module-no-info flex"},ye={class:"content"},ke={class:"data"},we={class:"module-no-info flex"},xe={class:"content"},be={class:"data"},Ie={class:"module-no-info flex"},_e={class:"content"},De={class:"data"},Ne=["innerHTML"],Pe=["onClick"],Re=["onClick"];a("default",z(Object.assign({name:"engineering-manage_engineering-data-inquiry"},{__name:"index",setup:function(t){var a=u(null),n=e(O({moduleNo:null,moduleNoState:"8"}),2),l=n[0],i=n[1],c=C(a).height,p={0:"编写",1:"更改",2:"待处理",3:"编写中",4:"暂停",5:"已回退",6:"反审核",7:"审核中",8:"已上网",9:"完成",10:"取消",11:"外部ECN",12:"外部ECN待处理",13:"内部ECN",19:"样板转生产",20:"ENC更改",25:"报废",27:"申请",28:"入库",29:"发放",34:"归还",35:"接收",36:"审核",37:"确认",100:"PPC审核"},y=u(null),k=[{type:"input",key:"moduleNo",label:"生产型号",span:24,md:12,lg:8,xl:8,xxl:4,placeholder:"请输入生产型号",showTime:!0},{type:"select",key:"moduleNoState",label:"状态",placeholder:"请选择状态",span:24,md:12,lg:8,xl:8,xxl:4,selectOptions:x()}];function w(e){var t=Number(e);switch(140917104644e4===t||160913164544e4===t?t=2:140917104654e4===t||140919111754e4===t?t=3:161013095348e4!==t&&140919111738e4!==t||(t=4),Number(t)){case-1:return"#FF0000";case 0:return"#0080FF";case 1:return"#FFA500";case 2:return"#FF8000";case 3:return"#B15BFF";case 4:return"#73BF00";case 5:return"#8E8E8E";case 6:return"#BEBEBE";case 7:return"#FF0000";case 8:return"#4682B4";case 9:return"#0000FF";case 10:return"#007500";default:return"#0000FF"}}function x(){return Object.entries(p).map((function(t){var a=e(t,2),n=a[0],l=a[1];return 8===n?{label:"已上网",value:n}:{label:l,value:n}}))}var P=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"state",dataIndex:"state",title:"状态",align:"center",checked:!0,ellipsis:!0,customFilterDropdown:!0,width:130,onFilter:function(e,t){var a=Number(t.state);return 140917104644e4===a||160913164544e4===a?a=2:140917104654e4===a||140919111754e4===a?a=3:161013095348e4!==a&&140919111738e4!==a||(a=4),!e||Number(e)===Number(a)},customRender:function(e){var t=e.record,a=Number(t.state);return 140917104644e4===a||160913164544e4===a?a=2:140917104654e4===a||140919111754e4===a?a=3:161013095348e4!==a&&140919111738e4!==a||(a=4),8===a?m("div",{class:"h-full w-full",title:"已上网",style:{color:w(t.state)}},[_("已上网")]):m("div",{class:"h-full w-full",title:p[a]||"",style:{color:w(t.state)}},[p[a]||""])}},{key:"moduleNo",dataIndex:"moduleNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,width:160,customRender:function(e){var t=e.record;return m("span",{class:"fonw-800 color-#646cff"},[t.moduleNo])}},{key:"pnType",dataIndex:"pnType",title:"类型",align:"center",checked:!0,ellipsis:!0,width:130},{key:"prodType",dataIndex:"prodType",title:"产品类型",align:"center",checked:!0,ellipsis:!0,width:130},{key:"surfTrea1",dataIndex:"surfTrea1",title:"表面处理1",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peType",dataIndex:"peType",title:"板类型",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peDifficulty",dataIndex:"peDifficulty",title:"开发等级",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peState",dataIndex:"peState",title:"生产稿状态",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peSpecial",dataIndex:"peSpecial",title:"特殊周期",align:"center",checked:!0,ellipsis:!0,width:130},{key:"pemark",dataIndex:"pemark",title:"水印",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peRemark",dataIndex:"peRemark",title:"工程备注",align:"center",checked:!0,ellipsis:!0,width:130},{key:"targetName",dataIndex:"targetName",title:"终端客户",align:"center",checked:!0,ellipsis:!0,width:130},{key:"custNo",dataIndex:"custNo",title:"客户编码",align:"center",checked:!0,ellipsis:!0,width:130},{key:"custProdNo",dataIndex:"custProdNo",title:"客户型号",align:"center",checked:!0,ellipsis:!0,width:130},{key:"custProdNoAdd",dataIndex:"custProdNoAdd",title:"物料号",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peActive",dataIndex:"peActive",title:"PE状态",align:"center",checked:!0,ellipsis:!0,width:130,customRender:function(e){return e.record.peactive?"有效":"过期"}},{key:"activeRemark",dataIndex:"activeRemark",title:"操作备注",align:"center",checked:!0,ellipsis:!0,width:130},{key:"mktActive",dataIndex:"mktActive",title:"MIKT投产",align:"center",checked:!0,ellipsis:!0,width:130,customRender:function(e){return e.record.mktactive?"是":"否"}},{key:"weight",dataIndex:"weight",title:"单重",align:"center",checked:!0,ellipsis:!0,width:130},{key:"remark",dataIndex:"remark",title:"备注",align:"center",checked:!0,ellipsis:!0,width:130},{key:"createBy",dataIndex:"createBy",title:"创建人",align:"center",checked:!0,ellipsis:!0,width:130},{key:"createDate",dataIndex:"createDate",title:"创建时间",align:"center",checked:!0,ellipsis:!0,width:160,customRender:function(e){var t=e.record;return I(t.createDate).format("YYYY-MM-DD HH:mm:ss")}},{key:"updateDate",dataIndex:"updateDate",title:"最后修改时间",align:"center",checked:!0,ellipsis:!0,width:160,customRender:function(e){var t=e.record;return I(t.updateDate).format("YYYY-MM-DD HH:mm:ss")}}],z=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"state",dataIndex:"state",title:"状态",align:"center",checked:!0,ellipsis:!0,width:130,customRender:function(e){var t=e.record,a=Number(t.state);return 140917104644e4===a||160913164544e4===a?a=2:140917104654e4===a||140919111754e4===a?a=3:161013095348e4!==a&&140919111738e4!==a||(a=4),8===a?m("div",{class:"h-full w-full",title:"已上网",style:{color:w(t.state)}},[_("已上网")]):m("div",{class:"h-full w-full",title:p[a]||"",style:{color:w(t.state)}},[p[a]||""])}},{key:"techName",dataIndex:"techName",title:"工艺名称",align:"center",checked:!0,ellipsis:!0,width:130},{key:"repeatCount",dataIndex:"repeatCount",title:"工步",align:"center",checked:!0,ellipsis:!0,width:130},{key:"wipPnlQty",dataIndex:"wipPnlQty",title:"PNL结存",align:"center",checked:!0,ellipsis:!0,width:130},{key:"wipSetQty",dataIndex:"wipSetQty",title:"SET结存",align:"center",checked:!0,ellipsis:!0,width:130},{key:"wipScrapSet",dataIndex:"wipScrapSet",title:"含废SET",align:"center",checked:!0,ellipsis:!0,width:130},{key:"wipscrapPcs",dataIndex:"wipscrapPcs",title:"含废PCS",align:"center",checked:!0,ellipsis:!0,width:130},{key:"waitQty",dataIndex:"waitQty",title:"待产数量",align:"center",checked:!0,ellipsis:!0,width:130},{key:"workQty",dataIndex:"workQty",title:"在产数量",align:"center",checked:!0,ellipsis:!0,width:130},{key:"finishQty",dataIndex:"finishQty",title:"完成数量",align:"center",checked:!0,ellipsis:!0,width:130},{key:"applyScrapQty",dataIndex:"applyScrapQty",title:"报废申请",align:"center",checked:!0,ellipsis:!0,width:130},{key:"applyReworkQty",dataIndex:"applyReworkQty",title:"重工申请",align:"center",checked:!0,ellipsis:!0,width:130},{key:"assitQty",dataIndex:"assitQty",title:"外发数量",align:"center",checked:!0,ellipsis:!0,width:130},{key:"delayDate",dataIndex:"delayDate",title:"结存小时",align:"center",checked:!0,ellipsis:!0,width:130}],q=M({searchText:"",searchedColumn:""}),G=u(null),V=u("工艺备注"),Z=u(null),ee=u({prodId:null}),ae=u("1"),Ce=u({}),Me=u(null),Se=u(null),Te=u(null),je=u(null),Fe=u(null);function Ye(){y.value.getData(1)}function Ee(){i(),Ye()}function Ae(e){return e.peactive&&0==e.issActive&&0==e.lotActive?{class:"red"}:{}}function Be(e){null!=e&&e.length&&(y.value.setCurrentRowId(e[0]),Qe(e[0]))}function Qe(e){Ce.value=e,ee.value.prodId=e.prodId,V.value="工艺备注",Z.value.getData(1),Se.value.getData({prodNo:Ce.value.moduleNo})}function He(e){var t;V.value=null==e||null===(t=e.remark)||void 0===t?void 0:t.replace(/\n/g,"<br>"),Me.value.getData({prodId:ee.value.prodId,techId:e.techId}),Fe.value.getData({techId:e.techId}),je.value.getData({techId:e.techId}),Te.value.getData({prodNo:Ce.value.moduleNo,techId:e.techId})}function Ue(e){null!=e&&e.length&&(Z.value.setCurrentRowId(e[0]),He(e[0]))}var Ke="localhost"===window.location.hostname,ze=u(!1),Le=u(null),Oe=u(null);return function(e,t){var n=L,i=E,u=A,p=B,w=N,I=s,C=J,M=Q,O=H,qe=U,Je=K,Ge=r;return f(),h("div",le,[m(n,{ref_key:"commonSearchRef",ref:a,searchParams:R(l),"onUpdate:searchParams":t[0]||(t[0]=function(e){return S(l)?l.value=e:null}),"form-list":k,onSearch:Ye,onReset:Ee},null,8,["searchParams"]),m(Je,{gutter:8,class:"h-full w-full",style:Y({height:"calc(100% - ".concat(R(c),"px)")})},{default:g((function(){return[m(M,{span:6,class:"h-full min-h-500px flex-col-stretch gap-8px overflow-hidden lt-sm:overflow-auto"},{default:g((function(){return[m(I,{ref_key:"tableRef",ref:y,searchParams:R(l),"onUpdate:searchParams":t[1]||(t[1]=function(e){return S(l)?l.value=e:null}),column:P,"show-row-selection":!1,"row-key":"prodId",scroll:{y:"auto"},"is-init-get-data":"",url:"/erpsyncmes/Mi/findModuleNo","auto-generate-uuid":!1,class:"h-full","table-custom-cell":Ae,"show-quick-jumper":!1,"default-expand-all-rows":!0,onTableRowClick:Qe,onTableDataLoadSucess:Be},{title:g((function(){return t[5]||(t[5]=[v("span",{class:"color-#646cff"},"生产型号",-1)])})),filterDropdown:g((function(e){var a=e.setSelectedKeys,n=e.selectedKeys,l=e.confirm,r=e.clearFilters,c=e.column;return[v("div",ie,[m(u,{ref_key:"selectRef",ref:G,class:"mb-8px block w-188px",placeholder:"请选择状态","show-search":"",value:n[0],"allow-clear":"",onChange:function(e){a([e])}},{default:g((function(){return[(f(!0),h(D,null,T(x(),(function(e){return f(),b(i,{key:e.value,value:e.value},{default:g((function(){return[_(j(e.label),1)]})),_:2},1032,["value"])})),128))]})),_:2},1032,["value","onChange"]),m(p,{type:"primary",size:"small",class:"mr-8px w-90px",onClick:function(e){return function(e,t,a){t(),q.searchText=e[0],q.searchedColumn=a}(n,l,c.dataIndex)}},{icon:g((function(){return[m(R(F))]})),default:g((function(){return[t[6]||(t[6]=_(" 搜索 "))]})),_:2},1032,["onClick"]),m(p,{size:"small",class:"w-90px",onClick:function(e){return function(e){e(),q.searchText=""}(r)}},{default:g((function(){return t[7]||(t[7]=[_("重置")])})),_:2},1032,["onClick"])])]})),"contextmenuPopup-orter":g((function(e){var a=e.args;return[v("li",{class:"popup-item",onClick:function(e){return t=a,d({prodId:Ce.value.prodId},t.record.moduleNo),void t.hidePopup();var t}},[m(w,{"local-icon":"download",class:"text-16px"}),t[8]||(t[8]=_(" 下载 "))],8,re),v("li",{class:"popup-item",onClick:function(e){return t=a,ze.value=!0,Oe.value="".concat(Ce.value.moduleNo,"MI文件.pdf 预览"),Le.value="".concat(Ke?"http://192.168.166.169:9999/prod-api/":"/prod-api/","erpsyncmes/mi/print/getMiPdf?prodId=").concat(Ce.value.prodId),void t.hidePopup();var t}},[m(w,{"local-icon":"preview",class:"text-16px"}),t[9]||(t[9]=_(" 预览 "))],8,ce)]})),_:1},8,["searchParams"]),m(C,{class:"min-h-60px","body-style":{padding:"15px",paddingBottom:"25px"}},{default:g((function(){return[v("div",oe,[t[11]||(t[11]=v("div",{class:"icon"},[v("div",{class:"icon-warp"},[v("span",{class:"iconfont icon-kehuxinghao"})])],-1)),v("div",de,[t[10]||(t[10]=v("div",{class:"label"},"终端客户型号",-1)),v("div",se,j(Ce.value.targetProdNo),1)])]),v("div",ue,[t[13]||(t[13]=v("div",{class:"icon"},[v("div",{class:"icon-warp"},[v("span",{class:"iconfont icon-kehubianma"})])],-1)),v("div",pe,[t[12]||(t[12]=v("div",{class:"label"},"客户型号",-1)),v("div",fe,j(Ce.value.custProdNo),1)])]),v("div",he,[t[15]||(t[15]=v("div",{class:"icon"},[v("div",{class:"icon-warp"},[v("span",{class:"iconfont icon-pnlshuliang"})])],-1)),v("div",ve,[t[14]||(t[14]=v("div",{class:"label"},"产品类型",-1)),v("div",me,j(Ce.value.prodType),1)])]),v("div",ge,[t[17]||(t[17]=v("div",{class:"icon"},[v("div",{class:"icon-warp"},[v("span",{class:"iconfont icon-kaifadengji"})])],-1)),v("div",ye,[t[16]||(t[16]=v("div",{class:"label"},"开发等级",-1)),v("div",ke,j(Ce.value.peDifficulty),1)])]),v("div",we,[t[19]||(t[19]=v("div",{class:"icon"},[v("div",{class:"icon-warp"},[v("span",{class:"iconfont icon-shengchanxinghao"})])],-1)),v("div",xe,[t[18]||(t[18]=v("div",{class:"label"},"板上型号",-1)),v("div",be,j(Ce.value.peTab),1)])]),v("div",Ie,[t[21]||(t[21]=v("div",{class:"icon"},[v("div",{class:"icon-warp"},[v("span",{class:"iconfont icon-kehumingcheng"})])],-1)),v("div",_e,[t[20]||(t[20]=v("div",{class:"label"},"板子特性",-1)),v("div",De,j(Ce.value.features),1)])])]})),_:1})]})),_:1}),m(M,{span:9,class:"h-full"},{default:g((function(){return[m(I,{ref_key:"centerTableRef",ref:Z,searchParams:ee.value,"onUpdate:searchParams":t[2]||(t[2]=function(e){return ee.value=e}),column:z,"show-row-selection":!1,"row-key":"id",scroll:{y:"auto"},"is-init-get-data":!1,url:"/erpsyncmes/Mi/findPubtechnology","auto-generate-uuid":!0,"is-pagination":!1,class:"h-full","table-custom-cell":Ae,onTableRowClick:He,onTableDataLoadSucess:Ue},{title:g((function(){return t[22]||(t[22]=[v("span",{class:"color-#646cff"},"制作流程",-1)])})),footer:g((function(){return[v("div",{class:"footer-content h-170px overflow-auto p-b-30px text-12px",innerHTML:V.value},null,8,Ne)]})),"contextmenuPopup-orter":g((function(e){var a=e.args;return[v("li",{class:"popup-item",onClick:function(e){return t=a,o({prodId:Ce.value.prodId,techId:t.record.techId},"".concat(Ce.value.moduleNo,"-").concat(t.record.techName)),void t.hidePopup();var t}},[m(w,{"local-icon":"download",class:"text-16px"}),t[23]||(t[23]=_(" 下载 "))],8,Pe),v("li",{class:"popup-item",onClick:function(e){return t=a,ze.value=!0,Oe.value="".concat(Ce.value.moduleNo,"-").concat(t.record.techName,"工程指示数据.pdf 预览"),Le.value="".concat(Ke?"http://192.168.166.169:9999/prod-api/":"/prod-api/","erpsyncmes/mi/print/getPdf?prodId=").concat(Ce.value.prodId,"&techId=").concat(t.record.techId),void t.hidePopup();var t}},[m(w,{"local-icon":"preview",class:"text-16px"}),t[24]||(t[24]=_(" 预览 "))],8,Re)]})),_:1},8,["searchParams"])]})),_:1}),m(M,{span:9,class:"right-table h-full"},{default:g((function(){return[m(qe,{activeKey:ae.value,"onUpdate:activeKey":t[3]||(t[3]=function(e){return ae.value=e}),type:"card",class:"my-tabs h-full"},{default:g((function(){return[m(O,{key:"1","force-render":""},{tab:g((function(){return t[25]||(t[25]=[v("span",null,[v("span",{class:"iconfont icon-gongchengzhishi"}),_(" 工程指示 ")],-1)])})),default:g((function(){return[m($,{ref_key:"engineeringInstructionTableRef",ref:Me},null,512)]})),_:1}),m(O,{key:"2","force-render":""},{tab:g((function(){return t[26]||(t[26]=[v("span",null,[v("span",{class:"iconfont icon-shengchangongju"}),_(" 生产工具 ")],-1)])})),default:g((function(){return[m(W,{ref_key:"productionToolsRef",ref:Fe},null,512)]})),_:1}),m(O,{key:"3","force-render":""},{tab:g((function(){return t[27]||(t[27]=[v("span",null,[v("span",{class:"iconfont icon-gongyiwenjian"}),_(" 工艺工程文件 ")],-1)])})),default:g((function(){return[m(X,{ref_key:"processEngineeringDocumentRef",ref:je},null,512)]})),_:1}),m(O,{key:"4","force-render":""},{tab:g((function(){return t[28]||(t[28]=[v("span",null,[v("span",{class:"iconfont icon-gongchengwenjian"}),_(" 工程文件 ")],-1)])})),default:g((function(){return[m(te,{ref_key:"engineeringDocumentRef",ref:Se},null,512)]})),_:1}),m(O,{key:"5","force-render":""},{tab:g((function(){return t[29]||(t[29]=[v("span",null,[v("span",{class:"iconfont icon-gongchengtuzhi"}),_(" 工程图纸 ")],-1)])})),default:g((function(){return[m(ne,{ref_key:"engineeringDrawingRef",ref:Te},null,512)]})),_:1})]})),_:1},8,["activeKey"])]})),_:1})]})),_:1},8,["style"]),m(Ge,{visible:ze.value,"onUpdate:visible":t[4]||(t[4]=function(e){return ze.value=e}),url:Le.value,type:"pdf","pdf-use-iframe":"",title:Oe.value},null,8,["visible","url","title"])])}}}),[["__scopeId","data-v-67b0d031"]]))}}}))}();
