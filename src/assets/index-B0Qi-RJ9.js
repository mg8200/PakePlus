import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as l,K as a,L as t,o as s,c as i,w as r,g as n,f as o,s as c,t as d,I as u,v as p,N as m,M as h,O as f,B as v,P as x,Q as w,F as g,r as k,p as y,S as b,e as _}from"./index-B3PZsRwT.js";import{a as I}from"./index-DqnulfE2.js";import{C as S}from"./index-BThgVJ70.js";const z={class:"w-full flex"},j={class:"flex"},T={class:"w-full flex-y-center justify-end gap-12px"},C={class:"ml-3px"},M={class:"ml-3px"},U=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:a(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,k=t(e,"model");function y(){a("search",k.value)}function b(){k.value.lotnumber=null,k.value.model=[],a("reset",k.value)}return(e,l)=>{const a=u,t=p,_=m,I=h,U=f,Y=v,A=x,E=w,O=g,q=S;return s(),i(q,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:r((()=>[n(O,{model:k.value,"label-col":{span:5,md:7},class:"search-form"},{default:r((()=>[o("div",z,[n(E,{gutter:[15,8],wrap:"",class:"w-full"},{default:r((()=>[n(_,{span:24,md:12,lg:6,xl:8,xxl:6},{default:r((()=>[n(t,{label:"批卡号",name:"lotnumber",class:"m-0","label-col":{}},{default:r((()=>[n(a,{value:k.value.lotnumber,"onUpdate:value":l[0]||(l[0]=e=>k.value.lotnumber=e),placeholder:"请输入批卡号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:c(y,["enter"])},null,8,["value"])])),_:1})])),_:1}),n(_,{span:24,md:12,lg:6,xl:8,xxl:6},{default:r((()=>[n(t,{label:"日期",name:"model",class:"m-0","label-col":{}},{default:r((()=>[n(I,{value:k.value.time,"onUpdate:value":l[1]||(l[1]=e=>k.value.time=e),"show-time":"",class:"min-form-control","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["value"])])),_:1})])),_:1}),o("div",j,[n(t,{class:"m-0"},{default:r((()=>[o("div",T,[n(Y,{type:"primary",ghost:"",class:"mini-btn",onClick:y},{icon:r((()=>[n(U,{class:"align-sub text-icon"})])),default:r((()=>[o("span",C,d(e.$t("common.search")),1)])),_:1}),n(Y,{class:"mini-btn",onClick:b},{icon:r((()=>[n(A,{class:"align-sub text-icon"})])),default:r((()=>[o("span",M,d(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),Y={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},A=Object.assign({name:"compression-formula_formula-distribution-query"},{__name:"index",setup(l){const a=k({lotnumber:"",time:""}),t=y({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{t.current=e,t.pageSize=l,u()}}),i=k([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0},{key:"moduleno",dataIndex:"moduleno",title:"生产型号",width:160,align:"center",checked:!0,ellipsis:!0},{key:"lotnumber",dataIndex:"lotnumber",title:"批卡号",width:160,align:"center",checked:!0,ellipsis:!0},{key:"sendresult",dataIndex:"sendresult",title:"下发状态",width:100,align:"center",checked:!0,ellipsis:!0},{key:"errorreason",dataIndex:"errorreason",title:"错误原因",width:100,align:"center",checked:!0,ellipsis:!0},{key:"tgzpath",dataIndex:"tgzpath",title:"资料地址",width:100,align:"center",checked:!0,ellipsis:!0},{key:"uppercopper",dataIndex:"uppercopper",title:"上铜厚",width:100,align:"center",checked:!0,ellipsis:!0},{key:"lowercopper",dataIndex:"lowercopper",title:"下铜厚",width:100,align:"center",checked:!0,ellipsis:!0},{key:"uppercopperupperlimit",dataIndex:"uppercopperupperlimit",title:"上铜上限",width:100,align:"center",checked:!0,ellipsis:!0},{key:"uppercopperlowerlimit",dataIndex:"uppercopperlowerlimit",title:"上铜下限",width:100,align:"center",checked:!0,ellipsis:!0},{key:"lowercopperupperlimit",dataIndex:"lowercopperupperlimit",title:"下铜上限",width:100,align:"center",checked:!0,ellipsis:!0},{key:"lowercopperlowerlimit",dataIndex:"lowercopperlowerlimit",title:"下铜上限",width:100,align:"center",checked:!0,ellipsis:!0},{key:"createtime",dataIndex:"createtime",title:"创建时间",width:100,align:"center",checked:!0,ellipsis:!0},{key:"createby",dataIndex:"createby",title:"创建人",width:100,align:"center",checked:!0,ellipsis:!0}]),o=k([]),c=k(!1),d=k([]);function u(){var e;c.value=!0,(null==(e=a.value.time)?void 0:e.length)>0?(a.value.startTime=a.value.time[0],a.value.endTime=a.value.time[1]):delete a.value.time,delete a.value.time,I("/mes/TTST/select",{pageSize:t.pageSize,pageNum:t.current,...a.value}).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1})),o.value=e.list,t.total=e.total)})).finally((()=>{c.value=!1}))}const p=k(null);function m(e){return{style:{background:e.id===p.value?"#BAEAFA":""},onClick:()=>{p.value=e.id},class:e.id===p.value?"jl-table-row-selected":""}}function h(){t.current=1,u()}return u(),(l,u)=>{const p=e,f=b("STable"),v=S;return s(),_("div",Y,[n(U,{model:a.value,"onUpdate:model":u[0]||(u[0]=e=>a.value=e),onReset:u[1]||(u[1]=e=>h()),onSearch:u[2]||(u[2]=e=>h())},null,8,["model"]),n(v,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:r((()=>u[4]||(u[4]=[]))),extra:r((()=>[n(p,{columns:i.value,"onUpdate:columns":u[3]||(u[3]=e=>i.value=e)},null,8,["columns"])])),default:r((()=>[n(f,{columns:i.value,"data-source":o.value,size:"small","custom-row":m,bordered:"",loading:c.value,"default-expanded-row-keys":d.value,"row-key":"id","default-expand-all-rows":!0,scroll:{x:"auto",y:"auto"},pagination:t,class:"h-full","row-height":23},null,8,["columns","data-source","loading","default-expanded-row-keys","pagination"])])),_:1})])}}});export{A as default};
