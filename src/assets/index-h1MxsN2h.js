import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as l,K as a,L as t,o as s,c as o,w as n,g as u,f as r,s as d,t as i,I as c,v,N as m,O as p,B as f,P as h,Q as _,F as g,r as w,p as x,db as y,S as b,e as k,h as I,aj as U,al as C,ad as z,ae as T}from"./index-B3PZsRwT.js";import{x as S,k as j,y as $,z as q,A}from"./index-DqnulfE2.js";import{_ as B}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as K}from"./index-BThgVJ70.js";const O={class:"w-full flex"},R={class:"flex"},E={class:"w-full flex-y-center justify-end gap-12px"},J={class:"ml-3px"},L={class:"ml-3px"},D=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:a(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,w=t(e,"model");function x(){a("search",w.value)}function y(){w.value.locationId=null,w.value.floor=null,w.value.siteId="HBJL",a("reset",w.value)}return(e,l)=>{const a=c,t=v,b=m,k=p,I=f,U=h,C=_,z=g,T=K;return s(),o(T,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:n((()=>[u(z,{model:w.value,"label-col":{span:5,md:7},class:"search-form"},{default:n((()=>[r("div",O,[u(C,{gutter:[15,8],wrap:"",class:"w-full"},{default:n((()=>[u(b,{span:24,md:12,lg:6,xl:8,xxl:4},{default:n((()=>[u(t,{label:"工作位置名称",name:"locationId",class:"m-0","label-col":{}},{default:n((()=>[u(a,{value:w.value.locationId,"onUpdate:value":l[0]||(l[0]=e=>w.value.locationId=e),placeholder:"请输入工作代码位置",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(x,["enter"])},null,8,["value"])])),_:1})])),_:1}),u(b,{span:24,md:12,lg:6,xl:8,xxl:4},{default:n((()=>[u(t,{label:"楼层",name:"floor",class:"m-0","label-col":{}},{default:n((()=>[u(a,{value:w.value.floor,"onUpdate:value":l[1]||(l[1]=e=>w.value.floor=e),placeholder:"请输入楼层",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(x,["enter"])},null,8,["value"])])),_:1})])),_:1}),r("div",R,[u(t,{class:"m-0"},{default:n((()=>[r("div",E,[u(I,{type:"primary",ghost:"",class:"mini-btn",onClick:x},{icon:n((()=>[u(k,{class:"align-sub text-icon"})])),default:n((()=>[r("span",J,i(e.$t("common.search")),1)])),_:1}),u(I,{class:"mini-btn",onClick:y},{icon:n((()=>[u(U,{class:"align-sub text-icon"})])),default:n((()=>[r("span",L,i(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),F={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},H={class:"event-form"},N={class:"modal-footer"},Q=Object.assign({name:"erpdatasync_factory-area_factory-location"},{__name:"index",setup(l){const a=w({locationId:""}),t=x({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{t.current=e,t.pageSize=l,M()}}),d=w([{key:"index",dataIndex:"index",title:"序号",width:100,align:"center",checked:!0},{key:"locationId",dataIndex:"locationId",title:"工作位置名称",width:260,align:"center",checked:!0,ellipsis:!0},{key:"floor",dataIndex:"floor",title:"楼层",width:100,align:"center",checked:!0,ellipsis:!0},{key:"areaId",dataIndex:"areaId",title:"作业区域",width:200,align:"center",checked:!0,ellipsis:!0},{key:"remark",dataIndex:"remark",title:"备注",width:200,align:"center",checked:!0,ellipsis:!0},{key:"createTime",dataIndex:"createTime",title:"创建时间",width:180,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>null==e.createDate?null:y(e.createDate)},{key:"createUser",dataIndex:"createUser",title:"创建人",width:200,align:"center",checked:!0,ellipsis:!0},{key:"lmTime",dataIndex:"lmTime",title:"修改时间",width:200,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>null==e.lmTime?null:y(e.lmTime)},{key:"lmUser",dataIndex:"lmUser",title:"修改人",width:200,align:"center",checked:!0,ellipsis:!0}]),p=w({}),h=w(!1),O=w([]),R=w(!1),E=w([]),J=w([]),L=w([{label:"WorkingCenter"},{label:"Storage"}]),Q=w([{label:"HBJL"}]);function M(){R.value=!0,S({pageSize:t.pageSize,pageNum:t.current,...a.value}).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1})),O.value=e.list,t.total=e.total)})).finally((()=>{R.value=!1}))}const P=w([]),W=w("");function G(e){P.value=e}function V(){p.value={},h.value=!0,W.value="工厂位置新增"}function X(){var e;if(1!==P.value.length)return null==(e=window.$message)?void 0:e.error("请选择一条数据");const l=O.value.filter((e=>P.value.includes(e.locationUuid)));W.value="工厂位置修改",p.value=l[0],h.value=!0}function Y(){var e;if(0==P.value.length)return null==(e=window.$message)?void 0:e.error("请选择数据");window.$modal.confirm({title:"提醒",content:"确认删除所选数据吗？",onOk:()=>{const e=P.value;A(e).then((({error:e,data:l})=>{var a;e||(null==(a=window.$message)||a.success("删除成功"),M())}))},onCancel:()=>{}})}function Z(){t.current=1,M()}M(),j().then((({error:e,data:l})=>{e||(J.value=l)}));const ee=w(null),le=e=>({style:{background:e.locationUuid===ee.value?"#BAEAFA":""},class:e.locationUuid===ee.value?"jl-table-row-selected":"",onClick:()=>{ee.value=e.locationUuid}});return(l,w)=>{const x=f,y=e,S=b("STable"),j=c,A=v,ee=m,ae=z,te=T,se=_,oe=g,ne=K;return s(),k("div",F,[u(D,{model:a.value,"onUpdate:model":w[0]||(w[0]=e=>a.value=e),onReset:w[1]||(w[1]=e=>Z()),onSearch:w[2]||(w[2]=e=>Z())},null,8,["model"]),u(ne,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:n((()=>[u(x,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:V},{default:n((()=>w[13]||(w[13]=[r("span",{class:"ml-3px"},"新增",-1)]))),_:1}),u(x,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:X},{default:n((()=>w[14]||(w[14]=[r("span",{class:"ml-3px"},"修改",-1)]))),_:1}),u(x,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:Y},{default:n((()=>w[15]||(w[15]=[r("span",{class:"ml-3px"},"删除",-1)]))),_:1})])),extra:n((()=>[u(y,{columns:d.value,"onUpdate:columns":w[3]||(w[3]=e=>d.value=e)},null,8,["columns"])])),default:n((()=>[u(S,{columns:d.value,"data-source":O.value,size:"small",bordered:"",loading:R.value,"row-selection":{selectedRowKeys:P.value,onChange:G},"default-expanded-row-keys":E.value,"row-key":"locationUuid","default-expand-all-rows":!0,scroll:{x:"auto",y:"auto"},pagination:t,class:"h-full","custom-row":le,"row-height":23},null,8,["columns","data-source","loading","row-selection","default-expanded-row-keys","pagination"]),u(B,{visible:h.value,"onUpdate:visible":w[12]||(w[12]=e=>h.value=e),"destroy-on-close":!0,centered:!0,title:W.value,width:"950px",height:"350px"},{footer:n((()=>[r("div",N,[u(x,{onClick:w[10]||(w[10]=e=>h.value=!1)},{default:n((()=>w[16]||(w[16]=[I("关闭")]))),_:1}),u(x,{type:"primary",onClick:w[11]||(w[11]=e=>{"工厂位置新增"==W.value?$(p.value).then((({data:e,error:l})=>{var a;l||(null==(a=window.$message)||a.success("新增成功"),h.value=!1,M())})):q(p.value).then((({data:e,error:l})=>{var a;l||(null==(a=window.$message)||a.success("修改成功"),h.value=!1,M())}))})},{default:n((()=>w[17]||(w[17]=[I("保存")]))),_:1})])])),default:n((()=>[r("div",H,[u(oe,{model:p.value,name:"basic","label-col":{span:6},autocomplete:"off"},{default:n((()=>[u(se,null,{default:n((()=>[u(ee,{span:12},{default:n((()=>[u(A,{label:"工作代码位置",name:"locationId",rules:[{required:!0,message:"请输入工作代码位置!"}]},{default:n((()=>[u(j,{value:p.value.locationId,"onUpdate:value":w[4]||(w[4]=e=>p.value.locationId=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),u(ee,{span:12},{default:n((()=>[u(A,{label:"作业区域代码",name:"areaId",rules:[{required:!0,message:"请选择作业区域代码!"}]},{default:n((()=>[u(te,{value:p.value.areaId,"onUpdate:value":w[5]||(w[5]=e=>p.value.areaId=e),"allow-clear":""},{default:n((()=>[(s(!0),k(U,null,C(J.value,(e=>(s(),o(ae,{key:e,value:e},{default:n((()=>[I(i(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),u(ee,{span:12},{default:n((()=>[u(A,{label:"楼层",name:"floor"},{default:n((()=>[u(j,{value:p.value.floor,"onUpdate:value":w[6]||(w[6]=e=>p.value.floor=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),u(ee,{span:12},{default:n((()=>[u(A,{label:"工作位置类型",name:"locationType",rules:[{required:!0,message:"请选择工作位置类型!"}]},{default:n((()=>[u(te,{value:p.value.locationType,"onUpdate:value":w[7]||(w[7]=e=>p.value.locationType=e),"allow-clear":""},{default:n((()=>[(s(!0),k(U,null,C(L.value,(e=>(s(),o(ae,{key:e.label,value:e.label},{default:n((()=>[I(i(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),u(ee,{span:12},{default:n((()=>[u(A,{label:"工厂代码",name:"siteId",rules:[{required:!0,message:"请选择工厂代码!"}]},{default:n((()=>[u(te,{value:p.value.siteId,"onUpdate:value":w[8]||(w[8]=e=>p.value.siteId=e),"allow-clear":""},{default:n((()=>[(s(!0),k(U,null,C(Q.value,(e=>(s(),o(ae,{key:e.label,value:e.label},{default:n((()=>[I(i(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),u(ee,{span:12},{default:n((()=>[u(A,{label:"描述",name:"description"},{default:n((()=>[u(j,{value:p.value.description,"onUpdate:value":w[9]||(w[9]=e=>p.value.description=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible","title"])])),_:1})])}}});export{Q as default};
