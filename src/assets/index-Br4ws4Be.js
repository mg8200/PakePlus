import{_ as e}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{U as a,r as l,a9 as t,b as p,p as n,o as s,e as r,g as i,i as o,V as c,f as d,aj as y,al as u,c as h,w as k,a1 as m,t as b,ac as g,h as f,_ as x,W as v,B as w,J as _}from"./index-B3PZsRwT.js";import{_ as I}from"./table-DoFSI9NT.js";import{_ as T}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{u as N}from"./resetTableRef-DZjcvemm.js";import{u as C}from"./searchData-DpjdfxBw.js";import{a as S,v as B}from"./index-DqnulfE2.js";import{C as P}from"./index-BThgVJ70.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";const j={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},A={class:"totClass"},U={class:"card-header"},M={class:"layer-number"},D={class:"card-content"},O={class:"area-info"},z={key:0,class:"event-form"},W={key:1,class:"event-form"},q={class:"modal-footer"},L=_(Object.assign({name:"work-order-management_process-wip"},{__name:"index",setup(_){a((e=>({fbfacfea:$.value})));const[L,R]=N({pageNum:1,pageSize:200,techId:null,moduleNo:null,lotNo:null}),E=l(null);l(null);const Q=C(L),F=l([]),J=l([]),V=[{type:"input",key:"lotNo",label:"LOT号",span:24,md:12,lg:10,xl:5,xxl:5,placeholder:"请输入LOT号",showTime:!0},{type:"input",key:"moduleNo",label:"生产型号",span:24,md:12,lg:10,xl:5,xxl:5,placeholder:"请输入生产型号",showTime:!0},{type:"select",key:"dept",selectOptions:F,label:"部门",span:24,md:12,lg:10,xl:8,xxl:6,placeholder:"请选择部门",showTime:!0,change(){S("/erpsyncmes/wip/selectTechNameByDept?dept=".concat(L.value.dept),"").then((({data:e,error:a})=>{a||(J.value=e.map((e=>({label:e,value:e}))))}))}},{type:"select",key:"techId",selectOptions:J,label:"工艺",span:24,md:12,lg:10,xl:8,xxl:6,placeholder:"请选择工艺",showTime:!0}],{height:H}=t(E),$=p((()=>"".concat(H.value+20,"px"))),G=n({current:1,pageSize:25,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,a)=>{G.current=e,G.pageSize=a,ne()}}),K=l([]),X=l([]),Y=l([{key:"index",dataIndex:"index",title:"序号",width:100,align:"center",checked:!0},{key:"lotNo",dataIndex:"lotNo",title:"LOT号",sorter:!0,width:160,align:"center",checked:!0,ellipsis:!0},{key:"fullProdNo",dataIndex:"fullProdNo",title:"生产型号",sorter:!0,width:160,align:"center",checked:!0,ellipsis:!0},{key:"techName",dataIndex:"techName",title:"结存工艺",sorter:!0,align:"center",width:160,checked:!0,ellipsis:!0},{key:"wipUnit",dataIndex:"wipUnit",title:"结存单位",width:120,sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"wipQty",dataIndex:"wipQty",title:"结存数量",sorter:!0,width:120,align:"center",checked:!0,ellipsis:!0},{key:"UnitArea",dataIndex:"UnitArea",title:"单位有效面积",sorter:!0,align:"center",checked:!0,ellipsis:!0,width:140},{key:"wipScrapPcs",dataIndex:"wipScrapPcs",title:"废pcs数量",sorter:!0,align:"center",width:120,checked:!0,ellipsis:!0},{key:"wipScrapSet",dataIndex:"wipScrapSet",title:"废set数量",sorter:!0,width:120,align:"center",checked:!0,ellipsis:!0},{key:"wipState",dataIndex:"wipState",title:"wip状态",sorter:!0,align:"center",width:120,checked:!0,ellipsis:!0},{key:"dateCode",dataIndex:"dateCode",title:"厂内周期",sorter:!0,width:120,align:"center",checked:!0,ellipsis:!0},{key:"custDateCode",dataIndex:"custDateCode",title:"客户周期",sorter:!0,align:"center",checked:!0,width:120,ellipsis:!0},{key:"createBy",dataIndex:"createBy",title:"入账员",sorter:!0,align:"center",checked:!0,width:120,ellipsis:!0},{key:"createDate",dataIndex:"createDate",title:"入账时间",sorter:!0,align:"center",width:160,checked:!0,ellipsis:!0},{key:"lmTime",dataIndex:"lmTime",title:"同步时间",sorter:!0,align:"center",checked:!0,ellipsis:!0,width:160},{key:"updateBy",dataIndex:"updateBy",title:"修改人",sorter:!0,align:"center",checked:!0,width:120,ellipsis:!0}]);l([{key:"index",dataIndex:"index",title:"序号",width:100,align:"center",checked:!0},{key:"layer",dataIndex:"layer",title:"层数",sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"area",dataIndex:"area",title:"结存面积(sq.ft)",sorter:!0,align:"center",checked:!0,ellipsis:!0}]);const Z=[{type:"input",key:"state",label:"状态",placeholder:"请选择状态",span:8},{type:"input",key:"mktAllowed",label:"mkt可投产",placeholder:"请选择是否mkt可投产",span:8},{type:"input",key:"allowed",label:"可投产",placeholder:"请选择是否可投产",span:8},{type:"input",key:"takeMaterials",label:"可领料",placeholder:"请选择是否可领料",span:8},{type:"input",key:"consignment",label:"寄售",placeholder:"请输入寄售",span:8},{type:"input",key:"quotationOrderNo",label:"报价单号",placeholder:"请输入报价单号",span:8},{type:"input",key:"customerCode",label:"客户编码",placeholder:"请输入客户编码",span:8},{type:"input",key:"customerName",label:"客户名称",placeholder:"请输入客户名称",span:8},{type:"input",key:"terminalCustomer",label:"终端客户",placeholder:"请输入终端客户",span:8},{type:"input",key:"company",label:"公司主体",placeholder:"请输入公司主体",span:8},{type:"input",key:"factory",label:"生产厂区",placeholder:"请输入生产厂区",span:8},{type:"input",key:"layer",label:"层数",placeholder:"请输入层数",span:8},{type:"input",key:"prodNo",label:"生产型号",placeholder:"请输入生产型号",span:8},{type:"input",key:"customerModel",label:"客户型号",placeholder:"请输入客户型号",span:8},{type:"input",key:"materialNo",label:"物料号",placeholder:"请输入物料号",span:8},{type:"input",key:"terminalModel",label:"终端型号",placeholder:"请输入终端型号",span:8},{type:"input",key:"terminalVersion",label:"终端版本",placeholder:"请输入终端版本",span:8},{type:"input",key:"sowFile",label:"sow文件",placeholder:"请输入sow文件",span:8},{type:"input",key:"otherAdditions",label:"其他附加",placeholder:"请输入其他附加",span:8},{type:"input",key:"ptlNum",label:"ptl数量",placeholder:"请输入ptl数量",span:8},{type:"input",key:"ptlRemark",label:"ptl备注",placeholder:"请输入ptl备注",span:8},{type:"input",key:"ptlSquareMetre",label:"ptl平米",placeholder:"请输入ptl平米",span:8},{type:"input",key:"modelType",label:"型号类型",placeholder:"请输入型号类型",span:8},{type:"input",key:"productType",label:"产品类型",placeholder:"请输入产品类型",span:8},{type:"input",key:"surfaceTreatment",label:"表面处理",placeholder:"请输入表面处理",span:8},{type:"input",key:"surfaceTreatment1",label:"表面处理1",placeholder:"请输入表面处理1",span:8},{type:"input",key:"surfaceTreatment2",label:"表面处理2",placeholder:"请输入表面处理2",span:8},{type:"input",key:"specialProcess",label:"特殊工艺",placeholder:"请输入特殊工艺",span:8},{type:"input",key:"unit",label:"单位",placeholder:"请输入单位",span:8},{type:"input",key:"customerShipUnit",label:"客户出货单位",placeholder:"请输入客户出货单位",span:8},{type:"input",key:"unitWeight",label:"单重",placeholder:"请输入单重",span:8},{type:"input",key:"unitArea",label:"单元面积",placeholder:"请输入单元面积",span:8},{type:"input",key:"commonModel",label:"共同型号",placeholder:"请输入共同型号",span:8},{type:"input",key:"plateThickness",label:"板厚",placeholder:"请输入板厚",span:8},{type:"input",key:"plateMaterial",label:"板材",placeholder:"请输入板材",span:8},{type:"input",key:"tg",label:"tg",placeholder:"请输入tg",span:8},{type:"input",key:"cti",label:"cti",placeholder:"请输入cti",span:8},{type:"input",key:"environmental",label:"环保料",placeholder:"请输入环保料",span:8},{type:"input",key:"setToPcs",label:"1set=?pcs",placeholder:"请输入1set=?pcs",span:8},{type:"input",key:"customerPanelAssembly",label:"客户拼板",placeholder:"请输入客户拼板",span:8},{type:"input",key:"setL",label:"set长",placeholder:"请输入set长",span:8},{type:"input",key:"setW",label:"set宽",placeholder:"请输入set宽",span:8},{type:"input",key:"sampleApprovalTime",label:"样板承认时间",placeholder:"请输入样板承认时间",span:8},{type:"input",key:"massProductionTime",label:"量产时间",placeholder:"请输入量产时间",span:8},{type:"input",key:"hdi",label:"hdi",placeholder:"请输入hdi",span:8},{type:"input",key:"hdiStructure",label:"hdi结构",placeholder:"请输入hdi结构",span:8},{type:"input",key:"mechanicalBlindHole",label:"机械盲孔",placeholder:"请输入机械盲孔",span:8},{type:"input",key:"flexibleBoard",label:"软板",placeholder:"请输入软板",span:8},{type:"input",key:"productFeatures",label:"产品特征",placeholder:"请输入产品特征",span:8},{type:"input",key:"wb",label:"WB",placeholder:"请输入WB",span:8},{type:"input",key:"safetyClimbManagement",label:"安全爬坡管理",placeholder:"请输入安全爬坡管理",span:8},{type:"input",key:"safetyComponent",label:"安全件",placeholder:"请输入安全件",span:8},{type:"input",key:"rpoth",label:"通孔塞树脂",placeholder:"请输入通孔塞树脂",span:8},{type:"input",key:"scheduledScrapping",label:"预定报废",placeholder:"请输入预定报废",span:8},{type:"input",key:"remark",label:"备注",placeholder:"请输入备注",span:8},{type:"input",key:"createBy",label:"创建者",placeholder:"请输入创建者",span:8}],ee=l([]),ae=l(!1);l({pageNum:1,pageSize:200,techId:null,moduleNo:null});const le=l(""),te=l(""),pe=l("");function ne(){S("/erpsyncmes/wip/selectWipByModuleNoAndTechId",L.value).then((({data:e,error:a})=>{a||(e.pageInfo.list.forEach(((e,a)=>{e.index=a+1})),e.myMap.forEach(((e,a)=>{e.index=a+1})),K.value=e.pageInfo.list,X.value=e.myMap)}))}function se(){B("/jlerp/prodInfo/update",le.value).then((({data:e,error:a})=>{var l;a||(ae.value=!1,le.value="",null==(l=window.$message)||l.success("修改成功"),ee.value=[],ne())}))}ne(),S("/erpsyncmes/wip/selectDept","").then((({data:e,error:a})=>{a||(F.value=e.map((e=>({label:e,value:e}))))}));const re=l({1:"fas fa-circle text-red",2:"fas fa-circle text-red",3:"fas fa-circle text-green",4:"fas fa-circle text-green",5:"fas fa-circle text-blue",6:"fas fa-circle text-blue",7:"fas fa-circle text-yellow",8:"fas fa-circle text-yellow"}),ie=l({1:"rgba(135,206,255,0.2)",2:"rgba(238,210,238,0.2)",3:"rgba(135,206,255,0.2)",4:"rgba(171,130,255,0.2)",5:"rgba(238,210,238,0.2)",6:"rgba(135,206,255,0.2)",7:"rgba(238,210,238,0.2)",8:"rgba(171,130,255,0.2)",A:"rgba(135,206,255,0.2)",B:"rgba(171,130,255,0.2)"});function oe(e){return re.value[e]}function ce(){ne()}function de(){R(),ce()}return l({1:"path/to/layer1.png",2:"path/to/layer2.png",3:"path/to/layer3.png",4:"path/to/layer4.png",5:"path/to/layer5.png",6:"path/to/layer6.png",7:"path/to/layer7.png",8:"path/to/layer8.png"}),(a,l)=>{const t=T,p=I,n=x,_=P,N=v,C=w,S=e;return s(),r("div",j,[i(t,{searchParams:o(L),"onUpdate:searchParams":l[0]||(l[0]=e=>c(L)?L.value=e:null),"form-list":V,onSearch:ce,onReset:de},null,8,["searchParams"]),i(p,{ref_key:"tableRef",ref:E,searchParams:o(Q),"onUpdate:searchParams":l[1]||(l[1]=e=>c(Q)?Q.value=e:null),column:Y.value,"show-row-selection":!1,"auto-generate-uuid":!1,scroll:{y:"auto"},"row-key":"wipId","is-init-get-data":"","data-source":K.value},null,8,["searchParams","column","data-source"]),l[9]||(l[9]=d("div",{class:"titClass"},"各层别结存面积:",-1)),d("div",A,[(s(!0),r(y,null,u(X.value,((e,a)=>{return s(),h(_,{key:a,title:"",class:"card",style:g({backgroundColor:(l=e.layer,ie.value[l])})},{default:k((()=>[d("div",U,[d("i",{class:m(oe(e.layer))},null,2),i(n,{"local-icon":"dcb",class:"text-16px"}),d("span",M,"层数: "+b(e.layer),1)]),d("div",D,[d("p",O,"结存面积(sq.ft): "+b(e.area),1)])])),_:2},1032,["style"]);var l})),128))]),i(S,{visible:ae.value,"onUpdate:visible":l[5]||(l[5]=e=>ae.value=e),"destroy-on-close":!0,centered:!0,title:pe.value,width:"1050px",height:"550px"},{footer:k((()=>[d("div",q,[i(C,{onClick:l[4]||(l[4]=e=>ae.value=!1)},{default:k((()=>l[6]||(l[6]=[f("关闭")]))),_:1}),"型号定义修改"==pe.value?(s(),h(C,{key:0,onClick:se},{default:k((()=>l[7]||(l[7]=[f("保存")]))),_:1})):(s(),h(C,{key:1,onClick:a.getAddData},{default:k((()=>l[8]||(l[8]=[f("保存")]))),_:1},8,["onClick"]))])])),default:k((()=>["型号定义修改"==pe.value?(s(),r("div",z,[i(N,{model:le.value,"onUpdate:model":l[2]||(l[2]=e=>le.value=e),"form-list":Z},null,8,["model"])])):(s(),r("div",W,[i(N,{model:te.value,"onUpdate:model":l[3]||(l[3]=e=>te.value=e),"form-list":Z},null,8,["model"])]))])),_:1},8,["visible","title"])])}}}),[["__scopeId","data-v-1593b5ce"]]);export{L as default};
