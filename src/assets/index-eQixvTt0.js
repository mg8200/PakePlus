import{d as e,_ as t,b as l}from"./engineering-data-inquiry-BIeYOUOZ.js";import{_ as a}from"./table-DoFSI9NT.js";import{g as i,Y as c,r as s,o as r,e as n,w as o,f as d,h as u,aj as p,a5 as m,_ as h,a9 as f,p as k,i as y,V as x,X as v,al as g,c as w,t as b,cs as _,ac as I,aa as N,B as C,ad as D,ae as P,N as F,Q as R,J as j}from"./index-B3PZsRwT.js";import{_ as S}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{u as T}from"./resetTableRef-DZjcvemm.js";import{E as z}from"./EditOutlined-5FYoGiVM.js";import{D as B}from"./DeleteOutlined-CWT7lRAZ.js";import{C as M}from"./index-BThgVJ70.js";import"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import"./pdf-viewer-DuGSG8WR.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";var K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"};function O(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(l).filter((function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable})))),a.forEach((function(t){E(e,t,l[t])}))}return e}function E(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var A=function(e,t){var l=O({},e,t.attrs);return i(c,O({},l,{icon:K}),null)};A.displayName="ArrowDownOutlined",A.inheritAttrs=!1;const Y=["onClick"],L=["onClick"],U={__name:"customer-complaint-pictures",setup(l,{expose:c}){const f="localhost"===window.location.hostname,k=s(null),y=s({prodNo:null}),x=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"fileName",dataIndex:"fileName",title:"图片路径",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>i("span",{class:"cursor-pointer color-blue",onClick:()=>w({record:e})},[e.fileName])},{key:"fileSizeKb",dataIndex:"fileSizeKb",title:"图片大小",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>"".concat(e.fileSizeKb,"KB")},{key:"fileSizeKb",dataIndex:"fileSizeKb",title:"上传人",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>"".concat(e.fileSizeKb,"KB")},{key:"fileSizeKb",dataIndex:"fileSizeKb",title:"上传日期",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>"".concat(e.fileSizeKb,"KB")},{key:"fileModifiedTime",dataIndex:"fileModifiedTime",title:"更改时间",align:"center",checked:!0,ellipsis:!0}];const v=s(!1),g=s(null);function w(e){v.value=!0,g.value="".concat(f?"http://192.168.166.169:9999/prod-api/":"/prod-api/","rcerp/erpMiFile/downMiFile?prodNo=").concat(e.record.prodNo,"&fileName=").concat(e.record.fileName),e.hidePopup()}return c({getData:function(e){y.value=e,m((()=>{k.value.getData()}))}}),(l,c)=>{const s=h,m=a,f=t;return r(),n(p,null,[i(m,{ref_key:"tableRef",ref:k,searchParams:y.value,"onUpdate:searchParams":c[0]||(c[0]=e=>y.value=e),class:"h-full",column:x,"show-row-selection":!1,"row-key":"id",scroll:{y:"auto"},"is-init-get-data":!1,url:"/rcerp/erpMiFile/getMiFileList","auto-generate-uuid":!0,"is-pagination":!1,onTableRowDblclick:c[1]||(c[1]=e=>w({record:e}))},{title:o((()=>c[3]||(c[3]=[d("span",{class:"color-#646cff"},"客诉图片",-1)]))),"contextmenuPopup-orter":o((({args:t})=>[d("li",{class:"popup-item",onClick:l=>{return e({prodNo:(a=t).record.prodNo,fileName:a.record.fileName}),void a.hidePopup();var a}},[i(s,{"local-icon":"download",class:"text-16px"}),c[4]||(c[4]=u(" 下载 "))],8,Y),d("li",{class:"popup-item",onClick:e=>w(t)},[i(s,{"local-icon":"preview",class:"text-16px"}),c[5]||(c[5]=u(" 预览 "))],8,L)])),_:1},8,["searchParams"]),i(f,{visible:v.value,"onUpdate:visible":c[2]||(c[2]=e=>v.value=e),url:g.value,"pdf-use-iframe":""},null,8,["visible","url"])],64)}}},H={class:"min-h-500px flex-col-stretch gap-8px overflow-hidden lt-sm:overflow-auto"},q={class:"p-8px"},V=["onClick"],J=["onClick"],Q=j(Object.assign({name:"quality-management_customer-complaint-input"},{__name:"index",setup(e){const c=s(null),[m,j]=T({moduleNo:null,moduleNoState:"8"}),{height:K}=f(c),O={0:"编写",1:"更改",2:"待处理",3:"编写中",4:"暂停",5:"已回退",6:"反审核",7:"审核中",8:"已上网",9:"完成",10:"取消",11:"外部ECN",12:"外部ECN待处理",13:"内部ECN",19:"样板转生产",20:"ENC更改",25:"报废",27:"申请",28:"入库",29:"发放",34:"归还",35:"接收",36:"审核",37:"确认",100:"PPC审核"},E=s(null),Y=[{type:"input",key:"moduleNo",label:"生产型号",span:24,md:12,lg:8,xl:8,xxl:4,placeholder:"请输入生产型号",showTime:!0},{type:"input",key:"moduleNo",label:"客诉编号",span:24,md:12,lg:8,xl:8,xxl:4,placeholder:"请输入客诉编号",showTime:!0},{type:"input",key:"moduleNo",label:"日期范围",span:24,md:12,lg:8,xl:8,xxl:4,placeholder:"请选择日期范围",showTime:!0},{type:"select",key:"moduleNoState",label:"查看方式",placeholder:"请选择查看方式",span:24,md:12,lg:8,xl:8,xxl:4,selectOptions:Q()}];function L(e){let t=Number(e);switch(140917104644e4===t||160913164544e4===t?t=2:140917104654e4===t||140919111754e4===t?t=3:161013095348e4!==t&&140919111738e4!==t||(t=4),Number(t)){case-1:return"#FF0000";case 0:return"#0080FF";case 1:return"#FFA500";case 2:return"#FF8000";case 3:return"#B15BFF";case 4:return"#73BF00";case 5:return"#8E8E8E";case 6:return"#BEBEBE";case 7:return"#FF0000";case 8:return"#4682B4";case 9:return"#0000FF";case 10:return"#007500";default:return"#0000FF"}}function Q(){return Object.entries(O).map((([e,t])=>8===e?{label:"全部",value:e}:{label:t,value:e}))}const X=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"state",dataIndex:"state",title:"状态",align:"center",checked:!0,ellipsis:!0,customFilterDropdown:!0,width:130,onFilter:(e,t)=>{let l=Number(t.state);return 140917104644e4===l||160913164544e4===l?l=2:140917104654e4===l||140919111754e4===l?l=3:161013095348e4!==l&&140919111738e4!==l||(l=4),!e||Number(e)===Number(l)},customRender:({record:e})=>{let t=Number(e.state);return 140917104644e4===t||160913164544e4===t?t=2:140917104654e4===t||140919111754e4===t?t=3:161013095348e4!==t&&140919111738e4!==t||(t=4),8===t?i("div",{class:"h-full w-full",title:"已上网",style:{color:L(e.state)}},[u("已上网")]):i("div",{class:"h-full w-full",title:O[t]||"",style:{color:L(e.state)}},[O[t]||""])}},{key:"moduleNo",dataIndex:"moduleNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,width:160,customRender:({record:e})=>i("span",{class:"fonw-800 color-#646cff"},[e.moduleNo])},{key:"pnType",dataIndex:"pnType",title:"类型",align:"center",checked:!0,ellipsis:!0,width:130},{key:"prodType",dataIndex:"prodType",title:"产品类型",align:"center",checked:!0,ellipsis:!0,width:130},{key:"surfTrea1",dataIndex:"surfTrea1",title:"表面处理1",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peType",dataIndex:"peType",title:"板类型",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peDifficulty",dataIndex:"peDifficulty",title:"开发等级",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peState",dataIndex:"peState",title:"生产稿状态",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peSpecial",dataIndex:"peSpecial",title:"特殊周期",align:"center",checked:!0,ellipsis:!0,width:130},{key:"pemark",dataIndex:"pemark",title:"水印",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peRemark",dataIndex:"peRemark",title:"工程备注",align:"center",checked:!0,ellipsis:!0,width:130},{key:"targetName",dataIndex:"targetName",title:"终端客户",align:"center",checked:!0,ellipsis:!0,width:130},{key:"custNo",dataIndex:"custNo",title:"客户编码",align:"center",checked:!0,ellipsis:!0,width:130},{key:"custProdNo",dataIndex:"custProdNo",title:"客户型号",align:"center",checked:!0,ellipsis:!0,width:130},{key:"custProdNoAdd",dataIndex:"custProdNoAdd",title:"物料号",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peActive",dataIndex:"peActive",title:"PE状态",align:"center",checked:!0,ellipsis:!0,width:130,customRender:({record:e})=>e.peactive?"有效":"过期"},{key:"activeRemark",dataIndex:"activeRemark",title:"操作备注",align:"center",checked:!0,ellipsis:!0,width:130},{key:"mktActive",dataIndex:"mktActive",title:"MIKT投产",align:"center",checked:!0,ellipsis:!0,width:130,customRender:({record:e})=>e.mktactive?"是":"否"},{key:"weight",dataIndex:"weight",title:"单重",align:"center",checked:!0,ellipsis:!0,width:130},{key:"remark",dataIndex:"remark",title:"备注",align:"center",checked:!0,ellipsis:!0,width:130},{key:"createBy",dataIndex:"createBy",title:"创建人",align:"center",checked:!0,ellipsis:!0,width:130},{key:"createDate",dataIndex:"createDate",title:"创建时间",align:"center",checked:!0,ellipsis:!0,width:160,customRender:({record:e})=>N(e.createDate).format("YYYY-MM-DD HH:mm:ss")},{key:"updateDate",dataIndex:"updateDate",title:"最后修改时间",align:"center",checked:!0,ellipsis:!0,width:160,customRender:({record:e})=>N(e.updateDate).format("YYYY-MM-DD HH:mm:ss")}],G=k({searchText:"",searchedColumn:""}),W=s(null),Z=s("工艺备注"),$=s(null),ee=s({prodId:null});s("1");const te=s({});s(null);const le=s(null);function ae(){E.value.getData(1)}function ie(){j(),ae()}function ce(e){return e.peactive&&0==e.issActive&&0==e.lotActive?{class:"red"}:{}}function se(e){(null==e?void 0:e.length)&&(E.value.setCurrentRowId(e[0]),re(e[0]))}function re(e){te.value=e,ee.value.prodId=e.prodId,Z.value="工艺备注",$.value.getData(1),le.value.getData({prodNo:te.value.moduleNo})}s(null),s(null),s(null);const ne="localhost"===window.location.hostname,oe=s(!1),de=s(null),ue=s(null);return(e,s)=>{const f=S,k=C,N=D,j=P,T=h,O=a,L=M,Z=F,$=R,ee=t;return r(),n("div",H,[i(f,{ref_key:"commonSearchRef",ref:c,searchParams:y(m),"onUpdate:searchParams":s[0]||(s[0]=e=>x(m)?m.value=e:null),"form-list":Y,onSearch:ae,onReset:ie},null,8,["searchParams"]),i($,{gutter:8,class:"h-full w-full",style:I({height:"calc(100% - ".concat(y(K),"px)")})},{default:o((()=>[i(Z,{span:16,class:"h-full min-h-500px flex-col-stretch gap-8px overflow-hidden lt-sm:overflow-auto"},{default:o((()=>[i(O,{ref_key:"tableRef",ref:E,searchParams:y(m),"onUpdate:searchParams":s[1]||(s[1]=e=>x(m)?m.value=e:null),column:X,"show-row-selection":!1,"row-key":"prodId",scroll:{y:"auto"},"is-init-get-data":"",url:"/erpsyncmes/Mi/findModuleNo","auto-generate-uuid":!1,class:"h-full","table-custom-cell":ce,"show-quick-jumper":!1,"default-expand-all-rows":!0,onTableRowClick:re,onTableDataLoadSucess:se},{title:o((()=>[s[7]||(s[7]=d("span",{class:"mr-8px color-#646cff"},"客诉信息",-1)),i(k,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:e.addData},{icon:o((()=>[i(y(v),{class:"align-sub"})])),default:o((()=>[s[3]||(s[3]=u(" 新增 "))])),_:1},8,["onClick"]),i(k,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:e.updata},{icon:o((()=>[i(y(z),{class:"align-sub"})])),default:o((()=>[s[4]||(s[4]=u(" 修改 "))])),_:1},8,["onClick"]),i(k,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:e.deleteData},{icon:o((()=>[i(y(B),{class:"align-sub"})])),default:o((()=>[s[5]||(s[5]=u(" 删除 "))])),_:1},8,["onClick"]),i(k,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:e.deleteData},{icon:o((()=>[i(y(A),{class:"align-sub"})])),default:o((()=>[s[6]||(s[6]=u(" 导出 "))])),_:1},8,["onClick"])])),filterDropdown:o((({setSelectedKeys:e,selectedKeys:t,confirm:l,clearFilters:a,column:c})=>[d("div",q,[i(j,{ref_key:"selectRef",ref:W,class:"mb-8px block w-188px",placeholder:"请选择查看方式","show-search":"",value:t[0],"allow-clear":"",onChange:t=>{e([t])}},{default:o((()=>[(r(!0),n(p,null,g(Q(),(e=>(r(),w(N,{key:e.value,value:e.value},{default:o((()=>[u(b(e.label),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onChange"]),i(k,{type:"primary",size:"small",class:"mr-8px w-90px",onClick:e=>((e,t,l)=>{t(),G.searchText=e[0],G.searchedColumn=l})(t,l,c.dataIndex)},{icon:o((()=>[i(y(_))])),default:o((()=>[s[8]||(s[8]=u(" 搜索 "))])),_:2},1032,["onClick"]),i(k,{size:"small",class:"w-90px",onClick:e=>(e=>{e(),G.searchText=""})(a)},{default:o((()=>s[9]||(s[9]=[u("重置")]))),_:2},1032,["onClick"])])])),"contextmenuPopup-orter":o((({args:e})=>[d("li",{class:"popup-item",onClick:t=>{return a=e,l({prodId:te.value.prodId},a.record.moduleNo),void a.hidePopup();var a}},[i(T,{"local-icon":"download",class:"text-16px"}),s[10]||(s[10]=u(" 下载 "))],8,V),d("li",{class:"popup-item",onClick:t=>{return l=e,oe.value=!0,ue.value="".concat(te.value.moduleNo,"MI文件.pdf 预览"),de.value="".concat(ne?"http://192.168.166.169:9999/prod-api/":"/prod-api/","erpsyncmes/mi/print/getMiPdf?prodId=").concat(te.value.prodId),void l.hidePopup();var l}},[i(T,{"local-icon":"preview",class:"text-16px"}),s[11]||(s[11]=u(" 预览 "))],8,J)])),_:1},8,["searchParams"]),i(L,{class:"min-h-300px","body-style":{padding:"15px",paddingBottom:"25px"}},{default:o((()=>s[12]||(s[12]=[d("div",null,"客诉图表统计",-1)]))),_:1})])),_:1}),i(Z,{span:8,class:"right-table h-full"},{default:o((()=>[i(U,{ref_key:"customerComplaintPicturesRef",ref:le},null,512)])),_:1})])),_:1},8,["style"]),i(ee,{visible:oe.value,"onUpdate:visible":s[2]||(s[2]=e=>oe.value=e),url:de.value,type:"pdf","pdf-use-iframe":"",title:ue.value},null,8,["visible","url","title"])])}}}),[["__scopeId","data-v-8cf79ac4"]]);export{Q as default};
