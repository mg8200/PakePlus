import{_ as e}from"./table-DoFSI9NT.js";import{_ as t}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{Z as a,p as l,r as s,a9 as n,o as i,e as o,g as c,i as d,V as r,f as u,w as p,ac as h,a5 as m,a7 as g,N as x,Q as f,J as k}from"./index-B3PZsRwT.js";import{u as w}from"./searchData-DpjdfxBw.js";import{u as y}from"./resetTableRef-DZjcvemm.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";import"./index-BThgVJ70.js";const I={style:{width:"100%",height:"100%"},class:"jl-main-page outer-printed-code h-full h-full min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},v=k(Object.assign({name:"collection-management_hr-print-data-collect"},{__name:"index",setup(k){const[v,_]=y({lotNo:null,prodNo:null,time:null}),N=l({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,t)=>{N.current=e,N.pageSize=t,getData()}}),R=[{type:"input",key:"prodNo",label:"产品型号",span:24,md:12,lg:10,xl:8,xxl:6,placeholder:"请输入产品型号",showTime:!0},{type:"input",key:"lotNo",label:"批次号",span:24,md:12,lg:10,xl:8,xxl:6,placeholder:"请输入批次号",showTime:!0},{type:"dateRangePicker",key:"time",label:"日期",span:24,md:12,lg:10,xl:8,xxl:6,showTime:!0}],b=w(v),T=s(null),C=s([]),D=s([]),P=s([]),j=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"prodNo",dataIndex:"prodNo",title:" 产品型号",align:"center",checked:!0,ellipsis:!0,width:160},{key:"lotNo",dataIndex:"lotNo",title:"批次号",align:"center",checked:!0,ellipsis:!0,width:160},{key:"printCount",dataIndex:"printCount",title:"打印次数",align:"center",checked:!0,ellipsis:!0,width:100},{key:"createTime",dataIndex:"createTime",title:"创建时间",width:170,align:"center",checked:!0,ellipsis:!0}],L=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"pnlNo",dataIndex:"pnlNo",title:" PNL号",align:"center",checked:!0,ellipsis:!0,width:139}],S=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"setNo",dataIndex:"setNo",title:" Set号",align:"center",checked:!0,ellipsis:!0,width:139}],V=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"pcsNo",dataIndex:"pcsNo",title:"Psc号",align:"center",checked:!0,ellipsis:!0,width:150},{key:"equId",dataIndex:"equId",title:"机台号",align:"center",checked:!0,ellipsis:!0,width:160},{key:"side",dataIndex:"side",title:"面次",align:"center",checked:!0,ellipsis:!0,width:160},{key:"printResult",dataIndex:"printResult",title:"打印结果",width:80,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>{var t,a;const l={1:{color:"color-green",text:"成功"},2:{color:"color-red",text:"失败"}};return c("span",{class:"color-".concat(null==(t=l[e.printResult])?void 0:t.color)},[null==(a=l[e.printResult])?void 0:a.text])}},{key:"updateTime",dataIndex:"updateTime",title:"打印时间",align:"center",checked:!0,ellipsis:!0,width:160}];function z(){T.value.getData(1),C.value=[],D.value=[],P.value=[]}function E(){_(),m((()=>{z()}))}const q=s(null);function J(e){B(e)}function O(e){e[0]&&(B(e[0]),T.value.setCurrentRowId(e[0]))}const Q=s(null),{height:U}=n(Q),A=s(null);function B(e){var t;(t={lotNo:e.lotNo,prodNo:e.prodNo},a({url:"/mes/api/erp/selectCodePrintDetail",params:{...t,pageSize:999999,pageNum:1}})).then((({data:e,error:t})=>{if(!t){e.pnlList.forEach(((e,t)=>{e.uuid=g.genV4().hexNoDelim,e.dataIndex=t+1})),C.value=e.pnlList,q.value.setCurrentRowId(e.pnlList[0]);const t=e.pnlList[0].setList;t.forEach(((e,t)=>{e.dataIndex=t+1,e.uuid=g.genV4().hexNoDelim})),D.value=t,A.value.setCurrentRowId(t[0]);const a=t[0].pscList;a.forEach(((e,t)=>{e.dataIndex=t+1,e.uuid=g.genV4().hexNoDelim})),P.value=a}}))}function Z(e){const t=e.setList;t.forEach(((e,t)=>{e.dataIndex=t+1,e.uuid=g.genV4().hexNoDelim})),D.value=t}function F(e){const t=e.pscList;t.forEach(((e,t)=>{e.dataIndex=t+1,e.uuid=g.genV4().hexNoDelim})),P.value=t}return(a,l)=>{const s=t,n=e,m=x,g=f;return i(),o("div",I,[c(s,{ref_key:"searchRef",ref:Q,searchParams:d(v),"onUpdate:searchParams":l[0]||(l[0]=e=>r(v)?v.value=e:null),"form-list":R,onSearch:z,onReset:E},null,8,["searchParams"]),l[2]||(l[2]=u("div",null,null,-1)),c(g,{gutter:[0,0],wrap:"",class:"w-full",style:h({height:"calc(100% - ".concat(d(U),"px)")})},{default:p((()=>[c(m,{span:7,class:"h-full"},{default:p((()=>[c(n,{ref_key:"tableRef",ref:T,searchParams:d(b),"onUpdate:searchParams":l[1]||(l[1]=e=>r(b)?b.value=e:null),column:j,"show-row-selection":!1,"auto-generate-uuid":!0,"is-init-get-data":"",scroll:{x:"100%"},url:"/mes/api/erp/selectCodePrintSimple",class:"h-full",onTableRowClick:J,onTableDataLoadSucess:O},null,8,["searchParams"])])),_:1}),c(m,{span:3,class:"h-full"},{default:p((()=>[c(n,{ref_key:"rightTableRef",ref:q,"column-setting":!1,"data-source":C.value,column:L,"row-key":"uuid","show-row-selection":!1,"auto-generate-uuid":!1,"is-pagination":!1,scroll:{y:"auto"},"is-init-get-data":!1,class:"custom-table-pnl h-full",onTableRowClick:Z},null,8,["data-source"])])),_:1}),c(m,{span:3,class:"h-full"},{default:p((()=>[c(n,{ref_key:"setTableRef",ref:A,column:S,"show-row-selection":!1,"data-source":D.value,"is-pagination":!1,"row-key":"uuid","auto-generate-uuid":!1,scroll:{y:"auto"},"is-init-get-data":!1,class:"custom-table-pnl h-full",onTableRowClick:F},null,8,["data-source"])])),_:1}),c(m,{span:11,class:"h-full"},{default:p((()=>[c(n,{column:V,"data-source":P.value,"show-row-selection":!1,"row-key":"uuid","auto-generate-uuid":!1,scroll:{x:"100%",y:"auto"},"is-init-get-data":!1,class:"h-full"},null,8,["data-source"])])),_:1})])),_:1},8,["style"])])}}}),[["__scopeId","data-v-4bec4ad5"]]);export{v as default};
