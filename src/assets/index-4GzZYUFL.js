import{_ as e}from"./count-to.vue_vue_type_script_setup_true_lang-B2gd1OWh.js";import{Z as a,d as t,r as o,aa as l,b as s,j as r,o as n,c,w as i,g as u,f as d,dJ as f,cH as m,J as p,e as v,aj as h,al as y,t as g,ac as Y,a1 as b,N as k,Q as _}from"./index-B3PZsRwT.js";import{u as x}from"./echarts-B3HHInsl.js";import{C as w}from"./index-BThgVJ70.js";import"./installCanvasRenderer-Dfk03Uyn.js";const M={class:"select-month"},S="YYYY-MM",C=p(t({name:"LineChart",__name:"day-charts",setup(e){const t=o(!1);const p=o(l(l().format("YYYY-MM"),S)),v=s((()=>function(e){const[a,t]=e.split("-").map(Number),o=new Date(a,t,0).getDate(),l=[];for(let s=1;s<=o;s++)l.push(String(s).padStart(2,"0"));return l}(p.value.format(S)))),{domRef:h,updateOptions:y}=x((()=>({toolbox:{show:!0,feature:{magicType:{type:["bar","line"]},saveAsImage:{}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter(e){var a,t,o,l;let s="".concat(p.value.format(S),"-").concat(null==(a=e[0])?void 0:a.name,"<br />");return e[0]&&(s+=" ".concat(null==(t=e[0])?void 0:t.marker,"使用数量：").concat(e[0].value)),e[1]&&(s+="<br />".concat(null==(o=e[1])?void 0:o.marker,"新增数量：").concat(e[1].value)),e[2]&&(s+="<br />".concat(null==(l=e[2])?void 0:l.marker,"报废数量：").concat(e[2].value)),s}},legend:{data:["使用数量","新增数量","报废数量"],top:25},title:{text:"".concat(p.value.format("YYYY年MM"),"月数据统计"),left:"center",top:0},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!0,data:v.value},yAxis:{type:"value"},series:[{color:"#90EE90",name:"使用数量",type:"bar",smooth:!0,stack:"Total",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:.25,color:"#90EE90"},{offset:1,color:"#fff"}]}},emphasis:{focus:"series"},data:[]},{color:"#26deca",name:"新增数量",type:"bar",smooth:!0,stack:"Total",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:.25,color:"#26deca"},{offset:1,color:"#fff"}]}},emphasis:{focus:"series"},data:[]},{color:"#8e9dff",name:"报废数量",type:"bar",smooth:!0,stack:"Total",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:.25,color:"#8e9dff"},{offset:1,color:"#fff"}]}},emphasis:{focus:"series"},data:[]}]})),!1);function g(){var e;t.value=!0,t.value=!1,(e={yearMonth:p.value.format("YYYY-MM")},a({url:"/qms/frock/mold/statistics/selectYearMonth",method:"get",params:e})).then((({data:e,error:a})=>{a||y((a=>{var t,o,l;const s=null==(t=null==e?void 0:e.new)?void 0:t.map((e=>e.punchTotal||0)),r=null==(o=null==e?void 0:e.useData)?void 0:o.map((e=>e.punchNum||0)),n=null==(l=null==e?void 0:e.useless)?void 0:l.map((e=>e.punchTotal||0));return a.xAxis.data=v.value,a.series[0].data=r,a.series[1].data=s,a.series[2].data=n,a}))})).finally((()=>{t.value=!1}))}function Y(e){g(),y((a=>(a.title.text="".concat(e.format("YYYY年MM"),"月数据统计"),a)))}return r((()=>{g()})),(e,a)=>{const o=f,l=m,s=w;return n(),c(s,{bordered:!1,class:"card-wrapper"},{default:i((()=>[u(l,{tip:"数据加载中...",spinning:t.value},{default:i((()=>[d("div",{ref_key:"domRef",ref:h,class:"h-full overflow-hidden"},null,512),d("div",M,[u(o,{value:p.value,"onUpdate:value":a[0]||(a[0]=e=>p.value=e),picker:"month","allow-clear":!1,size:"small",format:"YYYY-MM",onChange:Y},null,8,["value"])])])),_:1},8,["spinning"])])),_:1})}}}),[["__scopeId","data-v-10a64632"]]),T={class:"select-year"},A="YYYY",E=p(t({name:"LineChart",__name:"month-charts",setup(e){const t=o(!1),s=o(l(l().format(A),A)),{domRef:p,updateOptions:v}=x((()=>({toolbox:{show:!0,feature:{magicType:{type:["line","bar"]},saveAsImage:{}}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter(e){var a,t,o;let l="".concat(s.value.format(A),"-").concat(e[0].name,"月<br />");return e[0]&&(l+=" ".concat(null==(a=e[0])?void 0:a.marker,"使用数量：").concat(e[0].value)),e[1]&&(l+="<br />".concat(null==(t=e[1])?void 0:t.marker,"新增数量：").concat(e[1].value)),e[2]&&(l+="<br />".concat(null==(o=e[2])?void 0:o.marker,"报废数量：").concat(e[2].value)),l}},legend:{data:["使用数量","新增数量","报废数量"],top:25},title:{text:"".concat(s.value.format(A),"年统计"),left:"center",top:0},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[1,2,3,4,5,6,7,8,9,10,11,12]},yAxis:{type:"value"},series:[{color:"#90EE90",name:"使用数量",type:"line",smooth:!0,stack:"Total",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:.25,color:"#90EE90"},{offset:1,color:"#fff"}]}},emphasis:{focus:"series"},data:[]},{color:"#26deca",name:"新增数量",type:"line",smooth:!0,stack:"Total",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:.25,color:"#26deca"},{offset:1,color:"#fff"}]}},emphasis:{focus:"series"},data:[]},{color:"#8e9dff",name:"报废数量",type:"line",smooth:!0,stack:"Total",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:.25,color:"#8e9dff"},{offset:1,color:"#fff"}]}},emphasis:{focus:"series"},data:[]}]})),!1);function h(){var e;t.value=!0,(e={year:s.value.format("YYYY")},a({url:"/qms/frock/mold/statistics/selectYear",method:"get",params:e})).then((({data:e,error:a})=>{a||v((a=>{var t,o,l;const s=null==(t=null==e?void 0:e.new)?void 0:t.map((e=>e.punchTotal||0)),r=null==(o=null==e?void 0:e.useData)?void 0:o.map((e=>e.punchNum||0)),n=null==(l=null==e?void 0:e.useless)?void 0:l.map((e=>e.punchTotal||0));return a.series[0].data=r,a.series[1].data=s,a.series[2].data=n,a}))})).finally((()=>{t.value=!1}))}function y(e){h(),v((a=>(a.title.text="".concat(e.format(A),"年报废新增冲数统计"),a)))}return r((()=>{h()})),(e,a)=>{const o=f,l=m,r=w;return n(),c(r,{bordered:!1,class:"card-wrapper"},{default:i((()=>[u(l,{tip:"数据加载中...",spinning:t.value},{default:i((()=>[d("div",{ref_key:"domRef",ref:p,class:"h-full overflow-hidden"},null,512),d("div",T,[u(o,{value:s.value,"onUpdate:value":a[0]||(a[0]=e=>s.value=e),"allow-clear":!1,picker:"year",size:"small",format:"YYYY",onChange:y},null,8,["value"])])])),_:1},8,["spinning"])])),_:1})}}}),[["__scopeId","data-v-27dd213d"]]),O={class:"select-month"},R=p(t({name:"LineChart",__name:"workload-charts",setup(e){const t=o(!1),s=o(l(l().format("YYYY-MM"),"YYYY-MM")),{domRef:p,updateOptions:v}=x((()=>({tooltip:{trigger:"item"},legend:{bottom:"5%",left:"center"},title:{text:"".concat(s.value.format("YYYY年MM"),"月人员工作量统计"),left:"center",top:0},series:[{name:"人员工作量统计",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,padAngle:5,itemStyle:{borderRadius:10},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"}},labelLine:{show:!1},data:[]}]})),!1);function h(){var e;t.value=!0,(e={yearMonth:s.value.format("YYYY-MM")},a({url:"/qms/frock/mold/statistics/selectPeople",method:"get",params:e})).then((({data:e,error:a})=>{if(!a){const a=e.map((e=>({name:e.operator,value:e.punchNum})));v((e=>(e.series[0].data=a,e)))}})).finally((()=>{t.value=!1}))}function y(e){v((a=>(a.title.text="".concat(e.format("YYYY年MM"),"月报废数据统计"),a))),h()}return r((()=>{h()})),(e,a)=>{const o=f,l=m,r=w;return n(),c(r,{bordered:!1,class:"card-wrapper"},{default:i((()=>[u(l,{tip:"数据加载中...",spinning:t.value},{default:i((()=>[d("div",{ref_key:"domRef",ref:p,class:"h-full overflow-hidden"},null,512),d("div",O,[u(o,{value:s.value,"onUpdate:value":a[0]||(a[0]=e=>s.value=e),picker:"month","allow-clear":!1,size:"small",format:"YYYY-MM",onChange:y},null,8,["value"])])])),_:1},8,["spinning"])])),_:1})}}}),[["__scopeId","data-v-bfc76cd7"]]),j=p(t({name:"LineChart",__name:"status-charts",setup(e){const t=o(!1),{domRef:l,updateOptions:s}=x((()=>({tooltip:{trigger:"item"},legend:{bottom:"5%",left:"center"},title:{text:"模具状态分布图",left:"center",top:0},series:[{name:"模具状态分布图",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,padAngle:5,itemStyle:{borderRadius:10},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"}},labelLine:{show:!1},data:[]}]})),!1);async function f(){t.value=!0,a({url:"/qms/frock/mold/statistics/selectStatisticAll",method:"get"}).then((({data:e,error:a})=>{if(!a){const a=e.map((e=>({name:{1:"正常",2:"报废",3:"暂停",4:"调出"}[e.moldState],value:e.punchTotal})));s((e=>(e.series[0].data=a,e)))}})).finally((()=>{t.value=!1}))}return r((()=>{f()})),(e,a)=>{const o=m,s=w;return n(),c(s,{bordered:!1,class:"card-wrapper"},{default:i((()=>[u(o,{tip:"数据加载中...",spinning:t.value},{default:i((()=>[d("div",{ref_key:"domRef",ref:l,class:"h-full overflow-hidden"},null,512)])),_:1},8,["spinning"])])),_:1})}}}),[["__scopeId","data-v-31985f35"]]),L={class:"mold-data-statistics h-full w-full"},N={class:"view-item"},z={class:"data"},B={class:"label text-16px color-#6638 font-bold"},D={class:"value"},I={class:"day-charts mb-1% h-49% w-full"},q={class:"month-charts h-49% w-full"},F={class:"workload-charts mb-1.5% h-49% w-full"},P={class:"month-charts h-49% w-full"},U=p(Object.assign({name:"workwear_stamping-die-management_mold-data-statistics"},{__name:"index",setup(t){const l=o({all:0,stateOk:0,stateSoonNg:0,stateNg:0,stateStop:0,stateOut:0}),s=[{name:"模具总数",key:"all",icon:"icon-mojuguanli",iconBackground:"#50cbfb"},{name:"正常数量",key:"stateOk",icon:"icon-zhengchang",iconBackground:"#7FFF00"},{name:"报废预警",key:"stateSoonNg",icon:"icon-yujing",iconBackground:"#CDCD00"},{name:"报废数量",key:"stateNg",icon:"icon-baofei",iconBackground:"#FF0000"},{name:"暂停数量",key:"stateStop",icon:"icon-zanting",iconBackground:"rgb(247, 109, 109)"},{name:"调出数量",key:"stateOut",icon:"icon-tiaochu",iconBackground:"#EEAD0E"}];return a({url:"/qms/frock/mold/statistics/selectCount",method:"get"}).then((({data:e,error:a})=>{a||(l.value=e)})),(a,t)=>{const o=e,r=k,c=_;return n(),v("div",L,[u(c,{class:"general-view",gutter:20},{default:i((()=>[(n(),v(h,null,y(s,(e=>u(r,{key:e.key,span:4},{default:i((()=>[d("div",N,[d("div",z,[d("div",B,g(e.name),1),d("div",D,[u(o,{"start-value":0,"end-value":l.value[e.key],class:"text-30px dark:text-dark"},null,8,["end-value"])])]),d("div",{class:"icon",style:Y({background:e.iconBackground})},[d("span",{class:b(["iconfont font",e.icon])},null,2)],4)])])),_:2},1024))),64))])),_:1}),u(c,{class:"charts pt-15px",gutter:20},{default:i((()=>[u(r,{span:15,class:"h-full"},{default:i((()=>[d("div",I,[u(C)]),d("div",q,[u(E)])])),_:1}),u(r,{span:9,class:"h-full"},{default:i((()=>[d("div",F,[u(R)]),d("div",P,[u(j)])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-488aff5f"]]);export{U as default};
