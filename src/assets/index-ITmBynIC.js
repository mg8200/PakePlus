import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as l,K as a,L as t,o as s,c as n,w as u,g as i,f as d,s as o,t as r,I as c,v,N as m,M as p,O as f,B as h,P as g,Q as w,F as x,r as k,p as _,S as b,e as y,h as I,ae as U}from"./index-B3PZsRwT.js";import{a as C,v as S}from"./index-DqnulfE2.js";import{_ as T}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as N}from"./index-BThgVJ70.js";const q={class:"w-full flex"},z={class:"flex"},j={class:"w-full flex-y-center justify-end gap-12px"},L={class:"ml-3px"},$={class:"ml-3px"},D=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:a(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,k=t(e,"model");function _(){a("search",k.value)}function b(){k.value.prodNo=null,k.value.model=[],a("reset",k.value)}return(e,l)=>{const a=c,t=v,y=m,I=p,U=f,C=h,S=g,T=w,D=x,P=N;return s(),n(P,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:u((()=>[i(D,{model:k.value,"label-col":{span:5,md:7},class:"search-form"},{default:u((()=>[d("div",q,[i(T,{gutter:[15,8],wrap:"",class:"w-full"},{default:u((()=>[i(y,{span:24,md:12,lg:6,xl:8,xxl:6},{default:u((()=>[i(t,{label:"生产型号",name:"prodNo",class:"m-0","label-col":{}},{default:u((()=>[i(a,{value:k.value.prodNo,"onUpdate:value":l[0]||(l[0]=e=>k.value.prodNo=e),placeholder:"请输入生产型号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:o(_,["enter"])},null,8,["value"])])),_:1})])),_:1}),i(y,{span:24,md:12,lg:6,xl:8,xxl:6},{default:u((()=>[i(t,{label:"日期",name:"model",class:"m-0","label-col":{}},{default:u((()=>[i(I,{value:k.value.time,"onUpdate:value":l[1]||(l[1]=e=>k.value.time=e),"show-time":"",class:"min-form-control","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["value"])])),_:1})])),_:1}),d("div",z,[i(t,{class:"m-0"},{default:u((()=>[d("div",j,[i(C,{type:"primary",ghost:"",class:"mini-btn",onClick:_},{icon:u((()=>[i(U,{class:"align-sub text-icon"})])),default:u((()=>[d("span",L,r(e.$t("common.search")),1)])),_:1}),i(C,{class:"mini-btn",onClick:b},{icon:u((()=>[i(S,{class:"align-sub text-icon"})])),default:u((()=>[d("span",$,r(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),P={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},W={class:"event-form"},B={class:"modal-footer"},R=Object.assign({name:"issuance-management_pulse-process-control"},{__name:"index",setup(l){const a=k({prodNo:"",time:""}),t=_({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{t.current=e,t.pageSize=l,j()}});k([{key:"line",dataIndex:"line",title:"制程线",align:"center",checked:!0},{key:"width",dataIndex:"width",title:"板宽(mm)",align:"center",checked:!0,customRender:({record:e})=>i(c,{style:"height: 22px !important;",value:e.width,onChange:l=>{e.width=l.target.value}},null)},{key:"height",dataIndex:"height",title:"板长(mm)",align:"center",checked:!0,customRender:({record:e})=>i(c,{style:"height: 22px !important;",value:e.height,onChange:l=>{e.height=l.target.value}},null)}]);const n=k([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0},{key:"fullProdNo",dataIndex:"fullProdNo",title:"生产型号",width:160,align:"center",checked:!0,ellipsis:!0},{key:"thickness",dataIndex:"thickness",title:"板厚",width:100,align:"center",checked:!0,ellipsis:!0},{key:"pulseTime",dataIndex:"pulseTime",title:"脉冲时间",width:100,align:"center",checked:!0,ellipsis:!0},{key:"front",dataIndex:"front",title:"正面电流密度",width:100,align:"center",checked:!0,ellipsis:!0},{key:"back",dataIndex:"back",title:"反面电流密度",width:100,align:"center",checked:!0,ellipsis:!0},{key:"width",dataIndex:"width",title:"宽",width:100,align:"center",checked:!0,ellipsis:!0},{key:"length",dataIndex:"length",title:"长",width:100,align:"center",checked:!0,ellipsis:!0},{key:"cycleTime",dataIndex:"cycleTime",title:"循环时间",width:100,align:"center",checked:!0,ellipsis:!0},{key:"pulseWaveform",dataIndex:"pulseWaveform",title:"波形",width:100,align:"center",checked:!0,ellipsis:!0},{key:"lineList",dataIndex:"lineList",title:"制程线",width:180,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>e.lineList.join("、")},{key:"operator",dataIndex:"operator",title:"创建人",width:100,align:"center",checked:!0,ellipsis:!0},{key:"createDate",dataIndex:"createDate",title:"创建时间",width:100,align:"center",checked:!0,ellipsis:!0},{key:"updateUser",dataIndex:"updateUser",title:"修改人",width:100,align:"center",checked:!0,ellipsis:!0},{key:"updateDate",dataIndex:"updateDate",title:"修改时间",width:100,align:"center",checked:!0,ellipsis:!0}]),o=k([]),r=k({}),p=k(!1),f=k([]),g=k(!1),q=k([]),z=k([{value:"1#线",label:"1#线"},{value:"2#线",label:"2#线"},{value:"3#线",label:"3#线"},{value:"4#线",label:"4#线"}]);function j(){var e;g.value=!0,(null==(e=a.value.time)?void 0:e.length)>0?(a.value.startTime=a.value.time[0],a.value.endTime=a.value.time[1]):delete a.value.time,delete a.value.time,C("/mes/pulse/processSpecial/list",{pageSize:t.pageSize,pageNum:t.current,...a.value}).then((({data:e,error:l})=>{l||(e.forEach(((e,l)=>{e.index=l+1})),f.value=e,t.total=e.total)})).finally((()=>{g.value=!1}))}k([{label:"WorkingCenter"},{label:"Storage"}]),k([{label:"HBJL"}]);const L=k([]),$=k("");function R(e){L.value=e}function H(){r.value={},o.value=[],r.value.siteId="HBJL",$.value="制程管制新增",p.value=!0}function M(){var e;if(1!==L.value.length)return null==(e=window.$message)?void 0:e.error("请选择一条数据");const l=f.value.filter((e=>L.value.includes(e.id)));$.value="制程管制修改",r.value=l[0],o.value=l[0].list,p.value=!0}function Y(){var e;if(0==L.value.length)return null==(e=window.$message)?void 0:e.error("请选择数据");const l=f.value.filter((e=>L.value.includes(e.id)));S("/mes/pulse/processSpecial/deleteBatch",l).then((({error:e,data:l})=>{var a;e||(null==(a=window.$message)||a.success("删除成功"),j())}))}const A=k(null);function E(e){return{style:{background:e.id===A.value?"#BAEAFA":""},onClick:()=>{A.value=e.id},class:e.id===A.value?"jl-table-row-selected":""}}function J(){t.current=1,j()}return j(),(l,o)=>{const k=h,_=e,C=b("STable"),A=c,K=v,O=m,F=U,Q=w,G=x,V=N;return s(),y("div",P,[i(D,{model:a.value,"onUpdate:model":o[0]||(o[0]=e=>a.value=e),onReset:o[1]||(o[1]=e=>J()),onSearch:o[2]||(o[2]=e=>J())},null,8,["model"]),i(V,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:u((()=>[i(k,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:H},{default:u((()=>o[17]||(o[17]=[d("span",{class:"ml-3px"},"新增",-1)]))),_:1}),i(k,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:M},{default:u((()=>o[18]||(o[18]=[d("span",{class:"ml-3px"},"修改",-1)]))),_:1}),i(k,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:Y},{default:u((()=>o[19]||(o[19]=[d("span",{class:"ml-3px"},"删除",-1)]))),_:1})])),extra:u((()=>[i(_,{columns:n.value,"onUpdate:columns":o[3]||(o[3]=e=>n.value=e)},null,8,["columns"])])),default:u((()=>[i(C,{columns:n.value,"data-source":f.value,size:"small",bordered:"","custom-row":E,loading:g.value,"row-selection":{selectedRowKeys:L.value,onChange:R},"default-expanded-row-keys":q.value,"row-key":"id","default-expand-all-rows":!0,scroll:{x:"auto",y:"auto"},pagination:t,class:"h-full","row-height":23},null,8,["columns","data-source","loading","row-selection","default-expanded-row-keys","pagination"]),i(T,{visible:p.value,"onUpdate:visible":o[16]||(o[16]=e=>p.value=e),"destroy-on-close":!0,centered:!0,title:$.value,width:"950px"},{footer:u((()=>[d("div",B,[i(k,{type:"primary",onClick:o[14]||(o[14]=e=>{"制程管制新增"==$.value?S("/mes/pulse/processSpecial/add/new",r.value).then((({data:e,error:l})=>{var a;l||(null==(a=window.$message)||a.success("新增成功"),p.value=!1,j())})):S("/mes/pulse/processSpecial/update",r.value).then((({data:e,error:l})=>{var a;l||(null==(a=window.$message)||a.success("修改成功"),p.value=!1,j())}))})},{default:u((()=>o[20]||(o[20]=[I("保存")]))),_:1}),i(k,{onClick:o[15]||(o[15]=e=>p.value=!1)},{default:u((()=>o[21]||(o[21]=[I("关闭")]))),_:1})])])),default:u((()=>[d("div",W,[i(G,{model:r.value,name:"basic","label-col":{},autocomplete:"off"},{default:u((()=>[i(Q,{gutter:15},{default:u((()=>[i(O,{span:12},{default:u((()=>[i(K,{"label-col":{},label:"生产型号",name:"fullProdNo",rules:[{required:!0,message:"请输入生产型号!"}]},{default:u((()=>[i(A,{value:r.value.fullProdNo,"onUpdate:value":o[4]||(o[4]=e=>r.value.fullProdNo=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),i(O,{span:12},{default:u((()=>[i(K,{label:"板厚",name:"thickness",rules:[{required:!0,message:"请输入板厚!"}]},{default:u((()=>[i(A,{value:r.value.thickness,"onUpdate:value":o[5]||(o[5]=e=>r.value.thickness=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),i(O,{span:12},{default:u((()=>[i(K,{"label-col":{},label:"脉冲时间",name:"pulseTime",rules:[{required:!0,message:"请输入脉冲时间!"}]},{default:u((()=>[i(A,{value:r.value.pulseTime,"onUpdate:value":o[6]||(o[6]=e=>r.value.pulseTime=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),i(O,{span:12},{default:u((()=>[i(K,{label:"正面电流密度",name:"front",rules:[{required:!0,message:"请输入正面电流密度!"}]},{default:u((()=>[i(A,{value:r.value.front,"onUpdate:value":o[7]||(o[7]=e=>r.value.front=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),i(O,{span:12},{default:u((()=>[i(K,{label:"反面电流密度",name:"back",rules:[{required:!0,message:"请输入反面电流密度!"}],"label-col":{}},{default:u((()=>[i(A,{value:r.value.back,"onUpdate:value":o[8]||(o[8]=e=>r.value.back=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),i(O,{span:12},{default:u((()=>[i(K,{"label-col":{},label:"宽",name:"width",rules:[{required:!0,message:"请输入宽!"}]},{default:u((()=>[i(A,{value:r.value.width,"onUpdate:value":o[9]||(o[9]=e=>r.value.width=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),i(O,{span:12},{default:u((()=>[i(K,{"label-col":{},label:"长",name:"length",rules:[{required:!0,message:"请输入长!"}]},{default:u((()=>[i(A,{value:r.value.length,"onUpdate:value":o[10]||(o[10]=e=>r.value.length=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),i(O,{span:12},{default:u((()=>[i(K,{"label-col":{},label:"循环时间",name:"cycleTime",rules:[{required:!0,message:"请输入循环时间!"}]},{default:u((()=>[i(A,{value:r.value.cycleTime,"onUpdate:value":o[11]||(o[11]=e=>r.value.cycleTime=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),i(O,{span:12},{default:u((()=>[i(K,{"label-col":{},label:"波形",name:"pulseWaveform",rules:[{required:!0,message:"请输入波形!"}]},{default:u((()=>[i(A,{value:r.value.pulseWaveform,"onUpdate:value":o[12]||(o[12]=e=>r.value.pulseWaveform=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),i(O,{span:12},{default:u((()=>[i(K,{label:"制程线",name:"lineList","label-col":{}},{default:u((()=>[i(F,{value:r.value.lineList,"onUpdate:value":o[13]||(o[13]=e=>r.value.lineList=e),mode:"multiple",placeholder:"请选择制程线",options:z.value},null,8,["value","options"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible","title"])])),_:1})])}}});export{R as default};
