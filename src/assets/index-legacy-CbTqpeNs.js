System.register(["./count-to.vue_vue_type_script_setup_true_lang-legacy-XIy8K86e.js","./index-legacy-BH1Y34Mi.js","./index-legacy-JzSJVdOM.js","./echarts-legacy-BpbZ1nhM.js","./index-legacy-nbfFjkW3.js","./index-legacy-Ccuh6Ibz.js","./installCanvasRenderer-legacy-DDAXrZCG.js"],(function(e,a){"use strict";var t,l,n,i,o,d,r,s,u,c,f,p,v,b,g,m,h,x,w,_,y,q,N,k,E,T,P,S,R,O,C,j,A,I,W,L,z,M,D,F,K,U;return{setters:[function(e){t=e._},function(e){l=e.Z,n=e.d,i=e.K,o=e.L,d=e.o,r=e.c,s=e.w,u=e.g,c=e.f,f=e.s,p=e.t,v=e.I,b=e.v,g=e.N,m=e.O,h=e.B,x=e.P,w=e.Q,_=e.F,y=e.cT,q=e.r,N=e.a0,k=e.af,E=e.e,T=e.J,P=e.h,S=e.a1,R=e.cF,O=e.b,C=e.aj,j=e.al,A=e.ac,I=e.i,W=e.cU,L=e.a7,z=e.cH},function(e){M=e.C},function(e){D=e.u},function(e){F=e.D,K=e.a},function(e){U=e._},null],execute:function(){var a=document.createElement("style");a.textContent='@charset "UTF-8";.equipment-status.WORK[data-v-95aac095]{color:#1cd66c}.equipment-status.WAIT[data-v-95aac095]{color:#8e9dff}.equipment-status.ALARM[data-v-95aac095]{color:#ff3030}.equipment-status.IDLE[data-v-95aac095]{color:#26deca}.equipment-status.STOP[data-v-95aac095]{color:#fedc69}.borehole-data-page .left-list[data-v-63ebf542]{width:calc(100% - 350px)}.borehole-data-page .list[data-v-63ebf542] .ant-spin-nested-loading,.borehole-data-page .list[data-v-63ebf542] .ant-spin-nested-loading .ant-spin-container{width:100%;height:100%}.borehole-data-page .list[data-v-63ebf542] .ant-spin-nested-loading .ant-row{margin:0!important}.borehole-data-page .list .row[data-v-63ebf542]{row-gap:6px}.borehole-data-page .list .row .col[data-v-63ebf542]{padding-left:3px;padding-right:3px}@media (min-width: 1100px){.borehole-data-page .list .row .col-1100-24[data-v-63ebf542]{display:block;flex:0 0 100%;max-width:100%}}@media (min-width: 1400px){.borehole-data-page .list .row .col-1400-12[data-v-63ebf542]{display:block;flex:0 0 50%;max-width:50%}}@media (min-width: 1500px){.borehole-data-page .list .row .col-1500-8[data-v-63ebf542]{display:block;flex:0 0 33.333333%;max-width:33.333333%}}@media (min-width: 1700px){.borehole-data-page .list .row .col-xxl-6[data-v-63ebf542]{display:block;flex:0 0 25%;max-width:25%}}.borehole-data-page .list .card[data-v-63ebf542]{position:relative;width:100%;box-shadow:0 0 10px 1px rgba(128,128,128,.2);border-radius:10px;background:#fff;display:flex;flex-wrap:wrap;padding:15px 5px 15px 15px}.borehole-data-page .list .card .device-data[data-v-63ebf542],.borehole-data-page .list .card .state[data-v-63ebf542]{width:calc(100% - 90px);padding-right:8px;font-size:13px}.borehole-data-page .list .card .device-data .data[data-v-63ebf542],.borehole-data-page .list .card .state .data[data-v-63ebf542]{display:flex}.borehole-data-page .list .card .device-data .data .label[data-v-63ebf542],.borehole-data-page .list .card .state .data .label[data-v-63ebf542]{font-weight:700;padding-right:5px;min-width:79px;text-align-last:justify}.borehole-data-page .list .card .device-data .data .label[data-v-63ebf542]:after,.borehole-data-page .list .card .state .data .label[data-v-63ebf542]:after{content:":"}.borehole-data-page .list .card .device-data .data .value[data-v-63ebf542],.borehole-data-page .list .card .state .data .value[data-v-63ebf542]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.borehole-data-page .list .card .device-data .data .value.progress[data-v-63ebf542] .ant-progress-line,.borehole-data-page .list .card .state .data .value.progress[data-v-63ebf542] .ant-progress-line{margin-bottom:0}.borehole-data-page .list .card .state[data-v-63ebf542]{width:90px!important;display:flex;justify-content:center;align-items:center;position:relative}.borehole-data-page .list .card .state .label[data-v-63ebf542]{position:absolute;bottom:10px;left:15px;font-weight:700}.borehole-data-page .list .card .charts[data-v-63ebf542]{width:90px;margin-top:8px}.borehole-data-page .list .card .charts .title[data-v-63ebf542]{width:100%;font-weight:700}.borehole-data-page .list .card .view-device-data[data-v-63ebf542]{position:absolute;top:0;right:5px}.borehole-data-page .right-msg[data-v-63ebf542]{width:350px;padding:8px}.borehole-data-page .right-msg .right-card[data-v-63ebf542]{position:relative}.borehole-data-page .right-msg .right-card .angle[data-v-63ebf542]{position:absolute;width:100%;height:100%;top:0;left:0}.borehole-data-page .right-msg .right-card .angle .left-top[data-v-63ebf542]{position:absolute;width:15px;height:15px;background:transparent;border-top:3px solid #646cff;border-left:3px solid #646cff;z-index:99}.borehole-data-page .right-msg .right-card .angle .right-top[data-v-63ebf542]{top:0;right:0;position:absolute;width:15px;height:15px;background:transparent;border-top:3px solid #646cff;border-right:3px solid #646cff;z-index:99}.borehole-data-page .right-msg .right-card .angle .left-bottom[data-v-63ebf542]{bottom:0;left:0;position:absolute;width:15px;height:15px;background:transparent;border-bottom:3px solid #646cff;border-left:3px solid #646cff;z-index:99}.borehole-data-page .right-msg .right-card .angle .right-bottom[data-v-63ebf542]{bottom:0;right:0;position:absolute;width:15px;height:15px;background:transparent;border-bottom:3px solid #646cff;border-right:3px solid #646cff;z-index:99}.borehole-data-page .right-msg .card-title[data-v-63ebf542]{font-size:28px;text-align:center;color:#646cff;font-weight:700}.borehole-data-page .right-msg .card-content .device-count[data-v-63ebf542]{width:50px;height:50px;line-height:50px;text-align:center;font-size:48px;font-weight:700;font-family:Arial,sans-serif;color:#1d26c0;border:1px solid #d0d0d6;box-shadow:1px 1px 4px 2px #d0d0d6}.borehole-data-page .right-msg .card-content .card-instructions[data-v-63ebf542]{line-height:30px}.borehole-data-page .right-msg .card-content .card-instructions .equipment-status.WORK[data-v-63ebf542]{background-color:#1cd66c}.borehole-data-page .right-msg .card-content .card-instructions .equipment-status.WAIT[data-v-63ebf542]{background-color:#8e9dff}.borehole-data-page .right-msg .card-content .card-instructions .equipment-status.ALARM[data-v-63ebf542]{background-color:#ff3030}.borehole-data-page .right-msg .card-content .card-instructions .equipment-status.IDLE[data-v-63ebf542]{background-color:#26deca}.borehole-data-page .right-msg .card-content .card-instructions .equipment-status.STOP[data-v-63ebf542]{background-color:#fedc69}@media (min-width: 1600px){:where(.css-dev-only-do-not-override-1qjex96).ant-col-xxl-4[data-v-63ebf542]{display:block;flex:0 0 16.6666666667%;max-width:16.6666666667%}}\n',document.head.appendChild(a);var B={class:"w-full flex"},$={class:"flex"},G={class:"w-full flex-y-center justify-end gap-12px"},H={class:"ml-3px"},J={class:"ml-3px"},Q=n({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:i(["search","reset"],["update:model"]),setup:function(e,a){var t=a.emit,l=o(e,"model");function n(){t("search",l.value)}function i(){l.value={subEqpName:null,pgmPathName:null},t("reset",l.value)}return function(e,a){var t=v,o=b,y=g,q=m,N=h,k=x,E=w,T=_,P=M;return d(),r(P,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:s((function(){return[u(T,{ref:"formRef",model:l.value,"label-col":{span:5,md:7},class:"search-form"},{default:s((function(){return[c("div",B,[u(E,{gutter:[15,8],wrap:"",class:"w-full"},{default:s((function(){return[u(y,{span:24,md:16,lg:12,xl:8,xxl:6},{default:s((function(){return[u(o,{label:"设备名称",name:"subEqpName",class:"m-0","label-col":{}},{default:s((function(){return[u(t,{value:l.value.subEqpName,"onUpdate:value":a[0]||(a[0]=function(e){return l.value.subEqpName=e}),placeholder:"请输入设备名称",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:f(n,["enter"])},null,8,["value"])]})),_:1})]})),_:1}),u(y,{span:24,md:16,lg:12,xl:8,xxl:6},{default:s((function(){return[u(o,{label:"生产型号",name:"pgmPathName",class:"m-0","label-col":{}},{default:s((function(){return[u(t,{value:l.value.pgmPathName,"onUpdate:value":a[1]||(a[1]=function(e){return l.value.pgmPathName=e}),placeholder:"请输入生产型号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:f(n,["enter"])},null,8,["value"])]})),_:1})]})),_:1}),c("div",$,[u(o,{class:"m-0"},{default:s((function(){return[c("div",G,[u(N,{type:"primary",ghost:"",class:"mini-btn",onClick:n},{icon:s((function(){return[u(q,{class:"align-sub text-icon"})]})),default:s((function(){return[c("span",H,p(e.$t("common.search")),1)]})),_:1}),u(N,{class:"mini-btn",onClick:i},{icon:s((function(){return[u(k,{class:"align-sub text-icon"})]})),default:s((function(){return[c("span",J,p(e.$t("common.reset")),1)]})),_:1})])]})),_:1})])]})),_:1})])]})),_:1},8,["model"])]})),_:1})}}}),V={__name:"state-chart",props:{list:{type:Array,default:function(){return[]}}},setup:function(e){var a=e,t=y().store,l=q([]),n=N((function(){return t.drilling_equipment_state}),(function(e){l.value=null==e?void 0:e.map((function(e){return{key:e.value,name:e.label,value:0}}))}),{deep:!0}),i=D((function(){return{tooltip:{trigger:"item"},title:{text:"设备状态统计",left:"center",top:"15",textStyle:{color:"#646cff",fontWeight:"bold",fontSize:"1.5rem"}},legend:{bottom:"1%",left:"center",itemStyle:{borderWidth:0}},series:[{color:["#1CD66C","#8e9dff","#FF3030","#26deca","#fedc69"],name:"设备状态",type:"pie",radius:["45%","70%"],avoidLabelOverlap:!1,center:["50%","50%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:1},label:{show:!1,position:"center"},labelLine:{show:!1},data:l.value}]}}),!1),o=i.domRef,r=i.updateOptions;return N((function(){return a.list}),(function(e){var a=e.reduce((function(e,a){return a.equipmentStatus&&(e[a.equipmentStatus]=(e[a.equipmentStatus]||0)+1),e}),{});l.value.forEach((function(e){e.value=a[e.key]})),r((function(e){return e.series[0].data=l.value,e}))}),{deep:!0}),k((function(){n()})),function(e,a){return d(),E("div",{ref_key:"domRef",ref:o,class:"h-360px overflow-hidden"},null,512)}}},X=T({__name:"details",props:{data:{type:Object,default:function(){return{}}},dataModifiers:{}},emits:["update:data"],setup:function(e){var a=o(e,"data"),t=y().store,l=q({WORK:"",WAIT:"",ALARM:"",IDLE:"",STOP:""});return t.drilling_equipment_state.forEach((function(e){l.value[e.value]=e.label})),function(e,t){var n=F,i=U,o=K;return d(),r(o,{title:"",column:2,bordered:"",size:"small"},{default:s((function(){return[u(n,{label:"设备名称"},{default:s((function(){return[P(p(a.value.subEqpName),1)]})),_:1}),u(n,{label:"时间"},{default:s((function(){return[P(p(a.value.dateTime),1)]})),_:1}),u(n,{label:"直径表名称"},{default:s((function(){return[P(p(a.value.diaPath),1)]})),_:1}),u(n,{label:"程序加工百分数"},{default:s((function(){return[u(i,{percent:Number(a.value.runPresent),"stroke-color":{"0%":"#108ee9","100%":"#87d068"}},null,8,["percent"])]})),_:1}),u(n,{label:"钻带名称"},{default:s((function(){return[P(p(a.value.pgmPath),1)]})),_:1}),u(n,{label:"稼动率"},{default:s((function(){return[P(p(a.value.duty),1)]})),_:1}),u(n,{label:"开机时间"},{default:s((function(){return[P(p(a.value.shiftOperateTime),1)]})),_:1}),u(n,{label:"加工时间"},{default:s((function(){return[P(p(a.value.lotRunTime),1)]})),_:1}),u(n,{label:"等待时间"},{default:s((function(){return[P(p(a.value.shiftWaitTime),1)]})),_:1}),u(n,{label:"错误时间"},{default:s((function(){return[P(p(a.value.shiftErrorTime),1)]})),_:1}),u(n,{label:"机台当前状态"},{default:s((function(){return[c("span",{class:S(["equipment-status",a.value.equipmentStatus])},p(l.value[a.value.equipmentStatus]),3)]})),_:1}),u(n,{label:"轴开启状态"},{default:s((function(){return[P(p(a.value.axisStatus),1)]})),_:1}),u(n,{label:"主轴开启数量"},{default:s((function(){return[P(p(a.value.axisRunCount),1)]})),_:1})]})),_:1})}}},[["__scopeId","data-v-95aac095"]]),Y={class:"borehole-data-page h-full w-full flex"},Z={class:"left-list min-h-500px flex-col-stretch gap-5px overflow-hidden lt-sm:overflow-auto"},ee={class:"list h-full w-full overflow-auto"},ae={key:0,class:"row flex flex-wrap"},te={class:"device-data"},le={class:"data"},ne=["title"],ie={class:"data"},oe=["title"],de={class:"data"},re=["title"],se={class:"data"},ue=["title"],ce={class:"data"},fe=["title"],pe={class:"data flex"},ve={class:"value flex gap-3px color-#646cff"},be=["onClick"],ge={class:"state w-full"},me={class:"right-msg"},he={class:"right-card bg-#fff pb-30px pt10px"},xe={class:"card-content flex flex-center gap-15px"},we={class:"right-card mt15px bg-#fff pb-30px pt10px"},_e={class:"card-content"},ye={class:"right-card mt15px bg-#fff pb-30px pl10px pt15px"},qe={class:"card-content"},Ne={class:"text"},ke=Object.assign({name:"collection-management_forming-machine-data-acquisition"},{__name:"index",setup:function(e){var a=y().getDict,n=q([]);a("drilling_equipment_state").then((function(e){n.value=e}));var i=R.PRESENTED_IMAGE_SIMPLE,o=q({subEqpName:null,pgmPathName:null}),f=q([]),v=q(!1),b=q([]),g=q(!1);function m(){g.value=!0,(o.value,l({url:"/mes/agv/plan/rhythm/rate/milling/monitor",method:"GET"})).then((function(e){var a=e.data;e.error||(null==a||a.forEach((function(e,a){e.index=a+1,e.TUuid=L.generate()})),f.value=a,b.value=a)})).finally((function(){return g.value=!1}))}function h(e){return b.value.filter((function(a){return e(a)}))}function x(){f.value=o.value.subEqpName||o.value.pgmPathName?o.value.subEqpName&&o.value.pgmPathName?h((function(e){var a,t;return(null==e||null===(a=e.subEqpName)||void 0===a?void 0:a.includes(o.value.subEqpName))&&(null==e||null===(t=e.pgmPath)||void 0===t?void 0:t.includes(o.value.pgmPathName))})):o.value.subEqpName?h((function(e){var a;return null==e||null===(a=e.subEqpName)||void 0===a?void 0:a.includes(o.value.subEqpName)})):o.value.pgmPathName?h((function(e){var a;return null==e||null===(a=e.pgmPath)||void 0===a?void 0:a.includes(o.value.pgmPathName)})):[]:b.value}m();var w=null;N((function(){return o.value}),(function(){w||(w=setTimeout((function(){clearTimeout(w),w=null,x()}),500))}),{deep:!0});var _=setInterval((function(){m()}),3e5);function T(){f.value=b.value}function M(e){return Number(e)>=100?"完成":"".concat(e,"%")}var D=O((function(){return b.value.length.toString().padStart(3,"0").split("")})),F={WORK:"#1CD66C",WAIT:"#8e9dff",ALARM:"#FF3030",IDLE:"#26deca",STOP:"#fedc69"},K=q(null),B=window.$useModal({modalOption:{title:"设备详情",showConfirmBtn:!1,confirmBtnText:"关闭",destroyOnClose:!0,width:"955px"},component:function(){return u(X,{data:K.value,"onUpdate:data":function(e){return K.value=e}},null)}}),$=B.updateModalOptions,G=B.handleShow;return k((function(){clearInterval(_),_=null})),function(e,a){var l=U,g=R,m=z,h=t;return d(),E("div",Y,[c("div",Z,[u(Q,{model:o.value,"onUpdate:model":a[0]||(a[0]=function(e){return o.value=e}),onReset:T,onSearch:x},null,8,["model"]),c("div",ee,[u(m,{tip:"数据加载中...",spinning:v.value,class:"h-full w-full"},{default:s((function(){return[f.value.length?(d(),E("div",ae,[(d(!0),E(C,null,j(f.value,(function(e,t){var n;return d(),E("div",{key:t,class:"col col-1100-24 col-1400-12 col-xxl-6 col-1500-8"},[c("div",{class:"card flex",style:A({border:"2px solid ".concat(F[e.equipmentStatus])})},[c("div",te,[c("div",le,[a[1]||(a[1]=c("div",{class:"label"},"设备名称",-1)),c("div",{class:"value",title:e.subEqpName},p(e.subEqpName),9,ne)]),c("div",ie,[a[2]||(a[2]=c("div",{class:"label"},"时 间",-1)),c("div",{class:"value",title:e.dateTime},p(e.dateTime),9,oe)]),c("div",de,[a[3]||(a[3]=c("div",{class:"label"},"稼动率",-1)),c("div",{class:"value",title:e.duty},p(e.duty),9,re)]),c("div",se,[a[4]||(a[4]=c("div",{class:"label"},"开机时间",-1)),c("div",{class:"value",title:e.startTime},p(e.shiftOperateTime),9,ue)]),c("div",ce,[a[5]||(a[5]=c("div",{class:"label"},"加工时间",-1)),c("div",{class:"value",title:e.lotRunTime},p(e.lotRunTime),9,fe)]),c("div",pe,[a[6]||(a[6]=c("div",{class:"label font-bold"},"轴开启状态",-1)),c("div",ve,[(d(!0),E(C,null,j(null===(n=e.axisStatus)||void 0===n?void 0:n.split(""),(function(e,a){return d(),E("span",{key:a,class:S(["pl-3px pr-3px",1===Number(e)?"bg-green":"bg-#eee"])},p(a+1),3)})),128))])])]),c("div",{class:"view-device-data cursor-pointer color-#646cff",onClick:function(a){return function(e){$({title:"".concat(e.subEqpName,"设备详情")}),K.value=e,G()}(e)}},"查看详情",8,be),c("div",ge,[a[7]||(a[7]=c("div",{class:"label"},"加工进度",-1)),u(l,{percent:Number(e.runPresent),format:M,type:"dashboard",size:[90,90],"stroke-color":{"0%":"#87d068","100%":"#108ee9"}},null,8,["percent"])])],4)])})),128))])):(d(),r(g,{key:1,image:I(i)},null,8,["image"]))]})),_:1},8,["spinning"])])]),c("div",me,[c("div",he,[a[8]||(a[8]=W('<div class="angle" data-v-63ebf542><div class="left-top" data-v-63ebf542></div><div class="right-top" data-v-63ebf542></div><div class="left-bottom" data-v-63ebf542></div><div class="right-bottom" data-v-63ebf542></div></div><div class="card-title" data-v-63ebf542>设备总数</div>',2)),c("div",xe,[(d(!0),E(C,null,j(D.value,(function(e,a){return d(),r(h,{key:a,"start-value":0,"end-value":Number(e),class:"device-count text-30px dark:text-dark"},null,8,["end-value"])})),128))])]),c("div",we,[a[9]||(a[9]=W('<div class="angle" data-v-63ebf542><div class="left-top" data-v-63ebf542></div><div class="right-top" data-v-63ebf542></div><div class="left-bottom" data-v-63ebf542></div><div class="right-bottom" data-v-63ebf542></div></div>',1)),c("div",_e,[u(V,{list:b.value},null,8,["list"])])]),c("div",ye,[a[12]||(a[12]=W('<div class="angle" data-v-63ebf542><div class="left-top" data-v-63ebf542></div><div class="right-top" data-v-63ebf542></div><div class="left-bottom" data-v-63ebf542></div><div class="right-bottom" data-v-63ebf542></div></div>',1)),c("div",qe,[a[11]||(a[11]=c("div",{class:"card-title"},"左侧设备状态说明",-1)),(d(!0),E(C,null,j(n.value,(function(e,t){return d(),E("div",{key:t,class:"card-instructions flex-center justify-start"},[a[10]||(a[10]=P(" 边框为 ")),c("div",{class:S(["equipment-status type h-14px w-14px",e.value])},null,2),c("div",Ne,"代表"+p(e.label)+"的设备",1)])})),128))])])])])}}});e("default",T(ke,[["__scopeId","data-v-63ebf542"]]))}}}));
