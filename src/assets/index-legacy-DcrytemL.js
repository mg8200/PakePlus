!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function n(t,n,a){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var l=a.call(t,n||"default");if("object"!=e(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}System.register(["./table-legacy-BfQK1xrs.js","./common-search.vue_vue_type_script_setup_true_lang-legacy-BetNIGyO.js","./modal.vue_vue_type_style_index_0_lang-legacy-DP5xhvDE.js","./index-legacy-BH1Y34Mi.js","./index-legacy-oYChRqnr.js","./table-column-setting.vue_vue_type_script_setup_true_lang-legacy-zNkjfv7c.js","./api-legacy-B6UkH1eb.js","./index-legacy-JzSJVdOM.js","./fromPairs-legacy-A8Lh0tdr.js"],(function(e,a){"use strict";var l,r,i,c,o,s,d,u,f,p,m,g,y,v,k,h,b,x,I,w;return{setters:[function(e){l=e._},function(e){r=e._},function(e){i=e._},function(e){c=e.Z,o=e.r,s=e.o,d=e.c,u=e.w,f=e.g,p=e.aa,m=e.h,g=e.B,y=e.ah,v=e.ai,k=e.J,h=e.b,b=e.e,x=e.f,I=e.a5},function(e){w=e._},null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".test-rack-management-list-tabs[data-v-67e73689] .ant-tabs-content-holder{height:calc(100% - 46px)}.test-rack-management-list-tabs[data-v-67e73689] .ant-tabs-content-holder .ant-tabs-content{height:100%}.titClass .bg-1{background-color:#9bf0d9}.titClass .bg-2{background-color:#efef88}.titClass .bg-3{background-color:#f76d6d}\n",document.head.appendChild(a);var S=k({__name:"list",props:{testStandId:{type:String,default:null}},setup:function(e){var t=e,n=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,fixed:"left",align:"center",checked:!0,ellipsis:!0},{key:"prodNo",dataIndex:"prodNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,width:150},{key:"createTime",dataIndex:"createTime",title:"领取日期",align:"center",checked:!0,ellipsis:!0,customRender:function(e){var t=e.record;return p(t.createTime).format("YYYY-MM-DD HH:mm:ss")}},{key:"receive",dataIndex:"receive",title:"领取人",align:"center",checked:!0,ellipsis:!0},{key:"remark",dataIndex:"remark",title:"备注",align:"center",checked:!0,ellipsis:!0},{key:"table-cz",dataIndex:"table-cz",title:"操作",align:"center",checked:!0,ellipsis:!0,width:100,customRender:function(e){var t=e.record;return f(g,{type:"link",danger:!0,class:"pl-3px pr-3px",onClick:function(){x(t,1)}},{default:function(){return[m("删除")]}})}}],a=o([]),l=o(!1);function r(){var e;l.value=!0,(e={testStandId:t.testStandId},c({url:"/qms/agv/frock/testStand/record/list",method:"get",params:e})).then((function(e){var t=e.data;e.error||(t.forEach((function(e,t){e.dataIndex=t+1})),a.value=t)})).finally((function(){return l.value=!1}))}r();var i,k=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,fixed:"left",align:"center",checked:!0,ellipsis:!0},{key:"lotNo",dataIndex:"lotNo",title:"LOT号",align:"center",checked:!0,ellipsis:!0,width:150},{key:"prodNo",dataIndex:"prodNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,width:150},{key:"testStandProdNo",dataIndex:"testStandProdNo",title:"测试架编号",align:"center",checked:!0,ellipsis:!0,width:180},{key:"testNum",dataIndex:"testNum",title:"使用次数",align:"center",checked:!0,ellipsis:!0},{key:"testInitTotal",dataIndex:"testInitTotal",title:"初始次数",align:"center",checked:!0,ellipsis:!0},{key:"createTime",dataIndex:"createTime",title:"录入时间",align:"center",checked:!0,ellipsis:!0,width:180},{key:"operator",dataIndex:"operator",title:"录入人",align:"center",checked:!0,ellipsis:!0},{key:"remark",dataIndex:"remark",title:"备注",align:"center",checked:!0,ellipsis:!0},{key:"table-cz",dataIndex:"table-cz",title:"操作",align:"center",checked:!0,ellipsis:!0,width:100,customRender:function(e){var t=e.record;return f(g,{type:"link",danger:!0,class:"pl-3px pr-3px",onClick:function(){x(t,2)}},{default:function(){return[m("删除")]}})}}],h=o(!1),b=o([]);function x(e,t){window.$modal.confirm({title:"确定删除?",onOk:function(){var n,a;1===t?(a=e.testStandReceiveUuid,n=c({url:"/qms/agv/frock/testStand/record/delete/".concat(a),method:"delete"})):n=function(e){return c({url:"/qms/agv/frock/testStand/use/delete/".concat(e),method:"delete"})}(e.testStandUseUuid),n.then((function(e){e.error||(window.$message.success("删除成功"),r())}))},onCancel:function(){}})}h.value=!1,(i={testStandId:t.testStandId},c({url:"/qms/agv/frock/testStand/use/list",method:"get",params:i})).then((function(e){var t=e.data;e.error||(t.forEach((function(e,t){e.dataIndex=t+1})),b.value=t)})).finally((function(){return h.value=!1}));var I=o("1");return function(e,t){var r=w,i=y,c=v;return s(),d(c,{activeKey:I.value,"onUpdate:activeKey":t[0]||(t[0]=function(e){return I.value=e}),class:"test-rack-management-list-tabs h-full w-full"},{default:u((function(){return[f(i,{key:"1",tab:"领取记录"},{default:u((function(){return[f(r,{columns:n,"data-source":a.value,"row-key":"testStandReceiveUuid",scroll:{y:"auto"},loading:l.value,pagination:!1,class:"h-full",bordered:"",size:"small"},null,8,["data-source","loading"])]})),_:1}),f(i,{key:"2",tab:"使用记录","force-render":""},{default:u((function(){return[f(r,{columns:k,"data-source":b.value,"row-key":"testStandUseUuid",scroll:{y:"auto"},loading:h.value,pagination:!1,class:"h-full",bordered:"",size:"small"},null,8,["data-source","loading"])]})),_:1})]})),_:1},8,["activeKey"])}}},[["__scopeId","data-v-67e73689"]]),_={class:"mold-management-page min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};e("default",Object.assign({name:"workwear_test-rack-management"},{__name:"index",setup:function(e){var a=o(null),c=o(null),d=o({prodNo:null,time:null}),p=[{type:"input",key:"prodNo",label:"生产型号",placeholder:"请输入生产型号",span:24,md:12,lg:8,xl:8,xxl:6},{type:"dateRangePicker",key:"time",label:"日期",span:24,md:12,lg:10,xl:8,xxl:6}],m=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"prodNo",dataIndex:"prodNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,width:180,customRender:function(e){var t=e.record;return f("a",{class:"color-blue",onClick:function(){return e=t,j.value=e.testStandId,void(O.value=!0);var e}},[t.prodNo])}},{key:"type",dataIndex:"type",title:"测试架类型",align:"center",checked:!0,ellipsis:!0},{key:"testStandId",dataIndex:"testStandId",title:"测试架编码",align:"center",checked:!0,ellipsis:!0},{key:"stateStr",dataIndex:"stateStr",title:"状态",align:"center",checked:!0,ellipsis:!0},{key:"totalCount",dataIndex:"totalCount",title:"总使用次数",align:"center",checked:!0,ellipsis:!0},{key:"location",dataIndex:"location",title:"存放位置",align:"center",checked:!0,ellipsis:!0},{key:"createBy",dataIndex:"createBy",title:"申请人",align:"center",checked:!0,ellipsis:!0},{key:"createDate",dataIndex:"createDate",title:"申请日期",align:"center",checked:!0,ellipsis:!0}],g=h((function(){var e,a=function(e){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?arguments[a]:{};a%2?t(Object(l),!0).forEach((function(t){n(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):t(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}({},d.value);return null!==(e=d.value)&&void 0!==e&&e[0]&&(a.startTime=dayjs(d.value.time[0]).format("YYYY-MM-DD"),a.endTime=dayjs(d.value.time[1]).format("YYYY-MM-DD")),delete a.time,a}));function y(){c.value.getData(1)}function v(){I((function(){d.value={keywords:null,noticeState:null},y()}))}function k(e){return e.totalCount>2e5?{backgroundColor:"rgb(155, 240, 217)"}:e.totalCount>19e4&&e.totalCount<195e3?{backgroundColor:"rgb(239, 239, 136)"}:e.totalCount>195e3&&e.totalCount<2e5?{backgroundColor:"rgb(247, 109, 109)"}:{}}var w=function(e){return{style:k(e)}},j=o(null),O=o(!1);function C(){O.value=!1}return function(e,t){return s(),b("div",_,[f(r,{ref_key:"commonSearchRef",ref:a,searchParams:d.value,"onUpdate:searchParams":t[0]||(t[0]=function(e){return d.value=e}),"form-list":p,"is-search":!0,onSearch:y,onReset:v},null,8,["searchParams"]),f(l,{ref_key:"tableRef",ref:c,searchParams:g.value,"onUpdate:searchParams":t[1]||(t[1]=function(e){return g.value=e}),column:m,"show-row-selection":!1,"page-size":200,"row-key":"testStandId",class:"mold-management-table",scroll:{y:"auto"},"is-init-get-data":"","table-custom-row":w,url:"/qms/agv/frock/testStand/list"},{footer:u((function(){return t[3]||(t[3]=[x("div",{class:"titClass w-full flex gap-15px"},[x("div",{class:"flex items-center"},[x("span",null,"背景色为"),x("span",{class:"bg-1 ml-3px mr-3px inline-block h20px w20px",style:{"background-color":"rgb(155, 240, 217)"}}),x("span",null,"是总使用次数大于200000次")]),x("div",{class:"flex items-center"},[x("span",null,"背景色为"),x("span",{class:"bg-2 ml-3px mr-3px inline-block h20px w20px",style:{"background-color":"rgb(239, 239, 136)"}}),x("span",null,"是总使用次数:190001-195000次")]),x("div",{class:"flex items-center"},[x("span",null,"背景色为"),x("span",{class:"bg-3 ml-3px mr-3px inline-block h20px w20px",style:{"background-color":"rgb(247, 109, 109)"}}),x("span",null,"是总使用次数195001-200000次")])],-1)])})),_:1},8,["searchParams"]),f(i,{visible:O.value,"onUpdate:visible":t[2]||(t[2]=function(e){return O.value=e}),title:"记录",width:"80vw",height:"70vh",centered:!0,"destroy-on-close":!0,onClose:C},{footer:u((function(){return t[4]||(t[4]=[x("div",null,null,-1)])})),default:u((function(){return[f(S,{"test-stand-id":j.value},null,8,["test-stand-id"])]})),_:1},8,["visible"])])}}}))}}}))}();
