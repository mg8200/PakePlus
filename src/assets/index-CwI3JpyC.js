import{_ as e}from"./table-DoFSI9NT.js";import{_ as a}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{Z as t,r as l,a2 as n,o as i,e as s,g as o,w as c,a3 as r,c as d,i as u,X as p,h as m,a5 as g,B as h}from"./index-B3PZsRwT.js";import{E as f}from"./EditOutlined-5FYoGiVM.js";import{D as y}from"./DeleteOutlined-CWT7lRAZ.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";import"./index-BThgVJ70.js";const x={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},k=Object.assign({name:"manage_config-manage_board-position-definition"},{__name:"index",setup(k){const b=l(null),v=l({locationNo:null,locationName:null}),_=[{type:"input",key:"locationNo",label:"货位编码",placeholder:"请输入货位编码",span:24,md:12,lg:8,xl:8,xxl:4},{type:"input",key:"locationName",label:"货位名称",placeholder:"请输入货位名称",span:24,md:12,lg:8,xl:8,xxl:4}],w=l(null),N=l([]),C=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"locationNo",dataIndex:"locationNo",title:"货位编码",align:"center",checked:!0,ellipsis:!0},{key:"locationName",dataIndex:"locationName",title:"货位名称",align:"center",checked:!0,ellipsis:!0},{key:"size",dataIndex:"size",title:"货位大小",align:"center",checked:!0,ellipsis:!0},{key:"createBy",dataIndex:"createBy",title:"录入员",align:"center",checked:!0,ellipsis:!0},{key:"createDate",dataIndex:"createDate",title:"创建时间",align:"center",checked:!0,ellipsis:!0},{key:"updateBy",dataIndex:"updateBy",title:"修改人",align:"center",checked:!0,ellipsis:!0},{key:"updateDate",dataIndex:"updateDate",title:"修改时间",align:"center",checked:!0,ellipsis:!0}];function I(e){N.value=e}const j=l("add"),{handleClose:z,handleLoading:D,handleShow:O,updateModalOptions:B}=window.$useModal({modalOption:{title:"新增网板仓位定义",width:"600px",height:"285px",destroyOnClose:!0,confirmBtnText:"保存"},formData:{locationNo:null,locationName:null,size:null},formList:[{type:"input",key:"locationNo",label:"货位编码",placeholder:"请输入货位编码",span:24,rule:[{required:!0,message:"请输入货位编码",trigger:"blur"}]},{type:"input",key:"locationName",label:"货位名称",placeholder:"请输入货位名称",span:24,rule:[{required:!0,message:"请输入货位名称",trigger:"blur"}]},{type:"input",key:"size",label:"货位大小",placeholder:"请输入货位大小",span:24}],onClose:()=>{},onOk:e=>{let a;D(!0);let l="";"add"===j.value?(l="新增",a=function(e){return t({url:"/qms/scrscreen/scrscreenLocation/add",method:"post",data:e})}(e)):(l="修改",a=function(e){return t({url:"/qms/scrscreen/scrscreenLocation/update",method:"post",data:e})}(e)),a.then((({error:e})=>{e||(window.$message.success("".concat(l,"网板仓位定义成功")),w.value.tableSelectChange([]),z(),P())})).finally((()=>{D(!1)}))}});function L(e){j.value=e,"edit"===e?(B({title:"修改网板仓位定义"}),O(N.value[0])):(B({title:"新增网板仓位定义"}),O({locationNo:null,locationName:null,size:null}))}function q(){window.$modal.confirm({title:o("div",null,[m("确定将所勾选的项进行"),o("span",{class:"color-red font-bold"},[m("删除")]),m("操作吗？")]),onOk:()=>{var e;(e=N.value,t({url:"/qms/scrscreen/scrscreenLocation/delete",method:"post",data:e})).then((({error:e})=>{e||(window.$message.success("删除网板仓位定义成功"),w.value.tableSelectChange([]),P())}))},onCancel:()=>{}})}function P(){w.value.getData(1)}function S(){g((()=>{v.value.locationNo=null,v.value.locationName=null,P()}))}return(t,l)=>{const g=a,k=h,j=e,z=n("hasAuth");return i(),s("div",x,[o(g,{ref_key:"commonSearchRef",ref:b,searchParams:v.value,"onUpdate:searchParams":l[0]||(l[0]=e=>v.value=e),"form-list":_,"is-search":!0,onSearch:P,onReset:S},null,8,["searchParams"]),o(j,{ref_key:"tableRef",ref:w,searchParams:v.value,"onUpdate:searchParams":l[3]||(l[3]=e=>v.value=e),column:C,"show-row-selection":"","row-key":"id","auto-generate-uuid":"",scroll:{y:"auto"},"is-init-get-data":"",url:"/qms/scrscreen/scrscreenLocation/pageList",onTableSelectChange:I},{title:c((()=>[r((i(),d(k,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",onClick:l[1]||(l[1]=e=>L("add"))},{icon:c((()=>[o(u(p),{class:"align-sub"})])),default:c((()=>[l[4]||(l[4]=m(" 新增 "))])),_:1})),[[z,["manage:config-manage:screen-position-definition:add"]]]),r((i(),d(k,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:1!=N.value.length,onClick:l[2]||(l[2]=e=>L("edit"))},{icon:c((()=>[o(u(f),{class:"align-sub"})])),default:c((()=>[l[5]||(l[5]=m(" 修改 "))])),_:1},8,["disabled"])),[[z,["manage:config-manage:screen-position-definition:update"]]]),r((i(),d(k,{type:"primary",danger:"",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:!N.value.length,onClick:q},{icon:c((()=>[o(u(y),{class:"align-sub"})])),default:c((()=>[l[6]||(l[6]=m(" 删除 "))])),_:1},8,["disabled"])),[[z,["manage:config-manage:screen-position-definition:delete"]]])])),_:1},8,["searchParams"])])}}});export{k as default};
