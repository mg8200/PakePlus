import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{p as l}from"./index-DSSNONhA.js";import{_ as a}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{d as t,K as s,L as o,o as u,c as d,w as n,g as r,f as i,s as c,t as m,I as p,v as f,N as v,M as _,O as x,B as h,P as b,Q as y,F as w,r as g,S as k,e as T,h as j}from"./index-B3PZsRwT.js";import{C as M}from"./index-BThgVJ70.js";import{D as N,a as Y}from"./index-BrhnYIjA.js";const D={class:"w-full flex"},I={class:"flex"},U={class:"w-full flex-y-center justify-end gap-12px"},C={class:"ml-3px"},S={class:"ml-3px"},$=t({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:s(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,t=o(e,"model");function s(){a("search",t.value)}function g(){t.value.prodNo=null,t.value.time=null,a("reset",t.value)}return(e,l)=>{const a=p,o=f,k=v,T=_,j=x,N=h,Y=b,$=y,q=w,z=M;return u(),d(z,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:n((()=>[r(q,{model:t.value,"label-col":{span:5,md:7},class:"search-form"},{default:n((()=>[i("div",D,[r($,{gutter:[15,8],wrap:"",class:"w-full"},{default:n((()=>[r(k,{span:24,md:12,lg:6,xl:8,xxl:4},{default:n((()=>[r(o,{label:"产品型号",name:"prodNo",class:"m-0","label-col":{}},{default:n((()=>[r(a,{value:t.value.prodNo,"onUpdate:value":l[0]||(l[0]=e=>t.value.prodNo=e),placeholder:"请输入产品型号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:c(s,["enter"])},null,8,["value"])])),_:1})])),_:1}),r(k,{span:24,md:12,lg:6,xl:8,xxl:5},{default:n((()=>[r(o,{label:"计划回复交期",name:"time",class:"m-0","label-col":{}},{default:n((()=>[r(T,{value:t.value.time,"onUpdate:value":l[1]||(l[1]=e=>t.value.time=e),"value-format":"YYYY-MM-DD",format:"YYYY-MM-DD",class:"min-form-control w-full"},null,8,["value"])])),_:1})])),_:1}),i("div",I,[r(o,{class:"m-0"},{default:n((()=>[i("div",U,[r(N,{type:"primary",ghost:"",class:"mini-btn",onClick:s},{icon:n((()=>[r(j,{class:"align-sub text-icon"})])),default:n((()=>[i("span",C,m(e.$t("common.search")),1)])),_:1}),r(N,{class:"mini-btn",onClick:g},{icon:n((()=>[r(Y,{class:"align-sub text-icon"})])),default:n((()=>[i("span",S,m(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),q={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},z={class:"modal-footer"},E=Object.assign({name:"manage_planned-delivery-date"},{__name:"index",setup(t){const s=g({prodNo:null,time:null}),o=[{key:"dateTime",dataIndex:"dateTime",title:"名称",fixed:"left",width:200,align:"center",checked:!0,ellipsis:!0}],d=g([...o]),c=g([{dateTime:"树脂塞孔可生产",uid:1},{dateTime:"黑影可生产",uid:2},{dateTime:"大于等于成品2安铜",uid:3},{dateTime:"成品厚度小于等于0.5MM",uid:4}]),p=g(!1),f=g([]);function v(){!function(){var e;const a={prodNo:s.value.prodNo};(null==(e=s.value.time)?void 0:e[0])?(a.startTime=s.value.time[0],a.endTime=s.value.time[1],p.value=!0,l({...a}).then((({data:e,error:l})=>{if(!l){const l=[],a={0:"szsk",1:"hy",2:"cpat",3:"cphd"};e.forEach(((e,t)=>{l.push({key:"key".concat(t),dataIndex:"key".concat(t),title:e.dateTime,width:200,align:"center",checked:!0,ellipsis:!0}),c.value.forEach(((l,s)=>{l["key".concat(t)]=e[a[s]]}))})),d.value=[...o,...l]}})).finally((()=>{p.value=!1}))):window.$message.error("请选择计划回复交期")}()}const _=g(!1),x=g({});return(l,t)=>{const o=e,b=k("STable"),y=M,w=N,g=Y,D=h;return u(),T("div",q,[r($,{model:s.value,"onUpdate:model":t[0]||(t[0]=e=>s.value=e),onReset:t[1]||(t[1]=e=>v()),onSearch:t[2]||(t[2]=e=>v())},null,8,["model"]),r(y,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:n((()=>t[6]||(t[6]=[]))),extra:n((()=>[r(o,{columns:d.value,"onUpdate:columns":t[3]||(t[3]=e=>d.value=e)},null,8,["columns"])])),default:n((()=>[r(b,{columns:d.value,"data-source":c.value,size:"small",bordered:"",loading:p.value,"default-expanded-row-keys":f.value,"row-key":"uid","default-expand-all-rows":!0,scroll:{y:"auto"},class:"h-full","row-height":23},null,8,["columns","data-source","loading","default-expanded-row-keys"])])),_:1}),r(a,{visible:_.value,"onUpdate:visible":t[5]||(t[5]=e=>_.value=e),"destroy-on-close":!0,centered:!0,title:"操作日志详细",width:"750px",height:"550px"},{footer:n((()=>[i("div",z,[r(D,{onClick:t[4]||(t[4]=e=>_.value=!1)},{default:n((()=>t[7]||(t[7]=[j("关闭")]))),_:1})])])),default:n((()=>[i("div",null,[r(g,{title:""},{default:n((()=>[r(w,{span:2,label:"操作模块:"},{default:n((()=>[j(m(x.value.title),1)])),_:1}),r(w,{span:2,label:"请求地址："},{default:n((()=>[j(m(x.value.operIp),1)])),_:1}),r(w,{span:2,label:"登录信息:"},{default:n((()=>[j(m(x.value.operName)+"/"+m(x.value.operIp),1)])),_:1}),r(w,{span:2,label:"请求方式："},{default:n((()=>[j(m(x.value.requestMethod),1)])),_:1}),r(w,{span:3,label:"操作方法："},{default:n((()=>[j(m(x.value.method),1)])),_:1}),r(w,{span:3,label:"请求参数："},{default:n((()=>[j(m(x.value.operParam),1)])),_:1}),r(w,{span:3,label:"返回参数："},{default:n((()=>[j(m(x.value.jsonResult),1)])),_:1}),r(w,{label:"操作状态："},{default:n((()=>[j(m(0==x.value.status?"成功":"失败"),1)])),_:1}),r(w,{label:"消耗时间："},{default:n((()=>[j(m(x.value.costTime+"毫秒"),1)])),_:1}),r(w,{label:"操作时间："},{default:n((()=>[j(m(x.value.operTime),1)])),_:1})])),_:1})])])),_:1},8,["visible"])])}}});export{E as default};
