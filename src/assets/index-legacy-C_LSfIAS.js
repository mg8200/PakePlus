!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(t,n,l){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var l=t[Symbol.toPrimitive];if(void 0!==l){var a=l.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[n]=l,t}System.register(["./table-legacy-BfQK1xrs.js","./common-search.vue_vue_type_script_setup_true_lang-legacy-BetNIGyO.js","./index-legacy-BH1Y34Mi.js","./EditOutlined-legacy-Dr9RC9gg.js","./DeleteOutlined-legacy-BQoR-sCc.js","./table-column-setting.vue_vue_type_script_setup_true_lang-legacy-zNkjfv7c.js","./api-legacy-B6UkH1eb.js","./index-legacy-JzSJVdOM.js"],(function(e,t){"use strict";var l,a,r,i,o,s,u,c,d,m,f,p,y,v,g,h,b;return{setters:[function(e){l=e._},function(e){a=e._},function(e){r=e.Z,i=e.r,o=e.b,s=e.aa,u=e.o,c=e.e,d=e.g,m=e.w,f=e.i,p=e.X,y=e.f,v=e.bD,g=e.B},function(e){h=e.E},function(e){b=e.D},null,null,null],execute:function(){var t={class:"jl-main-page min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};e("default",Object.assign({name:"manage_form-service-record"},{__name:"index",setup:function(e){var x=i([]),k=i([]),w=i({formName:null,system:null,module:null,time:null}),O=[{type:"input",key:"formName",label:"表单名称",placeholder:"请输入表单名称",span:24,md:12,lg:8,xl:8,xxl:4},{type:"select",key:"system",label:"系统",placeholder:"请选择系统",span:24,md:12,lg:8,xl:8,xxl:4,selectOptions:x,change:function(){var e,t=null===(e=x.value.find((function(e){return e.value===w.value.system})))||void 0===e?void 0:e.id;k.value=[],j(t,(function(e){k.value=e}))}},{type:"select",key:"module",label:"模块",placeholder:"请选择模块",span:24,md:12,lg:8,xl:8,xxl:4,selectOptions:k},{type:"select",key:"state",label:"状态",placeholder:"请选择状态",span:24,md:12,lg:8,xl:8,xxl:4,selectOptions:[{label:"未完成",value:0},{label:"已完成",value:1}]},{type:"dateRangePicker",key:"time",label:"日期",showTime:!0,span:24,md:12,lg:10,xl:8,xxl:6}];function j(e,t){(function(e){return r({url:"/mes/formModification/module",method:"GET",params:{sysId:e}})})(e).then((function(e){var l=e.data,a=(e.error,null==l?void 0:l.map((function(e){return n(n({},e),{},{label:e.module,value:e.module})})));t&&t(a)}))}r({url:"/mes/formModification/system",method:"GET"}).then((function(e){var t=e.data;e.error,x.value=null==t?void 0:t.map((function(e){return n(n({},e),{},{label:e.system,value:e.system})}))}));var D=o((function(){var e,t=n({},w.value);return null!==(e=w.value)&&void 0!==e&&null!==(e=e.time)&&void 0!==e&&e[0]&&(t.startTime=s(w.value.time[0]).format("YYYY-MM-DD"),t.endTime=s(w.value.time[0]).format("YYYY-MM-DD")),delete t.time,t})),P=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,fixed:"left",align:"center",checked:!0,ellipsis:!0},{key:"system",dataIndex:"system",title:"系统",align:"center",checked:!0,ellipsis:!0},{key:"module",dataIndex:"module",title:"模块",align:"center",checked:!0,ellipsis:!0},{key:"formName",dataIndex:"formName",title:"表单名称",align:"center",width:180,checked:!0,ellipsis:!0},{key:"state",dataIndex:"state",title:"状态",align:"center",checked:!0,ellipsis:!0,customRender:function(e){var t=e.record;return d("span",{class:0===t.state?"text-red-500":"text-green-500"},[["未完成","已完成"][t.state]])}},{key:"oaCountersignTime",dataIndex:"oaCountersignTime",title:"OA会签时间",align:"center",width:160,checked:!0,ellipsis:!0},{key:"completionTime",dataIndex:"completionTime",title:"完成时间",width:180,align:"center",checked:!0,ellipsis:!0},{key:"elapsedTime",dataIndex:"elapsedTime",title:"耗时",width:180,align:"center",checked:!0,ellipsis:!0},{key:"remark",dataIndex:"remark",title:"备注",align:"center",checked:!0,ellipsis:!0},{key:"operator",dataIndex:"operator",title:"创建人",align:"center",checked:!0,ellipsis:!0},{key:"createDate",dataIndex:"createDate",title:"创建时间",align:"center",checked:!0,width:160,ellipsis:!0,customRender:function(e){var t=e.record;return s(t.createDate).format("YYYY-MM-DD HH:mm:ss")}},{key:"updateUser",dataIndex:"updateUser",title:"修改人",align:"center",checked:!0,ellipsis:!0},{key:"updateDate",dataIndex:"updateDate",title:"修改时间",width:160,align:"center",checked:!0,ellipsis:!0,customRender:function(e){var t=e.record;return s(t.updateDate).format("YYYY-MM-DD HH:mm:ss")}}],_=i(null);function T(){_.value.getData(1)}function M(){nextTick((function(){w.value={formName:null,system:null,module:null,time:null},T()}))}var S=i([]);function I(e){S.value=e}var Y=i([]),C=i("add"),N=window.$useModal({modalOption:{title:"新增",width:"600px",destroyOnClose:!0},formData:{system:null,module:null,formName:null,oaCountersignTime:null,remark:null},formList:[{type:"select",key:"system",label:"系统",placeholder:"请选择系统",span:24,selectOptions:x,change:function(e){var t,n=null===(t=x.value.find((function(t){return t.value===e})))||void 0===t?void 0:t.id;Y.value=[],j(n,(function(e){Y.value=e}))}},{type:"select",key:"module",label:"模块",placeholder:"请选择模块",span:24,selectOptions:Y},{type:"input",key:"formName",label:"表单名称",placeholder:"请输入表单名称",span:24},{type:"datePicker",key:"oaCountersignTime",label:"OA会签时间",placeholder:"请输入OA会签时间",showTime:!0,span:24},{type:"textarea",key:"remark",label:"表单名称",placeholder:"请输入表单名称",span:24}],onOk:function(e){var t;t="add"===C.value?r({url:"/mes/formModification/add/new",method:"POST",data:e}):function(e){return r({url:"/mes/formModification/update",method:"POST",data:e})}(e),E(!0),t.then((function(e){e.error||(window.$message.success("操作成功!"),T(),$())})).finally((function(){E(!1),S.value=[]}))},onClose:function(){Y.value=[]}}),$=N.handleClose,E=N.handleLoading,R=N.handleShow,z=N.updateModalOptions;function A(e){C.value=e,"add"===e?(R({system:null,module:null,formName:null,oaCountersignTime:null,remark:null}),z({title:"新增表单服务记录"})):(R(S.value[0]),z({title:"修改表单服务记录"}))}function H(){0!==S.value.length?window.$modal.confirm({title:"确认删除所选择的记录吗?",onOk:function(){var e;(e=S.value,r({url:"/mes/formModification/deleteBatch",method:"POST",data:e})).then((function(e){e.error||(window.$message.success("删除成功!"),T(),S.value=[])}))},onCancel:function(){}}):window.$message.error("请选择要删除的记录")}function U(){0!==S.value.length?window.$modal.confirm({title:"确认完成所选择的记录吗?",onOk:function(){var e;(e=S.value,r({url:"/mes/formModification/complete",method:"POST",data:e})).then((function(e){e.error||(window.$message.success("操作成功!"),T(),S.value=[])}))},onCancel:function(){}}):window.$message.error("请选择要完成的记录")}return function(e,n){var r=a,i=g,o=l;return u(),c("div",t,[d(r,{searchParams:w.value,"onUpdate:searchParams":n[0]||(n[0]=function(e){return w.value=e}),"form-list":O,onSearch:T,onReset:M},null,8,["searchParams"]),d(o,{ref_key:"tableRef",ref:_,searchParams:D.value,"onUpdate:searchParams":n[3]||(n[3]=function(e){return D.value=e}),column:P,"auto-generate-uuid":"",scroll:{y:"auto"},"is-init-get-data":"",url:"/mes/formModification/list",onTableSelectChange:I},{title:m((function(){return[d(i,{type:"primary",ghost:"",class:"mini-btn mr-8px",onClick:n[1]||(n[1]=function(e){return A("add")})},{default:m((function(){return[d(f(p),{class:"align-sub text-size-18px"}),n[4]||(n[4]=y("span",{class:"ml-3px"},"新增",-1))]})),_:1}),d(i,{type:"primary",ghost:"",class:"mini-btn mr-8px",disabled:1!==S.value.length,onClick:n[2]||(n[2]=function(e){return A("edit")})},{default:m((function(){return[d(f(h),{class:"align-sub text-size-18px"}),n[5]||(n[5]=y("span",{class:"ml-3px"},"修改",-1))]})),_:1},8,["disabled"]),d(i,{type:"primary",ghost:"",class:"mini-btn mr-8px",disabled:0===S.value.length,onClick:U},{default:m((function(){return[d(f(v),{class:"align-sub text-size-18px"}),n[6]||(n[6]=y("span",{class:"ml-3px"},"批量完成",-1))]})),_:1},8,["disabled"]),d(i,{type:"primary",danger:"",ghost:"",class:"mini-btn mr-8px",disabled:0===S.value.length,onClick:H},{default:m((function(){return[d(f(b),{class:"align-sub text-size-18px"}),n[7]||(n[7]=y("span",{class:"ml-3px"},"批量删除",-1))]})),_:1},8,["disabled"])]})),_:1},8,["searchParams"])])}}}))}}}))}();
