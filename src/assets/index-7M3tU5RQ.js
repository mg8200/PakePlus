import{b as e,_ as t}from"./engineering-data-inquiry-BIeYOUOZ.js";import{_ as l}from"./table-DoFSI9NT.js";import{r as a,o as i,e as n,g as s,i as r,V as c,w as o,h as d,f as p,aa as u,_ as m,B as h}from"./index-B3PZsRwT.js";import{_ as k}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{u as g}from"./resetTableRef-DZjcvemm.js";import"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import"./pdf-viewer-DuGSG8WR.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";import"./index-BThgVJ70.js";const x={class:"h-full min-h-500px flex-col-stretch gap-8px overflow-hidden lt-sm:overflow-auto"},y=["onClick"],f=["onClick"],w=["onClick"],v=["onClick"],I=["onClick"],_=Object.assign({name:"engineering-manage_engineering-information"},{__name:"index",setup(_){const N=a(null),[b,C]=g({moduleNo:null,moduleNoState:"8"}),F={0:"编写",1:"更改",2:"待处理",3:"编写中",4:"暂停",5:"已回退",6:"反审核",7:"审核中",8:"已上网",9:"完成",10:"取消",11:"外部ECN",12:"外部ECN待处理",13:"内部ECN",19:"样板转生产",20:"ENC更改",25:"报废",27:"申请",28:"入库",29:"发放",34:"归还",35:"接收",36:"审核",37:"确认",100:"PPC审核"},P=a(null),S=[{type:"input",key:"moduleNo",label:"生产型号",span:24,md:12,lg:8,xl:8,xxl:4,placeholder:"请输入生产型号",showTime:!0},{type:"select",key:"moduleNoState",label:"状态",placeholder:"请选择状态",span:24,md:12,lg:8,xl:8,xxl:4,selectOptions:Object.entries(F).map((([e,t])=>8===e?{label:"已上网",value:e}:{label:t,value:e}))}];function R(e){let t=Number(e);switch(140917104644e4===t||160913164544e4===t?t=2:140917104654e4===t||140919111754e4===t?t=3:161013095348e4!==t&&140919111738e4!==t||(t=4),Number(t)){case-1:return"#FF0000";case 0:return"#0080FF";case 1:return"#FFA500";case 2:return"#FF8000";case 3:return"#B15BFF";case 4:return"#73BF00";case 5:return"#8E8E8E";case 6:return"#BEBEBE";case 7:return"#FF0000";case 8:return"#4682B4";case 9:return"#0000FF";case 10:return"#007500";default:return"#0000FF"}}const D=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"state",dataIndex:"state",title:"状态",align:"center",checked:!0,ellipsis:!0,customFilterDropdown:!0,width:130,onFilter:(e,t)=>{let l=Number(t.state);return 140917104644e4===l||160913164544e4===l?l=2:140917104654e4===l||140919111754e4===l?l=3:161013095348e4!==l&&140919111738e4!==l||(l=4),!e||Number(e)===Number(l)},customRender:({record:e})=>{let t=Number(e.state);return 140917104644e4===t||160913164544e4===t?t=2:140917104654e4===t||140919111754e4===t?t=3:161013095348e4!==t&&140919111738e4!==t||(t=4),8===t?s("div",{class:"h-full w-full",title:"已上网",style:{color:R(e.state)}},[d("已上网")]):s("div",{class:"h-full w-full",title:F[t]||"",style:{color:R(e.state)}},[F[t]||""])}},{key:"moduleNo",dataIndex:"moduleNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,width:160,customRender:({record:e})=>s("span",{class:"fonw-800 color-#646cff"},[e.moduleNo])},{key:"pnType",dataIndex:"pnType",title:"类型",align:"center",checked:!0,ellipsis:!0,width:130},{key:"prodType",dataIndex:"prodType",title:"产品类型",align:"center",checked:!0,ellipsis:!0,width:130},{key:"surfTrea1",dataIndex:"surfTrea1",title:"表面处理1",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peType",dataIndex:"peType",title:"板类型",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peDifficulty",dataIndex:"peDifficulty",title:"开发等级",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peState",dataIndex:"peState",title:"生产稿状态",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peSpecial",dataIndex:"peSpecial",title:"特殊周期",align:"center",checked:!0,ellipsis:!0,width:130},{key:"pemark",dataIndex:"pemark",title:"水印",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peRemark",dataIndex:"peRemark",title:"工程备注",align:"center",checked:!0,ellipsis:!0,width:130},{key:"targetName",dataIndex:"targetName",title:"终端客户",align:"center",checked:!0,ellipsis:!0,width:130},{key:"custNo",dataIndex:"custNo",title:"客户编码",align:"center",checked:!0,ellipsis:!0,width:130},{key:"custProdNo",dataIndex:"custProdNo",title:"客户型号",align:"center",checked:!0,ellipsis:!0,width:130},{key:"custProdNoAdd",dataIndex:"custProdNoAdd",title:"物料号",align:"center",checked:!0,ellipsis:!0,width:130},{key:"peActive",dataIndex:"peActive",title:"PE状态",align:"center",checked:!0,ellipsis:!0,width:130,customRender:({record:e})=>e.peactive?"有效":"过期"},{key:"activeRemark",dataIndex:"activeRemark",title:"操作备注",align:"center",checked:!0,ellipsis:!0,width:130},{key:"mktActive",dataIndex:"mktActive",title:"MIKT投产",align:"center",checked:!0,ellipsis:!0,width:130,customRender:({record:e})=>e.mktactive?"是":"否"},{key:"weight",dataIndex:"weight",title:"单重",align:"center",checked:!0,ellipsis:!0,width:130},{key:"remark",dataIndex:"remark",title:"备注",align:"center",checked:!0,ellipsis:!0,width:130},{key:"createBy",dataIndex:"createBy",title:"创建人",align:"center",checked:!0,ellipsis:!0,width:130},{key:"createDate",dataIndex:"createDate",title:"创建时间",align:"center",checked:!0,ellipsis:!0,width:160,customRender:({record:e})=>u(e.createDate).format("YYYY-MM-DD HH:mm:ss")},{key:"updateDate",dataIndex:"updateDate",title:"最后修改时间",align:"center",checked:!0,ellipsis:!0,width:160,customRender:({record:e})=>u(e.updateDate).format("YYYY-MM-DD HH:mm:ss")}],j=a(null);function T(e){j.value=e}function B(){P.value.getData(1)}function E(){C(),B()}const M="localhost"===window.location.hostname,A=a(!1),Y=a(null),O=a(null);function z(t){let l;l=t?t.record:j.value,e({prodId:l.prodId},l.moduleNo),t.hidePopup()}function H(e){let t;t=e?e.record:j.value,A.value=!0,O.value="".concat(t.moduleNo,"MI文件.pdf 预览"),Y.value="".concat(M?"http://192.168.166.169:9999/prod-api/":"/prod-api/","erpsyncmes/mi/print/getMiPdf?prodId=").concat(t.prodId),e&&e.hidePopup()}function J(e){let t;if(t=e?e.record:j.value,!t)return void window.$message.error("请选择一条数据");let l=JSON.parse(sessionStorage.getItem("mi-data"));l||(l={}),l[t.prodId]=t,sessionStorage.setItem("mi-data",JSON.stringify(l)),e&&e.hidePopup(),window.open("/mi-design/engineering-design?prodId=".concat(t.prodId),"_blank")}function U(e){let t;if(t=e?e.record:j.value,!t)return void window.$message.error("请选择一条数据");let l=JSON.parse(sessionStorage.getItem("mi-data"));l||(l={}),l[t.prodId]=t,sessionStorage.setItem("mi-data",JSON.stringify(l)),e&&e.hidePopup(),window.open("/mi-design/engineering-design?prodId=".concat(t.prodId),"_blank")}return(e,a)=>{const u=k,g=m,_=h,C=l,F=t;return i(),n("div",x,[s(u,{ref_key:"commonSearchRef",ref:N,searchParams:r(b),"onUpdate:searchParams":a[0]||(a[0]=e=>c(b)?b.value=e:null),"form-list":S,onSearch:B,onReset:E},null,8,["searchParams"]),s(C,{ref_key:"tableRef",ref:P,searchParams:r(b),"onUpdate:searchParams":a[5]||(a[5]=e=>c(b)?b.value=e:null),column:D,"show-row-selection":!1,"row-key":"prodId",scroll:{y:"auto"},"is-init-get-data":"",url:"/erpsyncmes/Mi/findModuleNo","auto-generate-uuid":!1,class:"h-full","default-expand-all-rows":!0,onTableRowClick:T},{title:o((()=>[s(_,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",onClick:a[1]||(a[1]=e=>J(null))},{icon:o((()=>[s(g,{"local-icon":"engineering-design",class:"ml-4px mr-4px text-16px"})])),default:o((()=>[a[7]||(a[7]=d(" 工程设计 "))])),_:1}),s(_,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",onClick:a[2]||(a[2]=e=>U(null))},{icon:o((()=>[s(g,{"local-icon":"view",class:"ml-4px mr-4px text-16px"})])),default:o((()=>[a[8]||(a[8]=d(" 工程查看 "))])),_:1}),s(_,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",onClick:a[3]||(a[3]=e=>H(null))},{icon:o((()=>[s(g,{"local-icon":"preview",class:"ml-4px mr-4px text-16px"})])),default:o((()=>[a[9]||(a[9]=d(" 预览 "))])),_:1}),s(_,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",onClick:a[4]||(a[4]=e=>z(null))},{icon:o((()=>[s(g,{"local-icon":"download",class:"ml-4px mr-4px text-16px"})])),default:o((()=>[a[10]||(a[10]=d(" 下载 "))])),_:1})])),"contextmenuPopup-orter":o((({args:e})=>[p("li",{class:"popup-item",onClick:t=>z(e)},[s(g,{"local-icon":"download",class:"text-16px"}),a[11]||(a[11]=d(" 下载 "))],8,y),p("li",{class:"popup-item",onClick:t=>H(e)},[s(g,{"local-icon":"preview",class:"text-16px"}),a[12]||(a[12]=d(" 预览 "))],8,f),p("li",{class:"popup-item",onClick:t=>J(e)},[s(g,{"local-icon":"engineering-design",class:"text-16px"}),a[13]||(a[13]=d(" 工程设计 "))],8,w),p("li",{class:"popup-item",onClick:t=>U(e)},[s(g,{"local-icon":"view",class:"text-16px"}),a[14]||(a[14]=d(" 工程查看 "))],8,v),p("li",{class:"popup-item",onClick:t=>U(e)},[s(g,{"local-icon":"examine",class:"text-16px"}),a[15]||(a[15]=d(" 审核 "))],8,I)])),_:1},8,["searchParams"]),s(F,{visible:A.value,"onUpdate:visible":a[6]||(a[6]=e=>A.value=e),url:Y.value,type:"pdf","pdf-use-iframe":"",title:O.value},null,8,["visible","url","title"])])}}});export{_ as default};
