import{r as e,b as t,aa as a,a2 as l,o as i,e as n,g as d,w as s,a3 as r,c,i as o,h as p,f as m,a5 as h,B as u}from"./index-B3PZsRwT.js";import{_ as k}from"./table-DoFSI9NT.js";import{_ as g}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{d as x}from"./pp-trace-Bf2HPMWF.js";import{Q as y,_ as w}from"./print-qr-code.vue_vue_type_script_setup_true_lang-1entwNlU.js";import{D as f}from"./DeleteOutlined-CWT7lRAZ.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";import"./index-BThgVJ70.js";import"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";const v={class:"message jl-main-page min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},_=Object.assign({name:"trace_pp-trace"},{__name:"index",setup(_){const b=e(null),I=e(null),N=e({prodNo:null,lotNo:null,barcode:null,time:null}),D=[{type:"input",key:"prodNo",label:"生产型号",placeholder:"请输入生产型号",span:24,md:12,lg:8,xl:8,xxl:5},{type:"input",key:"lotNo",label:"LOT号",placeholder:"请输入LOT号",span:24,md:12,lg:8,xl:8,xxl:5},{type:"input",key:"barcode",label:"物料批次",placeholder:"请输入物料批次",span:24,md:12,lg:8,xl:8,xxl:5},{type:"dateRangePicker",key:"time",label:"时间",span:24,md:12,lg:10,xl:8,xxl:6,showTime:!0}],Y=t((()=>{var e,t;const l={...N.value};return(null==(t=null==(e=N.value)?void 0:e.time)?void 0:t[0])&&(l.beginTime=a(N.value.time[0]).format("YYYY-MM-DD"),l.endTime=a(N.value.time[0]).format("YYYY-MM-DD")),delete l.time,l})),j=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,fixed:"left",align:"center",checked:!0,ellipsis:!0},{key:"fullProdNo",dataIndex:"fullProdNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,width:180},{key:"lotNo",dataIndex:"lotNo",title:"Lot号",align:"center",checked:!0,ellipsis:!0,fixed:"left",width:160},{key:"barcode",dataIndex:"barcode",title:"物料批次",align:"center",checked:!0,ellipsis:!0,width:170},{key:"matNo",dataIndex:"matNo",title:"物料型号",align:"center",checked:!0,ellipsis:!0,width:280},{key:"matName",dataIndex:"matName",title:"物料名称",align:"center",checked:!0,ellipsis:!0,width:150},{key:"prodDate",dataIndex:"prodDate",title:"物料生产时间",align:"center",checked:!0,ellipsis:!0,width:150,customRender:({record:e})=>a(e.prodDate).format("YYYY-MM-DD")},{key:"expiryDate",dataIndex:"expiryDate",title:"物料失效时间",align:"center",checked:!0,ellipsis:!0,width:150,customRender:({record:e})=>a(e.expiryDate).format("YYYY-MM-DD")},{key:"batchNo",dataIndex:"batchNo",title:"供应商批次",align:"center",checked:!0,ellipsis:!0,width:160},{key:"deliveryOrder",dataIndex:"deliveryOrder",title:"送货单号",align:"center",checked:!0,ellipsis:!0,width:120},{key:"supplierNo",dataIndex:"supplierNo",title:"供应商编码",align:"center",checked:!0,ellipsis:!0,width:120},{key:"splOrderNo",dataIndex:"splOrderNo",title:"采购编号",align:"center",checked:!0,ellipsis:!0,width:120},{key:"specifications",dataIndex:"specifications",title:"规格",align:"center",checked:!0,ellipsis:!0,width:360},{key:"modelNum",dataIndex:"modelNum",title:"型号",align:"center",checked:!0,ellipsis:!0,width:150},{key:"brand",dataIndex:"brand",title:"品牌",align:"center",checked:!0,ellipsis:!0,width:150},{key:"fabric",dataIndex:"fabric",title:"布种",align:"center",checked:!0,ellipsis:!0,width:100},{key:"resin",dataIndex:"resin",title:"树脂含量",align:"center",checked:!0,ellipsis:!0,width:100},{key:"tg",dataIndex:"tg",title:"TG值",align:"center",checked:!0,ellipsis:!0,width:100},{key:"length",dataIndex:"length",title:"长",align:"center",checked:!0,ellipsis:!0,width:130},{key:"width",dataIndex:"width",title:"宽",align:"center",checked:!0,ellipsis:!0,width:130},{key:"cti",dataIndex:"cti",title:"Cti值",align:"center",checked:!0,ellipsis:!0,width:100},{key:"colour",dataIndex:"colour",title:"颜色",align:"center",checked:!0,ellipsis:!0,width:100},{key:"halogen",dataIndex:"halogen",title:"有无卤素",align:"center",checked:!0,ellipsis:!0,width:120,customRender:({record:e})=>0===Number(e.halogen)?"是":"否"},{key:"mark",dataIndex:"mark",title:"标识",align:"center",checked:!0,ellipsis:!0,width:120},{key:"remarks",dataIndex:"remarks",title:"备注",align:"center",checked:!0,ellipsis:!0,width:120},{key:"createUser",dataIndex:"createUser",title:"创建人",align:"center",checked:!0,ellipsis:!0,width:100},{key:"createTime",dataIndex:"createTime",title:"创建时间",align:"center",checked:!0,ellipsis:!0,width:160,customRender:({record:e})=>a(e.createTime).format("YYYY-MM-DD HH:mm:ss")}];function M(){I.value.getData(1)}function T(){h((()=>{N.value={prodNo:null,lotNo:null,matNo:null,time:null},M()}))}const O=e(!1);function P(){O.value=!0}const R=e([]);function C(e){R.value=e}const U=e(!1);return(e,t)=>{const a=u,h=l("hasAuth");return i(),n("div",v,[d(g,{ref_key:"commonSearchRef",ref:b,searchParams:N.value,"onUpdate:searchParams":t[0]||(t[0]=e=>N.value=e),"form-list":D,"is-search":!0,onSearch:M,onReset:T},null,8,["searchParams"]),d(k,{ref_key:"tableRef",ref:I,searchParams:Y.value,"onUpdate:searchParams":t[2]||(t[2]=e=>Y.value=e),column:j,"show-row-selection":!0,"row-key":"id","is-init-get-data":"",url:"/mes/ppmaterial/list","auto-generate-uuid":!0,onTableSelectChange:C},{title:s((()=>[r((i(),c(a,{type:"primary",danger:"",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:!R.value.length,onClick:t[1]||(t[1]=e=>{0!==R.value.length?(U.value=!0,window.$modal.confirm({title:"确定删除所选中的记录吗?",onOk:()=>{x(R.value.map((e=>e.id))).then((({data:e,error:t})=>{t||(window.$message.success("删除成功"),I.value.getData(1),R.value=[])})).finally((()=>{U.value=!1}))},onCancel:()=>{}})):window.$message.error("请选择需要删除的记录")})},{icon:s((()=>[d(o(f),{class:"align-sub"})])),default:s((()=>[t[4]||(t[4]=p(" 删除 "))])),_:1},8,["disabled"])),[[h,["trace:pp-trace:delete"]]]),d(a,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:P},{icon:s((()=>[d(o(y))])),default:s((()=>[t[5]||(t[5]=m("span",{class:"ml-3px"},"二维码",-1))])),_:1})])),_:1},8,["searchParams"]),d(w,{visible:O.value,"onUpdate:visible":t[3]||(t[3]=e=>O.value=e),type:"ppmaterial"},null,8,["visible"])])}}});export{_ as default};
