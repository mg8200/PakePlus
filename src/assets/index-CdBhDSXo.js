import{_ as e}from"./table-DoFSI9NT.js";import{_ as l}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{Z as a,r as t,b as n,aa as s,a2 as i,o as r,e as o,g as p,w as d,a3 as u,c,i as m,X as g,h,f as P,a5 as k,B as y}from"./index-B3PZsRwT.js";import{E as x}from"./EditOutlined-5FYoGiVM.js";import{D as f}from"./DeleteOutlined-CWT7lRAZ.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";import"./index-BThgVJ70.js";const w={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},b=Object.assign({name:"issuance-management_press-fit_press-program-rule"},{__name:"index",setup(b){const v=window.$useModal,N=t({moduleNo:null,tg:null,innerCopperThickness:null,outerPpNum:null,outerPpSpe:null,pressingProgramNo:null,time:null}),T=[{type:"input",key:"moduleNo",label:"产品类型",placeholder:"请输入产品类型",span:6,md:12,lg:8,xl:8,xxl:6},{type:"input",key:"tg",label:"Tg",placeholder:"请输入规则2Tg",span:6,md:12,lg:8,xl:8,xxl:6},{type:"input",key:"innerCopperThickness",label:"内层铜厚",placeholder:"请输入内层铜厚",span:6,md:12,lg:8,xl:8,xxl:6},{type:"input",key:"outerPpNum",label:"次外层PP张数",placeholder:"请输入次外层PP张数",span:6,md:12,lg:8,xl:8,xxl:6},{type:"input",key:"outerPpSpe",label:"次外层PP规格",placeholder:"请输入次外层PP规格",span:6,md:12,lg:8,xl:8,xxl:6},{type:"input",key:"pressingProgramNo",label:"选用程式命名",placeholder:"请输入选用程式命名",span:6,md:12,lg:8,xl:8,xxl:6},{type:"dateRangePicker",key:"time",label:"日期",span:24,md:12,lg:10,xl:8,xxl:6,showTime:!0}],_=n((()=>{var e;const l={...N.value};return(null==(e=N.value)?void 0:e[0])&&(l.startTime=s(N.value.time[0]).format("YYYY-MM-DD HH:mm:ss"),l.endTime=s(N.value.time[1]).format("YYYY-MM-DD HH:mm:ss")),delete l.time,l})),C=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0,fixed:"left"},{key:"moduleNo",dataIndex:"moduleNo",title:"产品类型",align:"center",checked:!0,ellipsis:!0,width:150,fixed:"left"},{key:"tg",dataIndex:"tg",title:"Tg",align:"center",checked:!0,ellipsis:!0,width:150},{key:"innerCopperThickness",dataIndex:"innerCopperThickness",title:"内层铜厚",align:"center",checked:!0,ellipsis:!0,width:180},{key:"outerPpNum",dataIndex:"outerPpNum",title:"次外层PP张数",align:"center",checked:!0,ellipsis:!0,width:150},{key:"outerPpSpe",dataIndex:"outerPpSpe",title:"次外层PP规格",align:"center",checked:!0,ellipsis:!0,width:180},{key:"pressingProgramNo",dataIndex:"pressingProgramNo",title:"选用程式命名",align:"center",checked:!0,ellipsis:!0,width:180},{key:"state",dataIndex:"state",title:"审核状态",align:"center",checked:!0,ellipsis:!0,width:100,customRender:({record:e})=>["未审核","已审核"][e.state]||""},{key:"examiner",dataIndex:"examiner",title:"审核人",align:"center",checked:!0,ellipsis:!0,width:180},{key:"examinerTime",dataIndex:"examinerTime",title:"审核时间",align:"center",checked:!0,ellipsis:!0,width:170},{key:"createBy",dataIndex:"createBy",title:"创建人",align:"center",checked:!0,ellipsis:!0,width:120},{key:"createDate",dataIndex:"createDate",title:"创建时间",align:"center",checked:!0,ellipsis:!0,width:170},{key:"updateBy",dataIndex:"updateBy",title:"修改人",align:"center",checked:!0,ellipsis:!0,width:120},{key:"updateDate",dataIndex:"updateDate",title:"修改时间",align:"center",checked:!0,ellipsis:!0,width:170}],I=t(null),S=t([]);function O(e){S.value=e}function D(){I.value.getData(1)}function R(){k((()=>{N.value={moduleNo:null,tg:null,innerCopperThickness:null,outerPpNum:null,outerPpSpe:null,pressingProgramNo:null,time:null},D()}))}const j=t("add"),{handleShow:Y,handleLoading:$,handleClose:z,updateModalOptions:q}=v({modalOption:{width:"800px",title:"压合程式选用规则新增"},formList:[{type:"input",key:"moduleNo",label:"产品类型",placeholder:"请输入产品类型",span:24},{type:"input",key:"tg",label:"Tg",placeholder:"请输入Tg",span:24},{type:"input",key:"innerCopperThickness",label:"内层铜厚",placeholder:"请输入内层铜厚",span:24},{type:"input",key:"outerPpNum",label:"次外层PP张数",placeholder:"请输入次外层PP张数",span:24},{type:"input",key:"outerPpSpe",label:"次外层PP规格",placeholder:"请输入次外层PP规格",span:24},{type:"input",key:"pressingProgramNo",label:"选用程式命名",placeholder:"请输入选用程式命名",span:24}],formData:{moduleNo:null,tg:null,innerCopperThickness:null,outerPpNum:null,outerPpSpe:null,pressingProgramNo:null},onOk:e=>{let l;const t={...e};["tg","innerCopperThickness","outerPpNum","outerPpSpe"].forEach((e=>{t[e]&&(t[e]=encodeURIComponent(t[e]))})),l="add"===j.value?a({url:"/qms/pressingProgramRule/add",method:"POST",data:t}):function(e){return a({url:"/qms/pressingProgramRule/update",method:"POST",data:e})}(t),$(!0),l.then((({error:e})=>{e||(window.$message.success("".concat("add"===j.value?"新增":"修改","成功")),R(),z())})).finally((()=>$(!1)))}});function B(e){e?(j.value="edit",q({title:"压合程式选用规则修改"}),Y(e)):(j.value="add",q({title:"压合程式选用规则新增"}),Y({moduleNo:null,tg:null,innerCopperThickness:null,outerPpNum:null,outerPpSpe:null,pressingProgramNo:null}))}function M(){window.$modal.confirm({title:"确认审核选中的数据吗？",onOk:()=>{var e;(e=S.value,a({url:"/qms/pressingProgramRule/audit",method:"POST",data:e})).then((({error:e})=>{e||(window.$message.success("审核成功"),R())}))},onCancel:()=>{}})}function H(){window.$modal.confirm({title:"确认撤审选中的数据吗？",onOk:()=>{var e;(e=S.value,a({url:"/qms/pressingProgramRule/withdraw",method:"POST",data:e})).then((({error:e})=>{e||(window.$message.success("撤审成功"),R())}))},onCancel:()=>{}})}function E(){window.$modal.confirm({title:"确认删除选中的数据吗？",onOk:()=>{var e;(e=S.value,a({url:"/qms/pressingProgramRule/delete",method:"post",data:e})).then((({error:e})=>{e||(window.$message.success("删除成功"),R())}))},onCancel:()=>{}})}return(a,t)=>{const n=l,s=y,k=e,b=i("hasAuth");return r(),o("div",w,[p(n,{ref:"commonSearchRef",searchParams:N.value,"onUpdate:searchParams":t[0]||(t[0]=e=>N.value=e),"form-list":T,"is-search":!0,onSearch:D,onReset:R},null,8,["searchParams"]),p(k,{ref_key:"tableRef",ref:I,searchParams:_.value,"onUpdate:searchParams":t[3]||(t[3]=e=>_.value=e),column:C,"show-row-selection":"","auto-generate-uuid":"","row-key":"screenId",scroll:{y:"auto"},"is-init-get-data":"",url:"/qms/pressingProgramRule/pageList",onTableSelectChange:O},{title:d((()=>[u((r(),c(s,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",onClick:t[1]||(t[1]=e=>B(null))},{icon:d((()=>[p(m(g),{class:"align-sub"})])),default:d((()=>[t[4]||(t[4]=h(" 新增 "))])),_:1})),[[b,["issuance-management:press-fit:press-program-rule:add"]]]),u((r(),c(s,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:1!=S.value.length,onClick:t[2]||(t[2]=e=>B(S.value[0]))},{icon:d((()=>[p(m(x),{class:"align-sub"})])),default:d((()=>[t[5]||(t[5]=h(" 修改 "))])),_:1},8,["disabled"])),[[b,["issuance-management:press-fit:press-program-rule:update"]]]),u((r(),c(s,{type:"primary",danger:"",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:!S.value.length,onClick:E},{icon:d((()=>[p(m(f),{class:"align-sub"})])),default:d((()=>[t[6]||(t[6]=h(" 删除 "))])),_:1},8,["disabled"])),[[b,["issuance-management:press-fit:press-program-rule:delete"]]]),u((r(),c(s,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:!S.value.length,onClick:M},{icon:d((()=>t[7]||(t[7]=[P("span",{class:"iconfont icon-shenhe",style:{"font-size":"14px"}},null,-1)]))),default:d((()=>[t[8]||(t[8]=h(" 审核 "))])),_:1},8,["disabled"])),[[b,["issuance-management:press-fit:press-program-rule:examine"]]]),u((r(),c(s,{type:"primary",danger:"",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:!S.value.length,onClick:H},{icon:d((()=>t[9]||(t[9]=[P("span",{class:"iconfont icon-cheshenanniu",style:{"font-size":"14px"}},null,-1)]))),default:d((()=>[t[10]||(t[10]=P("span",{class:"ml-3px"},"撤审",-1))])),_:1},8,["disabled"])),[[b,["issuance-management:press-fit:press-program-rule:withdrawTrial"]]])])),_:1},8,["searchParams"])])}}});export{b as default};
