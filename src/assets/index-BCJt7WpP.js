import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{r as a,u as l,b as t,aa as n,p as i,g as s,ae as r,I as u,B as d,h as o,o as c,e as m,w as v,f,aj as p,al as h,c as k,t as g,ah as x,ai as w,v as b,N as y,Q as _,F as N,ad as D}from"./index-B3PZsRwT.js";import{_ as I}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{_ as C}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{q as z,b as S,c as T,m as L,e as R,n as U,t as j,d as B,a as $}from"./v-cut-CSvNuaFi.js";import{C as P}from"./index-BThgVJ70.js";import{_ as Y}from"./index-Cn-BWYp5.js";import"./fromPairs-BI-MgVCs.js";const q={class:"jl-main-page printed-code h-full h-full min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},E={class:"event-form"},V={class:"modal-footer"},M={class:"event-form"},O={class:"modal-footer"},F={class:"event-form",style:{height:"700px"}},Q={class:"event-form"},A={class:"modal-footer"},J=Object.assign({name:"production-management_single-production-schedule_v-cut-tool-record"},{__name:"index",setup(J){const K=a(null),G=a({time:null}),H=l(),W=a([{label:"A",value:"A"},{label:"B",value:"B"},{label:"C",value:"C"},{label:"D",value:"D"},{label:"E",value:"E"},{label:"F",value:"F"}]),X=[{type:"dateRangePicker",key:"time",label:"时间",span:24,md:12,lg:10,xl:8,xxl:6,showTime:!0}],Z=t((()=>{var e;const a={...G.value};return(null==(e=G.value.time)?void 0:e[0])&&(a.startTime=n(G.value.time[0]).format("YYYY-MM-DD "),a.endTime=n(G.value.time[0]).format("YYYY-MM-DD")),delete a.time,a})),ee=i({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,a)=>{ee.current=e,ee.pageSize=a,he()}}),ae=i({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,a)=>{ae.current=e,ae.pageSize=a,ge()}}),le=i({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["20","50","100","200","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,a)=>{le.current=e,le.pageSize=a,fe.value=!0,S({pageSize:ee.pageSize,pageNum:ee.current,...Z.value}).then((({data:e,error:a})=>{a||(e.forEach(((e,a)=>{e.index=a+1})),ve.value=e,le.total=e.total)})).finally((()=>{fe.value=!1}))}}),te=a([{key:"index",dataIndex:"index",title:"序号",width:100,align:"center",checked:!0},{key:"useDate",dataIndex:"useDate",title:"使用日期",width:130,align:"center",checked:!0,ellipsis:!0},{key:"knifeLib",dataIndex:"knifeLib",title:"刀具库",width:70,align:"center",checked:!0,ellipsis:!0},{key:"useDateLength",dataIndex:"useDateLength",title:"今日行程",width:120,align:"center",checked:!0,ellipsis:!0},{key:"useDateTotalLength",dataIndex:"useDateTotalLength",title:"累计行程",width:120,align:"center",checked:!0,ellipsis:!0},{key:"grind",dataIndex:"grind",title:"研磨",width:120,align:"center",checked:!0,ellipsis:!0},{key:"operator",dataIndex:"operator",title:"记录人",width:100,align:"center",checked:!0,ellipsis:!0},{key:"foreman",dataIndex:"foreman",title:"领班审核",width:80,align:"center",checked:!0,ellipsis:!0},{key:"examiner",dataIndex:"examiner",title:"主管审核",width:80,align:"center",checked:!0,ellipsis:!0},{key:"foremanTime",dataIndex:"foremanTime",title:"领班审核时间",width:150,align:"center",checked:!0,ellipsis:!0},{key:"examinerTime",dataIndex:"examinerTime",title:"主管审核时间",width:150,align:"center",checked:!0,ellipsis:!0},{key:"state",dataIndex:"state",title:"审核状态",width:100,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>["待领班审核","待修改","待主管审核","审核完毕"][e.state]},{key:"remark",dataIndex:"remark",title:"备注",width:200,align:"center",checked:!0,ellipsis:!0}]),ne=a([{key:"index",dataIndex:"index",title:"序号",width:80,align:"center",checked:!0,ellipsis:!0},{key:"knifeLib",dataIndex:"knifeLib",title:"绑定刀组",width:80,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>s(r,{style:"width: 100%",value:e.knifeLib,options:W.value,onChange:a=>{e.knifeLib=a}},null)},{key:"knifeNum1",dataIndex:"knifeNum1",title:"刀具上编号",width:130,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>s(u,{value:e.knifeNum1,onChange:a=>{e.knifeNum1=a.target.value}},null)},{key:"knifeNum2",dataIndex:"knifeNum2",title:"刀具下编号",width:130,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>s(u,{value:e.knifeNum2,onChange:a=>{e.knifeNum2=a.target.value}},null)},{key:"knifeDiameter1",dataIndex:"knifeDiameter1",title:"刀具直径1",width:130,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>s(u,{value:e.knifeDiameter1,onChange:a=>{e.knifeDiameter1=a.target.value}},null)},{key:"knifeDiameter2",dataIndex:"knifeDiameter2",title:"刀具直径2",width:130,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>s(u,{value:e.knifeDiameter2,onChange:a=>{e.knifeDiameter2=a.target.value}},null)},{key:"useTotalLength",dataIndex:"useTotalLength",title:"累计长度",width:100,align:"center",checked:!0,ellipsis:!0},{key:"createDate",dataIndex:"createDate",title:"创建时间",width:130,align:"center",checked:!0,ellipsis:!0},{key:"createBy",dataIndex:"createBy",title:"创建人",width:80,align:"center",checked:!0,ellipsis:!0},{key:"cz",dataIndex:"cz",title:"操作",align:"center",checked:!0,ellipsis:!0,width:130,fixed:"right",customRender:({record:e})=>s("div",null,[s(d,{type:"primary",ghost:!0,size:"small",class:"m-r8px",onClick:()=>{L(e).then((({error:e,data:a})=>{var l;e||(null==(l=window.$message)||l.success("修改成功"),ge())}))}},{default:()=>[o("修改")]}),s(d,{danger:!0,ghost:!0,size:"small",class:"m-r8px",onClick:()=>{R(e).then((({error:e,data:a})=>{var l;e||(null==(l=window.$message)||l.success("删除成功"),ge())}))}},{default:()=>[o("删除")]})])}]),ie=a([{key:"knifeLib",dataIndex:"knifeLib",title:"刀组",width:50,fixed:"left",align:"center",checked:!0,ellipsis:!0},{key:"knifes",dataIndex:"knifes",title:"刀具上编号",width:120,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>{var a;return null==(a=e.knifes)?void 0:a.knifeNum1}},{key:"knifeNum2",dataIndex:"knifeNum2",title:"刀具下编号",width:120,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>{var a;return null==(a=e.knifes)?void 0:a.knifeNum2}},{key:"knifeDiameter1",dataIndex:"knifeDiameter1",title:"刀具直径1",width:120,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>{var a;return null==(a=e.knifes)?void 0:a.knifeDiameter1}},{key:"knifeDiameter2",dataIndex:"knifeDiameter2",title:"刀具直径2",width:120,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>{var a;return null==(a=e.knifes)?void 0:a.knifeDiameter2}},{key:"useDateLength",dataIndex:"useDateLength",title:"今日行程",align:"center",width:100,checked:!0,ellipsis:!0,customRender:({record:e})=>e.disabled?s("div",{style:"min-width:150px"},[e.useDateLength]):s(u,{style:"height: 22px !important;",value:e.useDateLength,onBlur:a=>{const l=a.target.value;if(!isNonNegativeInteger(Number(l).toString())||!Number(l>=0))return message.error("请输入正整数"),void(e.useDateLength=null);e.useDateLength=Number(l)}},null)},{key:"useTotalLength",dataIndex:"useTotalLength",title:"累计行程",width:100,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>{var a;return null==(a=e.knifes)?void 0:a.useTotalLength}},{key:"grind",dataIndex:"grind",title:"研磨",width:100,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>e.grind?s("div",{style:"min-width:150px"},[e.grind]):s(u,{style:"height: 22px !important;",value:e.grind,onBlur:a=>{const l=a.target.value;if(!isNonNegativeInteger(Number(l).toString())||!Number(l>=0))return message.error("请输入正整数"),void(e.grind=null);e.grind=Number(l)}},null)}]),se=a({operator:H.userInfo.user.nickName||H.userInfo.user.userName}),re=a({}),ue=a({});a({});const de=a(!1),oe=a(!1),ce=a(!1);a(!1);const me=a([]),ve=a([]);a([{badName:"A",result:"",problem:""},{badName:"B",result:"",problem:""},{badName:"C",result:"",problem:""},{badName:"D",result:"",problem:""},{badName:"E",result:"",problem:""},{badName:"F",result:"",problem:""}]);const fe=a(!1),pe=a([]);function he(){fe.value=!0,z({pageSize:ee.pageSize,pageNum:ee.current,...Z.value}).then((({data:e,error:a})=>{a||(e.list.forEach(((e,a)=>{e.index=a+1})),me.value=e.list,ee.total=e.total)})).finally((()=>{fe.value=!1}))}const ke=a([]);function ge(){fe.value=!0,T({pageSize:ee.pageSize,pageNum:ee.current,...Z.value}).then((({data:e,error:a})=>{a||(e.list.forEach(((e,a)=>{e.index=a+1})),ke.value=e.list,ae.total=e.total)})).finally((()=>{fe.value=!1}))}const xe=a(""),we=a(""),be=a("");function ye(){se.value={operator:H.userInfo.nickName||H.userInfo.user.userName},de.value=!0,we.value="V-CUT刀具记录新增"}function _e(e){se.value.knifeData=ve.value,"V-CUT刀具记录新增"==e?U(se.value).then((({data:e,error:a})=>{var l;a||(null==(l=window.$message)||l.success("新增成功"),de.value=!1,he())})):j(se.value).then((({data:e,error:a})=>{var l;a||(null==(l=window.$message)||l.success("修改成功"),de.value=!1,he())}))}const Ne=a([]);function De(e){Ne.value=e}function Ie(){var e;if(1!==Ne.value.length)return null==(e=window.$message)?void 0:e.error("请选择一条数据");const a=me.value.filter((e=>Ne.value.includes(e.id)));we.value="V-CUT刀具记录信息修改",se.value=a[0],de.value=!0}function Ce(){var e;if(0==Ne.value.length)return null==(e=window.$message)?void 0:e.error("请选择数据");const a=Ne.value;B(a).then((({error:e,data:a})=>{var l;e||(null==(l=window.$message)||l.success("删除成功"),he())}))}function ze(){re.value={},xe.value="V-CUT刀具库新增",oe.value=!0}function Se(){ue.value={},be.value="V-CUT刀具库查询",ge(),ce.value=!0}function Te(){ee.current=1,he()}function Le(){nextTick((()=>{G.value={keywords:null},Te()}))}return he(),ge(),ge(),(a,l)=>{const t=d,n=e,i=Y,r=x,z=w,S=u,T=b,L=y,R=_,U=N,j=D,B=P;return c(),m("div",q,[s(I,{ref_key:"commonSearchRef",ref:K,searchParams:G.value,"onUpdate:searchParams":l[0]||(l[0]=e=>G.value=e),"form-list":X,"is-search":!0,onSearch:Te,onReset:Le},null,8,["searchParams"]),s(B,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:v((()=>[s(t,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:ye},{default:v((()=>l[17]||(l[17]=[f("span",{class:"ml-3px"},"新增",-1)]))),_:1}),s(t,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:Ie},{default:v((()=>l[18]||(l[18]=[f("span",{class:"ml-3px"},"修改",-1)]))),_:1}),s(t,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:Ce},{default:v((()=>l[19]||(l[19]=[f("span",{class:"ml-3px"},"删除",-1)]))),_:1}),s(t,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:ze},{default:v((()=>l[20]||(l[20]=[f("span",{class:"ml-3px"},"新增刀具库",-1)]))),_:1}),s(t,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:Se},{default:v((()=>l[21]||(l[21]=[f("span",{class:"ml-3px"},"查询刀具库",-1)]))),_:1})])),extra:v((()=>[s(n,{columns:te.value,"onUpdate:columns":l[1]||(l[1]=e=>te.value=e)},null,8,["columns"])])),default:v((()=>[s(i,{columns:te.value,"data-source":me.value,size:"small",bordered:"",loading:fe.value,"row-selection":{selectedRowKeys:Ne.value,onChange:De},"default-expanded-row-keys":pe.value,"row-key":"id","default-expand-all-rows":!0,scroll:{x:"1200",y:"auto"},pagination:ee,class:"h-full"},null,8,["columns","data-source","loading","row-selection","default-expanded-row-keys","pagination"]),s(C,{visible:de.value,"onUpdate:visible":l[6]||(l[6]=e=>de.value=e),"destroy-on-close":!0,centered:!0,title:we.value,width:"1200px",height:"600px"},{footer:v((()=>[f("div",V,[s(t,{onClick:l[5]||(l[5]=e=>de.value=!1)},{default:v((()=>l[22]||(l[22]=[o("关闭")]))),_:1}),s(t,{onClick:_e},{default:v((()=>l[23]||(l[23]=[o("保存")]))),_:1})])])),default:v((()=>[f("div",null,[s(z,null,{default:v((()=>[s(r,{key:"1",tab:"基本信息"})])),_:1})]),f("div",null,[s(i,{columns:ie.value,pagination:!1,"data-source":ve.value,loading:fe.value,size:"small",bordered:"","default-expanded-row-keys":pe.value,"row-key":"id","default-expand-all-rows":!0,scroll:{x:"auto",y:"auto"},class:"h-full"},null,8,["columns","data-source","loading","default-expanded-row-keys"])]),f("div",null,[s(z,null,{default:v((()=>[s(r,{key:"1",tab:"状态信息"})])),_:1})]),f("div",null,[f("div",E,[s(U,{model:se.value,name:"basic","label-col":{span:6},autocomplete:"off"},{default:v((()=>[s(R,null,{default:v((()=>[s(L,{span:8},{default:v((()=>[s(T,{label:"记录人",name:"operator"},{default:v((()=>[s(S,{value:se.value.operator,"onUpdate:value":l[2]||(l[2]=e=>se.value.operator=e),"allow-clear":"",disabled:"false"},null,8,["value"])])),_:1})])),_:1}),s(L,{span:8},{default:v((()=>[s(T,{label:"领班审核",name:"foreman"},{default:v((()=>[s(S,{value:se.value.foreman,"onUpdate:value":l[3]||(l[3]=e=>se.value.foreman=e),"allow-clear":"",disabled:"true"},null,8,["value"])])),_:1})])),_:1}),s(L,{span:8},{default:v((()=>[s(T,{label:"主管审核",name:"examiner"},{default:v((()=>[s(S,{value:se.value.examiner,"onUpdate:value":l[4]||(l[4]=e=>se.value.examiner=e),"allow-clear":"",disabled:"true"},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])])])),_:1},8,["visible","title"]),s(C,{visible:oe.value,"onUpdate:visible":l[13]||(l[13]=e=>oe.value=e),"destroy-on-close":!0,centered:!0,title:xe.value,width:"850px",height:"500px"},{footer:v((()=>[f("div",O,[s(t,{onClick:l[11]||(l[11]=e=>oe.value=!1)},{default:v((()=>l[24]||(l[24]=[o("关闭")]))),_:1}),s(t,{onClick:l[12]||(l[12]=e=>{"V-CUT刀具库新增"==xe.value?$(re.value).then((({data:e,error:a})=>{var l;a||(null==(l=window.$message)||l.success("新增成功"),oe.value=!1)})):edfactoryequipmentdataupdate(re.value).then((({data:e,error:a})=>{var l;a||(null==(l=window.$message)||l.success("修改成功"),oe.value=!1)}))})},{default:v((()=>l[25]||(l[25]=[o("保存")]))),_:1})])])),default:v((()=>[f("div",null,[s(z,null,{default:v((()=>[s(r,{key:"1",tab:"刀具组信息"})])),_:1})]),f("div",M,[s(U,{model:re.value,name:"basic","label-col":{span:6},autocomplete:"off"},{default:v((()=>[s(R,null,{default:v((()=>[s(L,{span:12},{default:v((()=>[s(T,{label:"刀具编号(上)",name:"knifeNum1",rules:[{required:!0,message:"请输入编号!"}]},{default:v((()=>[s(S,{value:re.value.knifeNum1,"onUpdate:value":l[7]||(l[7]=e=>re.value.knifeNum1=e),"allow-clear":"","show-search":""},{default:v((()=>[(c(!0),m(p,null,h(a.optionsName,(e=>(c(),k(j,{key:e.label,value:e.label},{default:v((()=>[o(g(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),s(L,{span:12},{default:v((()=>[s(T,{label:"刀具编号(下)",name:"knifeNum2",rules:[{required:!0,message:"请输入编号!"}]},{default:v((()=>[s(S,{value:re.value.knifeNum2,"onUpdate:value":l[8]||(l[8]=e=>re.value.knifeNum2=e),"allow-clear":"","show-search":""},{default:v((()=>[(c(!0),m(p,null,h(a.optionsName,(e=>(c(),k(j,{key:e.label,value:e.label},{default:v((()=>[o(g(e.label)+"e ",1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),s(L,{span:12},{default:v((()=>[s(T,{label:"直径1",name:"knifeDiameter1",rules:[{required:!0,message:"请输入直径!"}]},{default:v((()=>[s(S,{value:re.value.knifeDiameter1,"onUpdate:value":l[9]||(l[9]=e=>re.value.knifeDiameter1=e),"allow-clear":"","show-search":""},{default:v((()=>[(c(!0),m(p,null,h(a.optionsName,(e=>(c(),k(j,{key:e.label,value:e.label},{default:v((()=>[o(g(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),s(L,{span:12},{default:v((()=>[s(T,{label:"直径2",name:"knifeDiameter2",rules:[{required:!0,message:"请输入直径!"}]},{default:v((()=>[s(S,{value:re.value.knifeDiameter2,"onUpdate:value":l[10]||(l[10]=e=>re.value.knifeDiameter2=e),"allow-clear":"","show-search":""},{default:v((()=>[(c(!0),m(p,null,h(a.optionsName,(e=>(c(),k(j,{key:e.label,value:e.label},{default:v((()=>[o(g(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible","title"]),s(C,{visible:ce.value,"onUpdate:visible":l[16]||(l[16]=e=>ce.value=e),"destroy-on-close":!0,centered:!0,title:be.value,width:"1200px",height:"750px"},{footer:v((()=>[f("div",A,[s(t,{onClick:l[15]||(l[15]=e=>ce.value=!1)},{default:v((()=>l[26]||(l[26]=[o("关闭")]))),_:1})])])),default:v((()=>[s(I,{ref_key:"commonSearchRef",ref:K,searchParams:G.value,"onUpdate:searchParams":l[14]||(l[14]=e=>G.value=e),"form-list":X,"is-search":!0,onSearch:Te,onReset:Le},null,8,["searchParams"]),f("div",F,[s(U,{model:ue.value,name:"basic","label-col":{span:6},autocomplete:"off"},{default:v((()=>[f("div",Q,[s(i,{columns:ne.value,"data-source":ke.value,size:"small",loading:fe.value,bordered:"",pagination:le},null,8,["columns","data-source","loading","pagination"])])])),_:1},8,["model"])])])),_:1},8,["visible","title"])])),_:1})])}}});export{J as default};
