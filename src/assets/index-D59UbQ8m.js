import{bY as e,m as s,i as o,a8 as r,dm as a,dn as t,a0 as n,a5 as u}from"./index-B3PZsRwT.js";function i(e){return"function"==typeof e?e():o(e)}"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const c=new WeakMap;function l(o,l,f={}){const{mode:p="replace",route:d=r(),router:m=a(),transform:h=e=>e}=f;c.has(m)||c.set(m,new Map);const y=c.get(m);let b=d.query[o];var v;let q;v=()=>{b=void 0},e()&&s(v);const g=t(((e,s)=>(q=s,{get:()=>(e(),h(void 0!==b?b:i(l))),set(e){b!==e&&(b=e===l||null===e?void 0:e,y.set(o,e===l||null===e?void 0:e),s(),u((()=>{if(0===y.size)return;const e=Object.fromEntries(y.entries());y.clear();const{params:s,query:o,hash:r}=d;m[i(p)]({params:s,query:{...o,...e},hash:r})})))}})));return n((()=>d.query[o]),(e=>{b!==e&&(b=e,q())}),{flush:"sync"}),g}export{l as u};
