import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as a,K as l,L as t,o as s,c as n,w as o,g as c,f as i,s as r,t as d,I as u,v as m,N as p,O as f,B as h,P as v,Q as g,F as x,cT as k,r as y,p as _,S as b,e as w}from"./index-B3PZsRwT.js";import{a as N}from"./menu-DzPI9oz5.js";import{C}from"./index-BThgVJ70.js";const I={class:"w-full flex"},S={class:"flex"},L={class:"w-full flex-y-center justify-end gap-12px"},j={class:"ml-3px"},z={class:"ml-3px"},T=a({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:l(["search"],["update:model"]),setup(e,{emit:a}){const l=a,k=t(e,"model");function y(){l("search",k.value)}function _(){k.value={menuName:"",status:"",materialLot:""},l("search",k.value)}return(e,a)=>{const l=u,t=m,b=p,w=f,N=h,T=v,U=g,A=x,B=C;return s(),n(B,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:o((()=>[c(A,{ref:"formRef",model:k.value,"label-col":{span:5,md:7},class:"search-form"},{default:o((()=>[i("div",I,[c(U,{gutter:[15,8],wrap:"",class:"w-full"},{default:o((()=>[c(b,{span:8,md:12,lg:6,xl:6,xxl:6},{default:o((()=>[c(t,{label:"任务名称",name:"taskName",class:"m-0","label-col":{}},{default:o((()=>[c(l,{value:k.value.taskName,"onUpdate:value":a[0]||(a[0]=e=>k.value.taskName=e),placeholder:"请输入任务名称",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:r(y,["enter"])},null,8,["value"])])),_:1})])),_:1}),c(b,{span:8,md:12,lg:6,xl:6,xxl:6},{default:o((()=>[c(t,{label:"物料批次",name:"materialLot",class:"m-0","label-col":{}},{default:o((()=>[c(l,{value:k.value.materialLot,"onUpdate:value":a[1]||(a[1]=e=>k.value.materialLot=e),placeholder:"请输入物料批次",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:r(y,["enter"])},null,8,["value"])])),_:1})])),_:1}),c(b,{span:8,md:12,lg:6,xl:6,xxl:6},{default:o((()=>[c(t,{label:"机台号",name:"machineNo",class:"m-0","label-col":{}},{default:o((()=>[c(l,{value:k.value.machineNo,"onUpdate:value":a[2]||(a[2]=e=>k.value.machineNo=e),placeholder:"请输入机台号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:r(y,["enter"])},null,8,["value"])])),_:1})])),_:1}),i("div",S,[c(t,{class:"m-0"},{default:o((()=>[i("div",L,[c(N,{type:"primary",ghost:"",class:"mini-btn",onClick:y},{icon:o((()=>[c(w,{class:"align-sub text-icon"})])),default:o((()=>[i("span",j,d(e.$t("common.search")),1)])),_:1}),c(N,{class:"mini-btn",onClick:_},{icon:o((()=>[c(T,{class:"align-sub text-icon"})])),default:o((()=>[i("span",z,d(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),U={class:"jl-main-page one-code-ascend min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},A=a({name:"intelligent-iogistics_agv-task-issuance-record",__name:"index",setup(a){const{getDict:l}=k(),t=y({});l("agv_transport_status").then((e=>{e.forEach((e=>{t.value[e.value]=e.label}))}));const n=y({taskName:null,materialLot:null,machineNo:null}),i=_({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,a)=>{i.current=e,i.pageSize=a,f()}}),r=y([]),d=y(!1),u=y([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"taskName",dataIndex:"taskName",title:"任务名称",align:"center",checked:!0,ellipsis:!0},{key:"taskType",dataIndex:"taskType",title:"任务类型",align:"center",checked:!0,ellipsis:!0},{key:"taskStatus",dataIndex:"taskStatus",title:"任务状态",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>t.value[e.taskStatus]},{key:"podCode",dataIndex:"podCode",title:"托盘编号",align:"center",checked:!0,ellipsis:!0},{key:"materialLot",dataIndex:"materialLot",title:"物料批次",align:"center",checked:!0,ellipsis:!0},{key:"machineNo",dataIndex:"machineNo",title:"机台号",align:"center",checked:!0,ellipsis:!0},{key:"rebotCode",dataIndex:"rebotCode",title:"AGV编号",align:"center",checked:!0,ellipsis:!0},{key:"startCoo",dataIndex:"startCoo",title:"任务起始坐标",align:"center",checked:!0,ellipsis:!0},{key:"endCoo",dataIndex:"endCoo",title:"任务结束坐标",align:"center",checked:!0,ellipsis:!0},{key:"createTime",dataIndex:"createTime",title:"创建时间",align:"center",checked:!0,ellipsis:!0},{key:"createBy",dataIndex:"createBy",title:"操作人",align:"center",checked:!0,ellipsis:!0}]);function m(){p()}function p(){i.current=1,f()}function f(){d.value=!0,N({pageSize:i.pageSize,pageNum:i.current,...n.value}).then((({data:e,error:a})=>{a||(e.list.forEach(((e,a)=>{e.index=a+1})),r.value=e.list,i.total=e.total)})).finally((()=>{d.value=!1}))}f();const h=y(null),v=e=>({style:{background:e.id===h.value?"#BAEAFA":""},class:e.id===h.value?"jl-table-row-selected":"",onClick:()=>{h.value=e.id}});return(a,l)=>{const t=e,f=b("STable"),h=C;return s(),w("div",U,[c(T,{model:n.value,"onUpdate:model":l[0]||(l[0]=e=>n.value=e),onReset:m,onSearch:p},null,8,["model"]),c(h,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{extra:o((()=>[c(t,{columns:u.value,"onUpdate:columns":l[1]||(l[1]=e=>u.value=e)},null,8,["columns"])])),default:o((()=>[c(f,{columns:u.value,"data-source":r.value,bordered:"",size:"small",loading:d.value,"row-key":"id",pagination:i,"custom-row":v,scroll:{y:"auto"},"row-height":23,class:"h-full"},null,8,["columns","data-source","loading","pagination"])])),_:1})])}}});export{A as default};
