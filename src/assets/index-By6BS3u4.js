import{_ as e}from"./table-DoFSI9NT.js";import{_ as a}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{r as l,o as t,c as n,w as i,f as s,g as o,a5 as c,aa as r,e as d,W as u,ah as p,ai as m,J as h,u as k,a2 as y,a3 as g,i as f,X as w,h as v,B as x}from"./index-B3PZsRwT.js";import{g as b,b as I,c as N,e as C,f as _,s as D,r as T,h as B,i as R,j as O,k as P}from"./board-management-Dc4brWFm.js";import{_ as L}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{E as S}from"./EditOutlined-5FYoGiVM.js";import{D as U}from"./DeleteOutlined-CWT7lRAZ.js";import{D as Y}from"./DownloadOutlined-CnXdrHEb.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";import"./index-BThgVJ70.js";const j={class:"h-full min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},E={__name:"select-screen-type",emits:["select"],setup(r,{expose:d,emit:u}){const p=l(!1),m=u,h=l(null),k=l({itemName:null,meshCount:null}),y=[{type:"input",key:"itemName",label:"项目名称",placeholder:"请输入项目名称",span:8},{type:"input",key:"meshCount",label:"网目",placeholder:"请输入网目",span:8}],g=l(null),f=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",fixed:"left",width:70,align:"center",checked:!0,ellipsis:!0},{key:"itemName",dataIndex:"itemName",title:"项目名称",align:"center",fixed:"left",checked:!0,ellipsis:!0},{key:"deptName",dataIndex:"deptName",title:"使用部门",align:"center",width:100,checked:!0,ellipsis:!0},{key:"meshCount",dataIndex:"meshCount",title:"网目",width:70,align:"center",checked:!0,ellipsis:!0},{key:"totalLive",dataIndex:"totalLive",title:"使用寿命",width:100,align:"center",checked:!0,ellipsis:!0},{key:"totalWc",dataIndex:"totalWc",title:"翻洗次数",width:100,align:"center",checked:!0,ellipsis:!0},{key:"newLower",dataIndex:"newLower",title:"新网张力下限",align:"center",width:120,checked:!0,ellipsis:!0},{key:"newUpper",dataIndex:"newUpper",title:"新网张力上限",align:"center",width:120,checked:!0,ellipsis:!0},{key:"oldUpper",dataIndex:"oldUpper",title:"旧网张力上限",align:"center",width:120,checked:!0,ellipsis:!0},{key:"oldLower",dataIndex:"oldLower",title:"旧网张力下限",align:"center",width:120,checked:!0,ellipsis:!0},{key:"createBy",dataIndex:"createBy",title:"创建人",width:90,align:"center",checked:!0,ellipsis:!0}];function w(){g.value.getData(1)}function v(){c((()=>{k.value.itemName=null,k.value.meshCount=null,g.value.getData(1)}))}function x(e){m("select",e),p.value=!1}return d({handleOpen:function(e){k.value.itemName=e,p.value=!0}}),(l,c)=>(t(),n(L,{visible:p.value,"onUpdate:visible":c[2]||(c[2]=e=>p.value=e),title:"网板类型列表",height:"80vh",width:"1200px","destroy-on-close":!1,"show-confirm-btn":!1,"cancel-btn-text":"关闭"},{default:i((()=>[s("div",j,[o(a,{ref_key:"commonSearchRef",ref:h,searchParams:k.value,"onUpdate:searchParams":c[0]||(c[0]=e=>k.value=e),"form-list":y,"is-search":!0,onSearch:w,onReset:v},null,8,["searchParams"]),o(e,{ref_key:"tableRef",ref:g,searchParams:k.value,"onUpdate:searchParams":c[1]||(c[1]=e=>k.value=e),column:f,"row-key":"id","show-row-selection":!1,"auto-generate-uuid":"",scroll:{y:"auto"},"is-init-get-data":"",class:"h-full",url:"/qms/scrscreen/scrscreenType/pageList",onTableRowClick:x},null,8,["searchParams"])])])),_:1},8,["visible"]))}},q={class:"h-full min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},M={__name:"select-module-No",emits:["select"],setup(r,{expose:d,emit:u}){const p=l(!1),m=u,h=l(null),k=l({moduleNo:null}),y=[{type:"input",key:"moduleNo",label:"生产型号",placeholder:"请输入生产型号",span:6}],g=l(null),f=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",fixed:"left",width:70,align:"center",checked:!0,ellipsis:!0},{key:"moduleNo",dataIndex:"moduleNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0},{key:"pnType",dataIndex:"pnType",title:"型号类型",align:"center",checked:!0,ellipsis:!0},{key:"custProdNo",dataIndex:"custProdNo",title:"客户类型",align:"center",checked:!0,ellipsis:!0},{key:"createBy",dataIndex:"createBy",title:"创建人",align:"center",checked:!0,ellipsis:!0},{key:"createDate",dataIndex:"createDate",title:"创建时间",width:170,align:"center",checked:!0,ellipsis:!0}];function w(){g.value.getData(1)}function v(){c((()=>{k.value.itemName=null,k.value.meshCount=null,w()}))}function x(e){m("select",e),p.value=!1}return d({handleOpen:function(e){k.value.moduleNo=e,p.value=!0}}),(l,c)=>(t(),n(L,{visible:p.value,"onUpdate:visible":c[2]||(c[2]=e=>p.value=e),title:"生产型号列表",height:"80vh",width:"1200px","destroy-on-close":!1,"show-confirm-btn":!1,"cancel-btn-text":"关闭"},{default:i((()=>[s("div",q,[o(a,{ref_key:"commonSearchRef",ref:h,searchParams:k.value,"onUpdate:searchParams":c[0]||(c[0]=e=>k.value=e),"form-list":y,"is-search":!0,onSearch:w,onReset:v},null,8,["searchParams"]),o(e,{ref_key:"tableRef",ref:g,searchParams:k.value,"onUpdate:searchParams":c[1]||(c[1]=e=>k.value=e),column:f,"row-key":"id","show-row-selection":!1,"auto-generate-uuid":"",scroll:{y:"auto"},"is-init-get-data":"",class:"h-full",url:"/qms/scrscreen/screenInfo/modulePageList",onTableRowClick:x},null,8,["searchParams"])])])),_:1},8,["visible"]))}},A={class:"h-full w-full"},W={__name:"add",props:{rowData:{type:Object,default:()=>null}},setup(e,{expose:a}){const n=e,i=l(null),s=l(null),c=l([]),p=l([]),m=l([]),h=l(null),k=l(function(){if(n.rowData)return n.rowData;return{frame:null,frameNo:null,moduleNo:null,toolModel:null,dateCode:null,screenTypeName:null,screenTypeId:null,meshCount:null,totalLive:null,totalWc:null,usageProcess:null,face:null,locationName:null,location:null,locationId:null,useCount:null,washCount:null,tensionA:null,tensionB:null,tensionC:null,tensionD:null,tensionE:null,makeDate:r().format("YYYY-MM-DD HH:mm:ss"),makeBy:null,remark:null}}());function y(){I(k.value.moduleNo).then((({data:e,error:a})=>{a||(m.value=e.map((e=>({...e,label:e.techName,value:e.techName}))))}))}b().then((({data:e,error:a})=>{var l;a||(p.value=null==(l=e.list)?void 0:l.map((e=>({...e,label:e.locationName,value:e.locationName}))))})),async function(){const e={};n.rowData&&(e.frameNo=n.rowData.frameNo);const{data:a,error:l}=await N(e);l||(c.value=a.map((e=>({...e,label:"".concat(e.frameName),value:e.frameNo}))))}(),n.rowData&&y();const g=[{label:"网框编码",key:"frameNo",span:12,type:"select",placeholder:"请输入网框编码",search:!0,selectOptions:c},{label:"生产型号",key:"moduleNo",span:12,type:"input",className:"cursor-pointer",placeholder:"请选择生产型号",readonly:!0,rule:[{required:!0,message:"请选择生产型号",trigger:"change"}],click:()=>{s.value.handleOpen(k.value.moduleNo)}},{label:"周期",key:"dateCode",span:12,type:"input",placeholder:"请输入周期"},{label:"网板类型",key:"screenTypeName",span:12,type:"input",readonly:!0,placeholder:"请选择网板类型",className:"cursor-pointer",click:()=>{i.value.handleOpen(k.value.screenTypeName)}},{label:"网纱T数",key:"meshCount",span:12,disabled:!0,type:"input"},{label:"使用寿命",key:"totalLive",span:12,disabled:!0,type:"input"},{label:"最大翻洗次数",key:"totalWc",span:12,disabled:!0,type:"input"},{label:"使用工艺",key:"techName",span:12,type:"select",search:!0,placeholder:"请选择使用工艺",selectOptions:m,change:e=>{k.value.techId=m.value.find((a=>a.label===e)).techId}},{label:"面向",key:"face",span:12,type:"dictionary",selectType:"select",showSearch:!0,placeholder:"请选择面向",dictCode:"board_facing"},{label:"存放区域",key:"locationName",span:12,type:"select",placeholder:"请选择存放区域",search:!0,selectOptions:p,change:()=>{k.value.locationId=p.value.find((e=>e.label===k.value.locationName)).locationId}},{label:"印次",key:"useCount",span:12,type:"input",placeholder:"请输入印次"},{label:"A点张力",key:"tensionA",span:12,type:"input",placeholder:"请选择A点张力"},{label:"B点张力",key:"tensionB",span:12,type:"input",placeholder:"请选择B点张力"},{label:"C点张力",key:"tensionC",span:12,type:"input",placeholder:"请选择C点张力"},{label:"D点张力",key:"tensionD",span:12,type:"input",placeholder:"请选择D点张力"},{label:"E点张力",key:"tensionE",span:12,type:"input",placeholder:"请选择E点张力"},{label:"制作时间",key:"makeDate",span:12,type:"datePicker",placeholder:"请选择制作时间",showTime:!0},{label:"制作人",key:"makeBy",span:12,type:"dictionary",selectType:"select",showSearch:!0,placeholder:"请选择制作人",dictCode:"board_maker",rule:[{required:!0,message:"请选择制作人",trigger:"change"}]},{label:"备注",key:"remark",span:24,type:"textarea",placeholder:"请输入备注"}];function f(e){k.value.screenTypeName=e.itemName,k.value.screenTypeId=e.screenTypeId,k.value.meshCount=e.meshCount,k.value.totalLive=e.totalLive,k.value.totalWc=e.totalWc}function w(e){k.value.moduleNo=e.moduleNo,k.value.techName=null,y()}return a({model:k.value,validateForm:async function(){await h.value.validateForm()}}),(e,a)=>{const l=u;return t(),d("div",A,[o(l,{ref_key:"formRef",ref:h,model:k.value,"onUpdate:model":a[0]||(a[0]=e=>k.value=e),"form-list":g},null,8,["model"]),o(E,{ref_key:"selectScreenTypeRef",ref:i,onSelect:f},null,512),o(M,{ref_key:"selectModuleNoRef",ref:s,onSelect:w},null,512)])}}},F=h({__name:"record-list",props:{rowData:{type:Object,default:()=>null}},setup(a){const s=a,c=l("1"),d=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,fixed:"left",align:"center",checked:!0,ellipsis:!0},{key:"moduleNo",dataIndex:"moduleNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,width:150},{key:"screenNo",dataIndex:"screenNo",title:"网板编号",align:"center",checked:!0,ellipsis:!0,width:150},{key:"recDate",dataIndex:"recDate",title:"领取日期",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>r(e.recDate).format("YYYY-MM-DD HH:mm:ss")},{key:"recBy",dataIndex:"recBy",title:"领取人",align:"center",checked:!0,ellipsis:!0},{key:"recRemark",dataIndex:"recRemark",title:"备注",align:"center",checked:!0,ellipsis:!0}],u=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,fixed:"left",align:"center",checked:!0,ellipsis:!0},{key:"lotId",dataIndex:"lotId",title:"LOT号",align:"center",checked:!0,ellipsis:!0,width:150},{key:"moduleNo",dataIndex:"moduleNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,width:150},{key:"screenNo",dataIndex:"screenNo",title:"网板编号",align:"center",checked:!0,ellipsis:!0,width:180},{key:"userCount",dataIndex:"userCount",title:"使用次数",align:"center",checked:!0,ellipsis:!0},{key:"totalCount",dataIndex:"totalCount",title:"累计次数",align:"center",checked:!0,ellipsis:!0},{key:"useBy",dataIndex:"useBy",title:"使用人",align:"center",checked:!0,ellipsis:!0},{key:"useDate",dataIndex:"useDate",title:"使用时间",align:"center",checked:!0,ellipsis:!0,width:180},{key:"useRemark",dataIndex:"useRemark",title:"备注",align:"center",checked:!0,ellipsis:!0}],h=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,fixed:"left",align:"center",checked:!0,ellipsis:!0},{key:"screenNo",dataIndex:"screenNo",title:"网板编号",align:"center",checked:!0,ellipsis:!0,width:150},{key:"locationName",dataIndex:"locationName",title:"归还仓位",align:"center",checked:!0,ellipsis:!0},{key:"inBy",dataIndex:"inBy",title:"归还人",align:"center",checked:!0,ellipsis:!0},{key:"inDate",dataIndex:"inDate",title:"归还时间",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>r(e.inDate).format("YYYY-MM-DD HH:mm:ss")},{key:"inRemark",dataIndex:"inRemark",title:"备注",align:"center",checked:!0,ellipsis:!0}],k={recordType:0,screenNo:s.rowData.screenNo},y={recordType:1,screenNo:s.rowData.screenNo},g={recordType:2,screenNo:s.rowData.screenNo};return(a,l)=>{const s=e,r=p,f=m;return t(),n(f,{activeKey:c.value,"onUpdate:activeKey":l[3]||(l[3]=e=>c.value=e),class:"board-management-list-tabs"},{default:i((()=>[o(r,{key:"1",tab:"领取记录"},{default:i((()=>[o(s,{searchParams:k,"onUpdate:searchParams":l[0]||(l[0]=e=>k=e),column:d,"row-key":"recordId","show-row-selection":!1,"auto-generate-uuid":"",scroll:{y:"auto"},"is-init-get-data":"",class:"h-full",url:"/qms/scrscreen/bindRecord/pageList"})])),_:1}),o(r,{key:"2",tab:"使用记录"},{default:i((()=>[o(s,{searchParams:y,"onUpdate:searchParams":l[1]||(l[1]=e=>y=e),column:u,"row-key":"recordId","show-row-selection":!1,"auto-generate-uuid":"",scroll:{y:"auto"},"is-init-get-data":"",class:"h-full",url:"/qms/scrscreen/bindRecord/pageList"})])),_:1}),o(r,{key:"3",tab:"归还记录"},{default:i((()=>[o(s,{searchParams:g,"onUpdate:searchParams":l[2]||(l[2]=e=>g=e),column:h,"row-key":"recordId","show-row-selection":!1,"auto-generate-uuid":"",scroll:{y:"auto"},"is-init-get-data":"",class:"h-full",url:"/qms/scrscreen/bindRecord/pageList"})])),_:1})])),_:1},8,["activeKey"])}}},[["__scopeId","data-v-0b87d9d6"]]),H={class:"board-management-page min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},z=["onClick"],$=["onClick"],K=["onClick"],J=["onClick"],X=["onClick"],G=["onClick"],Q=h(Object.assign({name:"workwear_board-management"},{__name:"index",setup(u){const p=k(),m=window.$useModal,h=l(null),b=l({state:null,moduleNo:null,frameNo:null,screenTypeName:null}),I=[{label:"入库",value:"0"},{label:"领取",value:"1"},{label:"使用",value:"2"}],N=[{type:"select",key:"state",label:"状态",placeholder:"请选择状态",span:24,md:12,lg:8,xl:8,xxl:4,selectOptions:I},{type:"input",key:"moduleNo",label:"生产型号",placeholder:"请输入生产型号",span:24,md:12,lg:8,xl:8,xxl:4},{type:"input",key:"frameNo",label:"网框编码",placeholder:"请输入网框编码",span:24,md:12,lg:8,xl:8,xxl:4},{type:"input",key:"screenTypeName",label:"网板类型",placeholder:"请输入网板类型",span:24,md:12,lg:8,xl:8,xxl:4}],L=l(null),j=l(null),{handleShow:E}=m({modalOption:{width:"1250px",height:"70vh",title:"记录",destroyOnClose:!0,cancelBtnText:"关闭",showConfirmBtn:!1},component:()=>o(F,{"row-data":j.value},null)});function q(e){j.value=e,E()}const M=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",fixed:"left",width:70,align:"center",checked:!0,ellipsis:!0},{key:"screenNo",dataIndex:"screenNo",title:"网板编码",align:"center",checked:!0,fixed:"left",ellipsis:!0,width:160},{key:"frameNo",dataIndex:"frameNo",title:"网框编码",align:"center",checked:!0,ellipsis:!0,fixed:"left",width:100},{key:"moduleNo",dataIndex:"moduleNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,fixed:"left",width:150},{key:"remark",dataIndex:"remark",title:"备注",align:"center",checked:!0,ellipsis:!0,width:150},{key:"state",dataIndex:"state",title:"状态",align:"center",checked:!0,ellipsis:!0,width:70,customRender:({record:e})=>{var a;return(null==(a=I[Number(e.state)])?void 0:a.label)||""}},{key:"pntType",dataIndex:"pntType",title:"型号类型",align:"center",checked:!0,ellipsis:!0,width:75},{key:"screenTypeName",dataIndex:"screenTypeName",title:"网板类型",align:"center",checked:!0,ellipsis:!0,width:100},{key:"face",dataIndex:"face",title:"面向",align:"center",checked:!0,ellipsis:!0,width:75},{key:"dateCode",dataIndex:"dateCode",title:"周期",align:"center",checked:!0,ellipsis:!0,width:75},{key:"meshCount",dataIndex:"meshCount",title:"网纱T数",align:"center",checked:!0,ellipsis:!0,width:75},{key:"locationName",dataIndex:"locationName",title:"存放区域",align:"center",checked:!0,ellipsis:!0,width:100},{key:"techName",dataIndex:"techName",title:"使用工艺",align:"center",checked:!0,ellipsis:!0,width:100},{key:"totalLive",dataIndex:"totalLive",title:"使用寿命",align:"center",checked:!0,ellipsis:!0,width:75},{key:"useCount",dataIndex:"useCount",title:"印次",align:"center",checked:!0,ellipsis:!0,width:75},{key:"tensionA",dataIndex:"tensionA",title:"A点张力",align:"center",checked:!0,ellipsis:!0,width:75},{key:"tensionB",dataIndex:"tensionB",title:"B点张力",align:"center",checked:!0,ellipsis:!0,width:75},{key:"tensionC",dataIndex:"tensionC",title:"C点张力",align:"center",checked:!0,ellipsis:!0,width:75},{key:"tensionD",dataIndex:"tensionD",title:"D点张力",align:"center",checked:!0,ellipsis:!0,width:75},{key:"tensionE",dataIndex:"tensionE",title:"E点张力",align:"center",checked:!0,ellipsis:!0,width:75},{key:"totalWc",dataIndex:"totalWc",title:"最大翻洗次数",align:"center",checked:!0,ellipsis:!0,width:110},{key:"makeBy",dataIndex:"makeBy",title:"制作人",align:"center",checked:!0,ellipsis:!0,width:100},{key:"makeDate",dataIndex:"makeDate",title:"制作日期",align:"center",checked:!0,ellipsis:!0,width:150},{key:"recBy",dataIndex:"recBy",title:"领取人",align:"center",checked:!0,ellipsis:!0,width:100},{key:"recDate",dataIndex:"recDate",title:"领取日期",align:"center",checked:!0,ellipsis:!0,width:150},{key:"inBy",dataIndex:"inBy",title:"入库人",align:"center",checked:!0,ellipsis:!0,width:100},{key:"inDate",dataIndex:"inDate",title:"入库日期",align:"center",checked:!0,ellipsis:!0,width:150},{key:"createBy",dataIndex:"createBy",title:"创建人",align:"center",checked:!0,ellipsis:!0,width:100},{key:"createDate",dataIndex:"createDate",title:"创建时间",align:"center",checked:!0,ellipsis:!0,width:150},{key:"updateBy",dataIndex:"updateBy",title:"修改人",align:"center",checked:!0,ellipsis:!0,width:100},{key:"updateDate",dataIndex:"updateDate",title:"修改时间",align:"center",checked:!0,ellipsis:!0,width:150}];function A(){L.value.getData(1)}function Q(){c((()=>{b.value={state:null,moduleNo:null,frameNo:null,screenTypeName:null},A()}))}const V=l([]);function Z(e){V.value=e}const ee=l(null),ae=l(null),le=l("add"),{handleClose:te,handleLoading:ne,handleShow:ie,updateModalOptions:se}=m({modalOption:{width:"800px",height:"650px",destroyOnClose:!0,title:"新增网板"},component:()=>o(W,{ref:ae,rowData:ee.value},null),onOk:async()=>{const e={...ae.value};await e.validateForm(),ne(!0);try{const a={...e.model};let l;l="add"===le.value?await C(a):await _({...a});const{error:t}=await l;t||(window.$message.success("操作成功"),te(),A())}finally{ne(!1)}}});function oe(e){ee.value=e,e?(le.value="edit",se({title:"修改网板"})):(le.value="add",se({title:"新增网板"})),ie()}const ce=l(null),{handleClose:re,handleLoading:de,handleShow:ue}=m({modalOption:{title:"报废网板",width:"600px",height:"300px",destroyOnClose:!0},formData:{scrapReason:null},formList:[{type:"dictionary",key:"scrapReason",label:"报废原因",dictCode:"board_cause_cancellation",selectType:"select",rule:{required:!0,message:"请选择报废原因",trigger:"blur"},placeholder:"请选择报废原因",span:24}],onOk:e=>{let a=[];const l={scrapBy:p.userInfo.user.nickName||p.userInfo.user.userName,scrapDate:r().format("YYYY-MM-DD HH:mm:ss")};a=ce.value?[{...ce.value,scrapReason:e.scrapReason,...l}]:V.value.map((a=>({...a,scrapReason:e.scrapReason,...l}))),de(!0),D(a).then((({error:e})=>{e||(window.$message.success("报废成功"),j.value=null,re(),A())})).finally((()=>{de(!1)}))},onCancel:()=>{}});function pe(e){ue(),ce.value=e}const me=l(null),{handleClose:he,handleLoading:ke,handleShow:ye}=m({modalOption:{title:"网板领取",width:"600px",height:"330px",destroyOnClose:!0},formData:{operator:null,remark:null},formList:[{type:"dictionary",key:"operator",label:"领取人",span:24,placeholder:"请选择领取人",dictCode:"board_rec_return",selectType:"select"},{type:"textarea",key:"remark",label:"备注",span:24}],onOk:e=>{let a=[];a=me.value?[{...me.value,...e}]:V.value.map((a=>({...a,...e}))),ke(!0),T(a).then((({error:e})=>{e||(window.$message.success("领取成功"),j.value=null,he(),A())})).finally((()=>{ke(!1)}))}});function ge(e){ye(),me.value=e}const fe=l([]);R().then((({data:e,error:a})=>{a||(fe.value=e.map((e=>({value:e.locationId,label:e.locationName}))))}));const we=l(null),ve=l(null),{handleClose:xe,handleLoading:be,handleShow:Ie}=m({modalOption:{title:"网板归还",width:"600px",height:"330px",destroyOnClose:!0},formData:{operator:null,remark:null,location:null,locationId:null},formList:[{type:"dictionary",key:"operator",label:"归还人",span:24,placeholder:"请选择归还人",dictCode:"board_rec_return",selectType:"select"},{type:"select",key:"locationId",label:"网板仓位",span:24,placeholder:"请选择网板仓位",rule:{required:!0,message:"请选择网板仓位",trigger:"blur"},selectOptions:fe,change(e){var a;ve.value=null==(a=fe.value.find((a=>a.value===e)))?void 0:a.label}},{type:"textarea",key:"remark",label:"备注",span:24}],onOk:e=>{let a=[];a=we.value?[{...we.value,...e,locationName:ve.value}]:V.value.map((a=>({...a,...e,locationName:ve.value}))),be(!0),B(a).then((({error:e})=>{e||(window.$message.success("归还成功"),j.value=null,ve.value=null,xe(),A())})).finally((()=>{be(!1)}))}});function Ne(e){Ie(),we.value=e}function Ce(e){let a;a=o("div",null,e?[v("确定"),o("span",{class:"color-red font-bold"},[v("删除")]),v('网板编号为"'),o("span",{class:"color-blue font-bold"},[e.screenNo]),v('"的记录吗？')]:[v("确定将所勾选的项进行"),o("span",{class:"color-red font-bold"},[v("删除")]),v("操作吗？")]),window.$modal.confirm({title:a,onOk:()=>{let a=[];a=e?[e]:V.value,O(a).then((({error:e})=>{e||(window.$message.success("删除成功"),A())}))},onCancel:()=>{}})}function _e(e,a){switch(a){case"add":oe();break;case"edit":oe(e.record);break;case"scrap":pe(e.record);break;case"del":Ce(e.record);break;case"record":q(e.record);break;case"rec":ge(e.record);break;case"return":Ne(e.record)}e.hidePopup()}function De(e){return null!==e.useCount&&void 0!==e.useCount&&null!==e.totalLive&&void 0!==e.totalLive&&e.useCount>=.9*Number(e.totalLive)?{backgroundColor:"#EFEF88"}:{}}const Te=e=>({style:De(e)});return(l,c)=>{const r=a,u=x,p=e,m=y("hasAuth");return t(),d("div",H,[o(r,{ref_key:"commonSearchRef",ref:h,searchParams:b.value,"onUpdate:searchParams":c[0]||(c[0]=e=>b.value=e),"form-list":N,"is-search":!0,onSearch:A,onReset:Q},null,8,["searchParams"]),o(p,{ref_key:"tableRef",ref:L,searchParams:b.value,"onUpdate:searchParams":c[8]||(c[8]=e=>b.value=e),column:M,"show-row-selection":"","auto-generate-uuid":"","row-key":"screenId",scroll:{y:"auto"},"is-init-get-data":"",url:"/qms/scrscreen/screenInfo/pageList","table-custom-row":Te,onTableSelectChange:Z,onTableRowDblclick:q},{title:i((()=>[g((t(),n(u,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",onClick:c[1]||(c[1]=e=>oe(null))},{icon:i((()=>[o(f(w),{class:"align-sub"})])),default:i((()=>[c[9]||(c[9]=v(" 新增 "))])),_:1})),[[m,["workwear:board-management:add"]]]),g((t(),n(u,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:1!=V.value.length,onClick:c[2]||(c[2]=e=>oe(V.value[0]))},{icon:i((()=>[o(f(S),{class:"align-sub"})])),default:i((()=>[c[10]||(c[10]=v(" 修改 "))])),_:1},8,["disabled"])),[[m,["workwear:board-management:update"]]]),g((t(),n(u,{type:"primary",danger:"",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:!V.value.length,onClick:c[3]||(c[3]=e=>Ce())},{icon:i((()=>[o(f(U),{class:"align-sub"})])),default:i((()=>[c[11]||(c[11]=v(" 批量删除 "))])),_:1},8,["disabled"])),[[m,["workwear:board-management:delete"]]]),g((t(),n(u,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:!V.value.length,onClick:c[4]||(c[4]=e=>pe())},{icon:i((()=>c[12]||(c[12]=[s("em",{class:"iconfont icon-baofei align-sub"},null,-1)]))),default:i((()=>[c[13]||(c[13]=v(" 批量报废 "))])),_:1},8,["disabled"])),[[m,["workwear:board-management:scrap"]]]),g((t(),n(u,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:!V.value.length,onClick:c[5]||(c[5]=e=>ge())},{icon:i((()=>c[14]||(c[14]=[s("em",{class:"iconfont icon-lingqu align-sub"},null,-1)]))),default:i((()=>[c[15]||(c[15]=v(" 批量领取 "))])),_:1},8,["disabled"])),[[m,["workwear:board-management:rec"]]]),g((t(),n(u,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:!V.value.length,onClick:c[6]||(c[6]=e=>Ne())},{icon:i((()=>c[16]||(c[16]=[s("em",{class:"iconfont icon-guihuan align-sub"},null,-1)]))),default:i((()=>[c[17]||(c[17]=v(" 批量归还 "))])),_:1},8,["disabled"])),[[m,["workwear:board-management:return"]]]),g((t(),n(u,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",onClick:c[7]||(c[7]=e=>{P(b.value)})},{icon:i((()=>[o(f(Y),{class:"align-sub"})])),default:i((()=>[c[18]||(c[18]=v(" 导出 "))])),_:1})),[[m,["workwear:board-management:download"]]])])),"contextmenuPopup-orter":i((({args:e})=>[g((t(),d("li",{class:"popup-item",onClick:a=>_e(e,"add")},[o(f(w)),c[19]||(c[19]=v(" 新增 "))],8,z)),[[m,["workwear:board-management:add"]]]),g((t(),d("li",{class:"popup-item",onClick:a=>_e(e,"edit")},[o(f(S)),c[20]||(c[20]=v(" 修改 "))],8,$)),[[m,["workwear:board-management:update"]]]),g((t(),d("li",{class:"popup-item",onClick:a=>_e(e,"del")},[o(f(U)),c[21]||(c[21]=v(" 删除 "))],8,K)),[[m,["workwear:board-management:delete"]]]),g((t(),d("li",{class:"popup-item",onClick:a=>_e(e,"scrap")},c[22]||(c[22]=[s("em",{class:"iconfont icon-baofei"},null,-1),v(" 报废 ")]),8,J)),[[m,["workwear:board-management:scrap"]]]),g((t(),d("li",{class:"popup-item",onClick:a=>_e(e,"rec")},c[23]||(c[23]=[s("em",{class:"iconfont icon-lingqu"},null,-1),v(" 领取 ")]),8,X)),[[m,["workwear:board-management:rec"]]]),g((t(),d("li",{class:"popup-item",onClick:a=>_e(e,"return")},c[24]||(c[24]=[s("em",{class:"iconfont icon-guihuan"},null,-1),v(" 归还 ")]),8,G)),[[m,["workwear:board-management:return"]]])])),footer:i((()=>c[25]||(c[25]=[s("div",{class:"flex gap-15px"},[s("div",{class:"mt5px flex line-height-14px"},[s("div",{class:"h14px w14px bg-#EFEF88"}),s("span",null,"背景为网板使用寿命≥90%")])],-1)]))),_:1},8,["searchParams"])])}}}),[["__scopeId","data-v-2599213a"]]);export{Q as default};
