System.register(["./count-to.vue_vue_type_script_setup_true_lang-legacy-XIy8K86e.js","./index-legacy-BH1Y34Mi.js","./borehole-data-legacy-C5PQm35s.js","./index-legacy-JzSJVdOM.js","./echarts-legacy-BpbZ1nhM.js","./index-legacy-nbfFjkW3.js","./index-legacy-Ccuh6Ibz.js","./installCanvasRenderer-legacy-DDAXrZCG.js"],(function(a,t){"use strict";var e,l,n,i,d,o,r,c,s,f,u,p,v,g,m,h,b,x,w,_,y,q,N,k,E,T,P,S,R,O,C,j,A,I,W,L,z,M,D,F,K,U;return{setters:[function(a){e=a._},function(a){l=a.d,n=a.K,i=a.L,d=a.o,o=a.c,r=a.w,c=a.g,s=a.f,f=a.s,u=a.t,p=a.I,v=a.v,g=a.N,m=a.O,h=a.B,b=a.P,x=a.Q,w=a.F,_=a.cT,y=a.r,q=a.a0,N=a.af,k=a.e,E=a.J,T=a.h,P=a.a1,S=a.cF,R=a.b,O=a.aj,C=a.al,j=a.ac,A=a.i,I=a.cU,W=a.a7,L=a.cH},function(a){z=a.g},function(a){M=a.C},function(a){D=a.u},function(a){F=a.D,K=a.a},function(a){U=a._},null],execute:function(){var t=document.createElement("style");t.textContent='@charset "UTF-8";.equipment-status.WORK[data-v-9be64a04]{color:#1cd66c}.equipment-status.WAIT[data-v-9be64a04]{color:#8e9dff}.equipment-status.ALARM[data-v-9be64a04]{color:#ff3030}.equipment-status.IDLE[data-v-9be64a04]{color:#26deca}.equipment-status.STOP[data-v-9be64a04]{color:#fedc69}.borehole-data-page .left-list[data-v-c2f233ff]{width:calc(100% - 350px)}.borehole-data-page .list[data-v-c2f233ff] .ant-spin-nested-loading,.borehole-data-page .list[data-v-c2f233ff] .ant-spin-nested-loading .ant-spin-container{width:100%;height:100%}.borehole-data-page .list[data-v-c2f233ff] .ant-spin-nested-loading .ant-row{margin:0!important}.borehole-data-page .list .row[data-v-c2f233ff]{row-gap:6px}.borehole-data-page .list .row .col[data-v-c2f233ff]{padding-left:3px;padding-right:3px}@media (min-width: 768px){.borehole-data-page .list .row .col-md-24[data-v-c2f233ff]{display:block;flex:0 0 100%;max-width:100%}}@media (min-width: 992px){.borehole-data-page .list .row .col-lg-8[data-v-c2f233ff]{display:block;flex:0 0 33.333333%;max-width:33.333333%}}@media (min-width: 1200px){.borehole-data-page .list .row .col-xl-6[data-v-c2f233ff]{display:block;flex:0 0 25%;max-width:25%}}@media (min-width: 1600px){.borehole-data-page .list .row .col-xxl-4_8[data-v-c2f233ff]{display:block;flex:0 0 20%;max-width:20%}}.borehole-data-page .list .card[data-v-c2f233ff]{position:relative;width:100%;box-shadow:0 0 10px 1px rgba(128,128,128,.2);border-radius:10px;background:#fff;display:flex;flex-wrap:wrap;padding:15px 5px 15px 15px}.borehole-data-page .list .card .device-data[data-v-c2f233ff],.borehole-data-page .list .card .state[data-v-c2f233ff]{width:calc(100% - 90px);width:100%;padding-right:8px;font-size:13px}.borehole-data-page .list .card .device-data .data[data-v-c2f233ff],.borehole-data-page .list .card .state .data[data-v-c2f233ff]{display:flex}.borehole-data-page .list .card .device-data .data .label[data-v-c2f233ff],.borehole-data-page .list .card .state .data .label[data-v-c2f233ff]{font-weight:700;padding-right:5px;min-width:79px;text-align-last:justify}.borehole-data-page .list .card .device-data .data .label[data-v-c2f233ff]:after,.borehole-data-page .list .card .state .data .label[data-v-c2f233ff]:after{content:":"}.borehole-data-page .list .card .device-data .data .value[data-v-c2f233ff],.borehole-data-page .list .card .state .data .value[data-v-c2f233ff]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.borehole-data-page .list .card .device-data .data .value.progress[data-v-c2f233ff] .ant-progress-line,.borehole-data-page .list .card .state .data .value.progress[data-v-c2f233ff] .ant-progress-line{margin-bottom:0}.borehole-data-page .list .card .state[data-v-c2f233ff]{width:100%!important}.borehole-data-page .list .card .charts[data-v-c2f233ff]{width:90px;margin-top:8px}.borehole-data-page .list .card .charts .title[data-v-c2f233ff]{width:100%;font-weight:700}.borehole-data-page .list .card .view-device-data[data-v-c2f233ff]{position:absolute;top:0;right:5px}.borehole-data-page .right-msg[data-v-c2f233ff]{width:350px;padding:8px}.borehole-data-page .right-msg .right-card[data-v-c2f233ff]{position:relative}.borehole-data-page .right-msg .right-card .angle[data-v-c2f233ff]{position:absolute;width:100%;height:100%;top:0;left:0}.borehole-data-page .right-msg .right-card .angle .left-top[data-v-c2f233ff]{position:absolute;width:15px;height:15px;background:transparent;border-top:3px solid #646cff;border-left:3px solid #646cff;z-index:99}.borehole-data-page .right-msg .right-card .angle .right-top[data-v-c2f233ff]{top:0;right:0;position:absolute;width:15px;height:15px;background:transparent;border-top:3px solid #646cff;border-right:3px solid #646cff;z-index:99}.borehole-data-page .right-msg .right-card .angle .left-bottom[data-v-c2f233ff]{bottom:0;left:0;position:absolute;width:15px;height:15px;background:transparent;border-bottom:3px solid #646cff;border-left:3px solid #646cff;z-index:99}.borehole-data-page .right-msg .right-card .angle .right-bottom[data-v-c2f233ff]{bottom:0;right:0;position:absolute;width:15px;height:15px;background:transparent;border-bottom:3px solid #646cff;border-right:3px solid #646cff;z-index:99}.borehole-data-page .right-msg .card-title[data-v-c2f233ff]{font-size:28px;text-align:center;color:#646cff;font-weight:700}.borehole-data-page .right-msg .card-content .device-count[data-v-c2f233ff]{width:50px;height:50px;line-height:50px;text-align:center;font-size:48px;font-weight:700;font-family:Arial,sans-serif;color:#1d26c0;border:1px solid #d0d0d6;box-shadow:1px 1px 4px 2px #d0d0d6}.borehole-data-page .right-msg .card-content .card-instructions[data-v-c2f233ff]{line-height:30px}.borehole-data-page .right-msg .card-content .card-instructions .equipment-status.WORK[data-v-c2f233ff]{background-color:#1cd66c}.borehole-data-page .right-msg .card-content .card-instructions .equipment-status.WAIT[data-v-c2f233ff]{background-color:#8e9dff}.borehole-data-page .right-msg .card-content .card-instructions .equipment-status.ALARM[data-v-c2f233ff]{background-color:#ff3030}.borehole-data-page .right-msg .card-content .card-instructions .equipment-status.IDLE[data-v-c2f233ff]{background-color:#26deca}.borehole-data-page .right-msg .card-content .card-instructions .equipment-status.STOP[data-v-c2f233ff]{background-color:#fedc69}@media (min-width: 1600px){:where(.css-dev-only-do-not-override-1qjex96).ant-col-xxl-4[data-v-c2f233ff]{display:block;flex:0 0 16.6666666667%;max-width:16.6666666667%}}\n',document.head.appendChild(t);var $={class:"w-full flex"},B={class:"flex"},G={class:"w-full flex-y-center justify-end gap-12px"},H={class:"ml-3px"},J={class:"ml-3px"},Q=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:n(["search","reset"],["update:model"]),setup:function(a,t){var e=t.emit,l=i(a,"model");function n(){e("search",l.value)}function _(){l.value={subEqpName:null,pgmPathName:null},e("reset",l.value)}return function(a,t){var e=p,i=v,y=g,q=m,N=h,k=b,E=x,T=w,P=M;return d(),o(P,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:r((function(){return[c(T,{ref:"formRef",model:l.value,"label-col":{span:5,md:7},class:"search-form"},{default:r((function(){return[s("div",$,[c(E,{gutter:[15,8],wrap:"",class:"w-full"},{default:r((function(){return[c(y,{span:24,md:16,lg:12,xl:8,xxl:6},{default:r((function(){return[c(i,{label:"设备名称",name:"subEqpName",class:"m-0","label-col":{}},{default:r((function(){return[c(e,{value:l.value.subEqpName,"onUpdate:value":t[0]||(t[0]=function(a){return l.value.subEqpName=a}),placeholder:"请输入设备名称",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:f(n,["enter"])},null,8,["value"])]})),_:1})]})),_:1}),c(y,{span:24,md:16,lg:12,xl:8,xxl:6},{default:r((function(){return[c(i,{label:"生产型号",name:"pgmPathName",class:"m-0","label-col":{}},{default:r((function(){return[c(e,{value:l.value.pgmPathName,"onUpdate:value":t[1]||(t[1]=function(a){return l.value.pgmPathName=a}),placeholder:"请输入生产型号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:f(n,["enter"])},null,8,["value"])]})),_:1})]})),_:1}),s("div",B,[c(i,{class:"m-0"},{default:r((function(){return[s("div",G,[c(N,{type:"primary",ghost:"",class:"mini-btn",onClick:n},{icon:r((function(){return[c(q,{class:"align-sub text-icon"})]})),default:r((function(){return[s("span",H,u(a.$t("common.search")),1)]})),_:1}),c(N,{class:"mini-btn",onClick:_},{icon:r((function(){return[c(k,{class:"align-sub text-icon"})]})),default:r((function(){return[s("span",J,u(a.$t("common.reset")),1)]})),_:1})])]})),_:1})])]})),_:1})])]})),_:1},8,["model"])]})),_:1})}}}),V={__name:"state-chart",props:{list:{type:Array,default:function(){return[]}}},setup:function(a){var t=a,e=_().store,l=y([]),n=q((function(){return e.drilling_equipment_state}),(function(a){l.value=null==a?void 0:a.map((function(a){return{key:a.value,name:a.label,value:0}}))}),{deep:!0}),i=D((function(){return{tooltip:{trigger:"item"},title:{text:"设备状态统计",left:"center",top:"15",textStyle:{color:"#646cff",fontWeight:"bold",fontSize:"1.5rem"}},legend:{bottom:"1%",left:"center",itemStyle:{borderWidth:0}},series:[{color:["#1CD66C","#8e9dff","#FF3030","#26deca","#fedc69"],name:"设备状态",type:"pie",radius:["45%","70%"],avoidLabelOverlap:!1,center:["50%","50%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:1},label:{show:!1,position:"center"},labelLine:{show:!1},data:l.value}]}}),!1),o=i.domRef,r=i.updateOptions;return q((function(){return t.list}),(function(a){var t=a.reduce((function(a,t){return t.equipmentStatus&&(a[t.equipmentStatus]=(a[t.equipmentStatus]||0)+1),a}),{});l.value.forEach((function(a){a.value=t[a.key]})),r((function(a){return a.series[0].data=l.value,a}))}),{deep:!0}),N((function(){n()})),function(a,t){return d(),k("div",{ref_key:"domRef",ref:o,class:"h-360px overflow-hidden"},null,512)}}},X=E({__name:"details",props:{data:{type:Object,default:function(){return{}}},dataModifiers:{}},emits:["update:data"],setup:function(a){var t=i(a,"data"),e=_().store,l=y({WORK:"",WAIT:"",ALARM:"",IDLE:"",STOP:""});return e.drilling_equipment_state.forEach((function(a){l.value[a.value]=a.label})),function(a,e){var n=F,i=U,f=K;return d(),o(f,{title:"",column:2,bordered:"",size:"small"},{default:r((function(){return[c(n,{label:"设备名称"},{default:r((function(){return[T(u(t.value.subEqpName),1)]})),_:1}),c(n,{label:"时间"},{default:r((function(){return[T(u(t.value.dateTime),1)]})),_:1}),c(n,{label:"直径表名称"},{default:r((function(){return[T(u(t.value.diaPath),1)]})),_:1}),c(n,{label:"程序加工百分数"},{default:r((function(){return[c(i,{percent:Number(t.value.runPresent),"stroke-color":{"0%":"#108ee9","100%":"#87d068"}},null,8,["percent"])]})),_:1}),c(n,{label:"钻带名称"},{default:r((function(){return[T(u(t.value.pgmPath),1)]})),_:1}),c(n,{label:"稼动率"},{default:r((function(){return[T(u(t.value.duty),1)]})),_:1}),c(n,{label:"开机时间"},{default:r((function(){return[T(u(t.value.shiftOperateTime),1)]})),_:1}),c(n,{label:"加工时间"},{default:r((function(){return[T(u(t.value.lotRunTime),1)]})),_:1}),c(n,{label:"等待时间"},{default:r((function(){return[T(u(t.value.shiftWaitTime),1)]})),_:1}),c(n,{label:"错误时间"},{default:r((function(){return[T(u(t.value.shiftErrorTime),1)]})),_:1}),c(n,{label:"机台当前状态"},{default:r((function(){return[s("span",{class:P(["equipment-status",t.value.equipmentStatus])},u(l.value[t.value.equipmentStatus]),3)]})),_:1}),c(n,{label:"轴开启状态"},{default:r((function(){return[T(u(t.value.axisStatus),1)]})),_:1}),c(n,{label:"主轴开启数量"},{default:r((function(){return[T(u(t.value.axisRunCount),1)]})),_:1})]})),_:1})}}},[["__scopeId","data-v-9be64a04"]]),Y={class:"borehole-data-page h-full w-full flex"},Z={class:"left-list min-h-500px flex-col-stretch gap-5px overflow-hidden lt-sm:overflow-auto"},aa={class:"list h-full w-full overflow-auto"},ta={key:0,class:"row flex flex-wrap"},ea={class:"device-data"},la={class:"data"},na=["title"],ia={class:"data"},da=["title"],oa={class:"data"},ra=["title"],ca={class:"data"},sa=["title"],fa={class:"data"},ua=["title"],pa=["onClick"],va={class:"state w-full"},ga={class:"data flex"},ma={class:"value flex gap-3px color-#646cff"},ha={class:"data"},ba={class:"value progress w-full"},xa={class:"right-msg"},wa={class:"right-card bg-#fff pb-30px pt10px"},_a={class:"card-content flex flex-center gap-15px"},ya={class:"right-card mt15px bg-#fff pb-30px pt10px"},qa={class:"card-content"},Na={class:"right-card mt15px bg-#fff pb-30px pl10px pt15px"},ka={class:"card-content"},Ea={class:"text"},Ta=Object.assign({name:"collection-management_real-time-device-information_borehole-data"},{__name:"index",setup:function(a){var t=_().getDict,l=y([]);t("drilling_equipment_state").then((function(a){l.value=a}));var n=S.PRESENTED_IMAGE_SIMPLE,i=y({subEqpName:null,pgmPathName:null}),f=y([]),p=y(!1),v=y([]),g=y(!1);function m(){g.value=!0,z(i.value).then((function(a){var t=a.data;a.error||(null==t||t.forEach((function(a,t){a.index=t+1,a.TUuid=W.generate()})),f.value=t,v.value=t)})).finally((function(){return g.value=!1}))}function h(a){return v.value.filter((function(t){return a(t)}))}function b(){f.value=i.value.subEqpName||i.value.pgmPathName?i.value.subEqpName&&i.value.pgmPathName?h((function(a){var t,e;return(null==a||null===(t=a.subEqpName)||void 0===t?void 0:t.includes(i.value.subEqpName))&&(null==a||null===(e=a.pgmPath)||void 0===e?void 0:e.includes(i.value.pgmPathName))})):i.value.subEqpName?h((function(a){var t;return null==a||null===(t=a.subEqpName)||void 0===t?void 0:t.includes(i.value.subEqpName)})):i.value.pgmPathName?h((function(a){var t;return null==a||null===(t=a.pgmPath)||void 0===t?void 0:t.includes(i.value.pgmPathName)})):[]:v.value}m();var x=null;q((function(){return i.value}),(function(){x||(x=setTimeout((function(){clearTimeout(x),x=null,b()}),500))}),{deep:!0});var w=setInterval((function(){m()}),3e5);function E(){f.value=v.value}function M(a){return Number(a)>=100?"完成":"".concat(a,"%")}var D=R((function(){return v.value.length.toString().padStart(3,"0").split("")})),F={WORK:"#1CD66C",WAIT:"#8e9dff",ALARM:"#FF3030",IDLE:"#26deca",STOP:"#fedc69"},K=y(null),$=window.$useModal({modalOption:{title:"设备详情",showConfirmBtn:!1,confirmBtnText:"关闭",destroyOnClose:!0,width:"955px"},component:function(){return c(X,{data:K.value,"onUpdate:data":function(a){return K.value=a}},null)}}),B=$.updateModalOptions,G=$.handleShow;return N((function(){clearInterval(w),w=null})),function(a,t){var g=U,m=S,h=L,x=e;return d(),k("div",Y,[s("div",Z,[c(Q,{model:i.value,"onUpdate:model":t[0]||(t[0]=function(a){return i.value=a}),onReset:E,onSearch:b},null,8,["model"]),s("div",aa,[c(h,{tip:"数据加载中...",spinning:p.value,class:"h-full w-full"},{default:r((function(){return[f.value.length?(d(),k("div",ta,[(d(!0),k(O,null,C(f.value,(function(a,e){var l;return d(),k("div",{key:e,class:"col col-md-24 col-lg-8 col-xxl-4_8"},[s("div",{class:"card",style:j({border:"2px solid ".concat(F[a.equipmentStatus])})},[s("div",ea,[s("div",la,[t[1]||(t[1]=s("div",{class:"label"},"设备名称",-1)),s("div",{class:"value",title:a.subEqpName},u(a.subEqpName),9,na)]),s("div",ia,[t[2]||(t[2]=s("div",{class:"label"},"时 间",-1)),s("div",{class:"value",title:a.dateTime},u(a.dateTime),9,da)]),s("div",oa,[t[3]||(t[3]=s("div",{class:"label"},"稼动率",-1)),s("div",{class:"value",title:a.duty},u(a.duty),9,ra)]),s("div",ca,[t[4]||(t[4]=s("div",{class:"label"},"开机时间",-1)),s("div",{class:"value",title:a.startTime},u(a.shiftOperateTime),9,sa)]),s("div",fa,[t[5]||(t[5]=s("div",{class:"label"},"加工时间",-1)),s("div",{class:"value",title:a.lotRunTime},u(a.lotRunTime),9,ua)])]),s("div",{class:"view-device-data cursor-pointer color-#646cff",onClick:function(t){return function(a){B({title:"".concat(a.subEqpName,"设备详情")}),K.value=a,G()}(a)}},"查看详情",8,pa),s("div",va,[s("div",ga,[t[6]||(t[6]=s("div",{class:"label font-bold"},"轴开启状态",-1)),s("div",ma,[(d(!0),k(O,null,C(null===(l=a.axisStatus)||void 0===l?void 0:l.split(""),(function(a,t){return d(),k("span",{key:t,class:P(["pl-3px pr-3px",1===Number(a)?"bg-green":"bg-#eee"])},u(t+1),3)})),128))])]),s("div",ha,[t[7]||(t[7]=s("div",{class:"label"},"加工进度",-1)),s("div",ba,[c(g,{percent:Number(a.runPresent),format:M,"stroke-color":{"0%":"#87d068","100%":"#108ee9"}},null,8,["percent"])])])])],4)])})),128))])):(d(),o(m,{key:1,image:A(n)},null,8,["image"]))]})),_:1},8,["spinning"])])]),s("div",xa,[s("div",wa,[t[8]||(t[8]=I('<div class="angle" data-v-c2f233ff><div class="left-top" data-v-c2f233ff></div><div class="right-top" data-v-c2f233ff></div><div class="left-bottom" data-v-c2f233ff></div><div class="right-bottom" data-v-c2f233ff></div></div><div class="card-title" data-v-c2f233ff>设备总数</div>',2)),s("div",_a,[(d(!0),k(O,null,C(D.value,(function(a,t){return d(),o(x,{key:t,"start-value":0,"end-value":Number(a),class:"device-count text-30px dark:text-dark"},null,8,["end-value"])})),128))])]),s("div",ya,[t[9]||(t[9]=I('<div class="angle" data-v-c2f233ff><div class="left-top" data-v-c2f233ff></div><div class="right-top" data-v-c2f233ff></div><div class="left-bottom" data-v-c2f233ff></div><div class="right-bottom" data-v-c2f233ff></div></div>',1)),s("div",qa,[c(V,{list:v.value},null,8,["list"])])]),s("div",Na,[t[12]||(t[12]=I('<div class="angle" data-v-c2f233ff><div class="left-top" data-v-c2f233ff></div><div class="right-top" data-v-c2f233ff></div><div class="left-bottom" data-v-c2f233ff></div><div class="right-bottom" data-v-c2f233ff></div></div>',1)),s("div",ka,[t[11]||(t[11]=s("div",{class:"card-title"},"左侧设备状态说明",-1)),(d(!0),k(O,null,C(l.value,(function(a,e){return d(),k("div",{key:e,class:"card-instructions flex-center justify-start"},[t[10]||(t[10]=T(" 边框为 ")),s("div",{class:P(["equipment-status type h-14px w-14px",a.value])},null,2),s("div",Ea,"代表"+u(a.label)+"的设备",1)])})),128))])])])])}}});a("default",E(Ta,[["__scopeId","data-v-c2f233ff"]]))}}}));
