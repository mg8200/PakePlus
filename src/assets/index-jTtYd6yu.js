import{_ as e}from"./table-DoFSI9NT.js";import{_ as a}from"./round-add-MytOGm9O.js";import{_ as t}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{r as l,b as s,aa as n,o,e as i,g as r,w as c,f as d,a5 as m,B as u}from"./index-B3PZsRwT.js";import{p}from"./api-By23aosn.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./index-BThgVJ70.js";const h={class:"code-whitelist-page jl-main-page min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},f=Object.assign({name:"code-management_code-whitelist"},{__name:"index",setup(f){const g=l(null),x=l(null),y=l({lotNo:null,noticeState:null,time:null}),_=[{type:"input",key:"lotNo",label:"批卡号",placeholder:"请输入批卡号",span:24,md:12,lg:8,xl:8,xxl:6},{type:"input",key:"prodNo",label:"生产型号",placeholder:"请输入生产型号",span:24,md:12,lg:8,xl:8,xxl:6},{type:"dateRangePicker",key:"time",label:"日期",span:24,md:12,lg:10,xl:8,xxl:6,showTime:!0}],v=s((()=>{var e,a;const t={...y.value};return(null==(a=null==(e=y.value)?void 0:e.time)?void 0:a[0])&&(t.startTime=n(y.value.time[0]).format("YYYY-MM-DD"),t.endTime=n(y.value.time[0]).format("YYYY-MM-DD")),delete t.time,t})),k=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,fixed:"left",align:"center",checked:!0,ellipsis:!0},{key:"lotNo",dataIndex:"lotNo",title:"批卡号",align:"center",checked:!0,ellipsis:!0},{key:"fullProdNo",dataIndex:"fullProdNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0},{key:"createUser",dataIndex:"createUser",title:"创建人",align:"center",checked:!0,ellipsis:!0},{key:"createTime",dataIndex:"createTime",title:"创建时间",align:"center",checked:!0,ellipsis:!0}];function w(){x.value.getData(1)}function b(){m((()=>{y.value={keywords:null,noticeState:null,time:null},w()}))}const{handleClose:j,handleLoading:N,handleShow:P,handleReset:T}=window.$useModal({modalOption:{title:"新增白名单",width:800,confirmBtnText:"保存",destroyOnClose:!0},formData:{lotNo:null},formList:[{type:"input",key:"lotNo",label:"批卡号",placeholder:"请输入批卡号",span:24,rule:{required:!0,message:"请输入批卡号",trigger:"change"}}],onOk:e=>{N(!0),p("/mes/mesToErpWhite/add/new",e).then((({error:e})=>{e||(window.$message.success("新增成功"),j(),T(),x.value.getData(1))})).finally((()=>{N(!1)}))}});function Y(){P()}return(l,s)=>{const n=t,m=a,p=u,f=e;return o(),i("div",h,[r(n,{ref_key:"commonSearchRef",ref:g,searchParams:y.value,"onUpdate:searchParams":s[0]||(s[0]=e=>y.value=e),"form-list":_,"is-search":!0,onSearch:w,onReset:b},null,8,["searchParams"]),r(f,{ref_key:"tableRef",ref:x,searchParams:v.value,"onUpdate:searchParams":s[1]||(s[1]=e=>v.value=e),column:k,"show-row-selection":!1,"auto-generate-uuid":!0,scroll:{y:"auto"},"is-init-get-data":"",url:"/mes/mesToErpWhite/list"},{title:c((()=>[r(p,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:Y},{icon:c((()=>[r(m,{class:"align-sub text-icon"})])),default:c((()=>[s[2]||(s[2]=d("span",{class:"ml-3px"},"新增",-1))])),_:1})])),_:1},8,["searchParams"])])}}});export{f as default};
