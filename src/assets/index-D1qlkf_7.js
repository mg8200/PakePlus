import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as l,K as a,L as t,o as s,c as n,w as o,g as i,f as u,s as d,t as c,di as r,v as p,N as m,I as v,O as f,B as h,P as g,Q as y,F as k,U as x,r as w,p as _,a9 as b,b as C,S as I,e as U,h as z,W as S,J as j}from"./index-B3PZsRwT.js";import{a as L,v as $}from"./index-DqnulfE2.js";import{_ as N}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as T}from"./index-BThgVJ70.js";const D={class:"w-full flex"},K={class:"flex"},O={class:"w-full flex-y-center justify-end gap-12px"},A={class:"ml-3px"},B={class:"ml-3px"},E=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:a(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,x=t(e,"model");function w(){a("search",x.value)}function _(){x.value.pulseLine=null,x.value.holeCount=null,x.value.thickness=null,a("reset",x.value)}return(e,l)=>{const a=r,t=p,b=m,C=v,I=f,U=h,z=g,S=y,j=k,L=T;return s(),n(L,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:o((()=>[i(j,{model:x.value,"label-col":{span:5,md:7},class:"search-form"},{default:o((()=>[u("div",D,[i(S,{gutter:[15,8],wrap:"",class:"w-full"},{default:o((()=>[i(b,{span:24,md:12,lg:6,xl:8,xxl:4},{default:o((()=>[i(t,{label:"脉冲线别",name:"pulseLine",class:"m-0","label-col":{}},{default:o((()=>[i(a,{value:x.value.pulseLine,"onUpdate:value":l[0]||(l[0]=e=>x.value.pulseLine=e),placeholder:"请选择脉冲线别","allow-clear":"",dictCode:"line",selectType:"select"},null,8,["value"])])),_:1})])),_:1}),i(b,{span:24,md:12,lg:6,xl:8,xxl:4},{default:o((()=>[i(t,{label:"孔数",name:"holeCount",class:"m-0","label-col":{}},{default:o((()=>[i(C,{value:x.value.holeCount,"onUpdate:value":l[1]||(l[1]=e=>x.value.holeCount=e),placeholder:"请输入孔数",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(w,["enter"])},null,8,["value"])])),_:1})])),_:1}),i(b,{span:24,md:12,lg:6,xl:8,xxl:4},{default:o((()=>[i(t,{label:"板厚",name:"thickness",class:"m-0","label-col":{}},{default:o((()=>[i(C,{value:x.value.thickness,"onUpdate:value":l[2]||(l[2]=e=>x.value.thickness=e),placeholder:"请输入板厚",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(w,["enter"])},null,8,["value"])])),_:1})])),_:1}),u("div",K,[i(t,{class:"m-0"},{default:o((()=>[u("div",O,[i(U,{type:"primary",ghost:"",class:"mini-btn",onClick:w},{icon:o((()=>[i(I,{class:"align-sub text-icon"})])),default:o((()=>[u("span",A,c(e.$t("common.search")),1)])),_:1}),i(U,{class:"mini-btn",onClick:_},{icon:o((()=>[i(z,{class:"align-sub text-icon"})])),default:o((()=>[u("span",B,c(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),F={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},J={key:0,class:"event-form"},Q={key:1,class:"event-form"},R={class:"modal-footer"},q=j(Object.assign({name:"issuance-management_aperture-compensation"},{__name:"index",setup(l){x((e=>({"138f808c":X.value})));const a=w({pulseLine:null,thickness:null,holeCount:null}),t=_({pageNum:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{t.pageNum=0==e?1:e,t.pageSize=l,g()}}),d=w([{key:"index",dataIndex:"index",title:"序号",width:100,align:"center",checked:!0},{key:"front",dataIndex:"front",title:"前符号",width:130,align:"center",checked:!0,ellipsis:!0},{key:"holeCount",dataIndex:"holeCount",title:"孔数",width:130,align:"center",checked:!0,ellipsis:!0},{key:"compensation",dataIndex:"compensation",title:"电镀效率补偿",width:130,align:"center",checked:!0,ellipsis:!0},{key:"pulseLine",dataIndex:"pulseLine",title:"脉冲线别",width:180,align:"center",checked:!0,ellipsis:!0},{key:"rear",dataIndex:"rear",title:"板厚比较符号",width:150,align:"center",checked:!0,ellipsis:!0},{key:"thickness",dataIndex:"thickness",title:"板厚",width:130,align:"center",checked:!0,ellipsis:!0},{key:"operator",dataIndex:"operator",title:"创建人",width:130,align:"center",checked:!0,ellipsis:!0},{key:"createDate",dataIndex:"createDate",title:"创建时间",width:130,align:"center",checked:!0,ellipsis:!0},{key:"updateUser",dataIndex:"updateUser",title:"修改人",width:130,align:"center",checked:!0,ellipsis:!0},{key:"updateDate",dataIndex:"updateDate",title:"修改时间",width:130,align:"center",checked:!0,ellipsis:!0}]),c=[{type:"dictionary",key:"front",label:"前符号",dictCode:"judgment_symbol",selectType:"select",placeholder:"请选择前符号",span:8},{type:"input",key:"holeCount",label:"孔数",placeholder:"请输入孔数",span:8},{type:"input",key:"compensation",label:"电镀效率补偿",placeholder:"请输入电镀效率补偿",span:8},{type:"dictionary",key:"lineList",label:"脉冲线别",dictCode:"line",selectType:"select",mode:"multiple",placeholder:"请选择脉冲线别",span:8},{type:"dictionary",key:"rear",label:"板厚比较符号",dictCode:"judgment_symbol",selectType:"select",placeholder:"请选择板厚比较符号",span:8},{type:"input",key:"thickness",label:"板厚",placeholder:"请输入板厚",span:8}],r=w([]),p=w(!1),m=w([]),v=w(null),f=e=>({style:{background:e.id===v.value?"#BAEAFA":"","background-color":2===Number(e.failureState)?"rgb(247, 109, 109)":""},onClick(){v.value=e.id}});function g(){p.value=!0,a.value.pageNum=t.pageNum,a.value.pageSize=t.pageSize,L("/mes/pulse/diameterCompensation/list",{...a.value}).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1})),r.value=e.list,t.total=e.total)})).finally((()=>{p.value=!1}))}const y=w([]);function k(e){y.value=e}const j=w(!1),D=w(""),K=w(""),O=w("");function A(){var e;if(1!=y.value.length)return null==(e=window.$message)?void 0:e.error("请先选择一条数据");O.value="孔径补偿修改",D.value=r.value.find((e=>y.value[0]==e.id)),j.value=!0}function B(){O.value="孔径补偿新增",K.value={},j.value=!0}const q=w();function M(){D.value.front&&(D.value.front=q.value.find((e=>e.label==D.value.front||e.value==D.value.front)).value),D.value.rear&&(D.value.rear=q.value.find((e=>e.label==D.value.rear||e.value==D.value.rear)).value),$("/mes/pulse/diameterCompensation/update",D.value).then((({data:e,error:l})=>{var a;l||(j.value=!1,D.value="",null==(a=window.$message)||a.success("修改成功"),y.value=[],g())}))}function P(){$("/mes/pulse/diameterCompensation/add/new",K.value).then((({data:e,error:l})=>{var a;l||(j.value=!1,K.value="",null==(a=window.$message)||a.success("新增成功"),y.value=[],g())}))}function W(){var e,l;if(0==y.value.length)return null==(e=window.$message)?void 0:e.error("请先选择一条数据");null==(l=window.$modal)||l.confirm({title:"是否确认删除数据?",onOk:()=>{const e=r.value.filter((e=>y.value.includes(e.id)));$("/mes/pulse/diameterCompensation/deleteBatch",e).then((({data:e,error:l})=>{var a,t;l?null==(t=window.$message)||t.error("删除失败!"):(y.value=[],g(),null==(a=window.$message)||a.success("删除成功!"))}))},onCancel:()=>{}})}function G(){t.pageNum=1,g()}g();const H=w(null),{height:V}=b(H),X=C((()=>"".concat(V.value+20,"px")));return(l,v)=>{const g=h,x=e,w=I("STable"),_=T;return s(),U("div",F,[i(E,{model:a.value,"onUpdate:model":v[0]||(v[0]=e=>a.value=e),onReset:v[1]||(v[1]=e=>G()),onSearch:v[2]||(v[2]=e=>G())},null,8,["model"]),i(_,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:o((()=>[i(g,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:B},{default:o((()=>v[8]||(v[8]=[u("span",{class:"ml-3px"},"新增",-1)]))),_:1}),i(g,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:A},{default:o((()=>v[9]||(v[9]=[u("span",{class:"ml-3px"},"修改",-1)]))),_:1}),i(g,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:W},{default:o((()=>v[10]||(v[10]=[u("span",{class:"ml-3px"},"删除",-1)]))),_:1})])),extra:o((()=>[i(x,{columns:d.value,"onUpdate:columns":v[3]||(v[3]=e=>d.value=e)},null,8,["columns"])])),default:o((()=>[i(w,{columns:d.value,"data-source":r.value,size:"small",bordered:"",loading:p.value,"row-selection":{selectedRowKeys:y.value,onChange:k},"default-expanded-row-keys":m.value,"row-key":"id","custom-row":f,"default-expand-all-rows":!0,scroll:{y:"auto"},pagination:t,class:"has-footer-table h-full","row-height":23},null,8,["columns","data-source","loading","row-selection","default-expanded-row-keys","pagination"])])),_:1}),i(N,{visible:j.value,"onUpdate:visible":v[7]||(v[7]=e=>j.value=e),"destroy-on-close":!0,centered:!0,title:O.value,width:"1050px",height:"550px"},{footer:o((()=>[u("div",R,[i(g,{onClick:v[6]||(v[6]=e=>j.value=!1)},{default:o((()=>v[11]||(v[11]=[z("关闭")]))),_:1}),"孔径补偿修改"==O.value?(s(),n(g,{key:0,onClick:M},{default:o((()=>v[12]||(v[12]=[z("保存")]))),_:1})):(s(),n(g,{key:1,onClick:P},{default:o((()=>v[13]||(v[13]=[z("保存")]))),_:1}))])])),default:o((()=>["孔径补偿修改"==O.value?(s(),U("div",J,[i(S,{model:D.value,"onUpdate:model":v[4]||(v[4]=e=>D.value=e),"form-list":c},null,8,["model"])])):(s(),U("div",Q,[i(S,{model:K.value,"onUpdate:model":v[5]||(v[5]=e=>K.value=e),"form-list":c},null,8,["model"])]))])),_:1},8,["visible","title"])])}}}),[["__scopeId","data-v-88e7b1cd"]]);export{q as default};
