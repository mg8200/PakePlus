import{m as e}from"./borehole-data-cz4qUDRg.js";import{g as l}from"./tracking-code-acquisition-B-ktZ_i0.js";import{_ as a}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{d as s,K as t,L as i,r as o,o as n,c,w as r,g as d,f as u,s as p,e as v,aj as f,al as m,h as x,t as h,ad as g,ae as _,v as y,N as k,O as w,B as I,P as b,Q as C,F as j,p as T,ac as z,a6 as S,J as q}from"./index-B3PZsRwT.js";import{C as O}from"./index-BThgVJ70.js";import{_ as L}from"./index-Cn-BWYp5.js";import"./fromPairs-BI-MgVCs.js";const N={class:"w-full flex"},R={class:"flex"},K={class:"w-full flex-y-center justify-end gap-12px"},P={class:"ml-3px"},U={class:"ml-3px"},$=s({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:t(["search","reset"],["update:model"]),setup(l,{emit:a}){const s=a,t=i(l,"model"),T=o([]);function z(){s("search",t.value)}const S=(e,l)=>l.value.toLowerCase().includes(e.toLowerCase());function q(){t.value={description:""},s("reset",t.value)}return e().then((({error:e,data:l})=>{e||(T.value=l)})),(e,l)=>{const a=g,s=_,i=y,o=k,L=w,$=I,E=b,J=C,M=j,Q=O;return n(),c(Q,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:r((()=>[d(M,{ref:"formRef",model:t.value,"label-col":{span:5,md:7},class:"search-form"},{default:r((()=>[u("div",N,[d(J,{gutter:[15,8],wrap:"",class:"w-full"},{default:r((()=>[d(o,{span:24,md:12,lg:6,xl:6,xxl:6},{default:r((()=>[d(i,{label:"设备名称",name:"description",class:"m-0","label-col":{}},{default:r((()=>[d(s,{value:t.value.description,"onUpdate:value":l[0]||(l[0]=e=>t.value.description=e),"show-search":"",placeholder:"请选择设备名称","allow-clear":"","filter-option":S,class:"min-form-control",onKeypress:p(z,["enter"])},{default:r((()=>[(n(!0),v(f,null,m(T.value,(e=>(n(),c(a,{key:e.description,value:e.description},{default:r((()=>[x(h(e.description),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),u("div",R,[d(i,{class:"m-0"},{default:r((()=>[u("div",K,[d($,{type:"primary",ghost:"",class:"mini-btn",onClick:z},{icon:r((()=>[d(L,{class:"align-sub text-icon"})])),default:r((()=>[u("span",P,h(e.$t("common.search")),1)])),_:1}),d($,{class:"mini-btn",onClick:q},{icon:r((()=>[d(E,{class:"align-sub text-icon"})])),default:r((()=>[u("span",U,h(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),E={class:"jl-main-page h-full w-full"},J={class:"list w-full"},M={class:"leftClass"},Q={class:"titClass"},A={key:0,class:"rightImg"},B={key:1,class:"rightImg1"},F={class:"rightClass"},D={class:"flex"},G={class:"flex"},H={class:"flex"},V={class:"flex"},W={class:"flex"},X={class:"flex"},Y=["onClick"],Z={class:"modal-footer"},ee={class:"footer"},le={class:"ml-2% flex font-700 line-height-30px"},ae={class:"color-red"},se=q(Object.assign({name:"collection-management_real-time-device-information_read-the-dock"},{__name:"index",setup(s){const t=o({description:""}),i=o(!1),p=o([]),g=T({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","180","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{g.current=e,g.pageSize=l,O(R.value.equipmentId)}}),_=o(0),y=o(0);function w(){_.value=0,y.value=0,e({...t.value}).then((({error:e,data:l})=>{e||(l.forEach(((e,l)=>{0==e.state&&(_.value+=1),1==e.state&&(y.value+=1)})),p.value=l)}))}function b(){w()}function j(){w()}w();const q=o([]);function O(e){i.value=!0;const a={pageNum:g.current,pageSize:g.pageSize,equipmentId:e};l(a).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1})),g.total=e.total,q.value=e.list)})).finally((()=>{i.value=!1}))}const N=o(!1),R=o({}),K=o("");const P=o([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"pnlId",dataIndex:"pnlId",title:"PNL码",align:"center",checked:!0,ellipsis:!0},{key:"trackType",dataIndex:"trackType",title:"过账动作类型",width:"200",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>"TRACKIN"===e.trackType?"上机":"下机"},{key:"sliceType",dataIndex:"sliceType",title:"片型",align:"center",checked:!0,ellipsis:!0},{key:"dateTime",dataIndex:"dateTime",title:"建立时间",align:"center",checked:!0,ellipsis:!0}]);return(e,l)=>{const s=k,o=C,w=L,T=I;return n(),v("div",E,[d($,{model:t.value,"onUpdate:model":l[0]||(l[0]=e=>t.value=e),onReset:j,onSearch:b},null,8,["model"]),u("div",J,[d(o,{gutter:16,class:"w-full"},{default:r((()=>[(n(!0),v(f,null,m(p.value,((e,a)=>(n(),c(s,{key:a,lg:12,xl:8,xxl:6},{default:r((()=>[u("div",{class:"listClass",style:z({border:0===e.state?"0px":"1px solid red"})},[u("div",M,[u("div",Q,h(a+1),1),0==e.state?(n(),v("div",A)):S("",!0),1==e.state?(n(),v("div",B)):S("",!0)]),u("div",F,[u("div",D,[l[3]||(l[3]=u("p",{class:"text-size-14px color-#333 font-800"},"名称:",-1)),u("p",null,h(e.description),1)]),u("div",G,[l[4]||(l[4]=u("p",{class:"color-#333 font-800"},"代码:",-1)),u("p",null,h(e.equipmentId),1)]),u("div",H,[l[5]||(l[5]=u("p",{class:"color-#333 font-800"},"状态:",-1)),u("p",null,h(0==e.state?"正常":"异常"),1)]),u("div",V,[l[6]||(l[6]=u("p",{class:"color-#333 color-#333 font-800"},"最近连接时间:",-1)),u("p",null,h(e.recentConnectionTime),1)]),u("div",W,[l[7]||(l[7]=u("p",{class:"color-#333 color-#333 font-800"},"设备地址:",-1)),u("p",null,h(e.locationId),1)]),u("div",X,[u("a",{class:"color-#646cff",onClick:l=>{return a=e,g.current=1,g.pageSize=200,R.value=a,q.value=[],K.value="".concat(R.value.description,"信息"),i.value=!0,O(R.value.equipmentId),void(N.value=!0);var a}},"查看读码信息",8,Y)])])],4)])),_:2},1024)))),128))])),_:1}),d(a,{visible:N.value,"onUpdate:visible":l[2]||(l[2]=e=>N.value=e),"destroy-on-close":!0,centered:!0,title:K.value,width:"950px",height:"650px"},{footer:r((()=>[u("div",Z,[d(T,{onClick:l[1]||(l[1]=e=>N.value=!1)},{default:r((()=>l[8]||(l[8]=[x("关闭")]))),_:1})])])),default:r((()=>[d(w,{columns:P.value,"data-source":q.value,size:"small",loading:i.value,bordered:"","row-key":"custOrderId","default-expand-all-rows":!0,scroll:{y:"auto"},pagination:g,class:"h-full"},null,8,["columns","data-source","loading","pagination"])])),_:1},8,["visible","title"])]),u("div",ee,[u("div",le,[l[9]||(l[9]=u("div",{class:"color-red"},"红色边框",-1)),l[10]||(l[10]=x(" 为异常状态 设备共 ")),u("u",null,h(_.value+y.value),1),l[11]||(l[11]=x(" 个 正常设备 ")),u("u",null,h(_.value),1),l[12]||(l[12]=x(" 个 异常设备 ")),u("div",ae,[u("u",null,h(y.value),1)]),l[13]||(l[13]=x(" 个 "))])])])}}}),[["__scopeId","data-v-ff89dbfd"]]);export{se as default};
