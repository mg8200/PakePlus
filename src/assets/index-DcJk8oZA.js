import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as l,K as a,L as t,r as n,o as u,c as s,w as o,g as d,f as c,h as i,s as r,t as p,ad as m,ae as v,v as f,N as _,I as x,M as g,O as h,B as y,P as I,Q as b,F as C,p as w,a7 as k,S as q,e as P}from"./index-B3PZsRwT.js";import{E as V}from"./equipment-alarm-info-RrvTGqWc.js";import{C as T}from"./index-BThgVJ70.js";const D={class:"w-full flex"},S={class:"flex"},j={class:"w-full flex-y-center justify-end gap-12px"},z={class:"ml-3px"},U=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:a(["search"],["update:model"]),setup(e,{emit:l}){const a=l,w=t(e,"model");function k(){a("search",w.value)}function q(){w.value={equipmentId:null,equipmentType:null,product:null,lotId:null,time:null},a("search",w.value)}return n(!1),n(null),(e,l)=>{const a=m,t=v,n=f,P=_,V=x,U=g,A=h,E=y,B=I,F=b,H=C,K=T;return u(),s(K,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:o((()=>[d(H,{model:w.value,"label-col":{span:5,md:7},class:"search-form"},{default:o((()=>[c("div",D,[d(F,{gutter:[15,8],wrap:"",class:"w-full"},{default:o((()=>[d(P,{span:24,md:12,lg:8,xl:8,xxl:4},{default:o((()=>[d(n,{label:"线别",name:"equipmentId",class:"m-0","label-col":{}},{default:o((()=>[d(t,{value:w.value.equipmentId,"onUpdate:value":l[0]||(l[0]=e=>w.value.equipmentId=e),placeholder:"请选择线体",class:"min-form-control","allow-clear":""},{default:o((()=>[d(a,{value:"VCP_A线"},{default:o((()=>l[5]||(l[5]=[i("VCP_A线")]))),_:1}),d(a,{value:"VCP_B线"},{default:o((()=>l[6]||(l[6]=[i("VCP_B线")]))),_:1}),d(a,{value:"VCP_C线"},{default:o((()=>l[7]||(l[7]=[i("VCP_C线")]))),_:1}),d(a,{value:"VCP_D线"},{default:o((()=>l[8]||(l[8]=[i("VCP_D线")]))),_:1}),d(a,{value:"VCP_E线"},{default:o((()=>l[9]||(l[9]=[i("VCP_E线")]))),_:1}),d(a,{value:"VCP_F线"},{default:o((()=>l[10]||(l[10]=[i("VCP_F线")]))),_:1}),d(a,{value:"VCP_G线"},{default:o((()=>l[11]||(l[11]=[i("VCP_G线")]))),_:1}),d(a,{value:"VCP_H线"},{default:o((()=>l[12]||(l[12]=[i("VCP_H线")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),d(P,{span:24,md:12,lg:8,xl:8,xxl:4},{default:o((()=>[d(n,{label:"生产型号",name:"product",class:"m-0","label-col":{}},{default:o((()=>[d(V,{value:w.value.product,"onUpdate:value":l[1]||(l[1]=e=>w.value.product=e),placeholder:"请输入生产型号",class:"min-form-control",autocomplete:"off","allow-clear":"",onKeypress:r(k,["enter"])},null,8,["value"])])),_:1})])),_:1}),d(P,{span:24,md:12,lg:8,xl:8,xxl:4},{default:o((()=>[d(n,{label:"批次号",name:"lotId",class:"m-0","label-col":{}},{default:o((()=>[d(V,{value:w.value.lotId,"onUpdate:value":l[2]||(l[2]=e=>w.value.lotId=e),placeholder:"请输入批次号",class:"min-form-control",autocomplete:"off","allow-clear":"",onKeypress:r(k,["enter"])},null,8,["value"])])),_:1})])),_:1}),d(P,{span:24,md:12,lg:8,xl:8,xxl:4},{default:o((()=>[d(n,{label:"报警名称",name:"equipmentType",class:"m-0","label-col":{}},{default:o((()=>[d(V,{value:w.value.equipmentType,"onUpdate:value":l[3]||(l[3]=e=>w.value.equipmentType=e),placeholder:"请输入告警内容",class:"min-form-control",autocomplete:"off","allow-clear":"",onKeypress:r(k,["enter"])},null,8,["value"])])),_:1})])),_:1}),d(P,{span:24,md:12,lg:8,xl:8,xxl:6},{default:o((()=>[d(n,{label:"报警时间",name:"time",class:"m-0","label-col":{}},{default:o((()=>[d(U,{value:w.value.time,"onUpdate:value":l[4]||(l[4]=e=>w.value.time=e),"show-time":"","value-format":"YYYY-MM-DD HH:mm:ss",class:"min-form-control"},null,8,["value"])])),_:1})])),_:1}),c("div",S,[d(n,{class:"m-0"},{default:o((()=>[c("div",j,[d(E,{type:"primary",ghost:"",class:"mini-btn",onClick:k},{icon:o((()=>[d(A,{class:"align-sub text-icon"})])),default:o((()=>[l[13]||(l[13]=c("span",{class:"ml-3px"},"查询",-1))])),_:1}),d(E,{class:"mini-btn",onClick:q},{icon:o((()=>[d(B,{class:"align-sub text-icon"})])),default:o((()=>[c("span",z,p(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),A={class:"jl-main-page one-code-ascend min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},E=l({name:"code-management_vcp-gather",__name:"index",setup(l){const a=n({equipmentId:null,equipmentType:null,time:null,product:null,lotId:null}),t=w({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:(e,l)=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{t.current=e,t.pageSize=l,m()}}),s=n([]),c=n(!1),i=n([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"equipmentId",dataIndex:"equipmentId",title:"线别",align:"center",checked:!0,ellipsis:!0},{key:"product",dataIndex:"product",title:"生产型号",align:"center",checked:!0,ellipsis:!0},{key:"lotId",dataIndex:"lotId",title:"批次号",align:"center",checked:!0,ellipsis:!0},{key:"faultDate",dataIndex:"faultDate",title:"报警时间",align:"center",checked:!0,ellipsis:!0},{key:"recoverDate",dataIndex:"recoverDate",title:"恢复时间",align:"center",checked:!0,ellipsis:!0},{key:"equipmentType",dataIndex:"equipmentType",title:"报警名称",align:"center",checked:!0,ellipsis:!0},{key:"statudescption",dataIndex:"statudescption",title:"报警类型",align:"center",checked:!0,ellipsis:!0}]);function r(){p()}function p(){t.current=1,m()}function m(){var e;const l={pageNum:t.current,pageSize:t.pageSize,equipmentId:a.value.equipmentId,equipmentType:a.value.equipmentType,lotId:a.value.lotId,product:a.value.product};(null==(e=a.value.time)?void 0:e[0])&&(l.beginTime=a.value.time[0],l.endTime=a.value.time[1]),c.value=!0,V(l).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1,e.uid=k.genV4().hexNoDelim})),t.total=e.total,s.value=e.list)})).finally((()=>c.value=!1))}m();const v=n(null),f=e=>({style:{background:e.uid===v.value?"#BAEAFA":""},class:e.uid===v.value?"jl-table-row-selected":"",onClick:()=>{v.value=e.uid}});return(l,n)=>{const m=e,v=q("STable"),_=T;return u(),P("div",A,[d(U,{model:a.value,"onUpdate:model":n[0]||(n[0]=e=>a.value=e),onReset:r,onSearch:p},null,8,["model"]),d(_,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{extra:o((()=>[d(m,{columns:i.value,"onUpdate:columns":n[1]||(n[1]=e=>i.value=e)},null,8,["columns"])])),default:o((()=>[d(v,{columns:i.value,"data-source":s.value,bordered:"",size:"small",loading:c.value,"row-key":"uid",pagination:t,"custom-row":f,scroll:{x:1680,y:"auto"},class:"h-full","row-height":23},null,8,["columns","data-source","loading","pagination"])])),_:1})])}}});export{E as default};
