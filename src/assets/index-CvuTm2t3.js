import{_ as e}from"./table-DoFSI9NT.js";import{_ as t}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{r as a,b as l,aa as d,S as i,o as c,e as n,g as s,w as r,i as o,f as u,h as x,t as b,B as y}from"./index-B3PZsRwT.js";import{d as h}from"./downloadExcelByTable-DiiorCT4.js";import{D as p}from"./DownloadOutlined-CnXdrHEb.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";import"./index-BThgVJ70.js";const f={class:"jl-main-page min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},k=Object.assign({name:"collection-management_outer-yield-query"},{__name:"index",setup(k){const g=a(null),m=a({prodNo:null,time:null,isOuter:"1"}),_=[{type:"input",key:"prodNo",label:"生产型号",placeholder:"请输入生产型号",span:24,md:12,lg:8,xl:8,xxl:6},{type:"dateRangePicker",key:"time",label:"日期",span:24,md:12,lg:10,xl:8,xxl:6}],v=l((()=>{var e,t;const a={...m.value};return(null==(t=null==(e=m.value)?void 0:e.time)?void 0:t[0])?(a.startTime=d(m.value.time[0]).format("YYYY-MM-DD"),a.endTime=d(m.value.time[1]).format("YYYY-MM-DD")):(a.startTime=null,a.endTime=null),delete a.time,a})),w=a(null),I=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,fixed:"left",align:"center",checked:!0,ellipsis:!0},{key:"partNo",dataIndex:"partNo",title:"生产型号",align:"center",width:220,fixed:"left",checked:!0,ellipsis:!0},{key:"layers",dataIndex:"layers",title:"层别",align:"center",width:160,checked:!0,ellipsis:!0},{key:"panelQty",dataIndex:"panelQty",title:"PNL数",align:"center",width:90,checked:!0,ellipsis:!0},{key:"setQty",dataIndex:"setQty",title:"SET数",align:"center",width:90,checked:!0,ellipsis:!0},{key:"pcsQty",dataIndex:"pcsQty",title:"PCS数",align:"center",width:90,checked:!0,ellipsis:!0},{key:"goodPanelQty",dataIndex:"goodPanelQty",title:"良品PNL数",align:"center",width:100,checked:!0,ellipsis:!0},{key:"goodPanelRate",dataIndex:"goodPanelRate",title:"PNL良率",align:"center",width:100,checked:!0,ellipsis:!0,customRender:({record:e})=>"".concat(Number.parseFloat(e.goodPanelRate).toFixed(2),"%")},{key:"goodSetQty",dataIndex:"goodSetQty",title:"良品SET数",align:"center",width:100,checked:!0,ellipsis:!0},{key:"goodSetRate",dataIndex:"goodSetRate",title:"SET良率",align:"center",width:100,checked:!0,ellipsis:!0,customRender:({record:e})=>"".concat(Number.parseFloat(e.goodSetRate).toFixed(2),"%")},{key:"goodPcsQty",dataIndex:"goodPcsQty",title:"良品PCS数",align:"center",width:100,checked:!0,ellipsis:!0},{key:"failTotalQty",dataIndex:"failTotalQty",title:"不良点数",align:"center",width:100,checked:!0,ellipsis:!0},{key:"failSetRate",dataIndex:"failSetRate",title:"SET不良率",align:"center",width:90,checked:!0,ellipsis:!0,customRender:({record:e})=>"".concat(Number.parseFloat(e.failSetRate).toFixed(2),"%")},{key:"failPcsRate",dataIndex:"failPcsRate",title:"PCS不良率",align:"center",width:90,checked:!0,ellipsis:!0,customRender:({record:e})=>"".concat(Number.parseFloat(e.failPcsRate).toFixed(2),"%")},{key:"failPanelQty",dataIndex:"failPanelQty",title:"PNL不良数",align:"center",width:90,checked:!0,ellipsis:!0},{key:"failSetQty",dataIndex:"failSetQty",title:"SET不良数",align:"center",width:90,checked:!0,ellipsis:!0},{key:"failPcsQty",dataIndex:"failPcsQty",title:"PCS不良数",align:"center",width:130,checked:!0,ellipsis:!0},{key:"bad1",dataIndex:"bad1",title:"开路",align:"center",width:70,checked:!0,ellipsis:!0},{key:"bad2",dataIndex:"bad2",title:"短路",align:"center",width:70,checked:!0,ellipsis:!0},{key:"bad3",dataIndex:"bad3",title:"铜渣",align:"center",width:70,checked:!0,ellipsis:!0},{key:"bad4",dataIndex:"bad4",title:"蚀刻不净",align:"center",width:90,checked:!0,ellipsis:!0},{key:"bad5",dataIndex:"bad5",title:"蚀刻后损伤",align:"center",width:110,checked:!0,ellipsis:!0},{key:"bad6",dataIndex:"bad6",title:"缺口",align:"center",width:60,checked:!0,ellipsis:!0},{key:"bad7",dataIndex:"bad7",title:"凹陷",align:"center",width:60,checked:!0,ellipsis:!0},{key:"bad8",dataIndex:"bad8",title:"贴膜不良",align:"center",width:90,checked:!0,ellipsis:!0},{key:"bad9",dataIndex:"bad9",title:"干膜刮伤",align:"center",width:90,checked:!0,ellipsis:!0},{key:"bad10",dataIndex:"bad10",title:"曝光不良短路",align:"center",width:110,checked:!0,ellipsis:!0},{key:"bad11",dataIndex:"bad11",title:"Mylar未撕净",align:"center",width:110,checked:!0,ellipsis:!0},{key:"bad12",dataIndex:"bad12",title:"PDA残缺",align:"center",width:90,checked:!0,ellipsis:!0},{key:"bad13",dataIndex:"bad13",title:"线细",align:"center",width:10,checked:!0,ellipsis:!0},{key:"bad14",dataIndex:"bad14",title:"显影不洁",align:"center",width:90,checked:!0,ellipsis:!0},{key:"bad15",dataIndex:"bad15",title:"去膜不净",align:"center",width:90,checked:!0,ellipsis:!0},{key:"bad16",dataIndex:"bad16",title:"镀铜不均",align:"center",width:90,checked:!0,ellipsis:!0},{key:"bad17",dataIndex:"bad17",title:"胶迹",align:"center",width:70,checked:!0,ellipsis:!0},{key:"bad18",dataIndex:"bad18",title:"电镀铜颗粒",align:"center",width:120,checked:!0,ellipsis:!0},{key:"bad19",dataIndex:"bad19",title:"撞断线",align:"center",width:100,checked:!0,ellipsis:!0},{key:"bad20",dataIndex:"bad20",title:"偏孔",align:"center",width:70,checked:!0,ellipsis:!0},{key:"bad21",dataIndex:"bad21",title:"三角擦花",align:"center",width:90,checked:!0,ellipsis:!0},{key:"bad22",dataIndex:"bad22",title:"刮伤",align:"center",width:70,checked:!0,ellipsis:!0},{key:"bad23",dataIndex:"bad23",title:"其它",align:"center",width:70,checked:!0,ellipsis:!0},{key:"bad24",dataIndex:"bad24",title:"孔内毛刺",align:"center",width:90,checked:!0,ellipsis:!0},{key:"startDate",dataIndex:"startDate",title:"操作开始时间",align:"center",width:170,checked:!0,ellipsis:!0},{key:"endDate",dataIndex:"endDate",title:"操作结束时间",align:"center",width:170,checked:!0,ellipsis:!0}];function P(){w.value.getData(1)}function Q(){nextTick((()=>{m.value.prodNo=null,m.value.time=null,P()}))}const S=a(0),R=a(0),N=a([]);function F(e){N.value=e;const t=e.reduce(((e,t)=>e+t.panelQty),0),a=e.reduce(((e,t)=>e+t.goodPanelQty),0);S.value="".concat(Number.parseFloat(a/t*100).toFixed(2),"%");const l=e.reduce(((e,t)=>e+t.setQty),0),d=e.reduce(((e,t)=>e+t.goodSetQty),0);R.value="".concat(Number.parseFloat(d/l*100).toFixed(2),"%")}function D(){const e=[{partNo:"总计",layers:"--",panelQty:N.value.reduce(((e,t)=>e+t.panelQty),0),setQty:N.value.reduce(((e,t)=>e+t.setQty),0),pcsQty:N.value.reduce(((e,t)=>e+t.pcsQty),0),goodPanelQty:N.value.reduce(((e,t)=>e+t.goodPanelQty),0),goodPanelRate:S.value,goodSetQty:N.value.reduce(((e,t)=>e+t.goodSetQty),0),goodSetRate:R.value,goodPcsQty:N.value.reduce(((e,t)=>e+t.goodPcsQty),0),failTotalQty:"--",failSetRate:"--",failPcsRate:"--",failPanelQty:"--",failSetQty:N.value.reduce(((e,t)=>e+t.failSetQty),0),failPcsQty:N.value.reduce(((e,t)=>e+t.failPcsQty),0),bad1:N.value.reduce(((e,t)=>e+t.bad1),0),bad2:N.value.reduce(((e,t)=>e+t.bad2),0),bad3:N.value.reduce(((e,t)=>e+t.bad3),0),bad4:N.value.reduce(((e,t)=>e+t.bad4),0),bad5:N.value.reduce(((e,t)=>e+t.bad5),0),bad6:N.value.reduce(((e,t)=>e+t.bad6),0),bad7:N.value.reduce(((e,t)=>e+t.bad7),0),bad8:N.value.reduce(((e,t)=>e+t.bad8),0),bad9:N.value.reduce(((e,t)=>e+t.bad9),0),bad10:N.value.reduce(((e,t)=>e+t.bad10),0),bad11:N.value.reduce(((e,t)=>e+t.bad11),0),bad12:N.value.reduce(((e,t)=>e+t.bad12),0),bad13:"--",bad14:"--",bad15:"--",bad16:N.value.reduce(((e,t)=>e+t.bad16),0),bad17:N.value.reduce(((e,t)=>e+t.bad17),0),bad18:N.value.reduce(((e,t)=>e+t.bad18),0),bad19:N.value.reduce(((e,t)=>e+t.bad19),0),bad20:N.value.reduce(((e,t)=>e+t.bad20),0),bad21:N.value.reduce(((e,t)=>e+t.bad21),0),bad22:N.value.reduce(((e,t)=>e+t.bad22),0),bad23:N.value.reduce(((e,t)=>e+t.bad23),0),bad24:N.value.reduce(((e,t)=>e+t.bad24),0),startDate:"--",endDate:"--"}],t=N.value.map((e=>({...e,goodPanelRate:"".concat(Number.parseFloat(e.goodPanelRate).toFixed(2),"%"),goodSetRate:"".concat(Number.parseFloat(e.goodSetRate).toFixed(2),"%"),failSetRate:"".concat(Number.parseFloat(e.failSetRate).toFixed(2),"%"),failPcsRate:"".concat(Number.parseFloat(e.failPcsRate).toFixed(2),"%")}))),a=[{startCell:"A".concat(t.length+2),endCell:"B".concat(t.length+2),value:"合计"}];h({data:t,header:I,fileName:"外层良率查询".concat(d().format("YYYY-MM-DD HH:mm:ss"),"导出.xlsx"),ortherData:e,mergeCellsArr:a})}return(a,l)=>{const d=t,h=y,k=i("STableSummaryCell"),N=i("STableSummaryRow"),T=e;return c(),n("div",f,[s(d,{ref_key:"commonSearchRef",ref:g,searchParams:m.value,"onUpdate:searchParams":l[0]||(l[0]=e=>m.value=e),"form-list":_,"is-search":!0,onSearch:P,onReset:Q},null,8,["searchParams"]),s(T,{ref_key:"tableRef",ref:w,searchParams:v.value,"onUpdate:searchParams":l[1]||(l[1]=e=>v.value=e),column:I,"show-row-selection":!1,"auto-generate-uuid":!0,"summary-fixed":!0,"is-pagination":!1,scroll:{y:"auto"},"is-init-get-data":"",url:"/qms/inOutYieldRate/inOutYieldRateList",onTableDataLoadSucess:F},{title:r((()=>[s(h,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:D},{icon:r((()=>[s(o(p))])),default:r((()=>[l[2]||(l[2]=u("span",{class:"ml-3px"},"导出",-1))])),_:1})])),summary:r((()=>[s(N,null,{default:r((()=>[s(k,{index:0,"col-span":2,class:"text-center"},{default:r((()=>l[3]||(l[3]=[x("总计")]))),_:1}),s(k,{index:2,class:"text-center"},{default:r((()=>l[4]||(l[4]=[x("--")]))),_:1}),s(k,{index:3,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:4,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:5,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:6,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:7,class:"text-center"},{default:r((()=>[x(b(S.value),1)])),_:1}),s(k,{index:8,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:9,class:"text-center"},{default:r((()=>[x(b(R.value),1)])),_:1}),s(k,{index:10,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:11,class:"text-center"},{default:r((()=>l[5]||(l[5]=[x("--")]))),_:1}),s(k,{index:12,class:"text-center"},{default:r((()=>l[6]||(l[6]=[x("--")]))),_:1}),s(k,{index:13,class:"text-center"},{default:r((()=>l[7]||(l[7]=[x("--")]))),_:1}),s(k,{index:14,class:"text-center"},{default:r((()=>l[8]||(l[8]=[x("--")]))),_:1}),s(k,{index:15,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:16,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:17,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:18,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:19,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:20,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:21,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:22,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:23,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:24,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:25,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:26,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:27,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:28,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:29,class:"text-center"},{default:r((()=>l[9]||(l[9]=[x("--")]))),_:1}),s(k,{index:30,class:"text-center"},{default:r((()=>l[10]||(l[10]=[x("--")]))),_:1}),s(k,{index:31,class:"text-center"},{default:r((()=>l[11]||(l[11]=[x("--")]))),_:1}),s(k,{index:32,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:33,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:34,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:35,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:36,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:37,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:38,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:39,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:40,class:"text-center"},{default:r((({total:e})=>[x(b(e),1)])),_:1}),s(k,{index:41,class:"text-center"},{default:r((()=>l[12]||(l[12]=[x("--")]))),_:1}),s(k,{index:42,class:"text-center"},{default:r((()=>l[13]||(l[13]=[x("--")]))),_:1})])),_:1})])),_:1},8,["searchParams"])])}}});export{k as default};
