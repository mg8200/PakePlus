import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as l,K as a,L as t,o as n,c as s,w as i,g as u,f as o,s as d,t as c,I as r,v as m,N as v,M as p,O as h,B as f,P as g,Q as w,F as x,r as _,p as b,db as y,S as k,e as C,h as T,ae as U}from"./index-B3PZsRwT.js";import{a as I,v as S}from"./index-DqnulfE2.js";import{_ as A}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as B}from"./index-BThgVJ70.js";const P={class:"w-full flex"},z={class:"flex"},j={class:"w-full flex-y-center justify-end gap-12px"},q={class:"ml-3px"},$={class:"ml-3px"},E=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:a(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,_=t(e,"model");function b(){a("search",_.value)}function y(){_.value.locationId=null,_.value.model=[],a("reset",_.value)}return(e,l)=>{const a=r,t=m,k=v,C=p,T=h,U=f,I=g,S=w,A=x,E=B;return n(),s(E,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:i((()=>[u(A,{model:_.value,"label-col":{span:5,md:7},class:"search-form"},{default:i((()=>[o("div",P,[u(S,{gutter:[15,8],wrap:"",class:"w-full"},{default:i((()=>[u(k,{span:24,md:12,lg:6,xl:8,xxl:6},{default:i((()=>[u(t,{label:"生产型号",name:"locationId",class:"m-0","label-col":{}},{default:i((()=>[u(a,{value:_.value.locationId,"onUpdate:value":l[0]||(l[0]=e=>_.value.locationId=e),placeholder:"请输入生产型号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(b,["enter"])},null,8,["value"])])),_:1})])),_:1}),u(k,{span:24,md:12,lg:6,xl:8,xxl:6},{default:i((()=>[u(t,{label:"日期",name:"model",class:"m-0","label-col":{}},{default:i((()=>[u(C,{value:_.value.time,"onUpdate:value":l[1]||(l[1]=e=>_.value.time=e),"show-time":"",class:"min-form-control","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["value"])])),_:1})])),_:1}),o("div",z,[u(t,{class:"m-0"},{default:i((()=>[o("div",j,[u(U,{type:"primary",ghost:"",class:"mini-btn",onClick:b},{icon:i((()=>[u(T,{class:"align-sub text-icon"})])),default:i((()=>[o("span",q,c(e.$t("common.search")),1)])),_:1}),u(U,{class:"mini-btn",onClick:y},{icon:i((()=>[u(I,{class:"align-sub text-icon"})])),default:i((()=>[o("span",$,c(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),H={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},N={class:"event-form"},R={class:"modal-footer"},D=Object.assign({name:"issuance-management_process-control"},{__name:"index",setup(l){const a=_({locationId:"",time:""}),t=b({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{t.current=e,t.pageSize=l,q()}}),s=_([{key:"line",dataIndex:"line",title:"制程线",align:"center",checked:!0},{key:"width",dataIndex:"width",title:"板宽(mm)",align:"center",checked:!0,customRender:({record:e})=>u(r,{style:"height: 22px !important;",value:e.width,onChange:l=>{e.width=l.target.value}},null)},{key:"height",dataIndex:"height",title:"板长(mm)",align:"center",checked:!0,customRender:({record:e})=>u(r,{style:"height: 22px !important;",value:e.height,onChange:l=>{e.height=l.target.value}},null)}]),d=_([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0},{key:"product",dataIndex:"product",title:"生产型号",width:160,align:"center",checked:!0,ellipsis:!0},{key:"line",dataIndex:"line",title:"制程线",width:100,align:"center",checked:!0,ellipsis:!0},{key:"copperPlatingTime",dataIndex:"copperPlatingTime",title:"电镀时间(m)",width:100,align:"center",checked:!0,ellipsis:!0},{key:"cycleTime",dataIndex:"cycleTime",title:"循环时间(m)",width:100,align:"center",checked:!0,ellipsis:!0},{key:"chAsdPositive1",dataIndex:"chAsdPositive1",title:"正面电流",width:100,align:"center",checked:!0,ellipsis:!0},{key:"chAsdBehind1",dataIndex:"chAsdBehind1",title:"反面电流",width:100,align:"center",checked:!0,ellipsis:!0},{key:"createTime",dataIndex:"createTime",title:"创建时间",width:200,align:"center",checked:!0,ellipsis:!0},{key:"createUser",dataIndex:"createUser",title:"创建人",width:100,align:"center",checked:!0,ellipsis:!0},{key:"lmTime",dataIndex:"lmTime",title:"修改时间",width:200,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>null==e.lmTime?null:y(e.lmTime)},{key:"lmUser",dataIndex:"lmUser",title:"修改人",width:100,align:"center",checked:!0,ellipsis:!0}]),c=_([]);const p=_({}),h=_(!1),g=_([]),P=_(!1),z=_([]),j=_([{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"E",label:"E"},{value:"F",label:"F"},{value:"G",label:"G"},{value:"H",label:"H"}]);function q(){var e;P.value=!0,(null==(e=a.value.time)?void 0:e.length)>0?(a.value.startTime=a.value.time[0],a.value.endTime=a.value.time[1]):delete a.value.time,delete a.value.time,I("/mes/pnSpecial/getPnSpecialControlJl",{pageSize:t.pageSize,pageNum:t.current,...a.value}).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1})),g.value=e.list,t.total=e.total)})).finally((()=>{P.value=!1}))}_([{label:"WorkingCenter"},{label:"Storage"}]),_([{label:"HBJL"}]);const $=_([]),D=_("");function F(e){$.value=e}function J(){p.value={},c.value=[],p.value.siteId="HBJL",D.value="制程管制新增",h.value=!0}function M(){var e;if(1!==$.value.length)return null==(e=window.$message)?void 0:e.error("请选择一条数据");const l=g.value.filter((e=>$.value.includes(e.pnSpecialControlUuid)));D.value="制程管制修改",p.value=l[0],c.value=l[0].list,h.value=!0}function Y(){var e;if(0==$.value.length)return null==(e=window.$message)?void 0:e.error("请选择数据");const l=$.value;S("/mes/pnSpecial/deleteBath",l).then((({error:e,data:l})=>{var a;e||(null==(a=window.$message)||a.success("删除成功"),q())}))}const K=_(null);function L(e){return{style:{background:e.pnSpecialControlUuid===K.value?"#BAEAFA":""},onClick:()=>{K.value=e.pnSpecialControlUuid},class:e.pnSpecialControlUuid===K.value?"jl-table-row-selected":""}}function O(){t.current=1,q()}return q(),(l,b)=>{const y=f,I=e,K=k("STable"),G=r,Q=m,W=v,V=U,X=w,Z=x,ee=B;return n(),C("div",H,[u(E,{model:a.value,"onUpdate:model":b[0]||(b[0]=e=>a.value=e),onReset:b[1]||(b[1]=e=>O()),onSearch:b[2]||(b[2]=e=>O())},null,8,["model"]),u(ee,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:i((()=>[u(y,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:J},{default:i((()=>b[16]||(b[16]=[o("span",{class:"ml-3px"},"新增",-1)]))),_:1}),u(y,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:M},{default:i((()=>b[17]||(b[17]=[o("span",{class:"ml-3px"},"修改",-1)]))),_:1}),u(y,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:Y},{default:i((()=>b[18]||(b[18]=[o("span",{class:"ml-3px"},"删除",-1)]))),_:1})])),extra:i((()=>[u(I,{columns:d.value,"onUpdate:columns":b[3]||(b[3]=e=>d.value=e)},null,8,["columns"])])),default:i((()=>[u(K,{columns:d.value,"data-source":g.value,size:"small",bordered:"","custom-row":L,loading:P.value,"row-selection":{selectedRowKeys:$.value,onChange:F},"default-expanded-row-keys":z.value,"row-key":"pnSpecialControlUuid","default-expand-all-rows":!0,scroll:{x:"auto",y:"auto"},pagination:t,class:"h-full","row-height":23},null,8,["columns","data-source","loading","row-selection","default-expanded-row-keys","pagination"]),u(A,{visible:h.value,"onUpdate:visible":b[15]||(b[15]=e=>h.value=e),"destroy-on-close":!0,centered:!0,title:D.value,width:"950px",height:"850px"},{footer:i((()=>[o("div",R,[u(y,{type:"primary",onClick:b[13]||(b[13]=e=>function(e){var l;p.value.list=c.value;const a=_(0);if(p.value.list.map((e=>{e.width&&e.height?a.value=0:a.value=1})),1==a.value)return null==(l=window.$message)?void 0:l.success("请先检查线别长宽是否修改");"制程管制新增"==e?S("/mes/pnSpecial/add",p.value).then((({data:e,error:l})=>{var a;l||(null==(a=window.$message)||a.success("新增成功"),h.value=!1,q())})):S("/mes/pnSpecial/update",p.value).then((({data:e,error:l})=>{var a;l||(null==(a=window.$message)||a.success("修改成功"),h.value=!1,q())}))}(D.value))},{default:i((()=>b[19]||(b[19]=[T("保存")]))),_:1}),u(y,{onClick:b[14]||(b[14]=e=>h.value=!1)},{default:i((()=>b[20]||(b[20]=[T("关闭")]))),_:1})])])),default:i((()=>[o("div",N,[u(Z,{model:p.value,name:"basic","label-col":{},autocomplete:"off"},{default:i((()=>[u(X,{gutter:15},{default:i((()=>[u(W,{span:12},{default:i((()=>[u(Q,{label:"产品",name:"product",rules:[{required:!0,message:"请输入产品!"}]},{default:i((()=>[u(G,{value:p.value.product,"onUpdate:value":b[4]||(b[4]=e=>p.value.product=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),u(W,{span:12},{default:i((()=>[u(Q,{"label-col":{},label:"lot卡号",name:"lotNo",rules:[{required:!0,message:"请输入lot卡号!"}]},{default:i((()=>[u(G,{value:p.value.lotNo,"onUpdate:value":b[5]||(b[5]=e=>p.value.lotNo=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),u(W,{span:12},{default:i((()=>[u(Q,{label:"电镀时间()",name:"copperPlatingTime",rules:[{required:!0,message:"请输入电镀时间!"}]},{default:i((()=>[u(G,{value:p.value.copperPlatingTime,"onUpdate:value":b[6]||(b[6]=e=>p.value.copperPlatingTime=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),u(W,{span:12},{default:i((()=>[u(Q,{"label-col":{},label:"循环时间(m)",name:"cycleTime",rules:[{required:!0,message:"请输入循环时间!"}]},{default:i((()=>[u(G,{value:p.value.cycleTime,"onUpdate:value":b[7]||(b[7]=e=>p.value.cycleTime=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),u(W,{span:12},{default:i((()=>[u(Q,{label:"正面电流",name:"chAsdPositive1",rules:[{required:!0,message:"请输入正面电流!"}]},{default:i((()=>[u(G,{value:p.value.chAsdPositive1,"onUpdate:value":b[8]||(b[8]=e=>p.value.chAsdPositive1=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),u(W,{span:12},{default:i((()=>[u(Q,{label:"反面电流",name:"chAsdBehind1",rules:[{required:!0,message:"请输入反面电流!"}],"label-col":{}},{default:i((()=>[u(G,{value:p.value.chAsdBehind1,"onUpdate:value":b[9]||(b[9]=e=>p.value.chAsdBehind1=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),u(W,{span:12},{default:i((()=>[u(Q,{"label-col":{},label:"板厚(mm)",name:"plateThickness",rules:[{required:!0,message:"请输入板厚!"}]},{default:i((()=>[u(G,{value:p.value.plateThickness,"onUpdate:value":b[10]||(b[10]=e=>p.value.plateThickness=e),"allow-clear":""},null,8,["value"])])),_:1})])),_:1}),u(W,{span:12},{default:i((()=>[u(Q,{label:"制程线",name:"line","label-col":{}},{default:i((()=>[u(V,{value:p.value.line,"onUpdate:value":b[11]||(b[11]=e=>p.value.line=e),mode:"multiple",placeholder:"请选择制程线",options:j.value,onChange:b[12]||(b[12]=e=>{var l;(l=p.value.line).length>0?(c.value=[],l.forEach((e=>{c.value.push({line:e,width:"",height:""})}))):c.value=[]})},null,8,["value","options"])])),_:1})])),_:1}),u(W,{span:24},{default:i((()=>[u(K,{columns:s.value,"data-source":c.value,size:"small",bordered:"",loading:P.value,"row-key":"line","default-expand-all-rows":!0,scroll:{y:"auto"},pagination:!1,height:300,class:"h-300px"},null,8,["columns","data-source","loading"])])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible","title"])])),_:1})])}}});export{D as default};
