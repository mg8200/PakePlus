import{Z as e,r as t,b as a,aa as l,a2 as i,o as s,e as n,g as r,w as d,a3 as c,c as o,i as p,h as m,f as u,a5 as h,B as k}from"./index-B3PZsRwT.js";import{_ as x}from"./table-DoFSI9NT.js";import{_ as g}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{Q as y,_ as v}from"./print-qr-code.vue_vue_type_script_setup_true_lang-1entwNlU.js";import{D as f}from"./DeleteOutlined-CWT7lRAZ.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";import"./index-BThgVJ70.js";import"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";const w={class:"message jl-main-page min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},_=Object.assign({name:"trace_copper-foil-trace"},{__name:"index",setup(_){const b=t(null),N=t(null),I=t({prodNo:null,lotNo:null,matNo:null,time:null}),D=[{type:"input",key:"prodNo",label:"生产型号",placeholder:"请输入生产型号",span:24,md:12,lg:8,xl:8,xxl:5},{type:"input",key:"lotNo",label:"LOT号",placeholder:"请输入LOT号",span:24,md:12,lg:8,xl:8,xxl:5},{type:"input",key:"matNo",label:"物料编码",placeholder:"请输入物料编码",span:24,md:12,lg:8,xl:8,xxl:5},{type:"dateRangePicker",key:"time",label:"时间",span:24,md:12,lg:10,xl:8,xxl:6,showTime:!0}],Y=a((()=>{var e,t;const a={...I.value};return(null==(t=null==(e=I.value)?void 0:e.time)?void 0:t[0])&&(a.beginTime=l(I.value.time[0]).format("YYYY-MM-DD"),a.endTime=l(I.value.time[0]).format("YYYY-MM-DD")),delete a.time,a})),j=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,fixed:"left",align:"center",checked:!0,ellipsis:!0},{key:"fullProdNo",dataIndex:"fullProdNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,width:180},{key:"lotNo",dataIndex:"lotNo",title:"Lot号",align:"center",checked:!0,ellipsis:!0,width:160},{key:"matNo",dataIndex:"matNo",title:"物料编码",align:"center",checked:!0,ellipsis:!0,width:320},{key:"matName",dataIndex:"matName",title:"物料名称",align:"center",checked:!0,ellipsis:!0,width:110},{key:"modelNum",dataIndex:"modelNum",title:"类型",align:"center",checked:!0,ellipsis:!0,width:100},{key:"thick",dataIndex:"thick",title:"铜厚",align:"center",checked:!0,ellipsis:!0,width:100},{key:"thick2",dataIndex:"thick2",title:"厚度",align:"center",checked:!0,ellipsis:!0,width:100},{key:"width",dataIndex:"width",title:"宽度",align:"center",checked:!0,ellipsis:!0,width:130},{key:"specifications",dataIndex:"specifications",title:"规格",align:"center",checked:!0,ellipsis:!0,width:190},{key:"prodDate",dataIndex:"prodDate",title:"生产日期",align:"center",checked:!0,ellipsis:!0,width:110,customRender:({record:e})=>l(e.prodDate).format("YYYY-MM-DD")},{key:"expiryDate",dataIndex:"expiryDate",title:"失效日期",align:"center",checked:!0,ellipsis:!0,width:110,customRender:({record:e})=>l(e.expiryDate).format("YYYY-MM-DD")},{key:"splOrderNo",dataIndex:"splOrderNo",title:"采购单号",align:"center",checked:!0,ellipsis:!0,width:160},{key:"brand",dataIndex:"brand",title:"供应商名称",align:"center",checked:!0,ellipsis:!0,width:170},{key:"supplierNo",dataIndex:"supplierNo",title:"供应商编码",align:"center",checked:!0,ellipsis:!0,width:140},{key:"barcode",dataIndex:"barcode",title:"物料批次",align:"center",checked:!0,ellipsis:!0,width:170},{key:"deliveryOrder",dataIndex:"deliveryOrder",title:"送货单号",align:"center",checked:!0,ellipsis:!0,width:160},{key:"createUser",dataIndex:"createUser",title:"创建人",align:"center",checked:!0,ellipsis:!0,width:100},{key:"createTime",dataIndex:"createTime",title:"创建时间",align:"center",checked:!0,ellipsis:!0,width:180,customRender:({record:e})=>l(e.createTime).format("YYYY-MM-DD HH:mm:ss")},{key:"remarks",dataIndex:"remarks",title:"备注",align:"center",checked:!0,ellipsis:!0,width:150}];function M(){N.value.getData(1)}function O(){h((()=>{I.value={prodNo:null,lotNo:null,matNo:null,time:null},M()}))}const P=t(!1);function T(){P.value=!0}const R=t([]);function U(e){R.value=e}const C=t(!1);function L(){0!==R.value.length?(C.value=!0,window.$modal.confirm({title:"确定删除所选中的记录吗?",onOk:()=>{var t;(t=R.value.map((e=>e.id)),e({url:"/mes/coppermaterial/delete",method:"post",data:t})).then((({data:e,error:t})=>{t||(window.$message.success("删除成功"),N.value.getData(1),R.value=[])})).finally((()=>{C.value=!1}))},onCancel:()=>{}})):window.$message.error("请选择需要删除的记录")}return(e,t)=>{const a=k,l=i("hasAuth");return s(),n("div",w,[r(g,{ref_key:"commonSearchRef",ref:b,searchParams:I.value,"onUpdate:searchParams":t[0]||(t[0]=e=>I.value=e),"form-list":D,"is-search":!0,onSearch:M,onReset:O},null,8,["searchParams"]),r(x,{ref_key:"tableRef",ref:N,searchParams:Y.value,"onUpdate:searchParams":t[2]||(t[2]=e=>Y.value=e),column:j,"show-row-selection":!0,"row-key":"tableUuid",scroll:{y:"auto"},"is-init-get-data":"",url:"/mes/coppermaterial/list","auto-generate-uuid":!0,onTableSelectChange:U},{title:d((()=>[c((s(),o(a,{type:"primary",danger:"",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:!R.value.length,onClick:t[1]||(t[1]=e=>L())},{icon:d((()=>[r(p(f),{class:"align-sub"})])),default:d((()=>[t[4]||(t[4]=m(" 删除 "))])),_:1},8,["disabled"])),[[l,["trace:copper-foil-trace:delete"]]]),r(a,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:T},{icon:d((()=>[r(p(y))])),default:d((()=>[t[5]||(t[5]=u("span",{class:"ml-3px"},"二维码",-1))])),_:1})])),_:1},8,["searchParams"]),r(v,{visible:P.value,"onUpdate:visible":t[3]||(t[3]=e=>P.value=e),type:"copper"},null,8,["visible"])])}}});export{_ as default};
