import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{_ as a}from"./round-add-MytOGm9O.js";import{Z as l,d as s,K as t,L as n,o,c as u,w as r,g as c,f as i,h as v,t as d,I as _,v as m,N as p,ad as f,ae as g,O as y,B as h,P as E,Q as x,F as T,e as b,dK as I,bL as P,q as L,r as R,n as j,b as k,dL as w,_ as O,a0 as A,aj as D,al as V,a6 as C,i as N,a1 as U,dr as q,cn as M,de as F,ds as z,b1 as B,V as S,db as $,dt as H}from"./index-B3PZsRwT.js";import{u as J,a as K,b as W}from"./table-BBWrHy5v.js";import{_ as Q}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as Z}from"./index-BThgVJ70.js";import{S as G}from"./index-BjkQiJDd.js";import{_ as X}from"./index-Cn-BWYp5.js";import"./fromPairs-BI-MgVCs.js";const Y={class:"w-full flex"},ee={class:"flex"},ae={class:"w-full flex-y-center justify-end gap-12px"},le={class:"ml-3px"},se={class:"ml-3px"},te=s({name:"MenuSearch",__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:t(["search"],["update:model"]),setup(e,{emit:a}){const l=a,s=n(e,"model");function t(){l("search",s.value)}function b(){s.value={menuName:"",status:""},l("search",s.value)}return(e,a)=>{const l=_,n=m,I=p,P=f,L=g,R=y,j=h,k=E,w=x,O=T,A=Z;return o(),u(A,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:r((()=>[c(O,{ref:"formRef",model:s.value,"label-col":{span:5,md:7},class:"search-form"},{default:r((()=>[i("div",Y,[c(w,{gutter:[15,8],wrap:"",class:"w-full"},{default:r((()=>[c(I,{span:24,md:12,lg:6,xl:6,xxl:4},{default:r((()=>[c(n,{label:"菜单名称",name:"model",class:"m-0","label-col":{}},{default:r((()=>[c(l,{value:s.value.menuName,"onUpdate:value":a[0]||(a[0]=e=>s.value.menuName=e),placeholder:"请输入菜单名称",class:"min-form-control",allowClear:"",autocomplete:"off"},null,8,["value"])])),_:1})])),_:1}),c(I,{span:24,md:12,lg:6,xl:6,xxl:4},{default:r((()=>[c(n,{label:"状态",name:"model",class:"m-0","label-col":{}},{default:r((()=>[c(L,{value:s.value.status,"onUpdate:value":a[1]||(a[1]=e=>s.value.status=e),placeholder:"请选择状态",class:"min-form-control",allowClear:""},{default:r((()=>[c(P,{value:"0"},{default:r((()=>a[2]||(a[2]=[v("正常")]))),_:1}),c(P,{value:"1"},{default:r((()=>a[3]||(a[3]=[v("禁用")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),i("div",ee,[c(n,{class:"m-0"},{default:r((()=>[i("div",ae,[c(j,{type:"primary",ghost:"",class:"mini-btn",onClick:t},{icon:r((()=>[c(R,{class:"align-sub text-icon"})])),default:r((()=>[i("span",le,d(e.$t("common.search")),1)])),_:1}),c(j,{class:"mini-btn",onClick:b},{icon:r((()=>[c(k,{class:"align-sub text-icon"})])),default:r((()=>[i("span",se,d(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),ne={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"};const oe={name:"ic-round-remove",render:function(e,a){return o(),b("svg",ne,a[0]||(a[0]=[i("path",{fill:"currentColor",d:"M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1"},null,-1)]))}},ue={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"};const re={name:"ic-round-plus",render:function(e,a){return o(),b("svg",ue,a[0]||(a[0]=[i("path",{fill:"currentColor",d:"M18 12.998h-5v5a1 1 0 0 1-2 0v-5H6a1 1 0 0 1 0-2h5v-5a1 1 0 0 1 2 0v5h5a1 1 0 0 1 0 2"},null,-1)]))}},ce={class:"inline-block",viewBox:"0 0 32 32",width:"1em",height:"1em"};const ie={name:"carbon-add",render:function(e,a){return o(),b("svg",ce,a[0]||(a[0]=[i("path",{fill:"currentColor",d:"M17 15V8h-2v7H8v2h7v7h2v-7h7v-2z"},null,-1)]))}};const ve="layout.",de="view.";const _e={class:"my-form-content p-15px"},me={key:1,class:"w-full"},pe=s({name:"AddMenuForm",__name:"add-menu-form",props:{operateType:{},menuList:{},rowData:{}},setup(e,{expose:a}){const s=P("close"),t=P("query"),n=e,{defaultRequiredRule:y,createRequiredRule:E}=L(),B={parentId:E("上级菜单不能为空"),menuName:E("菜单名称不能为空"),orderNum:E("显示顺不能为空"),status:y,routeName:E("路由名称不能为空")},S=R(function(){let e={menuType:"M",menuName:"",parentId:null,iconType:"3",icon:"",orderNum:null,layout:null,routePath:"",routeName:"",page:"",status:"0",hideInMenu:"0",perms:"",constant:"1",href:"",queryList:[],component:"",pathParam:"",query:"",visible:"1",isCache:"1",path:"",activeMenu:""};const a=n.rowData;if(a){if("edit"===n.operateType&&(e=a,"C"===a.menuType&&(e.page=a.routeName.split(":")[0]),e.iconType="".concat(a.iconType),e.constant="".concat(a.constant?0:1),e.hideInMenu="".concat(a.hideInMenu?0:1),e.routePath=a.path.replace("/".concat(a.pathParam),""),a.query)){const l=JSON.parse(a.query);e.queryList=Object.keys(l).map((e=>({key:e,value:l[e]})))}"addChild"===n.operateType&&(e.parentId=a.parentId)}return e}()),{formRef:$,validate:H,resetFields:J}=j();k((()=>"edit"===n.operateType));const K=[{label:"base",value:"base"},{label:"blank",value:"blank"}],W=[{value:"1",label:"iconify图标"},{value:"2",label:"本地图标"},{value:"3",label:"阿里字体图标"}],Q=[{label:"正常",value:"0"},{label:"禁用",value:"1"}],Z=w().map((e=>({label:e,value:e}))),X=[{label:"目录",value:"M"},{label:"APP目录",value:"A"},{label:"菜单",value:"C"},{label:"按钮",value:"F"}],Y=function(){const e=Object.assign({"/src/assets/svg-icon/activity.svg":()=>I((()=>import("./activity-B4XY664I.js")),[]),"/src/assets/svg-icon/at-sign.svg":()=>I((()=>import("./at-sign-DvqQw7Qx.js")),[]),"/src/assets/svg-icon/avatar.svg":()=>I((()=>import("./avatar-CR4D3Wln.js")),[]),"/src/assets/svg-icon/banner.svg":()=>I((()=>import("./banner-c0_1_hKZ.js")),[]),"/src/assets/svg-icon/cancel.svg":()=>I((()=>import("./cancel-DkccE32R.js")),[]),"/src/assets/svg-icon/cast.svg":()=>I((()=>import("./cast-n3EmpXB4.js")),[]),"/src/assets/svg-icon/change-password.svg":()=>I((()=>import("./change-password-dICvmE0I.js")),[]),"/src/assets/svg-icon/chrome.svg":()=>I((()=>import("./chrome-BM_Le6p_.js")),[]),"/src/assets/svg-icon/clear.svg":()=>I((()=>import("./clear-BIuoISj0.js")),[]),"/src/assets/svg-icon/close-outlined.svg":()=>I((()=>import("./close-outlined-Ds05VZoK.js")),[]),"/src/assets/svg-icon/cloud-service-management.svg":()=>I((()=>import("./cloud-service-management-Ci-CJ7i-.js")),[]),"/src/assets/svg-icon/column-width-outlined.svg":()=>I((()=>import("./column-width-outlined-CLKfi7jT.js")),[]),"/src/assets/svg-icon/copy-column.svg":()=>I((()=>import("./copy-column-CAJHCL_6.js")),[]),"/src/assets/svg-icon/copy-line.svg":()=>I((()=>import("./copy-line-C8jFUX73.js")),[]),"/src/assets/svg-icon/copy-text.svg":()=>I((()=>import("./copy-text-CLjguSkL.js")),[]),"/src/assets/svg-icon/copy.svg":()=>I((()=>import("./copy-BsYpLlfM.js")),[]),"/src/assets/svg-icon/custom-icon.svg":()=>I((()=>import("./custom-icon-857Ak5pp.js")),[]),"/src/assets/svg-icon/dcb.svg":()=>I((()=>import("./dcb-tCu6D75k.js")),[]),"/src/assets/svg-icon/delete.svg":()=>I((()=>import("./delete-CF2a_P5U.js")),[]),"/src/assets/svg-icon/department.svg":()=>I((()=>import("./department-DbddBECM.js")),[]),"/src/assets/svg-icon/download.svg":()=>I((()=>import("./download-DHnX4XzA.js")),[]),"/src/assets/svg-icon/downward.svg":()=>I((()=>import("./downward-8tzJmp7w.js")),[]),"/src/assets/svg-icon/edit-2.svg":()=>I((()=>import("./edit-2-Di5IWWRg.js")),[]),"/src/assets/svg-icon/edit-3.svg":()=>I((()=>import("./edit-3-Bu0zgDH3.js")),[]),"/src/assets/svg-icon/edit.svg":()=>I((()=>import("./edit-BIFb5oMf.js")),[]),"/src/assets/svg-icon/empty-data.svg":()=>I((()=>import("./empty-data-BRCp_79X.js")),[]),"/src/assets/svg-icon/engineering-design.svg":()=>I((()=>import("./engineering-design-D50-Ilnk.js")),[]),"/src/assets/svg-icon/examine.svg":()=>I((()=>import("./examine-Ci0fVMI8.js")),[]),"/src/assets/svg-icon/exit-full-screen.svg":()=>I((()=>import("./exit-full-screen-DveSBdpb.js")),[]),"/src/assets/svg-icon/expectation.svg":()=>I((()=>import("./expectation-ClOyOsuV.js")),[]),"/src/assets/svg-icon/format-horizontal-align-left.svg":()=>I((()=>import("./format-horizontal-align-left-BPcF5TCq.js")),[]),"/src/assets/svg-icon/format-horizontal-align-right.svg":()=>I((()=>import("./format-horizontal-align-right-D47q3nPR.js")),[]),"/src/assets/svg-icon/full-screen.svg":()=>I((()=>import("./full-screen-DsasGWHC.js")),[]),"/src/assets/svg-icon/heart.svg":()=>I((()=>import("./heart-DOH2U7VV.js")),[]),"/src/assets/svg-icon/line-outlined.svg":()=>I((()=>import("./line-outlined-XorEWkP-.js")),[]),"/src/assets/svg-icon/logo.svg":()=>I((()=>import("./logo-BeLY4cv9.js")),[]),"/src/assets/svg-icon/monitor-dashboard.svg":()=>I((()=>import("./monitor-dashboard-D0y_uL3Q.js")),[]),"/src/assets/svg-icon/network-error.svg":()=>I((()=>import("./network-error-BqLMVXq_.js")),[]),"/src/assets/svg-icon/no-icon.svg":()=>I((()=>import("./no-icon-DEGyx3Oz.js")),[]),"/src/assets/svg-icon/no-permission.svg":()=>I((()=>import("./no-permission-CtR3LTfG.js")),[]),"/src/assets/svg-icon/not-found.svg":()=>I((()=>import("./not-found-CYDGEt_a.js")),[]),"/src/assets/svg-icon/pause.svg":()=>I((()=>import("./pause-B7Nio_MS.js")),[]),"/src/assets/svg-icon/play.svg":()=>I((()=>import("./play-D6owSWHb.js")),[]),"/src/assets/svg-icon/preview.svg":()=>I((()=>import("./preview-Xzl8pBJ1.js")),[]),"/src/assets/svg-icon/round-manage-accounts.svg":()=>I((()=>import("./round-manage-accounts-DTQ-qzvE.js")),[]),"/src/assets/svg-icon/route.svg":()=>I((()=>import("./route-DD2aHEXE.js")),[]),"/src/assets/svg-icon/save.svg":()=>I((()=>import("./save-ABtfsbxb.js")),[]),"/src/assets/svg-icon/service-error.svg":()=>I((()=>import("./service-error-B0UfUps3.js")),[]),"/src/assets/svg-icon/set.svg":()=>I((()=>import("./set-Yk_qXGnU.js")),[]),"/src/assets/svg-icon/sign-out.svg":()=>I((()=>import("./sign-out-BhjYV4hA.js")),[]),"/src/assets/svg-icon/tool.svg":()=>I((()=>import("./tool-kY6LVdPi.js")),[]),"/src/assets/svg-icon/unlock.svg":()=>I((()=>import("./unlock-BjyJxaJ5.js")),[]),"/src/assets/svg-icon/unset.svg":()=>I((()=>import("./unset-ClB-LctL.js")),[]),"/src/assets/svg-icon/user-circle.svg":()=>I((()=>import("./user-circle-BhwjQAbT.js")),[]),"/src/assets/svg-icon/user-role.svg":()=>I((()=>import("./user-role-C2RWZouF.js")),[]),"/src/assets/svg-icon/view.svg":()=>I((()=>import("./view-BCHI8-cl.js")),[]),"/src/assets/svg-icon/wind.svg":()=>I((()=>import("./wind-Dy5zdHKW.js")),[])});return Object.keys(e).map((e=>{var a;return(null==(a=e.split("/").at(-1))?void 0:a.replace(".svg",""))||""})).filter(Boolean)}().map((e=>({label:()=>c("div",{class:"flex-y-center gap-16px"},[c(O,{localIcon:e,class:"text-icon"},null),c("span",null,[e])]),value:e}))),ee=k((()=>[{value:0,label:"主类目",key:0,children:n.menuList}])),ae=k((()=>0===S.value.parentId)),le=k((()=>"C"==S.value.menuType));function se(e){S.value.queryList.splice(e+1,0,{key:"",value:""})}function te(){var e;const{layout:a,page:l,pathParam:s,...t}=S.value;t.layout=a;const n=function(e,a){const l=Boolean(e),s=Boolean(a);return l&&s?"".concat(ve).concat(e).concat("$").concat(de).concat(a):l?"".concat(ve).concat(e):s?"".concat(de).concat(a):""}(a,l);t.component=n;const o=function(e,a){return a.trim()?"".concat(e,"/").concat(a):e}(S.value.routePath||"",s||""),u={};return t.queryList.filter((e=>e.key)).forEach((e=>{u[e.key]=e.value})),t.query=JSON.stringify(u),t.routePath=o,S.value.path=o,t.path=o,t.pathParam=s,t.iconType=null==(e=t.iconType)?void 0:e.replace("undefined",""),t}return A((()=>S.value.routeName),(()=>{!function(){if(S.value.routeName){const e=S.value.routeName.split(":")[0];S.value.routePath=function(e){return"/".concat(e.replace(/_/g,"/"))}(e)}else S.value.routePath=""}()})),a({resetForm:function(){J()},handleSubmit:async function(){var e;await H();const a=te();let o;var u;o="edit"===n.operateType?await(u=a,l({url:"/system/menu",method:"put",data:u})):await function(e){return l({url:"/system/menu",method:"post",data:e})}(a);const{error:r}=o;r||(null==(e=window.$message)||e.success("操作成功!"),s(),t())}}),(e,a)=>{const l=q,s=m,t=p,n=M,y=F,E=_,I=g,P=f,L=z,R=ie,j=h,k=re,w=oe,A=G,H=x,J=T;return o(),b("div",_e,[c(J,{ref_key:"formRef",ref:$,model:S.value,rules:B,"label-col":{lg:8,xs:4},"label-wrap":""},{default:r((()=>[c(H,{gutter:20},{default:r((()=>[c(t,{lg:12,xs:24},{default:r((()=>[c(s,{label:"上级菜单",name:"parentId"},{default:r((()=>[c(l,{value:S.value.parentId,"onUpdate:value":a[0]||(a[0]=e=>S.value.parentId=e),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"请选择上级菜单","allow-clear":"","tree-default-expand-all":"","tree-data":ee.value,"tree-node-filter-prop":"menuName"},{title:r((({label:e})=>[v(d(e),1)])),_:1},8,["value","tree-data"])])),_:1})])),_:1}),c(t,{lg:12,xs:24},{default:r((()=>[c(s,{label:"菜单类型",name:"menuType"},{default:r((()=>[c(y,{value:S.value.menuType,"onUpdate:value":a[1]||(a[1]=e=>S.value.menuType=e)},{default:r((()=>[(o(),b(D,null,V(X,(e=>c(n,{key:e.value,value:e.value},{default:r((()=>[v(d(e.label),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1})])),_:1}),c(t,{lg:12,xs:24},{default:r((()=>[c(s,{label:"菜单名称",name:"menuName"},{default:r((()=>[c(E,{value:S.value.menuName,"onUpdate:value":a[2]||(a[2]=e=>S.value.menuName=e),placeholder:"请输入菜单名称",autocomplete:"off"},null,8,["value"])])),_:1})])),_:1}),"M"==S.value.menuType||"C"==S.value.menuType?(o(),b(D,{key:0},[c(t,{lg:12,xs:24},{default:r((()=>[c(s,{label:"路由名称",name:"routeName"},{default:r((()=>[c(E,{value:S.value.routeName,"onUpdate:value":a[3]||(a[3]=e=>S.value.routeName=e),placeholder:"请输入路由名称",autocomplete:"off"},null,8,["value"])])),_:1})])),_:1}),c(t,{lg:12,xs:24},{default:r((()=>[c(s,{label:"路由路径",name:"routePath"},{default:r((()=>[c(E,{value:S.value.routePath,"onUpdate:value":a[4]||(a[4]=e=>S.value.routePath=e),disabled:"",placeholder:"请输入路由路径",autocomplete:"off"},null,8,["value"])])),_:1})])),_:1}),ae.value?(o(),u(t,{key:0,lg:12,xs:24},{default:r((()=>[c(s,{label:"页面布局",name:"layout"},{default:r((()=>[c(I,{value:S.value.layout,"onUpdate:value":a[5]||(a[5]=e=>S.value.layout=e),options:K,placeholder:"请选择页面布局"},null,8,["value"])])),_:1})])),_:1})):C("",!0),le.value?(o(),u(t,{key:1,lg:12,xs:24},{default:r((()=>[c(s,{label:"页面组件",name:"page"},{default:r((()=>[c(I,{value:S.value.page,"onUpdate:value":a[6]||(a[6]=e=>S.value.page=e),options:N(Z),placeholder:"请选择页面组件","show-search":""},null,8,["value","options"])])),_:1})])),_:1})):C("",!0),c(t,{lg:12,xs:24},{default:r((()=>[c(s,{label:"图标类型",name:"iconType"},{default:r((()=>[c(I,{value:S.value.iconType,"onUpdate:value":a[7]||(a[7]=e=>S.value.iconType=e),placeholder:"青选择图标类型",onChange:a[8]||(a[8]=()=>{S.value.icon=null})},{default:r((()=>[(o(),b(D,null,V(W,(e=>c(P,{key:e.value,value:e.value},{default:r((()=>[v(d(e.label),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1})])),_:1}),c(t,{lg:12,xs:24},{default:r((()=>[c(s,{label:"图标",name:"icon"},{default:r((()=>["1"===S.value.iconType?(o(),u(E,{key:0,value:S.value.icon,"onUpdate:value":a[9]||(a[9]=e=>S.value.icon=e),placeholder:"请选择图标",class:"flex-1",autocomplete:"off"},{suffix:r((()=>[S.value.icon?(o(),u(O,{key:0,icon:S.value.icon,class:"text-icon"},null,8,["icon"])):C("",!0)])),_:1},8,["value"])):C("",!0),"2"===S.value.iconType?(o(),u(I,{key:1,value:S.value.icon,"onUpdate:value":a[10]||(a[10]=e=>S.value.icon=e),placeholder:"请选择本地图标",options:N(Y)},null,8,["value","options"])):C("",!0),"3"===S.value.iconType?(o(),u(E,{key:2,value:S.value.icon,"onUpdate:value":a[11]||(a[11]=e=>S.value.icon=e),placeholder:"请选择图标",class:"flex-1",autocomplete:"off"},{suffix:r((()=>[S.value.icon?(o(),b("span",{key:0,class:U("icon iconfont ".concat(S.value.icon))},null,2)):C("",!0)])),_:1},8,["value"])):C("",!0)])),_:1})])),_:1}),c(t,{lg:12,xs:24},{default:r((()=>[c(s,{label:e.$t("page.manage.menu.keepAlive"),name:"keepAlive"},{default:r((()=>[c(y,{value:S.value.isCache,"onUpdate:value":a[12]||(a[12]=e=>S.value.isCache=e)},{default:r((()=>[c(n,{value:"0"},{default:r((()=>a[22]||(a[22]=[v("是")]))),_:1}),c(n,{value:"1"},{default:r((()=>a[23]||(a[23]=[v("否")]))),_:1})])),_:1},8,["value"])])),_:1},8,["label"])])),_:1}),c(t,{lg:12,xs:24},{default:r((()=>[c(s,{label:"隐藏菜单",name:"visible"},{default:r((()=>[c(y,{value:S.value.visible,"onUpdate:value":a[13]||(a[13]=e=>S.value.visible=e)},{default:r((()=>[c(n,{value:"0"},{default:r((()=>a[24]||(a[24]=[v("是")]))),_:1}),c(n,{value:"1"},{default:r((()=>a[25]||(a[25]=[v("否")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),c(t,{lg:12,xs:24},{default:r((()=>[c(s,{label:"常量路由",name:"constant"},{default:r((()=>[c(y,{value:S.value.constant,"onUpdate:value":a[14]||(a[14]=e=>S.value.constant=e)},{default:r((()=>[c(n,{value:"0"},{default:r((()=>a[26]||(a[26]=[v("是")]))),_:1}),c(n,{value:"1"},{default:r((()=>a[27]||(a[27]=[v("否")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),c(t,{lg:12,xs:24},{default:r((()=>[c(s,{label:"外链",name:"href"},{default:r((()=>[c(E,{value:S.value.href,"onUpdate:value":a[15]||(a[15]=e=>S.value.href=e),placeholder:"请输入外链",autocomplete:"off"},null,8,["value"])])),_:1})])),_:1})],64)):C("",!0),c(t,{lg:12,xs:24},{default:r((()=>[c(s,{label:"状态",name:"status"},{default:r((()=>[c(y,{value:S.value.status,"onUpdate:value":a[16]||(a[16]=e=>S.value.status=e)},{default:r((()=>[(o(),b(D,null,V(Q,(e=>c(n,{key:e.value,value:e.value},{default:r((()=>[v(d(e.label),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1})])),_:1}),c(t,{lg:12,xs:24},{default:r((()=>[c(s,{label:"显示顺序",name:"orderNum"},{default:r((()=>[c(L,{value:S.value.orderNum,"onUpdate:value":a[17]||(a[17]=e=>S.value.orderNum=e),placeholder:"请输入显示顺序",class:"w-full",autocomplete:"off"},null,8,["value"])])),_:1})])),_:1}),"M"!=S.value.menuType?(o(),u(t,{key:1,lg:12,xs:24},{default:r((()=>[c(s,{label:"权限字符",name:"perms"},{default:r((()=>[c(E,{value:S.value.perms,"onUpdate:value":a[18]||(a[18]=e=>S.value.perms=e),placeholder:"请输入权限字符",autocomplete:"off"},null,8,["value"])])),_:1})])),_:1})):C("",!0),"M"==S.value.menuType||"C"==S.value.menuType?(o(),u(t,{key:2,lg:12,xs:24},{default:r((()=>[c(s,{label:"路径参数",name:"pathParam"},{default:r((()=>[c(E,{value:S.value.pathParam,"onUpdate:value":a[19]||(a[19]=e=>S.value.pathParam=e),placeholder:"请输入路径参数",autocomplete:"off"},null,8,["value"])])),_:1})])),_:1})):C("",!0),"M"==S.value.menuType||"C"==S.value.menuType&&S.value.pathParam?(o(),u(t,{key:3,lg:12,xs:24},{default:r((()=>[c(s,{label:"高亮的菜单",name:"page"},{default:r((()=>[c(I,{value:S.value.activeMenu,"onUpdate:value":a[20]||(a[20]=e=>S.value.activeMenu=e),options:N(Z),placeholder:"请选择高亮的菜单","show-search":""},null,8,["value","options"])])),_:1})])),_:1})):C("",!0),"M"==S.value.menuType||"C"==S.value.menuType?(o(),u(t,{key:4,span:24},{default:r((()=>[c(s,{"label-col":{span:4},label:"路由参数",name:"queryList"},{default:r((()=>[0===S.value.queryList.length?(o(),u(j,{key:0,type:"dashed",block:"",onClick:a[21]||(a[21]=e=>se(-1))},{icon:r((()=>[c(R,{class:"align-sub text-icon"})])),default:r((()=>[a[28]||(a[28]=i("span",{class:"ml-8px"},"新增",-1))])),_:1})):(o(),b("div",me,[(o(!0),b(D,null,V(S.value.queryList,((e,a)=>(o(),b("div",{key:a,class:"flex gap-3"},[c(t,{span:9},{default:r((()=>[c(s,{name:["queryList",a,"key"]},{default:r((()=>[c(E,{value:e.key,"onUpdate:value":a=>e.key=a,placeholder:"请输入路由参数key",autocomplete:"off",class:"flex-1"},null,8,["value","onUpdate:value"])])),_:2},1032,["name"])])),_:2},1024),c(t,{span:9},{default:r((()=>[c(s,{name:["queryList",a,"value"]},{default:r((()=>[c(E,{value:e.value,"onUpdate:value":a=>e.value=a,placeholder:"请输入路由参数value",autocomplete:"off",class:"flex-1"},null,8,["value","onUpdate:value"])])),_:2},1032,["name"])])),_:2},1024),c(t,{span:5},{default:r((()=>[c(A,{class:"ml-12px"},{default:r((()=>[c(j,{size:"middle",onClick:e=>se(a)},{icon:r((()=>[c(k,{class:"align-sub text-icon"})])),_:2},1032,["onClick"]),c(j,{size:"middle",onClick:e=>function(e){S.value.queryList.splice(e,1)}(a)},{icon:r((()=>[c(w,{class:"align-sub text-icon"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])))),128))]))])),_:1})])),_:1})):C("",!0)])),_:1})])),_:1},8,["model"])])}}}),fe={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},ge=s({name:"manage_menu",__name:"index",setup(s){const t=R({menuName:"",status:null}),{columns:n,columnChecks:u,data:d,loading:_,pagination:m,getData:p}=J({apiFn:function(){return new Promise(((e,a)=>{var s;(s=t.value,l({url:"/system/menu/list",params:s})).then((({data:a,error:l})=>{if(l)e({error:l,data:[]});else{const s=null==a?void 0:a.map((e=>({label:e.menuName,key:e.menuId,value:e.menuId,...e}))).filter((e=>"F"!=e.menuType));j.value=H(s,"menuId");const t=H(a,"menuId");e({error:l,data:{list:t}})}})).catch((e=>{a(e)}))}))},columns:()=>[{title:"菜单名称",align:"center",dataIndex:"menuName",key:"menuName"},{title:"图标",align:"center",dataIndex:"icon",width:"50px",key:"icon",customRender:({record:e})=>{if(3===e.iconType)return c("i",{className:"icon iconfont ".concat(e.icon)},null);const a=1===e.iconType?e.icon:void 0,l=2===e.iconType?e.icon:void 0;return c("div",{class:"flex-center"},[c(O,{icon:a,localIcon:l,class:"text-icon"},null)])}},{title:"菜单类型",align:"center",dataIndex:"menuType",width:"100px",key:"menuType",customRender:({record:e})=>{const a={M:{text:"目录",color:"#646cff"},C:{text:"菜单",color:"#52C14A"},F:{text:"按钮",color:"#1890ff"},A:{text:"APP目录",color:"#5F4FD9"}};return c("span",{style:{color:a[e.menuType].color}},[a[e.menuType].text])}},{title:"排序",align:"center",dataIndex:"orderNum",width:"50px",key:"orderNum"},{title:"权限标识",align:"center",dataIndex:"perms",key:"perms"},{title:"路径",align:"center",dataIndex:"path",key:"path"},{title:"状态",align:"center",dataIndex:"status",key:"status",customRender:({record:e})=>c("span",{style:{color:"rgb(var(--".concat(["success","error"][e.status],"-color))")}},["0"===e.status?"正常":"停用"])},{title:"创建时间",align:"center",dataIndex:"createTime",key:"createTime",customRender:({record:e})=>c("div",null,[$(e.createTime)])},{key:"operate",title:"操作",align:"center",width:200,customRender:({record:e})=>c("div",{class:"flex-center gap-8px"},[c(h,{type:"primary",ghost:!0,size:"small",onClick:()=>L("addChild",e)},{default:()=>[v("新增子菜单")]}),c(h,{type:"primary",ghost:!0,size:"small",onClick:()=>L("edit",e)},{default:()=>[v("修改")]}),c(h,{danger:!0,size:"small",onClick:()=>{return a=e.menuId,void(null==(s=window.$modal)||s.confirm({title:"确定删除菜单id为".concat(a,"的菜单吗?"),onOk(){var e;(e=a,l({url:"/system/menu/".concat(e),method:"delete"})).then((({data:e,error:a})=>{var l;a||(null==(l=window.$message)||l.success("删除成功"),p())}))},onCancel(){}}));var a,s}},{default:()=>[v("删除")]})])}]});K(d,p);const{tableWrapperRef:f,scrollConfig:g}=W();function y(e){p()}function E(e){p()}B("query",(()=>{p()}));const x=R(!1),T=R("add"),I={add:"新增菜单",edit:"修改菜单",addChild:"新增子菜单"},P=R(null);function L(e,a=null){if(P.value={queryList:[],...a},"addChild"==e){const e={parentId:a.menuId,menuType:"M",menuName:"",iconType:"1",icon:null,orderNum:null,layout:null,routePath:null,routeName:null,page:null,status:"0",hideInMenu:!1,perms:null,constant:!1,href:"",queryList:[],component:null,pathParam:"",query:"",visible:"1",isCache:"1"};P.value=e}T.value=e,x.value=!0}const j=R([]);const k=R(null);function w(){k.value.resetForm()}function A(e){e&&k.value.resetForm()}function D(){k.value.handleSubmit()}return(l,s)=>{const v=a,m=h,p=e,R=X,O=Z;return o(),b("div",fe,[c(te,{model:t.value,"onUpdate:model":s[0]||(s[0]=e=>t.value=e),onReset:y,onSearch:E},null,8,["model"]),c(O,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:r((()=>[c(m,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:s[1]||(s[1]=e=>L("add"))},{icon:r((()=>[c(v,{class:"align-sub text-icon"})])),default:r((()=>[s[4]||(s[4]=i("span",{class:"ml-3px"},"新增",-1))])),_:1})])),extra:r((()=>[c(p,{columns:N(u),"onUpdate:columns":s[2]||(s[2]=e=>S(u)?u.value=e:null)},null,8,["columns"])])),default:r((()=>[c(R,{ref_key:"tableWrapperRef",ref:f,columns:N(n),"data-source":N(d),size:"small",loading:N(_),"row-key":"menuId",scroll:N(g),pagination:!1,class:"h-full"},null,8,["columns","data-source","loading","scroll"])])),_:1}),c(Q,{visible:x.value,"onUpdate:visible":s[3]||(s[3]=e=>x.value=e),title:I[T.value],height:"70vh",width:"1000px","destroy-on-close":!0,onReset:w,onOk:D,onClose:A},{default:r((()=>[c(pe,{ref_key:"addMenuFormRef",ref:k,"operate-type":T.value,"menu-list":j.value,"row-data":P.value},null,8,["operate-type","menu-list","row-data"])])),_:1},8,["visible","title"])])}}});export{ge as default};
