import{_ as e}from"./table-DoFSI9NT.js";import{_ as t}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{r as a,b as l,aa as i,a2 as n,o as s,e as d,g as c,w as r,a3 as o,c as p,i as m,h,a5 as k,B as u,J as y}from"./index-B3PZsRwT.js";import{j as g,k as x}from"./board-management-Dc4brWFm.js";import{D as w}from"./DeleteOutlined-CWT7lRAZ.js";import{D as f}from"./DownloadOutlined-CnXdrHEb.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";import"./index-BThgVJ70.js";const I={class:"board-management-page min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},b=["onClick"],v=y(Object.assign({name:"workwear_board-scrap-management"},{__name:"index",setup(y){const v=a(null),_=a({state:"3",moduleNo:null,screenTypeName:null}),D=[{type:"input",key:"moduleNo",label:"生产型号",placeholder:"请输入生产型号",span:24,md:12,lg:8,xl:8,xxl:4},{type:"input",key:"screenTypeName",label:"网板类型",placeholder:"请输入网板类型",span:24,md:12,lg:8,xl:8,xxl:4},{type:"dateRangePicker",key:"time",label:"日期",span:24,md:12,lg:10,xl:8,xxl:6,showTime:!0}],N=l((()=>{var e,t;const a={..._.value};return(null==(t=null==(e=_.value)?void 0:e.time)?void 0:t[0])&&(a.startTime=i(_.value.time[0]).format("YYYY-MM-DD HH:mm:ss"),a.endTime=i(_.value.time[1]).format("YYYY-MM-DD HH:mm:ss")),delete a.time,a})),C=a(null),T=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",fixed:"left",width:70,align:"center",checked:!0,ellipsis:!0},{key:"screenNo",dataIndex:"screenNo",title:"网板编码",align:"center",checked:!0,fixed:"left",ellipsis:!0,width:160},{key:"frameNo",dataIndex:"frameNo",title:"网框编码",align:"center",checked:!0,ellipsis:!0,fixed:"left",width:100},{key:"moduleNo",dataIndex:"moduleNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,fixed:"left",width:150},{key:"remark",dataIndex:"remark",title:"备注",align:"center",checked:!0,ellipsis:!0,width:150},{key:"pntType",dataIndex:"pntType",title:"型号类型",align:"center",checked:!0,ellipsis:!0,width:75},{key:"screenTypeName",dataIndex:"screenTypeName",title:"网板类型",align:"center",checked:!0,ellipsis:!0,width:100},{key:"face",dataIndex:"face",title:"面向",align:"center",checked:!0,ellipsis:!0,width:75},{key:"dateCode",dataIndex:"dateCode",title:"周期",align:"center",checked:!0,ellipsis:!0,width:75},{key:"meshCount",dataIndex:"meshCount",title:"网纱T数",align:"center",checked:!0,ellipsis:!0,width:75},{key:"locationName",dataIndex:"locationName",title:"存放区域",align:"center",checked:!0,ellipsis:!0,width:100},{key:"techName",dataIndex:"techName",title:"使用工艺",align:"center",checked:!0,ellipsis:!0,width:100},{key:"totalLive",dataIndex:"totalLive",title:"使用寿命",align:"center",checked:!0,ellipsis:!0,width:75},{key:"useCount",dataIndex:"useCount",title:"印次",align:"center",checked:!0,ellipsis:!0,width:75},{key:"tensionA",dataIndex:"tensionA",title:"A点张力",align:"center",checked:!0,ellipsis:!0,width:75},{key:"tensionB",dataIndex:"tensionB",title:"B点张力",align:"center",checked:!0,ellipsis:!0,width:75},{key:"tensionC",dataIndex:"tensionC",title:"C点张力",align:"center",checked:!0,ellipsis:!0,width:75},{key:"tensionD",dataIndex:"tensionD",title:"D点张力",align:"center",checked:!0,ellipsis:!0,width:75},{key:"tensionE",dataIndex:"tensionE",title:"E点张力",align:"center",checked:!0,ellipsis:!0,width:75},{key:"totalWc",dataIndex:"totalWc",title:"最大翻洗次数",align:"center",checked:!0,ellipsis:!0,width:110},{key:"makeBy",dataIndex:"makeBy",title:"制作人",align:"center",checked:!0,ellipsis:!0,width:100},{key:"makeDate",dataIndex:"makeDate",title:"制作日期",align:"center",checked:!0,ellipsis:!0,width:150},{key:"scrapBy",dataIndex:"scrapBy",title:"报废人",align:"center",checked:!0,ellipsis:!0,width:100},{key:"scrapDate",dataIndex:"scrapDate",title:"报废日期",align:"center",checked:!0,ellipsis:!0,width:150},{key:"scrapReason",dataIndex:"scrapReason",title:"报废原因",align:"center",checked:!0,ellipsis:!0,width:150},{key:"createBy",dataIndex:"createBy",title:"创建人",align:"center",checked:!0,ellipsis:!0,width:100},{key:"createDate",dataIndex:"createDate",title:"创建时间",align:"center",checked:!0,ellipsis:!0,width:150},{key:"updateBy",dataIndex:"updateBy",title:"修改人",align:"center",checked:!0,ellipsis:!0,width:100},{key:"updateDate",dataIndex:"updateDate",title:"修改时间",align:"center",checked:!0,ellipsis:!0,width:150}];function B(){C.value.getData(1)}function j(){k((()=>{_.value={state:"3",moduleNo:null,screenTypeName:null},B()}))}const P=a([]);function R(e){P.value=e}function Y(e){let t;t=c("div",null,e?[h("确定"),c("span",{class:"color-red font-bold"},[h("删除")]),h('网板编号为"'),c("span",{class:"color-blue font-bold"},[e.screenNo]),h('"的记录吗？')]:[h("确定将所勾选的项进行"),c("span",{class:"color-red font-bold"},[h("删除")]),h("操作吗？")]),window.$modal.confirm({title:t,onOk:()=>{let t=[];t=e?[e]:P.value,g(t).then((({error:e})=>{e||(window.$message.success("删除成功"),B())}))},onCancel:()=>{}})}return(a,l)=>{const i=t,k=u,y=e,g=n("hasAuth");return s(),d("div",I,[c(i,{ref_key:"commonSearchRef",ref:v,searchParams:_.value,"onUpdate:searchParams":l[0]||(l[0]=e=>_.value=e),"form-list":D,"is-search":!0,onSearch:B,onReset:j},null,8,["searchParams"]),c(y,{ref_key:"tableRef",ref:C,searchParams:N.value,"onUpdate:searchParams":l[3]||(l[3]=e=>N.value=e),column:T,"show-row-selection":"","auto-generate-uuid":"","row-key":"screenId",scroll:{y:"auto"},"is-init-get-data":"",url:"/qms/scrscreen/screenInfo/scrapPageList",onTableSelectChange:R,onTableRowDblclick:a.handleList},{title:r((()=>[o((s(),p(k,{type:"primary",danger:"",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:!P.value.length,onClick:l[1]||(l[1]=e=>Y())},{icon:r((()=>[c(m(w),{class:"align-sub"})])),default:r((()=>[l[4]||(l[4]=h(" 批量删除 "))])),_:1},8,["disabled"])),[[g,["workwear:board-management:delete"]]]),o((s(),p(k,{type:"primary",class:"mini-btn mr-8px",size:"small",ghost:"",onClick:l[2]||(l[2]=e=>{x(_.value)})},{icon:r((()=>[c(m(f),{class:"align-sub"})])),default:r((()=>[l[5]||(l[5]=h(" 导出 "))])),_:1})),[[g,["workwear:board-management:download"]]])])),"contextmenuPopup-orter":r((({args:e})=>[o((s(),d("li",{class:"popup-item",onClick:t=>function(e,t){"del"===t&&Y(e.record);e.hidePopup()}(e,"del")},[c(m(w)),l[6]||(l[6]=h(" 删除 "))],8,b)),[[g,["workwear:board-management:delete"]]])])),_:1},8,["searchParams","onTableRowDblclick"])])}}}),[["__scopeId","data-v-a07551b2"]]);export{v as default};
