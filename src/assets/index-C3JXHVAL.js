import{_ as e}from"./table-DoFSI9NT.js";import{_ as a}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{_ as l}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{U as t,r as s,p as n,g as o,cs as p,h as r,o as i,e as u,a3 as d,bh as c,f as m,w as y,i as v,V as h,H as f,I as g,v as k,y as x,B as w,F as b,W as _,N,Q as S,J as P}from"./index-B3PZsRwT.js";import{u as I}from"./resetTableRef-DZjcvemm.js";import{u as C}from"./searchData-DpjdfxBw.js";import{a as T,v as j}from"./index-DqnulfE2.js";import{C as z}from"./index-BThgVJ70.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";const Q={class:"login-page-container"},U={class:"login-form-wrapper"},L={class:"flex-center flex-y-center"},A={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},E={class:"event-form"},O={style:{display:"flex"}},B={style:{width:"40%","margin-left":"5%","margin-top":"0.5%","margin-right":"20px"}},R=P(Object.assign({name:"issuance-management_normal-over-count"},{__name:"index",setup(P){t((e=>({"0fc01e57":e.footerHeight})));const[R,$]=I({pageNum:1,pageSize:200,techId:null,moduleNo:null,lotNo:null}),M=s(null);s(null);const q=C(R),D=s([]),H=[{type:"input",key:"lotNo",label:"LOT号",span:24,md:12,lg:10,xl:5,xxl:5,placeholder:"请输入LOT号",showTime:!0},{type:"input",key:"moduleNo",label:"生产型号",span:24,md:12,lg:10,xl:5,xxl:5,placeholder:"请输入料号",showTime:!0}],J=n({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,a)=>{J.current=e,J.pageSize=a,pe()}});s([]);const W=s(!1),F=s(!1);s(!1);const V=s({}),G=s({}),K=s(!0),X=s("");function Y(){pe()}const Z=[{type:"input",key:"state",label:"状态",placeholder:"请选择状态",span:24},{type:"input",key:"mktAllowed",label:"mkt可投产",placeholder:"请选择是否mkt可投产",span:24}],ee=[{type:"input",key:"lotNo",label:"LOT号",placeholder:"请选择状态",suffixSlot:o(p,{class:"cursor-pointer",onClick:()=>(F.value=!0,$(),void pe())},null),span:12},{type:"input",key:"zh",label:"过数账号",className:"data-cell",span:6},{type:"input",key:"passBy",className:"data-cell",label:"过数人",span:6}],ae=[{type:"input",key:"fullProdNo",label:"生产型号",placeholder:"请选择状态",span:8},{type:"span",key:"state",label:"",span:8},{type:"span",key:"state",label:"",span:8},{type:"input",key:"wipQty",label:"投产数量",span:8},{type:"input",key:"scrapQty",label:"报废数量",span:8},{type:"input",key:"lotNo",label:"工单号码",span:8},{type:"input",key:"pnlQty",label:"结存PNL",span:6},{type:"input",key:"setQty",label:"结存SET",span:6},{type:"input",key:"pnlSet",label:"pnl=?set",span:6},{type:"input",key:"setPcs",label:"set=?pcs",span:6},{type:"input",key:"techName",labelSlot:o("span",{style:"color:red; font-weight: 700; font-size: 18px;"},[r("结存工序")]),className:"data-cell",span:8},{type:"input",key:"pcsQty",label:"结存PCS",span:8},{type:"input",key:"jsgx",labelSlot:o("span",{style:"color:red; font-weight: 700; font-size: 18px;"},[r("接收工序")]),className:"data-cell",span:8},{type:"input",key:"mktAllowed",labelSlot:o("span",{style:"color:red; font-weight: 700; font-size: 18px;"},[r("接收SETS")]),className:"data-cell",span:8},{type:"input",key:"mktAllowed",labelSlot:o("span",{style:"color:red; font-weight: 700; font-size: 18px;"},[r("接收PCS")]),className:"data-cell",span:8}],le=s([{key:"index",dataIndex:"index",title:"序号",width:80,align:"center",checked:!0},{key:"lotNo",dataIndex:"lotNo",title:"LOT号",align:"center",width:160,checked:!0},{key:"fullProdNo",dataIndex:"fullProdNo",title:"生产型号",align:"center",checked:!0,width:160},{key:"techName",dataIndex:"techName",title:"工艺名称",align:"center",checked:!0,width:160},{key:"pcsQty",dataIndex:"pcsQty",title:"结存PCS数",align:"center",checked:!0,width:110},{key:"setQty",dataIndex:"setQty",title:"结存SET数",align:"center",checked:!0,width:110},{key:"pnlQty",dataIndex:"pnlQty",title:"结存PNL数",align:"center",checked:!0,width:110},{key:"pnlSet",dataIndex:"pnlSet",title:"pnl=?set",align:"center",checked:!0},{key:"setPcs",dataIndex:"setPcs",title:"set=?pcs",align:"center",checked:!0},{key:"custProdNoAdd",dataIndex:"custProdNoAdd",title:"pnl=?pcs",customRender:({record:e})=>e.setPcs*e.pnlSet,align:"center",checked:!0}]),te=[],se=s("");function ne(e){var a;V.value?j("/auth/passlogin",V.value).then((({data:a,error:l})=>{var t;l||(1!=e&&(null==(t=window.$message)||t.success("登录成功"),K.value=!1),se.value=a,G.value.passBy=a,G.value.zh=V.value.username)})):null==(a=window.$message)||a.error("登录失败")}function oe(){var e;G.value?j("/erpsyncmes/wip/passLot",G.value).then((({data:e,error:a})=>{var l;a||(null==(l=window.$message)||l.success("过数成功"),G.value={},pe(),ne(1))})):null==(e=window.$message)||e.error("请选择过数数据")}function pe(){T("/erpsyncmes/wip/selectWipByModuleNoAndTechId",R.value).then((({data:e,error:a})=>{a||(e.pageInfo.list.forEach(((e,a)=>{e.index=a+1})),e.myMap.forEach(((e,a)=>{e.index=a+1})),D.value=e.pageInfo.list)}))}function re(e,a){R.value.pageNum=e,R.value.pageSize=a,pe()}function ie(e){G.value=e,G.value.passBy=se.value,G.value.zh=V.value.username,j("/erpsyncmes/wip/findTechName",e).then((({data:e,error:a})=>{a||(G.value.jsgx=e?e.data:"")}))}function ue(){$(),Y()}function de(){}return(t,s)=>{const n=f,p=g,P=k,I=x,C=w,T=b,j=_,$=l,J=N,se=z,pe=S,ce=a,me=e;return i(),u("div",null,[d(m("div",Q,[m("div",U,[m("header",L,[o(n,{class:"mb-5 mr-5 text-64px text-primary lt-sm:text-48px"}),s[12]||(s[12]=m("h3",{class:"mb-5 text-26px text-primary font-500 lt-sm:text-22px"},"金禄MES",-1))]),o(T,{model:V.value,name:"basic","label-col":{span:6},"wrapper-col":{span:16},autocomplete:"off"},{default:y((()=>[o(P,{label:"账号",name:"username",rules:[{required:!0,message:"Please input your username!"}]},{default:y((()=>[o(p,{value:V.value.username,"onUpdate:value":s[0]||(s[0]=e=>V.value.username=e),placeholder:"请输入账号"},null,8,["value"])])),_:1}),o(P,{label:"密码",name:"password",rules:[{required:!0,message:"Please input your password!"}]},{default:y((()=>[o(I,{value:V.value.password,"onUpdate:value":s[1]||(s[1]=e=>V.value.password=e),placeholder:"请输入密码"},null,8,["value"])])),_:1}),o(P,{"wrapper-col":{offset:6,span:16}},{default:y((()=>[o(C,{type:"primary","html-type":"submit",onClick:ne},{default:y((()=>s[13]||(s[13]=[r("登录")]))),_:1})])),_:1})])),_:1},8,["model"])])],512),[[c,K.value]]),m("div",A,[o($,{visible:W.value,"onUpdate:visible":s[3]||(s[3]=e=>W.value=e),"destroy-on-close":!1,centered:!1,mask:!0,title:"登录账号",width:"600px",height:"500px",onClose:de},{footer:y((()=>s[14]||(s[14]=[m("div",{class:"modal-footer",style:{width:"60%",margin:"0 auto"}},null,-1)]))),default:y((()=>[m("div",E,[o(j,{model:X.value,"onUpdate:model":s[2]||(s[2]=e=>X.value=e),"form-list":Z},null,8,["model"])])])),_:1},8,["visible"]),m("div",null,[o(pe,{gutter:6,style:{"margin-bottom":"20px","margin-top":"20px"}},{default:y((()=>[o(J,{span:4}),o(J,{span:16},{default:y((()=>[o(se,{class:"top-card",title:"条码扫码"},{default:y((()=>[o(j,{model:G.value,"onUpdate:model":s[4]||(s[4]=e=>G.value=e),"form-list":ee},null,8,["model"])])),_:1})])),_:1})])),_:1}),o(pe,{gutter:6},{default:y((()=>[o(J,{span:4}),o(J,{span:16},{default:y((()=>[o(se,{class:"top-card",title:"流程卡信息"},{default:y((()=>[o(j,{model:G.value,"onUpdate:model":s[5]||(s[5]=e=>G.value=e),"form-list":ae},null,8,["model"]),o(C,{style:{"margin-left":"50%"},onClick:oe},{default:y((()=>s[15]||(s[15]=[r("确定")]))),_:1})])),_:1})])),_:1})])),_:1})]),m("div",null,[o($,{visible:F.value,"onUpdate:visible":s[11]||(s[11]=e=>F.value=e),"destroy-on-close":!1,centered:!1,title:"查询LOT号信息",width:"1400px",height:"600px"},{footer:y((()=>[m("div",O,[m("div",B,[o(j,{model:G.value,"onUpdate:model":s[8]||(s[8]=e=>G.value=e),"form-list":te},null,8,["model"])]),m("div",null,[o(C,{onClick:s[9]||(s[9]=e=>F.value=!1)},{default:y((()=>s[16]||(s[16]=[r("关闭")]))),_:1}),o(C,{onClick:s[10]||(s[10]=e=>F.value=!1)},{default:y((()=>s[17]||(s[17]=[r("关闭")]))),_:1})])])])),default:y((()=>[o(ce,{searchParams:v(R),"onUpdate:searchParams":s[6]||(s[6]=e=>h(R)?R.value=e:null),"form-list":H,onSearch:Y,onReset:ue},null,8,["searchParams"]),o(me,{ref_key:"tableRefs",ref:M,searchParams:v(q),"onUpdate:searchParams":s[7]||(s[7]=e=>h(q)?q.value=e:null),column:le.value,"show-row-selection":!1,"show-card-header":!1,"auto-generate-uuid":!1,"row-key":"wipId",scroll:{y:"auto"},"is-init-get-data":"","data-source":D.value,onTableRowClick:ie,onPaginationChange:re},null,8,["searchParams","column","data-source"])])),_:1},8,["visible"])])])])}}}),[["__scopeId","data-v-f98448e1"]]);export{R as default};
