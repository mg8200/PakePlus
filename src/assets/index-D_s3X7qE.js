import{d as e,K as l,L as a,r as t,o as s,c as n,w as i,g as o,f as d,s as r,t as c,I as u,v as p,N as m,M as f,O as h,B as v,P as g,Q as x,F as w,aa as y,p as k,a5 as b,af as _,S as N,e as Y,ac as I,a7 as D,J as M}from"./index-B3PZsRwT.js";import{f as z,a as C,e as S}from"./index-BphokUhD.js";import{C as W}from"./index-BThgVJ70.js";const T={class:"w-full flex"},j={class:"flex"},A={class:"w-full flex-y-center justify-end gap-12px"},E={class:"ml-3px"},B=e({__name:"inquiry",props:{model:{required:!0},modelModifiers:{}},emits:l(["reset","search"],["update:model"]),setup(e,{emit:l}){const k=l,b=a(e,"model"),_=t(null);function N(){const e=(new Date).setHours(0,0,0,0);return[y(e-864e5).format("YYYY-MM-DD"),y(e).format("YYYY-MM-DD")]}function Y(){b.value={sendNo:null,time:N()},k("reset",b.value)}function I(){k("search",b.value)}return(e,l)=>{const a=u,t=p,y=m,k=f,N=h,D=v,M=g,z=x,C=w,S=W;return s(),n(S,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:i((()=>[o(C,{ref_key:"formRef",ref:_,model:b.value,"label-col":{span:5,md:7},class:"inquiry-form"},{default:i((()=>[d("div",T,[o(z,{gutter:[15,8],wrap:"",class:"w-full"},{default:i((()=>[o(y,{span:24,md:12,lg:6,xl:6,xxl:4},{default:i((()=>[o(t,{label:"送货单号",name:"sendNo",class:"m-0","label-col":{}},{default:i((()=>[o(a,{value:b.value.sendNo,"onUpdate:value":l[0]||(l[0]=e=>b.value.sendNo=e),placeholder:"请输入送货单号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:r(I,["enter"])},null,8,["value"])])),_:1})])),_:1}),o(y,{span:24,md:12,lg:6,xl:6,xxl:4},{default:i((()=>[o(t,{label:"日期",name:"model",class:"m-0","label-col":{}},{default:i((()=>[o(k,{value:b.value.time,"onUpdate:value":l[1]||(l[1]=e=>b.value.time=e),"value-format":"YYYY-MM-DD",class:"min-form-control"},null,8,["value"])])),_:1})])),_:1}),d("div",j,[o(t,{class:"m-0"},{default:i((()=>[d("div",A,[o(D,{type:"primary",ghost:"",class:"mini-btn",onClick:I},{icon:i((()=>[o(N,{class:"align-sub text-icon"})])),default:i((()=>[l[2]||(l[2]=d("span",{class:"ml-3px"},"查询",-1))])),_:1}),o(D,{class:"mini-btn",onClick:Y},{icon:i((()=>[o(M,{class:"align-sub text-icon"})])),default:i((()=>[d("span",E,c(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),O={class:"jl-main-page printed-code h-full h-full min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},R={class:"Order-style"},q=M(e({name:"plan-scheduling_finished-goods-delivery",__name:"index",setup(e){const l=t({pageNum:1,pageSize:200});const a=t({sendNo:null,time:function(){const e=(new Date).setHours(0,0,0,0);return[y(e-864e5).format("YYYY-MM-DD"),y(e).format("YYYY-MM-DD")]}()}),n=k({current:l.value.pageNum,pageSize:l.value.pageSize,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:(e,l)=>"共".concat(e,"条"),total:0,onChange:async(e,a)=>{n.current=e,n.pageSize=a,l.value.pageNum=e,l.value.pageSize=a,h()}}),r=t(null),u=t([]),p=t([{key:"index",dataIndex:"index",title:"序号",width:40,align:"center",checked:!0},{key:"sendNo",dataIndex:"sendNo",title:"送货单号",width:280,align:"center",checked:!0,ellipsis:!0}]),f=t(!1);function h(){var e;const{sendNo:t="",startTime:s,endTime:i}=a.value,o={sendNo:t,startTime:s,endTime:i,...l.value};(null==(e=a.value.time)?void 0:e[0])&&(o.startTime=a.value.time[0],o.endTime=a.value.time[1]),f.value=!0,z(o).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1})),n.total=e.total,u.value=e.list)})).finally((()=>f.value=!1))}function g(){l.value.pageNum=1,n.current=1,h()}function w(){l.value.pageNum=1,n.current=1,h()}h();const M=t(!1),T=t([]),j=t([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"modelNo",dataIndex:"modelNo",title:"本厂型号",width:180,align:"center",checked:!0,ellipsis:!0},{key:"description",dataIndex:"description",title:"客户型号",width:200,align:"center",checked:!0,ellipsis:!0},{key:"prodOrder",dataIndex:"prodOrder",title:"订单号",width:180,align:"center",checked:!0,ellipsis:!0},{key:"grossWeight",dataIndex:"grossWeight",title:"毛重",width:130,align:"center",checked:!0,ellipsis:!0},{key:"totalGrossWeight",dataIndex:"totalGrossWeight",title:"总毛重",width:130,align:"center",checked:!0,ellipsis:!0},{key:"netWeight",dataIndex:"netWeight",title:"净重",width:130,align:"center",checked:!0,ellipsis:!0},{key:"totalNetWeight",dataIndex:"totalNetWeight",title:"总净重",width:130,align:"center",checked:!0,ellipsis:!0},{key:"pcsBox",dataIndex:"pcsBox",title:"数量",width:130,align:"center",checked:!0,ellipsis:!0},{key:"dateCode",dataIndex:"dateCode",title:"周期",width:130,align:"center",checked:!0,ellipsis:!0}]),A=t([]);function E(e){A.value=e}const q=t(""),F=e=>({style:{background:e.id===r.value?"#BAEAFA":""},onClick:()=>{r.value=e.id,q.value=e.sendNo,M.value=!0,C(e.id).then((({data:e,error:l})=>{l||(e.forEach(((e,l)=>{e.index=l+1,e.uid=D.genV4().hexNoDelim})),T.value=e)})).finally((()=>M.value=!1))}}),H=t(null),K=e=>({style:{background:e.uid===H.value?"#BAEAFA":""},class:e.uid===H.value?"jl-table-row-selected":"",onClick:()=>{H.value=e.uid}}),L=t(42);return window.addEventListener("resize",(()=>{b((()=>{const e=document.querySelector(".printed-code .search-box"),l=null==e?void 0:e.clientHeight;L.value=l||76}))})),_((()=>{window.removeEventListener("resize",(()=>{}))})),(e,l)=>{const t=v,r=N("STable"),h=W,y=m,k=x;return s(),Y("div",O,[o(B,{model:a.value,"onUpdate:model":l[0]||(l[0]=e=>a.value=e),class:"search-box",onReset:g,onSearch:w},null,8,["model"]),o(k,{wrap:"",class:"w-full",style:I({height:"calc(100% - ".concat(L.value,"px)")})},{default:i((()=>[o(y,{span:6,class:"h-full"},{default:i((()=>[o(h,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card h-full flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:i((()=>[o(t,{type:"primary",class:"mini-btn",ghost:"",onClick:l[1]||(l[1]=e=>function(){const e=A.value.join(",");S(e)}())},{icon:i((()=>l[2]||(l[2]=[d("span",{class:"align-sub text-icon"},null,-1)]))),default:i((()=>[l[3]||(l[3]=d("span",{class:"ml-3px"},"导出",-1))])),_:1})])),default:i((()=>[o(r,{ref:"tableWrapperRef",columns:p.value,"data-source":u.value,bordered:"","row-selection":{selectedRowKeys:A.value,onChange:E},size:"small",loading:f.value,"row-key":"id",pagination:n,"custom-row":F,scroll:{x:300,y:1200},class:"h-full","row-height":23},null,8,["columns","data-source","row-selection","loading","pagination"])])),_:1})])),_:1}),o(y,{span:24,md:24,lg:24,xl:18,xxl:18,class:"h-fullmin-h-500px h-full flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},{default:i((()=>[o(h,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card h-full flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:i((()=>[d("span",R,"送货单号---"+c(q.value),1)])),extra:i((()=>l[4]||(l[4]=[]))),default:i((()=>[o(r,{ref:"tableWrapperRef",columns:j.value,"data-source":T.value,bordered:"",size:"small",loading:M.value,"row-key":"uid",pagination:!1,scroll:{y:"auto"},class:"h-full","custom-row":K,"row-height":23},null,8,["columns","data-source","loading"])])),_:1})])),_:1})])),_:1},8,["style"])])}}}),[["__scopeId","data-v-941a5631"]]);export{q as default};
