import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as l,K as a,L as t,o as s,c as o,w as n,g as i,f as c,t as d,di as r,v as u,N as p,O as m,B as v,P as h,Q as f,F as y,U as g,r as x,p as w,a9 as k,b,S as _,e as C,h as I,W as S,J as D}from"./index-B3PZsRwT.js";import{a as N,v as T}from"./index-DqnulfE2.js";import{_ as U}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as z}from"./index-BThgVJ70.js";const F={class:"w-full flex"},$={class:"flex"},j={class:"w-full flex-y-center justify-end gap-12px"},O={class:"ml-3px"},A={class:"ml-3px"},B=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:a(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,g=t(e,"model");function x(){a("search",g.value)}function w(){g.value.processDifferent=null,g.value.holeFilling=null,g.value.holeCopper=null,a("reset",g.value)}return(e,l)=>{const a=r,t=u,k=p,b=m,_=v,C=h,I=f,S=y,D=z;return s(),o(D,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:n((()=>[i(S,{model:g.value,"label-col":{span:5,md:7},class:"search-form"},{default:n((()=>[c("div",F,[i(I,{gutter:[15,8],wrap:"",class:"w-full"},{default:n((()=>[i(k,{span:24,md:12,lg:6,xl:8,xxl:4},{default:n((()=>[i(t,{label:"区分",name:"processDifferent",class:"m-0","label-col":{}},{default:n((()=>[i(a,{value:g.value.processDifferent,"onUpdate:value":l[0]||(l[0]=e=>g.value.processDifferent=e),placeholder:"请选择脉冲线别","allow-clear":"",dictCode:"process_different",selectType:"select"},null,8,["value"])])),_:1})])),_:1}),i(k,{span:24,md:12,lg:6,xl:8,xxl:4},{default:n((()=>[i(t,{label:"塞孔类型",name:"holeFilling",class:"m-0","label-col":{}},{default:n((()=>[i(a,{value:g.value.holeFilling,"onUpdate:value":l[1]||(l[1]=e=>g.value.holeFilling=e),placeholder:"请选择塞孔类型","allow-clear":"",dictCode:"hole",selectType:"select"},null,8,["value"])])),_:1})])),_:1}),i(k,{span:24,md:12,lg:6,xl:8,xxl:4},{default:n((()=>[i(t,{label:"孔面铜",name:"holeCopper",class:"m-0","label-col":{}},{default:n((()=>[i(a,{value:g.value.holeCopper,"onUpdate:value":l[2]||(l[2]=e=>g.value.holeCopper=e),placeholder:"请选择孔面铜","allow-clear":"",dictCode:"hole_copper",selectType:"select"},null,8,["value"])])),_:1})])),_:1}),c("div",$,[i(t,{class:"m-0"},{default:n((()=>[c("div",j,[i(_,{type:"primary",ghost:"",class:"mini-btn",onClick:x},{icon:n((()=>[i(b,{class:"align-sub text-icon"})])),default:n((()=>[c("span",O,d(e.$t("common.search")),1)])),_:1}),i(_,{class:"mini-btn",onClick:w},{icon:n((()=>[i(C,{class:"align-sub text-icon"})])),default:n((()=>[c("span",A,d(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),E={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},J={key:0,class:"event-form"},K={key:1,class:"event-form"},Q={class:"modal-footer"},R=D(Object.assign({name:"issuance-management_pulse-bottom-copper-rule"},{__name:"index",setup(l){g((e=>({"3d3e219e":X.value})));const a=x({processDifferent:null,holeFilling:null,holeCopper:null}),t=w({pageNum:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{t.pageNum=0==e?1:e,t.pageSize=l,D()}}),d=x(!1),r=x([{key:"index",dataIndex:"index",title:"序号",width:100,align:"center",checked:!0},{key:"processDifferent",dataIndex:"processDifferent",title:"区分",width:130,align:"center",checked:!0,ellipsis:!0},{key:"holeFilling",dataIndex:"holeFilling",title:"塞孔类型",width:130,align:"center",checked:!0,ellipsis:!0},{key:"holeCopper",dataIndex:"holeCopper",title:"孔面铜",width:130,align:"center",checked:!0,ellipsis:!0},{key:"compensationName",dataIndex:"compensationName",title:"补偿名称",width:130,align:"center",checked:!0,ellipsis:!0},{key:"operatorSymbol",dataIndex:"operatorSymbol",title:"符号",width:130,align:"center",checked:!0,ellipsis:!0},{key:"compensation",dataIndex:"compensation",title:"值",width:130,align:"center",checked:!0,ellipsis:!0},{key:"unit",dataIndex:"unit",title:"单位",width:130,align:"center",checked:!0,ellipsis:!0},{key:"operator",dataIndex:"operator",title:"创建人",width:130,align:"center",checked:!0,ellipsis:!0},{key:"createDate",dataIndex:"createDate",title:"创建时间",width:130,align:"center",checked:!0,ellipsis:!0},{key:"updateUser",dataIndex:"updateUser",title:"修改人",width:130,align:"center",checked:!0,ellipsis:!0},{key:"updateDate",dataIndex:"updateDate",title:"修改时间",width:130,align:"center",checked:!0,ellipsis:!0}]),u=[{type:"dictionary",key:"processDifferent",label:"区分",dictCode:"process_different",selectType:"select",placeholder:"请选择区分",span:8},{type:"dictionary",key:"holeFilling",label:"塞孔类型",dictCode:"hole",selectType:"select",placeholder:"请选择塞孔类型",span:8},{type:"dictionary",key:"holeCopper",label:"孔面铜",dictCode:"hole_copper",selectType:"select",placeholder:"请选择孔面铜",span:8},{type:"dictionary",key:"compensationName",label:"补偿名称",dictCode:"compensation_name",selectType:"select",placeholder:"请选择补偿名称",change:()=>{!function(){"不补偿"==A.value.compensationName?d.value=!0:d.value=!1;"不补偿"==O.value.compensationName&&(d.value=!0)}()},span:8},{type:"dictionary",key:"operatorSymbol",label:"符号",dictCode:"operator_symbol",selectType:"select",placeholder:"请选择符号",disabled:d,span:8},{type:"input",key:"compensation",label:"值",disabled:d,placeholder:"请输入值",span:8},{type:"dictionary",key:"unit",label:"单位",disabled:d,dictCode:"unit",selectType:"select",placeholder:"请选择单位",span:8}],p=x([]),m=x(!1),h=x([]),f=x(null),y=e=>({style:{background:e.id===f.value?"#BAEAFA":"","background-color":2===Number(e.failureState)?"rgb(247, 109, 109)":""},onClick(){f.value=e.id}});function D(){m.value=!0,m.value=!0,a.value.pageNum=t.pageNum,a.value.pageSize=t.pageSize,N("/mes/pulse/copperCompensation/list",{...a.value}).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1})),p.value=e.list,t.total=e.total)})).finally((()=>{m.value=!1}))}const F=x([]);function $(e){F.value=e}const j=x(!1),O=x(""),A=x(""),R=x("");function q(){var e;if(1!=F.value.length)return null==(e=window.$message)?void 0:e.error("请先选择一条数据");R.value="孔面铜补偿修改",O.value=p.value.find((e=>F.value[0]==e.id)),j.value=!0}function L(){R.value="孔面铜补偿新增",A.value={},j.value=!0}function M(){T("/mes/pulse/copperCompensation/update",O.value).then((({data:e,error:l})=>{var a;l||(j.value=!1,O.value="",null==(a=window.$message)||a.success("修改成功"),F.value=[],D())}))}function P(){T("/mes/pulse/copperCompensation/add/new",A.value).then((({data:e,error:l})=>{var a;l||(j.value=!1,A.value="",null==(a=window.$message)||a.success("新增成功"),F.value=[],D())}))}function W(){var e,l;if(0==F.value.length)return null==(e=window.$message)?void 0:e.error("请先选择一条数据");null==(l=window.$modal)||l.confirm({title:"是否确认删除数据?",onOk:()=>{const e=p.value.filter((e=>F.value.includes(e.id)));T("/mes/pulse/copperCompensation/deleteBatch",e).then((({data:e,error:l})=>{var a,t;l?null==(t=window.$message)||t.error("删除失败!"):(F.value=[],D(),null==(a=window.$message)||a.success("删除成功!"))}))},onCancel:()=>{}})}function G(){t.pageNum=1,D()}D();const H=x(null),{height:V}=k(H),X=b((()=>"".concat(V.value+20,"px")));return(l,d)=>{const f=v,g=e,x=_("STable"),w=z;return s(),C("div",E,[i(B,{model:a.value,"onUpdate:model":d[0]||(d[0]=e=>a.value=e),onReset:d[1]||(d[1]=e=>G()),onSearch:d[2]||(d[2]=e=>G())},null,8,["model"]),i(w,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:n((()=>[i(f,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:L},{default:n((()=>d[8]||(d[8]=[c("span",{class:"ml-3px"},"新增",-1)]))),_:1}),i(f,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:q},{default:n((()=>d[9]||(d[9]=[c("span",{class:"ml-3px"},"修改",-1)]))),_:1}),i(f,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:W},{default:n((()=>d[10]||(d[10]=[c("span",{class:"ml-3px"},"删除",-1)]))),_:1})])),extra:n((()=>[i(g,{columns:r.value,"onUpdate:columns":d[3]||(d[3]=e=>r.value=e)},null,8,["columns"])])),default:n((()=>[i(x,{columns:r.value,"data-source":p.value,size:"small",bordered:"",loading:m.value,"row-selection":{selectedRowKeys:F.value,onChange:$},"default-expanded-row-keys":h.value,"row-key":"id","custom-row":y,"default-expand-all-rows":!0,scroll:{y:"auto"},pagination:t,class:"has-footer-table h-full","row-height":23},null,8,["columns","data-source","loading","row-selection","default-expanded-row-keys","pagination"])])),_:1}),i(U,{visible:j.value,"onUpdate:visible":d[7]||(d[7]=e=>j.value=e),"destroy-on-close":!0,centered:!0,title:R.value,width:"1050px",height:"550px"},{footer:n((()=>[c("div",Q,[i(f,{onClick:d[6]||(d[6]=e=>j.value=!1)},{default:n((()=>d[11]||(d[11]=[I("关闭")]))),_:1}),"孔面铜补偿修改"==R.value?(s(),o(f,{key:0,onClick:M},{default:n((()=>d[12]||(d[12]=[I("保存")]))),_:1})):(s(),o(f,{key:1,onClick:P},{default:n((()=>d[13]||(d[13]=[I("保存")]))),_:1}))])])),default:n((()=>["孔面铜补偿修改"==R.value?(s(),C("div",J,[i(S,{model:O.value,"onUpdate:model":d[4]||(d[4]=e=>O.value=e),"form-list":u},null,8,["model"])])):(s(),C("div",K,[i(S,{model:A.value,"onUpdate:model":d[5]||(d[5]=e=>A.value=e),"form-list":u},null,8,["model"])]))])),_:1},8,["visible","title"])])}}}),[["__scopeId","data-v-e3b617e6"]]);export{R as default};
