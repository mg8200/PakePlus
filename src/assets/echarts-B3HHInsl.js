import{cX as a,A as n,b as t,r as s,a9 as o,a0 as i,m as e,a5 as l}from"./index-B3PZsRwT.js";import{u as r,i as u,a as d,b as c,c as h,d as f,e as g,f as p,g as w,h as v,j as b,k as m,l as y,m as k,n as C,o as O,p as j,q as x,r as L}from"./installCanvasRenderer-Dfk03Uyn.js";function R(r,u=!0,d={}){const c=a(),h=n(),f=t((()=>h.darkMode)),g=s(null),p={width:0,height:0},{width:w,height:v}=o(g,p);let b=null;const m=r(),{onRender:y=a=>{const n=f.value?"rgb(224, 224, 224)":"rgb(31, 31, 31)",t=f.value?"rgba(0, 0, 0, 0.4)":"rgba(255, 255, 255, 0.8)";u&&a.showLoading({color:h.themeColor,textColor:n,fontSize:14,maskColor:t})},onUpdated:k=a=>{u&&a.hideLoading()},onDestroy:C}=d;function O(){return Boolean(g.value&&b)}async function j(){if(!O()){const a=f.value?"dark":"light";await l(),b=L(g.value,a),b.setOption({...m,backgroundColor:"transparent"}),await(null==y?void 0:y(b))}}async function x(){b&&(await(null==C?void 0:C(b)),null==b||b.dispose(),b=null)}async function R(a,n){p.width=a,p.height=n,g.value&&p.width>0&&p.height>0?(O()&&(null==b||b.resize()),await j()):await x()}return c.run((()=>{i([w,v],(([a,n])=>{R(a,n)})),i(f,(()=>{!async function(){await x(),await j(),await(null==k?void 0:k(b))}()}))})),e((()=>{x(),c.stop()})),{domRef:g,updateOptions:async function(a=()=>m){if(!O())return;const n=a(m,r);Object.assign(m,n),O()&&(null==b||b.clear()),null==b||b.setOption({...n,backgroundColor:"transparent"}),await(null==k?void 0:k(b))},setOptions:function(a){null==b||b.setOption(a)},hideLoading:async function(){await(null==k?void 0:k(b))}}}r([u,d,c,h,f,g,p,w,v,b,m,y,k,C,O,j,x]);export{R as u};
