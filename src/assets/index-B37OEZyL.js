import{_ as e}from"./table-DoFSI9NT.js";import{_ as t}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{d as a,r as l,o,c as s,w as n,g as r,f as c,cH as i,a9 as d,S as u,e as p,i as m,V as f,h,t as y,a7 as x,a5 as b,J as g,ah as v,ai as w}from"./index-B3PZsRwT.js";import{u as _}from"./resetTableRef-DZjcvemm.js";import{g as k}from"./api-By23aosn.js";import{u as I}from"./echarts-B3HHInsl.js";import{b as P,c as S}from"./system-manage-DyXHkc6D.js";import{C as T}from"./index-BThgVJ70.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./installCanvasRenderer-Dfk03Uyn.js";const N=a({name:"LineChart",__name:"line-chart",setup(e){const t=l(!1),a=["midnightToFourAm","fourAmToEightAm","eightAmToNoon","noonToFourPm","fourPmToEightPm","eightPmToMidnight"],{domRef:d,updateOptions:u}=I((()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["访问用户数","访问量"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[{color:"#8e9dff",name:"访问用户数",type:"line",smooth:!0,stack:"Total",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:.25,color:"#8e9dff"},{offset:1,color:"#fff"}]}},emphasis:{focus:"series"},data:[]},{color:"#26deca",name:"访问量",type:"line",smooth:!0,stack:"Total",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:.25,color:"#26deca"},{offset:1,color:"#fff"}]}},emphasis:{focus:"series"},data:[]}]})),!1);return t.value=!0,new Promise(((e,t)=>{Promise.all([P(),S()]).then((([t,l])=>{const o=[];t.error||(o[0]=a.map((e=>t.data[e]))),l.error||(o[1]=a.map((e=>t.data[e]))),e(o)}))})).then((e=>{u((t=>(t.xAxis.data=["0-4点","4-8点","8-12点","12-16点","16-20点","20-24点"],t.series[0].data=null==e?void 0:e[1],t.series[1].data=null==e?void 0:e[0],t))).finally((()=>t.value=!1))})),(e,a)=>{const l=i,u=T;return o(),s(u,{bordered:!1,class:"card-wrapper"},{default:n((()=>[r(l,{tip:"数据加载中...",spinning:t.value},{default:n((()=>[c("div",{ref_key:"domRef",ref:d,class:"h-230px mt-30px"},null,512)])),_:1},8,["spinning"])])),_:1})}}}),R={class:"h-full w-full"},C={class:"h-full w-full flex gap-8px"},j={class:"left-content h-full min-h-500px w-430px flex-col-stretch gap-8px overflow-hidden lt-sm:overflow-auto"},A={class:"right-content h-full flex-col-stretch gap-8px overflow-hidden lt-sm:overflow-auto"},Q={class:"w-full",style:{height:"calc(100% - 40px)"}},U={class:"mb-0.5% h-54%"},D={class:"h-47% mt-5.5%"},L=g(a({__name:"proses",setup(a){const s=l(null),[i,g]=_({moduleNo:null}),v=[{type:"input",key:"moduleNo",label:"工序名称",span:16,placeholder:"请输入生产型号",showTime:!0}],w=[{type:"input",key:"moduleNo",label:"类型",span:12,placeholder:"请输入生产型号",showTime:!0},{type:"dateRangePicker",key:"time",label:"出版日期",span:12,placeholder:"请输入生产型号",showTime:!0}],I=l(null),P=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:50,align:"center",checked:!0,ellipsis:!0},{key:"moduleNo",dataIndex:"moduleNo",title:"工艺",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>r("span",{class:"fonw-800 color-#646cff"},[e.moduleNo])},{key:"peType",dataIndex:"peType",title:"总面积",align:"center",checked:!0,ellipsis:!0}];l(!0);const S=l(null),T=l({}),L=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"techName",dataIndex:"techName",title:"出板时间",align:"center",checked:!0,ellipsis:!0,width:120},{key:"repeatCount",dataIndex:"repeatCount",title:"层数",align:"center",checked:!0,ellipsis:!0,width:120},{key:"wipPnlQty",dataIndex:"wipPnlQty",title:"Pnl数量",align:"center",checked:!0,ellipsis:!0,width:120},{key:"wipSetQty",dataIndex:"wipSetQty",title:"Pnl面积",align:"center",checked:!0,ellipsis:!0,width:120},{key:"wipscrapSet",dataIndex:"wipscrapSet",title:"Set数量",align:"center",checked:!0,ellipsis:!0,width:120},{key:"wipscrapPcs",dataIndex:"wipscrapPcs",title:"Set面积",align:"center",checked:!0,ellipsis:!0,width:120},{key:"wippcsQty",dataIndex:"wippcsQty",title:"Unit数量",align:"center",checked:!0,ellipsis:!0,width:120},{key:"applyScrapQty",dataIndex:"applyScrapQty",title:"Unit面积",align:"center",checked:!0,ellipsis:!0,width:120},{key:"applyReworkQty",dataIndex:"applyReworkQty",title:"折合双面板约当量面积",align:"center",checked:!0,ellipsis:!0}],B=l(null);function E(){I.value.getData()}function K(){g(),E()}d(B);const M=l([]),O=l({totalQty:null,unitArea:null,totalArea:null,pnlArea:null,endOfLife:null,pnlSet:null,setPcs:null}),W=l(!1);function F(e){W.value=!0,k("/erpsyncmes/wip/selectWipPubtechnology",{prodId:e.prodId}).then((({data:e,error:t})=>{t?(O.value=null,M.value=[]):(O.value=e,e.pubtechnology.forEach(((e,t)=>{e.dataIndex=t+1,e.tableUuid=x.genV4().hexNoDelim})),M.value=e.pubtechnology)})).finally((()=>{W.value=!1}))}const V=l(null),q=l({prodId:null,techId:null});function G(e){q.value={prodId:e.prodId,techId:e.techId},b((()=>{V.value.getData()}))}function H(e){(null==e?void 0:e.length)&&(I.value.setCurrentRowId(e[0]),b((()=>{F(e[0])})))}function J(e){(null==e?void 0:e.length)&&(q.value={prodId:e[0].prodId,techId:e[0].techId},S.value.setCurrentRowId(e[0]),b((()=>{V.value.getData()})))}return l("1"),(a,l)=>{const d=t,x=e,b=u("STableSummaryCell"),g=u("STableSummaryRow");return o(),p("div",R,[c("div",C,[c("div",j,[r(d,{ref_key:"commonSearchRef",ref:s,searchParams:m(i),"onUpdate:searchParams":l[0]||(l[0]=e=>f(i)?i.value=e:null),"form-list":v,onSearch:E,onReset:K},null,8,["searchParams"]),r(x,{ref_key:"leftTableRef",ref:I,searchParams:m(i),"onUpdate:searchParams":l[1]||(l[1]=e=>f(i)?i.value=e:null),column:P,"show-row-selection":!1,"row-key":"prodId",scroll:{y:"auto"},"is-init-get-data":"","auto-generate-uuid":!0,class:"h-full",url:"/erpsyncmes/Mi/findModuleNo","show-quick-jumper":!1,onTableRowClick:F,onTableDataLoadSucess:H},null,8,["searchParams"])]),c("div",A,[c("div",Q,[c("div",U,[r(d,{ref_key:"commonSearchRef",ref:s,searchParams:m(i),"onUpdate:searchParams":l[2]||(l[2]=e=>f(i)?i.value=e:null),"form-list":w,onSearch:E,onReset:K},null,8,["searchParams"]),r(x,{ref_key:"rightTableRef",ref:S,searchParams:T.value,"onUpdate:searchParams":l[3]||(l[3]=e=>T.value=e),column:L,"show-row-selection":!1,"row-key":"tableUuid","data-source":M.value,scroll:{y:"auto"},"is-init-get-data":!1,loading:W.value,url:"/erpsyncmes/wip/selectWipByProdIdAndTechId","auto-generate-uuid":!1,class:"h-full","is-pagination":!1,"summary-fixed":"",onTableRowClick:G,onTableDataLoadSucess:J},{summary:n((()=>[r(g,null,{default:n((()=>[r(b,{index:0,"col-span":2,class:"text-center color-blue-600 font-bold"},{default:n((()=>l[4]||(l[4]=[h(" 本页合计: ")]))),_:1}),r(b,{index:2,class:"text-center color-blue-600 font-bold"}),r(b,{index:3,class:"text-center color-blue-600 font-bold"},{default:n((({total:e})=>[h(y(Number(e)||""),1)])),_:1}),r(b,{index:4,class:"text-center color-blue-600 font-bold"},{default:n((({total:e})=>[h(y(Number(e)||""),1)])),_:1}),r(b,{index:5,class:"text-center color-blue-600 font-bold"},{default:n((({total:e})=>[h(y(Number(e)||""),1)])),_:1}),r(b,{index:6,class:"text-center color-blue-600 font-bold"},{default:n((({total:e})=>[h(y(Number(e)||""),1)])),_:1}),r(b,{index:7,class:"text-center color-blue-600 font-bold"},{default:n((({total:e})=>[h(y(Number(e)||""),1)])),_:1}),r(b,{index:8,class:"text-center color-blue-600 font-bold"},{default:n((({total:e})=>[h(y(Number(e)||""),1)])),_:1}),r(b,{index:9,class:"text-center color-blue-600 font-bold"},{default:n((({total:e})=>[h(y(Number(e)||""),1)])),_:1}),r(b,{index:10,class:"text-center color-blue-600 font-bold"},{default:n((({total:e})=>[h(y(Number(e)||""),1)])),_:1}),r(b,{index:11,class:"text-center color-blue-600 font-bold"},{default:n((({total:e})=>[h(y(Number(e)||""),1)])),_:1}),r(b,{index:12,class:"text-center color-blue-600 font-bold"},{default:n((({total:e})=>[h(y(Number(e)||""),1)])),_:1})])),_:1})])),_:1},8,["searchParams","data-source","loading"])]),c("div",D,[r(N,{class:"h-full"})])])])])])}}}),[["__scopeId","data-v-2ce7c982"]]),B={class:"fontBoldClass"},E=g(Object.assign({name:"issuance-management_production-statistics"},{__name:"index",setup(e){const t=l("1"),a=l({locationId:"",time:""});function s(){getData()}return(e,l)=>{const c=v,i=w;return o(),p("div",B,[r(i,{activeKey:t.value,"onUpdate:activeKey":l[3]||(l[3]=e=>t.value=e),type:"card",style:{height:"800px !important"},class:"my-tabs"},{default:n((()=>[r(c,{key:"1",tab:"按工序",class:"my-tabs1"},{default:n((()=>[r(L,{model:a.value,"onUpdate:model":l[0]||(l[0]=e=>a.value=e),onReset:l[1]||(l[1]=e=>s()),onSearch:l[2]||(l[2]=e=>s())},null,8,["model"])])),_:1}),r(c,{key:"2",tab:"Tab 2"},{default:n((()=>l[4]||(l[4]=[h("按型号")]))),_:1}),r(c,{key:"3",tab:"Tab 3"},{default:n((()=>l[5]||(l[5]=[h("按板层数")]))),_:1})])),_:1},8,["activeKey"])])}}}),[["__scopeId","data-v-d59017c9"]]);export{E as default};
