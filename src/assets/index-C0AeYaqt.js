import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{_ as l}from"./table-DoFSI9NT.js";import{c as a}from"./printed-code-DrJSKY57.js";import{d as t,K as n,L as s,o,c as d,w as i,g as r,f as c,s as u,h as m,t as p,I as f,v as h,N as v,ad as x,ae as w,M as g,O as y,B as k,P as _,Q as b,F as I,r as N,b as C,a5 as S,af as Y,S as j,e as T,ac as D}from"./index-B3PZsRwT.js";import{C as M}from"./index-BThgVJ70.js";import"./api-By23aosn.js";const U={class:"w-full flex"},q={class:"flex"},P={class:"w-full flex-y-center justify-end gap-12px"},R={class:"ml-3px"},L={class:"ml-3px"},z=t({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:n(["search"],["update:model"]),setup(e,{emit:l}){const a=l,t=s(e,"model");function n(){a("search",t.value)}function N(){t.value={prodNo:null,lotNo:null,printState:null,time:null},a("search",t.value)}return(e,l)=>{const a=f,s=h,C=v,S=x,Y=w,j=g,T=y,D=k,z=_,E=b,K=I,$=M;return o(),d($,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:i((()=>[r(K,{ref:"formRef",model:t.value,"label-col":{span:5,md:7},class:"search-form"},{default:i((()=>[c("div",U,[r(E,{gutter:[15,8],wrap:"",class:"w-full"},{default:i((()=>[r(C,{span:24,md:12,lg:6,xl:6,xxl:4},{default:i((()=>[r(s,{label:"生产批号",name:"lotNo",class:"m-0","label-col":{}},{default:i((()=>[r(a,{value:t.value.lotNo,"onUpdate:value":l[0]||(l[0]=e=>t.value.lotNo=e),placeholder:"请输入生产批号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:u(n,["enter"])},null,8,["value"])])),_:1})])),_:1}),r(C,{span:24,md:12,lg:6,xl:6,xxl:4},{default:i((()=>[r(s,{label:"生产型号",name:"prodNo",class:"m-0","label-col":{}},{default:i((()=>[r(a,{value:t.value.prodNo,"onUpdate:value":l[1]||(l[1]=e=>t.value.prodNo=e),placeholder:"请输入生产型号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:u(n,["enter"])},null,8,["value"])])),_:1})])),_:1}),r(C,{span:24,md:12,lg:6,xl:6,xxl:4},{default:i((()=>[r(s,{label:"打码状态",name:"model",class:"m-0","label-col":{}},{default:i((()=>[r(Y,{value:t.value.printState,"onUpdate:value":l[2]||(l[2]=e=>t.value.printState=e),placeholder:"请选择打码状态",class:"min-form-control","allow-clear":""},{default:i((()=>[r(S,{value:"已打码"},{default:i((()=>l[4]||(l[4]=[m("已打码")]))),_:1}),r(S,{value:"已打码未完成"},{default:i((()=>l[5]||(l[5]=[m("已打码未完成")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),r(C,{span:24,md:12,lg:6,xl:6,xxl:4},{default:i((()=>[r(s,{label:"日期",name:"model",class:"m-0","label-col":{}},{default:i((()=>[r(j,{value:t.value.time,"onUpdate:value":l[3]||(l[3]=e=>t.value.time=e),"value-format":"YYYY-MM-DD",class:"min-form-control"},null,8,["value"])])),_:1})])),_:1}),c("div",q,[r(s,{class:"m-0"},{default:i((()=>[c("div",P,[r(D,{type:"primary",ghost:"",class:"mini-btn",onClick:n},{icon:i((()=>[r(T,{class:"align-sub text-icon"})])),default:i((()=>[c("span",R,p(e.$t("common.search")),1)])),_:1}),r(D,{class:"mini-btn",onClick:N},{icon:i((()=>[r(z,{class:"align-sub text-icon"})])),default:i((()=>[c("span",L,p(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),E={class:"jl-main-page outer-printed-code h-full h-full min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},K=t({name:"code-management_x-ray-inside-out-search",__name:"index",setup(t){const n=N({prodNo:null,lotNo:null,printState:null,time:null}),s=N(null),d=N([{key:"index",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0},{key:"lotId",dataIndex:"lotId",title:"生产批号",width:150,align:"center",checked:!0,ellipsis:!0},{key:"productName",dataIndex:"productName",title:"产品型号",width:140,align:"center",checked:!0,ellipsis:!0},{key:"qty",dataIndex:"qty",title:"批次数量",width:80,align:"center",checked:!0,ellipsis:!0},{key:"printCount",dataIndex:"printCount",title:"打码数量",width:80,align:"center",checked:!0,ellipsis:!0},{key:"printedCodeState",dataIndex:"printedCodeState",title:"打码状态",width:115,align:"center",checked:!0,ellipsis:!0},{key:"customerCode",dataIndex:"customerCode",title:"客户代码",width:100,align:"center",checked:!0,ellipsis:!0},{key:"customerName",dataIndex:"customerName",title:"客户名称",width:200,align:"center",checked:!0,ellipsis:!0},{key:"createTime",dataIndex:"createTime",title:"下发时间",width:180,align:"center",checked:!0,ellipsis:!0}]);function c(){S((()=>{n.value={prodNo:null,lotNo:null,printState:null,time:null},u()}))}function u(){s.value.getData(1)}const m=N(!1),p=N([]),f=N([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"pnlId",dataIndex:"pnlId",title:"外层曝光码",width:180,align:"center",checked:!0,ellipsis:!0},{key:"printStatus",dataIndex:"printStatus",title:"是否打码",width:100,align:"center",checked:!0,ellipsis:!0},{key:"printedTime",dataIndex:"printedTime",title:"打码时间",width:180,align:"center",checked:!0,ellipsis:!0},{key:"eqpId",dataIndex:"eqpId",title:"打码设备",width:130,align:"center",checked:!0,ellipsis:!0},{key:"innerCode",dataIndex:"innerCode",title:"内层PNL码",width:200,align:"center",checked:!0,ellipsis:!0}]);function h(e){m.value=!0,a(e).then((({data:e,error:l})=>{l||(e.forEach(((e,l)=>{e.index=l+1})),p.value=e)})).finally((()=>m.value=!1))}function x(e){h(e.lotId)}function w(e){h(e[0].lotId),s.value.setCurrentRowId(e[0])}const g=C((()=>{var e,l;const a={...n.value};return(null==(l=null==(e=n.value)?void 0:e.time)?void 0:l[0])&&(a.startTime=dayjs(n.value.time[0]).format("YYYY-MM-DD"),a.endTime=dayjs(n.value.time[0]).format("YYYY-MM-DD")),delete a.time,a})),y=N(42);return window.addEventListener("resize",(()=>{S((()=>{const e=document.querySelector(".outer-printed-code .search-box"),l=null==e?void 0:e.clientHeight;y.value=l||42}))})),Y((()=>{window.removeEventListener("resize",(()=>{}))})),(a,t)=>{const h=l,k=v,_=e,I=j("STable"),N=M,C=b;return o(),T("div",E,[r(z,{model:n.value,"onUpdate:model":t[0]||(t[0]=e=>n.value=e),class:"search-box",onReset:c,onSearch:u},null,8,["model"]),r(C,{gutter:[15,8],wrap:"",class:"w-full",style:D({height:"calc(100% - ".concat(y.value,"px)")})},{default:i((()=>[r(k,{span:12,class:"h-full"},{default:i((()=>[r(h,{ref_key:"tableRef",ref:s,searchParams:g.value,"onUpdate:searchParams":t[1]||(t[1]=e=>g.value=e),column:d.value,"show-row-selection":!1,"auto-generate-uuid":!1,"row-key":"lotId",scroll:{y:"auto"},"is-init-get-data":"",url:"/mes/printCode/outer/inner/list",class:"h-full",onTableRowClick:x,onTableDataLoadSucess:w},null,8,["searchParams","column"])])),_:1}),r(k,{span:24,md:24,lg:24,xl:12,xxl:12,class:"h-fullmin-h-500px h-full flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},{default:i((()=>[r(N,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card h-full flex-col-stretch sm:flex-1-hidden card-wrapper"},{extra:i((()=>[r(_,{columns:f.value,"onUpdate:columns":t[2]||(t[2]=e=>f.value=e)},null,8,["columns"])])),default:i((()=>[r(I,{ref:"tableWrapperRef",columns:f.value,"data-source":p.value,bordered:"",size:"small",loading:m.value,"row-key":"pnlId",pagination:!1,scroll:{x:"auto",y:2e3},class:"h-full","row-height":23},null,8,["columns","data-source","loading"])])),_:1})])),_:1})])),_:1},8,["style"])])}}});export{K as default};
