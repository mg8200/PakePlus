import{d as e,r as t,j as o,b7 as n,g as a,aw as r,b8 as i,au as l,Y as c,b9 as s,ba as d,bb as u,aN as p,bc as f,bd as m,ao as v,be as g,a0 as h,av as b,b as w,bf as y,bg as S,T as x,a3 as O,bh as I,aV as C,bi as P,bj as D,bk as R,bl as j,bm as F,aK as k,bn as T,bo as A,B as E,aq as U,ar as L,at as z,bp as M,am as B,an as H,bq as _,ap as X,br as N,bs as V,bt as q,bu as W,aA as G,bv as $,bw as J,as as K,az as Y}from"./index-B3PZsRwT.js";import{c as Q}from"./_createAggregator-DK8mP78E.js";import{D as Z}from"./DeleteOutlined-CWT7lRAZ.js";import{D as ee}from"./DownloadOutlined-CnXdrHEb.js";import{_ as te}from"./index-81pxjwat.js";var oe=Q((function(e,t,o){e[o?0:1].push(t)}),(function(){return[[],[]]}));function ne(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(o){return t}}function ae(e){const t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});const o=new FormData;e.data&&Object.keys(e.data).forEach((t=>{const n=e.data[t];Array.isArray(n)?n.forEach((e=>{o.append("".concat(t,"[]"),e)})):o.append(t,n)})),e.file instanceof Blob?o.append(e.filename,e.file,e.file.name):o.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){return t.status<200||t.status>=300?e.onError(function(e,t){const o="cannot ".concat(e.method," ").concat(e.action," ").concat(t.status,"'"),n=new Error(o);return n.status=t.status,n.method=e.method,n.url=e.action,n}(e,t),ne(t)):e.onSuccess(ne(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const n=e.headers||{};return null!==n["X-Requested-With"]&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(n).forEach((e=>{null!==n[e]&&t.setRequestHeader(e,n[e])})),t.send(o),{abort(){t.abort()}}}const re=+new Date;let ie=0;function le(){return"vc-upload-".concat(re,"-").concat(++ie)}const ce=(e,t)=>{if(e&&t){const o=Array.isArray(t)?t:t.split(","),n=e.name||"",a=e.type||"",r=a.replace(/\/.*$/,"");return o.some((e=>{const t=e.trim();if(/^\*(\/\*)?$/.test(e))return!0;if("."===t.charAt(0)){const e=n.toLowerCase(),o=t.toLowerCase();let a=[o];return".jpg"!==o&&".jpeg"!==o||(a=[".jpg",".jpeg"]),a.some((t=>e.endsWith(t)))}return/\/\*$/.test(t)?r===t.replace(/\/.*$/,""):a===t||!!/^\w+$/.test(t)}))}return!0};const se=(e,t,o)=>{const n=(e,a)=>{e.path=a||"",e.isFile?e.file((n=>{o(n)&&(e.fullPath&&!n.webkitRelativePath&&(Object.defineProperties(n,{webkitRelativePath:{writable:!0}}),n.webkitRelativePath=e.fullPath.replace(/^\//,""),Object.defineProperties(n,{webkitRelativePath:{writable:!1}})),t([n]))})):e.isDirectory&&function(e,t){const o=e.createReader();let n=[];!function e(){o.readEntries((o=>{const a=Array.prototype.slice.apply(o);n=n.concat(a),a.length?e():t(n)}))}()}(e,(t=>{t.forEach((t=>{n(t,"".concat(a).concat(e.name,"/"))}))}))};e.forEach((e=>{n(e.webkitGetAsEntry())}))},de=()=>({capture:[Boolean,String],multipart:{type:Boolean,default:void 0},name:String,disabled:{type:Boolean,default:void 0},componentTag:String,action:[String,Function],method:String,directory:{type:Boolean,default:void 0},data:[Object,Function],headers:Object,accept:String,multiple:{type:Boolean,default:void 0},onBatchStart:Function,onReject:Function,onStart:Function,onError:Function,onSuccess:Function,onProgress:Function,beforeUpload:Function,customRequest:Function,withCredentials:{type:Boolean,default:void 0},openFileDialogOnClick:{type:Boolean,default:void 0},prefixCls:String,id:String,onMouseenter:Function,onMouseleave:Function,onClick:Function});var ue=function(e,t,o,n){return new(o||(o=Promise))((function(a,r){function i(e){try{c(n.next(e))}catch(t){r(t)}}function l(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))};const pe=e({compatConfig:{MODE:3},name:"AjaxUploader",inheritAttrs:!1,props:de(),setup(e,l){let{slots:c,attrs:s,expose:d}=l;const u=t(le()),p={},f=t();let m=!1;const v=(t,o)=>ue(this,void 0,void 0,(function*(){const{beforeUpload:n}=e;let a=t;if(n){try{a=yield n(t,o)}catch(p){a=!1}if(!1===a)return{origin:t,parsedFile:null,action:null,data:null}}const{action:r}=e;let i;i="function"==typeof r?yield r(t):r;const{data:l}=e;let c;c="function"==typeof l?yield l(t):l;const s="object"!=typeof a&&"string"!=typeof a||!a?t:a;let d;d=s instanceof File?s:new File([s],t.name,{type:t.type});const u=d;return u.uid=t.uid,{origin:t,data:c,parsedFile:u,action:i}})),g=e=>{if(e){const t=e.uid?e.uid:e;p[t]&&p[t].abort&&p[t].abort(),delete p[t]}else Object.keys(p).forEach((e=>{p[e]&&p[e].abort&&p[e].abort(),delete p[e]}))};o((()=>{m=!0})),n((()=>{m=!1,g()}));const h=t=>{const o=[...t],n=o.map((e=>(e.uid=le(),v(e,o))));Promise.all(n).then((t=>{const{onBatchStart:o}=e;null==o||o(t.map((e=>{let{origin:t,parsedFile:o}=e;return{file:t,parsedFile:o}}))),t.filter((e=>null!==e.parsedFile)).forEach((t=>{(t=>{let{data:o,origin:n,action:a,parsedFile:r}=t;if(!m)return;const{onStart:i,customRequest:l,name:c,headers:s,withCredentials:d,method:u}=e,{uid:f}=n,v=l||ae,g={action:a,filename:c,data:o,file:r,headers:s,withCredentials:d,method:u||"post",onProgress:t=>{const{onProgress:o}=e;null==o||o(t,r)},onSuccess:(t,o)=>{const{onSuccess:n}=e;null==n||n(t,r,o),delete p[f]},onError:(t,o)=>{const{onError:n}=e;null==n||n(t,o,r),delete p[f]}};i(n),p[f]=v(g)})(t)}))}))},b=t=>{const{accept:o,directory:n}=e,{files:a}=t.target,r=[...a].filter((e=>!n||ce(e,o)));h(r),u.value=le()},w=t=>{const o=f.value;if(!o)return;const{onClick:n}=e;o.click(),n&&n(t)},y=e=>{"Enter"===e.key&&w(e)},S=t=>{const{multiple:o}=e;if(t.preventDefault(),"dragover"!==t.type)if(e.directory)se(Array.prototype.slice.call(t.dataTransfer.items),h,(t=>ce(t,e.accept)));else{const n=oe(Array.prototype.slice.call(t.dataTransfer.files),(t=>ce(t,e.accept)));let a=n[0];const r=n[1];!1===o&&(a=a.slice(0,1)),h(a),r.length&&e.onReject&&e.onReject(r)}};return d({abort:g}),()=>{var t;const{componentTag:o,prefixCls:n,disabled:l,id:d,multiple:p,accept:m,capture:v,directory:g,openFileDialogOnClick:h,onMouseenter:x,onMouseleave:O}=e,I=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(o[n[a]]=e[n[a]])}return o}(e,["componentTag","prefixCls","disabled","id","multiple","accept","capture","directory","openFileDialogOnClick","onMouseenter","onMouseleave"]),C={[n]:!0,["".concat(n,"-disabled")]:l,[s.class]:!!s.class},P=g?{directory:"directory",webkitdirectory:"webkitdirectory"}:{};return a(o,r(r({},l?{}:{onClick:h?w:()=>{},onKeydown:h?y:()=>{},onMouseenter:x,onMouseleave:O,onDrop:S,onDragover:S,tabindex:"0"}),{},{class:C,role:"button",style:s.style}),{default:()=>[a("input",r(r(r({},i(I,{aria:!0,data:!0})),{},{id:d,type:"file",ref:f,onClick:e=>e.stopPropagation(),onCancel:e=>e.stopPropagation(),key:u.value,style:{display:"none"},accept:m},P),{},{multiple:p,onChange:b},null!=v?{capture:v}:{}),null),null===(t=c.default)||void 0===t?void 0:t.call(c)]})}}});function fe(){}const me=e({compatConfig:{MODE:3},name:"Upload",inheritAttrs:!1,props:l(de(),{componentTag:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:fe,onError:fe,onSuccess:fe,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0}),setup(e,o){let{slots:n,attrs:i,expose:l}=o;const c=t();return l({abort:e=>{var t;null===(t=c.value)||void 0===t||t.abort(e)}}),()=>a(pe,r(r(r({},e),i),{},{ref:c}),n)}});var ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"};function ge(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){he(e,t,o[t])}))}return e}function he(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var be=function(e,t){var o=ge({},e,t.attrs);return a(c,ge({},o,{icon:ve}),null)};be.displayName="PaperClipOutlined",be.inheritAttrs=!1;var we={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"};function ye(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){Se(e,t,o[t])}))}return e}function Se(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var xe=function(e,t){var o=ye({},e,t.attrs);return a(c,ye({},o,{icon:we}),null)};xe.displayName="PictureTwoTone",xe.inheritAttrs=!1;var Oe={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"};function Ie(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){Ce(e,t,o[t])}))}return e}function Ce(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var Pe=function(e,t){var o=Ie({},e,t.attrs);return a(c,Ie({},o,{icon:Oe}),null)};function De(){return{capture:s([Boolean,String]),type:d(),name:String,defaultFileList:u(),fileList:u(),action:s([String,Function]),directory:p(),data:s([Object,Function]),method:d(),headers:f(),showUploadList:s([Boolean,Object]),multiple:p(),accept:String,beforeUpload:m(),onChange:m(),"onUpdate:fileList":m(),onDrop:m(),listType:d(),onPreview:m(),onDownload:m(),onReject:m(),onRemove:m(),remove:m(),supportServerRender:p(),disabled:p(),prefixCls:String,customRequest:m(),withCredentials:p(),openFileDialogOnClick:p(),locale:f(),id:String,previewFile:m(),transformFile:m(),iconRender:m(),isImageUrl:m(),progress:f(),itemRender:m(),maxCount:Number,height:s([Number,String]),removeIcon:m(),downloadIcon:m(),previewIcon:m()}}function Re(e){return v(v({},e),{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})}function je(e,t){const o=[...t],n=o.findIndex((t=>{let{uid:o}=t;return o===e.uid}));return-1===n?o.push(e):o[n]=e,o}function Fe(e,t){const o=void 0!==e.uid?"uid":"name";return t.filter((t=>t[o]===e[o]))[0]}Pe.displayName="FileTwoTone",Pe.inheritAttrs=!1;const ke=e=>0===e.indexOf("image/"),Te=200;const Ae=e({compatConfig:{MODE:3},name:"ListItem",inheritAttrs:!1,props:{prefixCls:String,locale:f(void 0),file:f(),items:u(),listType:d(),isImgUrl:m(),showRemoveIcon:p(),showDownloadIcon:p(),showPreviewIcon:p(),removeIcon:m(),downloadIcon:m(),previewIcon:m(),iconRender:m(),actionIconRender:m(),itemRender:m(),onPreview:m(),onClose:m(),onDownload:m(),progress:f()},setup(e,t){let{slots:i,attrs:l}=t;var c;const s=g(!1),d=g();o((()=>{d.value=setTimeout((()=>{s.value=!0}),300)})),n((()=>{clearTimeout(d.value)}));const u=g(null===(c=e.file)||void 0===c?void 0:c.status);h((()=>{var t;return null===(t=e.file)||void 0===t?void 0:t.status}),(e=>{"removed"!==e&&(u.value=e)}));const{rootPrefixCls:p}=b("upload",e),f=w((()=>y("".concat(p.value,"-fade"))));return()=>{var t,o;const{prefixCls:n,locale:c,listType:d,file:p,items:m,progress:v,iconRender:g=i.iconRender,actionIconRender:h=i.actionIconRender,itemRender:b=i.itemRender,isImgUrl:w,showPreviewIcon:y,showRemoveIcon:P,showDownloadIcon:D,previewIcon:R=i.previewIcon,removeIcon:j=i.removeIcon,downloadIcon:F=i.downloadIcon,onPreview:k,onDownload:T,onClose:A}=e,{class:E,style:U}=l,L=g({file:p});let z=a("div",{class:"".concat(n,"-text-icon")},[L]);if("picture"===d||"picture-card"===d)if("uploading"===u.value||!p.thumbUrl&&!p.url){const e={["".concat(n,"-list-item-thumbnail")]:!0,["".concat(n,"-list-item-file")]:"uploading"!==u.value};z=a("div",{class:e},[L])}else{const e=(null==w?void 0:w(p))?a("img",{src:p.thumbUrl||p.url,alt:p.name,class:"".concat(n,"-list-item-image"),crossorigin:p.crossOrigin},null):L,t={["".concat(n,"-list-item-thumbnail")]:!0,["".concat(n,"-list-item-file")]:w&&!w(p)};z=a("a",{class:t,onClick:e=>k(p,e),href:p.url||p.thumbUrl,target:"_blank",rel:"noopener noreferrer"},[e])}const M={["".concat(n,"-list-item")]:!0,["".concat(n,"-list-item-").concat(u.value)]:!0},B="string"==typeof p.linkProps?JSON.parse(p.linkProps):p.linkProps,H=P?h({customIcon:j?j({file:p}):a(Z,null,null),callback:()=>A(p),prefixCls:n,title:c.removeFile}):null,_=D&&"done"===u.value?h({customIcon:F?F({file:p}):a(ee,null,null),callback:()=>T(p),prefixCls:n,title:c.downloadFile}):null,X="picture-card"!==d&&a("span",{key:"download-delete",class:["".concat(n,"-list-item-actions"),{picture:"picture"===d}]},[_,H]),N="".concat(n,"-list-item-name"),V=p.url?[a("a",r(r({key:"view",target:"_blank",rel:"noopener noreferrer",class:N,title:p.name},B),{},{href:p.url,onClick:e=>k(p,e)}),[p.name]),X]:[a("span",{key:"view",class:N,onClick:e=>k(p,e),title:p.name},[p.name]),X],q=y?a("a",{href:p.url||p.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:p.url||p.thumbUrl?void 0:{pointerEvents:"none",opacity:.5},onClick:e=>k(p,e),title:c.previewFile},[R?R({file:p}):a(S,null,null)]):null,W="picture-card"===d&&"uploading"!==u.value&&a("span",{class:"".concat(n,"-list-item-actions")},[q,"done"===u.value&&_,H]),G=a("div",{class:M},[z,V,W,s.value&&a(x,f.value,{default:()=>[O(a("div",{class:"".concat(n,"-list-item-progress")},["percent"in p?a(te,r(r({},v),{},{type:"line",percent:p.percent}),null):null]),[[I,"uploading"===u.value]])]})]),$={["".concat(n,"-list-item-container")]:!0,["".concat(E)]:!!E},J=p.response&&"string"==typeof p.response?p.response:(null===(t=p.error)||void 0===t?void 0:t.statusText)||(null===(o=p.error)||void 0===o?void 0:o.message)||c.uploadError,K="error"===u.value?a(C,{title:J,getPopupContainer:e=>e.parentNode},{default:()=>[G]}):G;return a("div",{class:$,style:U},[b?b({originNode:K,file:p,fileList:m,actions:{download:T.bind(null,p),preview:k.bind(null,p),remove:A.bind(null,p)}}):K])}}}),Ee=(e,t)=>{let{slots:o}=t;var n;return k(null===(n=o.default)||void 0===n?void 0:n.call(o))[0]},Ue=e({compatConfig:{MODE:3},name:"AUploadList",props:l({listType:d(),onPreview:m(),onDownload:m(),onRemove:m(),items:u(),progress:f(),prefixCls:d(),showRemoveIcon:p(),showDownloadIcon:p(),showPreviewIcon:p(),removeIcon:m(),downloadIcon:m(),previewIcon:m(),locale:f(void 0),previewFile:m(),iconRender:m(),isImageUrl:m(),appendAction:m(),appendActionVisible:p(),itemRender:m()},{listType:"text",progress:{strokeWidth:2,showInfo:!1},showRemoveIcon:!0,showDownloadIcon:!1,showPreviewIcon:!0,previewFile:function(e){return new Promise((t=>{if(!e.type||!ke(e.type))return void t("");const o=document.createElement("canvas");o.width=Te,o.height=Te,o.style.cssText="position: fixed; left: 0; top: 0; width: ".concat(Te,"px; height: ").concat(Te,"px; z-index: 9999; display: none;"),document.body.appendChild(o);const n=o.getContext("2d"),a=new Image;if(a.onload=()=>{const{width:e,height:r}=a;let i=Te,l=Te,c=0,s=0;e>r?(l=r*(Te/e),s=-(l-i)/2):(i=e*(Te/r),c=-(i-l)/2),n.drawImage(a,c,s,i,l);const d=o.toDataURL();document.body.removeChild(o),t(d)},a.crossOrigin="anonymous",e.type.startsWith("image/svg+xml")){const t=new FileReader;t.addEventListener("load",(()=>{t.result&&(a.src=t.result)})),t.readAsDataURL(e)}else a.src=window.URL.createObjectURL(e)}))},isImageUrl:e=>{if(e.type&&!e.thumbUrl)return ke(e.type);const t=e.thumbUrl||e.url||"",o=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/"),t=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(t)||[""])[0]}(t);return!(!/^data:image\//.test(t)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i.test(o))||!/^data:/.test(t)&&!o},items:[],appendActionVisible:!0}),setup(e,t){let{slots:n,expose:i}=t;const l=g(!1);o((()=>{l.value}));const c=g([]);h((()=>e.items),(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];c.value=e.slice()}),{immediate:!0,deep:!0}),P((()=>{if("picture"!==e.listType&&"picture-card"!==e.listType)return;let t=!1;(e.items||[]).forEach(((o,n)=>{"undefined"!=typeof document&&"undefined"!=typeof window&&window.FileReader&&window.File&&(o.originFileObj instanceof File||o.originFileObj instanceof Blob)&&void 0===o.thumbUrl&&(o.thumbUrl="",e.previewFile&&e.previewFile(o.originFileObj).then((e=>{const a=e||"";a!==o.thumbUrl&&(c.value[n].thumbUrl=a,t=!0)})))})),t&&D(c)}));const s=(t,o)=>{if(e.onPreview)return null==o||o.preventDefault(),e.onPreview(t)},d=t=>{"function"==typeof e.onDownload?e.onDownload(t):t.url&&window.open(t.url)},u=t=>{var o;null===(o=e.onRemove)||void 0===o||o.call(e,t)},p=t=>{let{file:o}=t;const r=e.iconRender||n.iconRender;if(r)return r({file:o,listType:e.listType});const i="uploading"===o.status,l=e.isImageUrl&&e.isImageUrl(o)?a(xe,null,null):a(Pe,null,null);let c=a(i?T:be,null,null);return"picture"===e.listType?c=i?a(T,null,null):l:"picture-card"===e.listType&&(c=i?e.locale.uploading:l),c},f=e=>{const{customIcon:t,callback:o,prefixCls:n,title:r}=e,i={type:"text",size:"small",title:r,onClick:()=>{o()},class:"".concat(n,"-list-item-action")};return A(t)?a(E,i,{icon:()=>t}):a(E,i,{default:()=>[a("span",null,[t])]})};i({handlePreview:s,handleDownload:d});const{prefixCls:m,rootPrefixCls:y}=b("upload",e),S=w((()=>({["".concat(m.value,"-list")]:!0,["".concat(m.value,"-list-").concat(e.listType)]:!0}))),x=w((()=>{const t=v({},R("".concat(y.value,"-motion-collapse")));delete t.onAfterAppear,delete t.onAfterEnter,delete t.onAfterLeave;const o=v(v({},j("".concat(m.value,"-").concat("picture-card"===e.listType?"animate-inline":"animate"))),{class:S.value,appear:l.value});return"picture-card"!==e.listType?v(v({},t),o):o}));return()=>{const{listType:t,locale:o,isImageUrl:i,showPreviewIcon:l,showRemoveIcon:g,showDownloadIcon:h,removeIcon:b,previewIcon:w,downloadIcon:y,progress:S,appendAction:C,itemRender:P,appendActionVisible:D}=e,R=null==C?void 0:C(),j=c.value;return a(F,r(r({},x.value),{},{tag:"div"}),{default:()=>[j.map((e=>{const{uid:r}=e;return a(Ae,{key:r,locale:o,prefixCls:m.value,file:e,items:j,progress:S,listType:t,isImgUrl:i,showPreviewIcon:l,showRemoveIcon:g,showDownloadIcon:h,onPreview:s,onDownload:d,onClose:u,removeIcon:b,previewIcon:w,downloadIcon:y,itemRender:P},v(v({},n),{iconRender:p,actionIconRender:f}))})),C?O(a(Ee,{key:"__ant_upload_appendAction"},{default:()=>R}),[[I,!!D]]):null]})}}}),Le=e=>{const{componentCls:t,iconCls:o}=e;return{["".concat(t,"-wrapper")]:{["".concat(t,"-drag")]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:e.colorFillAlter,border:"".concat(e.lineWidth,"px dashed ").concat(e.colorBorder),borderRadius:e.borderRadiusLG,cursor:"pointer",transition:"border-color ".concat(e.motionDurationSlow),[t]:{padding:"".concat(e.padding,"px 0")},["".concat(t,"-btn")]:{display:"table",width:"100%",height:"100%",outline:"none"},["".concat(t,"-drag-container")]:{display:"table-cell",verticalAlign:"middle"},["&:not(".concat(t,"-disabled):hover")]:{borderColor:e.colorPrimaryHover},["p".concat(t,"-drag-icon")]:{marginBottom:e.margin,[o]:{color:e.colorPrimary,fontSize:e.uploadThumbnailSize}},["p".concat(t,"-text")]:{margin:"0 0 ".concat(e.marginXXS,"px"),color:e.colorTextHeading,fontSize:e.fontSizeLG},["p".concat(t,"-hint")]:{color:e.colorTextDescription,fontSize:e.fontSize},["&".concat(t,"-disabled")]:{cursor:"not-allowed",["p".concat(t,"-drag-icon ").concat(o,",\n            p").concat(t,"-text,\n            p").concat(t,"-hint\n          ")]:{color:e.colorTextDisabled}}}}}},ze=e=>{const{componentCls:t,antCls:o,iconCls:n,fontSize:a,lineHeight:r}=e,i="".concat(t,"-list-item"),l="".concat(i,"-actions"),c="".concat(i,"-action"),s=Math.round(a*r);return{["".concat(t,"-wrapper")]:{["".concat(t,"-list")]:v(v({},U()),{lineHeight:e.lineHeight,[i]:{position:"relative",height:e.lineHeight*a,marginTop:e.marginXS,fontSize:a,display:"flex",alignItems:"center",transition:"background-color ".concat(e.motionDurationSlow),"&:hover":{backgroundColor:e.controlItemBgHover},["".concat(i,"-name")]:v(v({},L),{padding:"0 ".concat(e.paddingXS,"px"),lineHeight:r,flex:"auto",transition:"all ".concat(e.motionDurationSlow)}),[l]:{[c]:{opacity:0},["".concat(c).concat(o,"-btn-sm")]:{height:s,border:0,lineHeight:1,"> span":{transform:"scale(1)"}},["\n              ".concat(c,":focus,\n              &.picture ").concat(c,"\n            ")]:{opacity:1},[n]:{color:e.colorTextDescription,transition:"all ".concat(e.motionDurationSlow)},["&:hover ".concat(n)]:{color:e.colorText}},["".concat(t,"-icon ").concat(n)]:{color:e.colorTextDescription,fontSize:a},["".concat(i,"-progress")]:{position:"absolute",bottom:-e.uploadProgressOffset,width:"100%",paddingInlineStart:a+e.paddingXS,fontSize:a,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},["".concat(i,":hover ").concat(c)]:{opacity:1,color:e.colorText},["".concat(i,"-error")]:{color:e.colorError,["".concat(i,"-name, ").concat(t,"-icon ").concat(n)]:{color:e.colorError},[l]:{["".concat(n,", ").concat(n,":hover")]:{color:e.colorError},[c]:{opacity:1}}},["".concat(t,"-list-item-container")]:{transition:"opacity ".concat(e.motionDurationSlow,", height ").concat(e.motionDurationSlow),"&::before":{display:"table",width:0,height:0,content:'""'}}})}}},Me=new z("uploadAnimateInlineIn",{from:{width:0,height:0,margin:0,padding:0,opacity:0}}),Be=new z("uploadAnimateInlineOut",{to:{width:0,height:0,margin:0,padding:0,opacity:0}}),He=e=>{const{componentCls:t}=e,o="".concat(t,"-animate-inline");return[{["".concat(t,"-wrapper")]:{["".concat(o,"-appear, ").concat(o,"-enter, ").concat(o,"-leave")]:{animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseInOutCirc,animationFillMode:"forwards"},["".concat(o,"-appear, ").concat(o,"-enter")]:{animationName:Me},["".concat(o,"-leave")]:{animationName:Be}}},Me,Be]},_e=e=>{const{componentCls:t,iconCls:o,uploadThumbnailSize:n,uploadProgressOffset:a}=e,r="".concat(t,"-list"),i="".concat(r,"-item");return{["".concat(t,"-wrapper")]:{["".concat(r).concat(r,"-picture, ").concat(r).concat(r,"-picture-card")]:{[i]:{position:"relative",height:n+2*e.lineWidth+2*e.paddingXS,padding:e.paddingXS,border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadiusLG,"&:hover":{background:"transparent"},["".concat(i,"-thumbnail")]:v(v({},L),{width:n,height:n,lineHeight:"".concat(n+e.paddingSM,"px"),textAlign:"center",flex:"none",[o]:{fontSize:e.fontSizeHeading2,color:e.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),["".concat(i,"-progress")]:{bottom:a,width:"calc(100% - ".concat(2*e.paddingSM,"px)"),marginTop:0,paddingInlineStart:n+e.paddingXS}},["".concat(i,"-error")]:{borderColor:e.colorError,["".concat(i,"-thumbnail ").concat(o)]:{"svg path[fill='#e6f7ff']":{fill:e.colorErrorBg},"svg path[fill='#1890ff']":{fill:e.colorError}}},["".concat(i,"-uploading")]:{borderStyle:"dashed",["".concat(i,"-name")]:{marginBottom:a}}}}}},Xe=e=>{const{componentCls:t,iconCls:o,fontSizeLG:n,colorTextLightSolid:a}=e,r="".concat(t,"-list"),i="".concat(r,"-item"),l=e.uploadPicCardSize;return{["".concat(t,"-wrapper").concat(t,"-picture-card-wrapper")]:v(v({},U()),{display:"inline-block",width:"100%",["".concat(t).concat(t,"-select")]:{width:l,height:l,marginInlineEnd:e.marginXS,marginBottom:e.marginXS,textAlign:"center",verticalAlign:"top",backgroundColor:e.colorFillAlter,border:"".concat(e.lineWidth,"px dashed ").concat(e.colorBorder),borderRadius:e.borderRadiusLG,cursor:"pointer",transition:"border-color ".concat(e.motionDurationSlow),["> ".concat(t)]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},["&:not(".concat(t,"-disabled):hover")]:{borderColor:e.colorPrimary}},["".concat(r).concat(r,"-picture-card")]:{["".concat(r,"-item-container")]:{display:"inline-block",width:l,height:l,marginBlock:"0 ".concat(e.marginXS,"px"),marginInline:"0 ".concat(e.marginXS,"px"),verticalAlign:"top"},"&::after":{display:"none"},[i]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:"calc(100% - ".concat(2*e.paddingXS,"px)"),height:"calc(100% - ".concat(2*e.paddingXS,"px)"),backgroundColor:e.colorBgMask,opacity:0,transition:"all ".concat(e.motionDurationSlow),content:'" "'}},["".concat(i,":hover")]:{["&::before, ".concat(i,"-actions")]:{opacity:1}},["".concat(i,"-actions")]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:"all ".concat(e.motionDurationSlow),["".concat(o,"-eye, ").concat(o,"-download, ").concat(o,"-delete")]:{zIndex:10,width:n,margin:"0 ".concat(e.marginXXS,"px"),fontSize:n,cursor:"pointer",transition:"all ".concat(e.motionDurationSlow)}},["".concat(i,"-actions, ").concat(i,"-actions:hover")]:{["".concat(o,"-eye, ").concat(o,"-download, ").concat(o,"-delete")]:{color:new M(a).setAlpha(.65).toRgbString(),"&:hover":{color:a}}},["".concat(i,"-thumbnail, ").concat(i,"-thumbnail img")]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},["".concat(i,"-name")]:{display:"none",textAlign:"center"},["".concat(i,"-file + ").concat(i,"-name")]:{position:"absolute",bottom:e.margin,display:"block",width:"calc(100% - ".concat(2*e.paddingXS,"px)")},["".concat(i,"-uploading")]:{["&".concat(i)]:{backgroundColor:e.colorFillAlter},["&::before, ".concat(o,"-eye, ").concat(o,"-download, ").concat(o,"-delete")]:{display:"none"}},["".concat(i,"-progress")]:{bottom:e.marginXL,width:"calc(100% - ".concat(2*e.paddingXS,"px)"),paddingInlineStart:0}}})}},Ne=e=>{const{componentCls:t}=e;return{["".concat(t,"-rtl")]:{direction:"rtl"}}},Ve=e=>{const{componentCls:t,colorTextDisabled:o}=e;return{["".concat(t,"-wrapper")]:v(v({},X(e)),{[t]:{outline:0,"input[type='file']":{cursor:"pointer"}},["".concat(t,"-select")]:{display:"inline-block"},["".concat(t,"-disabled")]:{color:o,cursor:"not-allowed"}})}},qe=B("Upload",(e=>{const{fontSizeHeading3:t,fontSize:o,lineHeight:n,lineWidth:a,controlHeightLG:r}=e,i=Math.round(o*n),l=H(e,{uploadThumbnailSize:2*t,uploadProgressOffset:i/2+a,uploadPicCardSize:2.55*r});return[Ve(l),Le(l),_e(l),Xe(l),ze(l),He(l),Ne(l),_(l)]}));var We=function(e,t,o,n){return new(o||(o=Promise))((function(a,r){function i(e){try{c(n.next(e))}catch(t){r(t)}}function l(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))};const Ge="__LIST_IGNORE_".concat(Date.now(),"__"),$e=e({compatConfig:{MODE:3},name:"AUpload",inheritAttrs:!1,props:l(De(),{type:"select",multiple:!1,action:"",data:{},accept:"",showUploadList:!0,listType:"text",supportServerRender:!0}),setup(e,n){let{slots:i,attrs:l,expose:c}=n;const s=N(),{prefixCls:d,direction:u,disabled:p}=b("upload",e),[f,m]=qe(d),g=V(),h=w((()=>{var e;return null!==(e=p.value)&&void 0!==e?e:g.value})),[y,S]=q(e.defaultFileList||[],{value:W(e,"fileList"),postState:e=>{const t=Date.now();return(null!=e?e:[]).map(((e,o)=>(e.uid||Object.isFrozen(e)||(e.uid="__AUTO__".concat(t,"_").concat(o,"__")),e)))}}),x=t("drop"),O=t(null);o((()=>{G(void 0!==e.fileList||void 0===l.value,"Upload","`value` is not a valid prop, do you mean `fileList`?"),G(void 0===e.transformFile,"Upload","`transformFile` is deprecated. Please use `beforeUpload` directly."),G(void 0===e.remove,"Upload","`remove` props is deprecated. Please use `remove` event.")}));const I=(t,o,n)=>{var a,r;let i=[...o];1===e.maxCount?i=i.slice(-1):e.maxCount&&(i=i.slice(0,e.maxCount)),S(i);const l={file:t,fileList:i};n&&(l.event=n),null===(a=e["onUpdate:fileList"])||void 0===a||a.call(e,l.fileList),null===(r=e.onChange)||void 0===r||r.call(e,l),s.onFieldChange()},C=(t,o)=>We(this,void 0,void 0,(function*(){const{beforeUpload:n,transformFile:a}=e;let r=t;if(n){const e=yield n(t,o);if(!1===e)return!1;if(delete t[Ge],e===Ge)return Object.defineProperty(t,Ge,{value:!0,configurable:!0}),!1;"object"==typeof e&&e&&(r=e)}return a&&(r=yield a(r)),r})),P=e=>{const t=e.filter((e=>!e.file[Ge]));if(!t.length)return;const o=t.map((e=>Re(e.file)));let n=[...y.value];o.forEach((e=>{n=je(e,n)})),o.forEach(((e,o)=>{let a=e;if(t[o].parsedFile)e.status="uploading";else{const{originFileObj:t}=e;let o;try{o=new File([t],t.name,{type:t.type})}catch(r){o=new Blob([t],{type:t.type}),o.name=t.name,o.lastModifiedDate=new Date,o.lastModified=(new Date).getTime()}o.uid=e.uid,a=o}I(a,n)}))},D=(e,t,o)=>{try{"string"==typeof e&&(e=JSON.parse(e))}catch(r){}if(!Fe(t,y.value))return;const n=Re(t);n.status="done",n.percent=100,n.response=e,n.xhr=o;const a=je(n,y.value);I(n,a)},R=(e,t)=>{if(!Fe(t,y.value))return;const o=Re(t);o.status="uploading",o.percent=e.percent;const n=je(o,y.value);I(o,n,e)},j=(e,t,o)=>{if(!Fe(o,y.value))return;const n=Re(o);n.error=e,n.response=t,n.status="error";const a=je(n,y.value);I(n,a)},F=t=>{let o;const n=e.onRemove||e.remove;Promise.resolve("function"==typeof n?n(t):n).then((e=>{var n,a;if(!1===e)return;const r=function(e,t){const o=void 0!==e.uid?"uid":"name",n=t.filter((t=>t[o]!==e[o]));return n.length===t.length?null:n}(t,y.value);r&&(o=v(v({},t),{status:"removed"}),null===(n=y.value)||void 0===n||n.forEach((e=>{const t=void 0!==o.uid?"uid":"name";e[t]!==o[t]||Object.isFrozen(e)||(e.status="removed")})),null===(a=O.value)||void 0===a||a.abort(o),I(o,r))}))},k=t=>{var o;x.value=t.type,"drop"===t.type&&(null===(o=e.onDrop)||void 0===o||o.call(e,t))};c({onBatchStart:P,onSuccess:D,onProgress:R,onError:j,fileList:y,upload:O});const[T]=$("Upload",J.Upload,w((()=>e.locale))),A=(t,o)=>{const{removeIcon:n,previewIcon:r,downloadIcon:l,previewFile:c,onPreview:s,onDownload:u,isImageUrl:p,progress:f,itemRender:m,iconRender:g,showUploadList:b}=e,{showDownloadIcon:w,showPreviewIcon:S,showRemoveIcon:x}="boolean"==typeof b?{}:b;return b?a(Ue,{prefixCls:d.value,listType:e.listType,items:y.value,previewFile:c,onPreview:s,onDownload:u,onRemove:F,showRemoveIcon:!h.value&&x,showPreviewIcon:S,showDownloadIcon:w,removeIcon:n,previewIcon:r,downloadIcon:l,iconRender:g,locale:T.value,isImageUrl:p,progress:f,itemRender:m,appendActionVisible:o,appendAction:t},v({},i)):null==t?void 0:t()};return()=>{var t,o,n;const{listType:c,type:p}=e,{class:g,style:b}=l,w=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(o[n[a]]=e[n[a]])}return o}(l,["class","style"]),S=v(v(v({onBatchStart:P,onError:j,onProgress:R,onSuccess:D},w),e),{id:null!==(t=e.id)&&void 0!==t?t:s.id.value,prefixCls:d.value,beforeUpload:C,onChange:void 0,disabled:h.value});delete S.remove,i.default&&!h.value||delete S.id;const I={["".concat(d.value,"-rtl")]:"rtl"===u.value};if("drag"===p){const e=K(d.value,{["".concat(d.value,"-drag")]:!0,["".concat(d.value,"-drag-uploading")]:y.value.some((e=>"uploading"===e.status)),["".concat(d.value,"-drag-hover")]:"dragover"===x.value,["".concat(d.value,"-disabled")]:h.value,["".concat(d.value,"-rtl")]:"rtl"===u.value},l.class,m.value);return f(a("span",r(r({},l),{},{class:K("".concat(d.value,"-wrapper"),I,g,m.value)}),[a("div",{class:e,onDrop:k,onDragover:k,onDragleave:k,style:l.style},[a(me,r(r({},S),{},{ref:O,class:"".concat(d.value,"-btn")}),r({default:()=>[a("div",{class:"".concat(d.value,"-drag-container")},[null===(o=i.default)||void 0===o?void 0:o.call(i)])]},i))]),A()]))}const F=K(d.value,{["".concat(d.value,"-select")]:!0,["".concat(d.value,"-select-").concat(c)]:!0,["".concat(d.value,"-disabled")]:h.value,["".concat(d.value,"-rtl")]:"rtl"===u.value}),T=Y(null===(n=i.default)||void 0===n?void 0:n.call(i)),E=e=>a("div",{class:F,style:e},[a(me,r(r({},S),{},{ref:O}),i)]);return f("picture-card"===c?a("span",r(r({},l),{},{class:K("".concat(d.value,"-wrapper"),"".concat(d.value,"-picture-card-wrapper"),I,l.class,m.value)}),[A(E,!(!T||!T.length))]):a("span",r(r({},l),{},{class:K("".concat(d.value,"-wrapper"),I,l.class,m.value)}),[E(T&&T.length?void 0:{display:"none"}),A()]))}}});var Je=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(o[n[a]]=e[n[a]])}return o};const Ke=e({compatConfig:{MODE:3},name:"AUploadDragger",inheritAttrs:!1,props:De(),setup(e,t){let{slots:o,attrs:n}=t;return()=>{const{height:t}=e,r=Je(e,["height"]),{style:i}=n,l=Je(n,["style"]),c=v(v(v({},r),l),{type:"drag",style:v(v({},i),{height:"number"==typeof t?"".concat(t,"px"):t})});return a($e,c,o)}}}),Ye=v($e,{Dragger:Ke,LIST_IGNORE:Ge,install:e=>(e.component($e.name,$e),e.component(Ke.name,Ke),e)});export{Ye as _};
