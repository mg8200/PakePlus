import{Z as e,r as t,b as a,aa as l,a2 as i,o as s,e as n,g as r,w as d,a3 as c,c as o,i as m,h as p,f as u,a5 as h,B as y}from"./index-B3PZsRwT.js";import{_ as x}from"./table-DoFSI9NT.js";import{_ as g}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{Q as k,_ as f}from"./print-qr-code.vue_vue_type_script_setup_true_lang-1entwNlU.js";import{D as v}from"./DeleteOutlined-CWT7lRAZ.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";import"./index-BThgVJ70.js";import"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";const _={class:"message jl-main-page min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},w=Object.assign({name:"trace_dry-film-trace"},{__name:"index",setup(w){const b=t(null),N=t(null),D=t({prodNo:null,lotNo:null,barcode:null,time:null}),I=[{type:"input",key:"prodNo",label:"生产型号",placeholder:"请输入生产型号",span:24,md:12,lg:8,xl:8,xxl:5},{type:"input",key:"lotNo",label:"LOT号",placeholder:"请输入LOT号",span:24,md:12,lg:8,xl:8,xxl:5},{type:"input",key:"barcode",label:"物料批次",placeholder:"请输入物料批次",span:24,md:12,lg:8,xl:8,xxl:5},{type:"dateRangePicker",key:"time",label:"时间",span:24,md:12,lg:10,xl:8,xxl:6,showTime:!0}],Y=a((()=>{var e,t;const a={...D.value};return(null==(t=null==(e=D.value)?void 0:e.time)?void 0:t[0])&&(a.beginTime=l(D.value.time[0]).format("YYYY-MM-DD"),a.endTime=l(D.value.time[0]).format("YYYY-MM-DD")),delete a.time,a})),j=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,fixed:"left",align:"center",checked:!0,ellipsis:!0},{key:"fullProdNo",dataIndex:"fullProdNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,fixed:"left",width:130},{key:"lotNo",dataIndex:"lotNo",title:"Lot号",align:"center",checked:!0,ellipsis:!0,width:160},{key:"barcode",dataIndex:"barcode",title:"物料批次",align:"center",checked:!0,ellipsis:!0,width:160},{key:"matNo",dataIndex:"matNo",title:"物料型号",align:"center",checked:!0,ellipsis:!0,width:280},{key:"matName",dataIndex:"matName",title:"物料名称",align:"center",checked:!0,ellipsis:!0,width:150},{key:"prodDate",dataIndex:"prodDate",title:"物料生产时间",align:"center",checked:!0,ellipsis:!0,width:160,customRender:({record:e})=>e.prodDate&&l(e.prodDate).format("YYYY-MM-DD")},{key:"expiryDate",dataIndex:"expiryDate",title:"物料失效时间",align:"center",checked:!0,ellipsis:!0,width:160,customRender:({record:e})=>e.expiryDate&&l(e.expiryDate).format("YYYY-MM-DD")},{key:"batchNo",dataIndex:"batchNo",title:"供应商批次",align:"center",checked:!0,ellipsis:!0,width:150},{key:"deliveryOrder",dataIndex:"deliveryOrder",title:"送货单号",align:"center",checked:!0,ellipsis:!0,width:150},{key:"supplierNo",dataIndex:"supplierNo",title:"供应商编码",align:"center",checked:!0,ellipsis:!0,width:120},{key:"splOrderNo",dataIndex:"splOrderNo",title:"采购编号",align:"center",checked:!0,ellipsis:!0,width:150},{key:"specifications",dataIndex:"specifications",title:"规格",align:"center",checked:!0,ellipsis:!0,width:210},{key:"length",dataIndex:"length",title:"长",align:"center",checked:!0,ellipsis:!0,width:130},{key:"width",dataIndex:"width",title:"宽",align:"center",checked:!0,ellipsis:!0,width:130},{key:"modelNum",dataIndex:"modelNum",title:"型号",align:"center",checked:!0,ellipsis:!0,width:150},{key:"createUser",dataIndex:"createUser",title:"创建人",align:"center",checked:!0,ellipsis:!0,width:120},{key:"createTime",dataIndex:"createTime",title:"创建时间",align:"center",checked:!0,ellipsis:!0,width:180,customRender:({record:e})=>e.createTime&&l(e.createTime).format("YYYY-MM-DD HH:mm:ss")}];function M(){N.value.getData(1)}function T(){h((()=>{D.value={prodNo:null,lotNo:null,matNo:null,time:null},M()}))}const O=t(!1);function P(){O.value=!0}const R=t([]);function U(e){R.value=e}const C=t(!1);function L(){0!==R.value.length?(C.value=!0,window.$modal.confirm({title:"确定删除所选中的记录吗?",onOk:()=>{var t;(t=R.value.map((e=>e.id)),e({url:"/mes/dryfilm/delete",method:"post",data:t})).then((({data:e,error:t})=>{t||(window.$message.success("删除成功"),N.value.getData(1),R.value=[])})).finally((()=>{C.value=!1}))},onCancel:()=>{}})):window.$message.error("请选择需要删除的记录")}return(e,t)=>{const a=y,l=i("hasAuth");return s(),n("div",_,[r(g,{ref_key:"commonSearchRef",ref:b,searchParams:D.value,"onUpdate:searchParams":t[0]||(t[0]=e=>D.value=e),"form-list":I,"is-search":!0,onSearch:M,onReset:T},null,8,["searchParams"]),r(x,{ref_key:"tableRef",ref:N,searchParams:Y.value,"onUpdate:searchParams":t[2]||(t[2]=e=>Y.value=e),column:j,"show-row-selection":!0,"row-key":"id",scroll:{y:"auto"},"is-init-get-data":"",url:"/mes/dryfilm/list","auto-generate-uuid":!0,onTableSelectChange:U},{title:d((()=>[c((s(),o(a,{type:"primary",danger:"",class:"mini-btn mr-8px",size:"small",ghost:"",disabled:!R.value.length,onClick:t[1]||(t[1]=e=>L())},{icon:d((()=>[r(m(v),{class:"align-sub"})])),default:d((()=>[t[4]||(t[4]=p(" 删除 "))])),_:1},8,["disabled"])),[[l,["trace:dry-film-trace:delete"]]]),r(a,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:P},{icon:d((()=>[r(m(k))])),default:d((()=>[t[5]||(t[5]=u("span",{class:"ml-3px"},"二维码",-1))])),_:1})])),_:1},8,["searchParams"]),r(f,{visible:O.value,"onUpdate:visible":t[3]||(t[3]=e=>O.value=e),type:"dryfilm"},null,8,["visible"])])}}});export{w as default};
