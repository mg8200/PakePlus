import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{_ as a}from"./round-add-MytOGm9O.js";import{d as l,K as t,L as s,r as n,o,c as d,w as i,g as u,f as c,s as r,e as p,aj as m,al as v,h as f,t as h,I as x,v as g,N as y,ad as w,ae as k,M as _,O as b,B as I,P as C,Q as N,F as S,u as T,p as z,db as j,a7 as D,S as Q}from"./index-B3PZsRwT.js";import{w as U,a as M,b as P,q as Y,p as A}from"./index-CrGg9UFO.js";import{C as O}from"./index-BThgVJ70.js";const R={class:"w-full flex"},$={class:"flex"},q={class:"w-full flex-y-center justify-end gap-12px"},B={class:"ml-3px"},E={class:"ml-3px"},F=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:t(["search","reset"],["update:model"]),setup(e,{emit:a}){const l=a,t=s(e,"model");function T(){l("search",t.value)}const z=n([]);const j=n([{value:1,name:"正常"},{value:2,name:"重工"},{value:3,name:"库存重工"},{value:4,name:"外发"},{value:5,name:"暂停"},{value:6,name:"取消"}]),D=n([]),Q=n([{value:1,name:"量产"},{value:1,name:"样品"}]);function P(){t.value.moduleNo="",t.value.processId="",t.value.paramCaption="",t.value.wipState="",t.value.pnType="",t.value.modulepnTypeNo="",t.value.time=["",""],l("reset",t.value)}return M().then((({data:e,error:a})=>{a||(D.value=e)})),U().then((({data:e,error:a})=>{a||(z.value=e)})),(e,a)=>{const l=x,s=g,n=y,U=w,M=k,Y=_,A=b,F=I,K=C,L=N,H=S,J=O;return o(),d(J,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:i((()=>[u(H,{model:t.value,"label-col":{span:5,md:7},class:"search-form"},{default:i((()=>[c("div",R,[u(L,{gutter:[15,8],wrap:"",class:"w-full"},{default:i((()=>[u(n,{span:24,md:12,lg:6,xl:8,xxl:6},{default:i((()=>[u(s,{label:"产品型号",name:"moduleNo",class:"m-0","label-col":{}},{default:i((()=>[u(l,{value:t.value.moduleNo,"onUpdate:value":a[0]||(a[0]=e=>t.value.moduleNo=e),placeholder:"请输入产品型号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:r(T,["enter"])},null,8,["value"])])),_:1})])),_:1}),u(n,{span:24,md:12,lg:6,xl:6,xxl:6},{default:i((()=>[u(s,{label:"工序",name:"processId",class:"m-0","label-col":{}},{default:i((()=>[u(M,{value:t.value.processId,"onUpdate:value":a[1]||(a[1]=e=>t.value.processId=e),placeholder:"请选择工序",class:"min-form-control","allow-clear":""},{default:i((()=>[(o(!0),p(m,null,v(z.value,(e=>(o(),d(U,{key:e.processId,value:e.processId},{default:i((()=>[f(h(e.processCaption),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),u(n,{span:24,md:12,lg:6,xl:6,xxl:6},{default:i((()=>[u(s,{label:"表面处理",name:"paramCaption",class:"m-0","label-col":{}},{default:i((()=>[u(M,{value:t.value.paramCaption,"onUpdate:value":a[2]||(a[2]=e=>t.value.paramCaption=e),placeholder:"请选择表面处理",class:"min-form-control","allow-clear":""},{default:i((()=>[(o(!0),p(m,null,v(D.value,(e=>(o(),d(U,{key:e.paramCode,value:e.paramCaption},{default:i((()=>[f(h(e.paramCaption),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),u(n,{span:24,md:12,lg:6,xl:6,xxl:6},{default:i((()=>[u(s,{label:"工单状态",name:"wipState",class:"m-0","label-col":{}},{default:i((()=>[u(M,{value:t.value.wipState,"onUpdate:value":a[3]||(a[3]=e=>t.value.wipState=e),placeholder:"请选择工单状态",class:"min-form-control","allow-clear":""},{default:i((()=>[(o(!0),p(m,null,v(j.value,(e=>(o(),d(U,{key:e.value,value:e.name},{default:i((()=>[f(h(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),u(n,{span:24,md:12,lg:6,xl:6,xxl:6},{default:i((()=>[u(s,{label:"生产类型",name:"pnType",class:"m-0","label-col":{}},{default:i((()=>[u(M,{value:t.value.pnType,"onUpdate:value":a[4]||(a[4]=e=>t.value.pnType=e),placeholder:"请选择生产类型",class:"min-form-control","allow-clear":""},{default:i((()=>[(o(!0),p(m,null,v(Q.value,(e=>(o(),d(U,{key:e.value,value:e.name},{default:i((()=>[f(h(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),u(n,{span:24,md:12,lg:6,xl:6,xxl:6},{default:i((()=>[u(s,{label:"投料日期",name:"time",class:"m-0","label-col":{}},{default:i((()=>[u(Y,{value:t.value.time,"onUpdate:value":a[5]||(a[5]=e=>t.value.time=e),"value-format":"YYYY-MM-DD",class:"min-form-control"},null,8,["value"])])),_:1})])),_:1}),c("div",$,[u(s,{class:"m-0"},{default:i((()=>[c("div",q,[u(F,{type:"primary",ghost:"",class:"mini-btn",onClick:T},{icon:i((()=>[u(A,{class:"align-sub text-icon"})])),default:i((()=>[c("span",B,h(e.$t("common.search")),1)])),_:1}),u(F,{class:"mini-btn",onClick:P},{icon:i((()=>[u(K,{class:"align-sub text-icon"})])),default:i((()=>[c("span",E,h(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),K={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},L=Object.assign({name:"plan-scheduling_online-programs"},{__name:"index",setup(l){const t=n({moduleNo:"",processId:"",paramCaption:"",wipState:"",pnType:"",modulepnTypeNo:"",time:["",""]}),s=T(),d=z({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,a)=>{d.current=e,d.pageSize=a,h()}}),r=n([{key:"index",dataIndex:"index",title:"序号",width:90,align:"center",checked:!0},{key:"prodNo",dataIndex:"prodNo",title:"产品型号",width:150,align:"center",checked:!0,ellipsis:!0},{key:"holesTotal",dataIndex:"holesTotal",title:"总孔数",width:100,align:"center",checked:!0,ellipsis:!0},{key:"orderNum",dataIndex:"orderNum",title:"订单数量",width:100,align:"center",checked:!0,ellipsis:!0},{key:"processCaption",dataIndex:"processCaption",title:"工序",width:100,align:"center",checked:!0,ellipsis:!0},{key:"techName",dataIndex:"techName",title:"工艺",width:100,align:"center",checked:!0,ellipsis:!0},{key:"paramCaption",dataIndex:"paramCaption",title:"表面处理",width:100,align:"center",checked:!0,ellipsis:!0},{key:"prodDate",dataIndex:"prodDate",title:"投料日期",width:180,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>null==e.prodDate?null:j(e.prodDate)},{key:"ppcDate",dataIndex:"ppcDate",title:"计划回复日期",width:130,align:"center",checked:!0,ellipsis:!0},{key:"wipQty",dataIndex:"wipQty",title:"在线制程数量",width:130,align:"center",checked:!0,ellipsis:!0},{key:"planQty",dataIndex:"planQty",title:"计划完成数",width:130,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>u(x,{value:e.planQty,onChange:a=>{e.planQty=a.target.value}},null)},{key:"pnlPcs",dataIndex:"pnlPcs",title:"PNL拼板数",width:100,align:"center",checked:!0,ellipsis:!0},{key:"remainTime",dataIndex:"remainTime",title:"停留时间(小时)",width:120,align:"center",checked:!0,ellipsis:!0},{key:"wipState",dataIndex:"wipState",title:"工单状态",width:100,align:"center",checked:!0,ellipsis:!0},{key:"pnType",dataIndex:"pnType",title:"生产类型",width:100,align:"center",checked:!0,ellipsis:!0},{key:"remark",dataIndex:"remark",title:"备注",width:100,align:"center",checked:!0,ellipsis:!0}]),m=n([]),v=n(!1),f=n([]);function h(){v.value=!0,P({pageSize:d.pageSize,pageNum:d.current,...t.value}).then((({data:e,error:a})=>{a||(e.list.forEach(((e,a)=>{e.index=a+1,e.uid=D.genV4().hexNoDelim})),m.value=e.list,d.total=e.total)})).finally((()=>{v.value=!1}))}function g(){d.current=1,h()}h();const y=n(null),w=e=>({style:{background:e.uid===y.value?"#BAEAFA":""},class:e.uid===y.value?"jl-table-row-selected":"",onClick:()=>{y.value=e.uid}});return(l,n)=>{const x=a,y=I,k=e,_=Q("STable"),b=O;return o(),p("div",K,[u(F,{model:t.value,"onUpdate:model":n[0]||(n[0]=e=>t.value=e),onReset:n[1]||(n[1]=e=>g()),onSearch:n[2]||(n[2]=e=>g())},null,8,["model"]),u(b,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:i((()=>[u(y,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:n[3]||(n[3]=e=>function(){const e=m.value;Y(e).then((({data:e,error:a})=>{a||(window.$message.success("提交成功"),h())}))}())},{icon:i((()=>[u(x,{class:"align-sub text-icon"})])),default:i((()=>[n[6]||(n[6]=c("span",{class:"ml-3px"},"提 交",-1))])),_:1}),u(y,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:n[4]||(n[4]=e=>{A({pageSize:d.pageSize,pageNum:d.current,userId:s.userInfo.user.userId,...t.value})})},{icon:i((()=>n[7]||(n[7]=[]))),default:i((()=>[n[8]||(n[8]=c("span",{class:"ml-3px"},"导出",-1))])),_:1})])),extra:i((()=>[u(k,{columns:r.value,"onUpdate:columns":n[5]||(n[5]=e=>r.value=e)},null,8,["columns"])])),default:i((()=>[u(_,{columns:r.value,"data-source":m.value,size:"small",bordered:"",loading:v.value,"default-expanded-row-keys":f.value,"row-key":"uid","default-expand-all-rows":!0,scroll:{x:"auto",y:"auto"},pagination:d,"custom-row":w,class:"h-full"},null,8,["columns","data-source","loading","default-expanded-row-keys","pagination"])])),_:1})])}}});export{L as default};
