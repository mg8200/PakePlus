import{_ as e}from"./table-DoFSI9NT.js";import{u as l}from"./searchData-DpjdfxBw.js";import{d as a,r as t,p as s,S as n,o as i,e as c,g as u,w as r,f as o,s as d,I as m,v as p,N as f,O as x,B as h,P as v,Q as g,F as _,K as y,L as k,h as w,t as b,aj as I,a5 as q,ak as T,M as j,i as C,V as S}from"./index-B3PZsRwT.js";import{_ as E}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{_ as U}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{b as z}from"./equipment-alarm-info-RrvTGqWc.js";import{C as N}from"./index-BThgVJ70.js";import"./api-By23aosn.js";const K={class:"jl-main-page h-full flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},P={class:"w-full flex"},D={class:"flex"},L={class:"w-full flex-y-center justify-end gap-12px"},O=a({__name:"code-list",setup(e,{expose:l}){const a=t(null),y=t([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"equipmentId",dataIndex:"equipmentId",title:"设备代码",align:"center",checked:!0,ellipsis:!0},{key:"description",dataIndex:"description",title:"设备描述",align:"center",checked:!0,ellipsis:!0}]),k=t(null),w=t({type:"radio",onChange:e=>{k.value=e[0]}}),b=t([]),I=t(!1),q=s({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:(e,l)=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{q.current=e,q.pageSize=l,C()}});function T(){q.current=1,C()}function j(){a.value=null,q.current=1,C()}function C(){const e={equipmentId:a.value,pageSize:q.pageSize,pageNum:q.current};I.value=!0,z(e).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1})),q.total=e.total,b.value=e.list)})).finally((()=>I.value=!1))}return C(),l({currentSelect:k}),(e,l)=>{const t=m,s=p,k=f,C=x,S=h,E=v,z=g,O=_,Q=N,R=U,M=n("STable");return i(),c("div",K,[u(Q,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:r((()=>[u(O,{"label-col":{span:5,md:7},class:"search-form"},{default:r((()=>[o("div",P,[u(z,{gutter:[15,8],wrap:"",class:"w-full"},{default:r((()=>[u(k,{span:24,md:12,lg:8,xl:8,xxl:8},{default:r((()=>[u(s,{label:"设备代码",name:"equipmentId",class:"m-0","label-col":{}},{default:r((()=>[u(t,{value:a.value,"onUpdate:value":l[0]||(l[0]=e=>a.value=e),placeholder:"请输入设备代码",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(T,["enter"])},null,8,["value"])])),_:1})])),_:1}),o("div",D,[u(s,{class:"m-0"},{default:r((()=>[o("div",L,[u(S,{type:"primary",ghost:"",class:"mini-btn",onClick:T},{icon:r((()=>[u(C,{class:"align-sub text-icon"})])),default:r((()=>[l[2]||(l[2]=o("span",{class:"ml-3px"},"搜索",-1))])),_:1}),u(S,{class:"mini-btn",onClick:j},{icon:r((()=>[u(E,{class:"align-sub text-icon"})])),default:r((()=>[l[3]||(l[3]=o("span",{class:"ml-3px"},"重置",-1))])),_:1})])])),_:1})])])),_:1})])])),_:1})])),_:1}),u(Q,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card h-full flex-col-stretch sm:flex-1-hidden card-wrapper"},{extra:r((()=>[u(R,{columns:y.value,"onUpdate:columns":l[1]||(l[1]=e=>y.value=e)},null,8,["columns"])])),default:r((()=>[u(M,{columns:y.value,"data-source":b.value,bordered:"","row-selection":w.value,size:"small",loading:I.value,"row-key":"equipmentId",pagination:q,scroll:{x:"auto",y:"auto"},"row-height":23,class:"h-full"},null,8,["columns","data-source","row-selection","loading","pagination"])])),_:1})])}}}),Q={class:"w-full flex"},R={class:"flex"},M={class:"w-full flex-y-center justify-end gap-12px"},A={class:"ml-3px"},B=a({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:y(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,s=k(e,"model"),n=t(!1),y=t(null);function C(){a("search",s.value)}function S(){s.value={equipmentId:null,alarmText:null,time:null},a("reset",s.value)}function U(){n.value=!0}function z(){q((()=>{s.value.equipmentId=y.value.currentSelect,n.value=!1,a("search",s.value)}))}return(e,l)=>{const a=m,t=h,k=T,q=p,K=f,P=j,D=x,L=v,B=g,F=_,J=N;return i(),c(I,null,[u(J,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:r((()=>[u(F,{model:s.value,"label-col":{span:5,md:7},class:"search-form"},{default:r((()=>[o("div",Q,[u(B,{gutter:[15,8],wrap:"",class:"w-full"},{default:r((()=>[u(K,{span:24,md:12,lg:8,xl:8,xxl:6},{default:r((()=>[u(q,{label:"设备代码",name:"equipmentId",class:"m-0","label-col":{}},{default:r((()=>[u(k,{compact:""},{default:r((()=>[u(a,{value:s.value.equipmentId,"onUpdate:value":l[0]||(l[0]=e=>s.value.equipmentId=e),style:{width:"calc(100% - 63px)"},class:"min-form-control",autocomplete:"off",onKeypress:d(C,["enter"])},null,8,["value"]),u(t,{type:"primary",class:"mini-btn",onClick:U},{default:r((()=>l[4]||(l[4]=[w("搜索")]))),_:1})])),_:1})])),_:1})])),_:1}),u(K,{span:24,md:12,lg:8,xl:8,xxl:6},{default:r((()=>[u(q,{label:"告警内容",name:"alarmText",class:"m-0","label-col":{}},{default:r((()=>[u(a,{value:s.value.alarmText,"onUpdate:value":l[1]||(l[1]=e=>s.value.alarmText=e),placeholder:"请输入告警内容",class:"min-form-control",autocomplete:"off",onKeypress:d(C,["enter"])},null,8,["value"])])),_:1})])),_:1}),u(K,{span:24,md:12,lg:8,xl:8,xxl:6},{default:r((()=>[u(q,{label:"计划时间",name:"time",class:"m-0","label-col":{}},{default:r((()=>[u(P,{value:s.value.time,"onUpdate:value":l[2]||(l[2]=e=>s.value.time=e),"show-time":"",class:"min-form-control"},null,8,["value"])])),_:1})])),_:1}),o("div",R,[u(q,{class:"m-0"},{default:r((()=>[o("div",M,[u(t,{type:"primary",ghost:"",class:"mini-btn",onClick:C},{icon:r((()=>[u(D,{class:"align-sub text-icon"})])),default:r((()=>[l[5]||(l[5]=o("span",{class:"ml-3px"},"查询",-1))])),_:1}),u(t,{class:"mini-btn",onClick:S},{icon:r((()=>[u(L,{class:"align-sub text-icon"})])),default:r((()=>[o("span",A,b(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1}),u(E,{visible:n.value,"onUpdate:visible":l[3]||(l[3]=e=>n.value=e),title:"代码列表",height:"70vh",width:"800px",onOk:z},{default:r((()=>[u(O,{ref_key:"codeListRef",ref:y},null,512)])),_:1},8,["visible"])],64)}}}),F={class:"jl-main-page one-code-ascend min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},J=a({name:"collection-management_press-equipment-alarm-info-search",__name:"index",setup(a){const s=t({equipmentId:null,alarmText:null,time:null}),n=t([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"mainEqpId",dataIndex:"mainEqpId",title:"线体代码",width:140,align:"center",checked:!0,ellipsis:!0},{key:"mainEqpName",dataIndex:"mainEqpName",title:"线体名称",width:160,align:"center",checked:!0,ellipsis:!0},{key:"subEqpId",dataIndex:"subEqpId",title:"设备",width:160,align:"center",checked:!0,ellipsis:!0},{key:"subEqpName",dataIndex:"subEqpName",title:"设备名称",width:160,align:"center",checked:!0,ellipsis:!0},{key:"dateTime",dataIndex:"dateTime",title:"建立时间",align:"center",checked:!0,ellipsis:!0},{key:"alarmId",dataIndex:"alarmId",title:"警报代码",align:"center",checked:!0,width:100,ellipsis:!0},{key:"alarmCategory",dataIndex:"alarmCategory",title:"警报类型",align:"center",width:100,checked:!0,ellipsis:!0},{key:"alarmText",dataIndex:"alarmText",title:"警报内容",align:"center",width:200,checked:!0,ellipsis:!0},{key:"startTime",dataIndex:"startTime",title:"开始时间",align:"center",checked:!0,ellipsis:!0},{key:"endTime",dataIndex:"endTime",title:"结束时间",align:"center",checked:!0,ellipsis:!0}]),r=t(),o=l(s);function d(){s.value={equipmentId:null,alarmText:null,time:null},q((()=>{m()}))}function m(){r.value.getData(1)}return(l,a)=>{const t=e;return i(),c("div",F,[u(B,{model:s.value,"onUpdate:model":a[0]||(a[0]=e=>s.value=e),onReset:d,onSearch:m},null,8,["model"]),u(t,{ref_key:"tableRef",ref:r,searchParams:C(o),"onUpdate:searchParams":a[1]||(a[1]=e=>S(o)?o.value=e:null),column:n.value,"auto-generate-uuid":!0,"show-row-selection":!1,url:"/mes/equipment-alarm-info/pressList",class:"h-full"},null,8,["searchParams","column"])])}}});export{J as default};
