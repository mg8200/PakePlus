import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as l,K as a,L as t,o as s,c as n,w as i,g as o,f as u,s as d,t as r,I as c,v as p,N as m,M as v,O as f,B as h,P as x,Q as g,F as w,r as y,p as _,db as k,a7 as b,S as N,e as D,h as I,W as C}from"./index-B3PZsRwT.js";import{D as A,E as S}from"./index-DqnulfE2.js";import{_ as j}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as z}from"./index-BThgVJ70.js";const T={class:"w-full flex"},U={class:"flex"},R={class:"w-full flex-y-center justify-end gap-12px"},E={class:"ml-3px"},K={class:"ml-3px"},M=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:a(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,y=t(e,"model");function _(){a("search",y.value)}function k(){y.value.supplierName=null,y.value.supplierNo=null,y.value.time=null,a("reset",y.value)}return(e,l)=>{const a=c,t=p,b=m,N=v,D=f,I=h,C=x,A=g,S=w,j=z;return s(),n(j,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:i((()=>[o(S,{model:y.value,"label-col":{span:5,md:7},class:"search-form"},{default:i((()=>[u("div",T,[o(A,{gutter:[15,8],wrap:"",class:"w-full"},{default:i((()=>[o(b,{span:24,md:12,lg:6,xl:8,xxl:4},{default:i((()=>[o(t,{label:"供应商名称",name:"supplierName",class:"m-0","label-col":{}},{default:i((()=>[o(a,{value:y.value.supplierName,"onUpdate:value":l[0]||(l[0]=e=>y.value.supplierName=e),placeholder:"请输入供应商名称",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(_,["enter"])},null,8,["value"])])),_:1})])),_:1}),o(b,{span:24,md:12,lg:6,xl:8,xxl:4},{default:i((()=>[o(t,{label:"供应商编码",name:"supplierNo",class:"m-0","label-col":{}},{default:i((()=>[o(a,{value:y.value.supplierNo,"onUpdate:value":l[1]||(l[1]=e=>y.value.supplierNo=e),placeholder:"请输入供应商编码",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(_,["enter"])},null,8,["value"])])),_:1})])),_:1}),o(b,{span:24,md:12,lg:8,xl:8,xxl:6},{default:i((()=>[o(t,{label:"时间范围",name:"time",class:"m-0","label-col":{}},{default:i((()=>[o(N,{value:y.value.time,"onUpdate:value":l[2]||(l[2]=e=>y.value.time=e),"show-time":"",class:"min-form-control","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["value"])])),_:1})])),_:1}),u("div",U,[o(t,{class:"m-0"},{default:i((()=>[u("div",R,[o(I,{type:"primary",ghost:"",class:"mini-btn",onClick:_},{icon:i((()=>[o(D,{class:"align-sub text-icon"})])),default:i((()=>[u("span",E,r(e.$t("common.search")),1)])),_:1}),o(I,{class:"mini-btn",onClick:k},{icon:i((()=>[o(C,{class:"align-sub text-icon"})])),default:i((()=>[u("span",K,r(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),Y={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},O={class:"event-form"},$={class:"modal-footer"},B=Object.assign({name:"erpdatasync_supplier-information"},{__name:"index",setup(l){const a=y({supplierName:""}),t=_({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{t.current=e,t.pageSize=l,f()}}),n=y([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0},{key:"supplierName",dataIndex:"supplierName",title:"供应商名称",width:250,align:"center",checked:!0,ellipsis:!0},{key:"supplierNo",dataIndex:"supplierNo",title:"供应商编码",width:100,align:"center",checked:!0,ellipsis:!0},{key:"supplierAb",dataIndex:"supplierAb",title:"缩写名称",width:100,align:"center",checked:!0,ellipsis:!0},{key:"type",dataIndex:"type",title:"供应商类型",width:120,align:"center",checked:!0,ellipsis:!0},{key:"cmpAddress",dataIndex:"cmpAddress",title:"公司地址",width:300,align:"center",checked:!0,ellipsis:!0},{key:"regAddress",dataIndex:"regAddress",title:"注册地址",width:250,align:"center",checked:!0,ellipsis:!0},{key:"createDate",dataIndex:"createDate",title:"创建时间",width:120,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>null==e.createDate?null:k(e.createDate)},{key:"updateDate",dataIndex:"updateDate",title:"修改时间",width:120,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>null==e.updateDate?null:k(e.updateDate)},{key:"lmTime",dataIndex:"lmTime",title:"同步时间",width:120,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>null==e.lmTime?null:k(e.lmTime)}]),d=y({}),r=y(!1),c=[{type:"input",key:"supplierNo",label:"供应商编码",placeholder:"请输入供应商编码",span:24}],p=y([]),m=y(!1),v=y([]);function f(){var e;m.value=!0;const l={...a.value};(null==(e=a.value.time)?void 0:e[0])&&(l.beginTime=l.time[0],l.endTime=l.time[1],delete l.time),A({pageSize:t.pageSize,pageNum:t.current,...l}).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1,e.uid=b.genV4().hexNoDelim})),p.value=e.list,t.total=e.total)})).finally((()=>{m.value=!1}))}const x=y([]);function g(e){x.value=e}function w(){d.value={},r.value=!0}function T(){S(d.value).then((({data:e,error:l})=>{var a;l||(null==(a=window.$message)||a.success("手动同步成功"),r.value=!1,f())}))}function U(){t.current=1,f()}f();const R=y(null),E=e=>({style:{background:e.uid===R.value?"#BAEAFA":""},class:e.uid===R.value?"jl-table-row-selected":"",onClick:()=>{R.value=e.uid}});return(l,f)=>{const y=h,_=e,k=N("STable"),b=z;return s(),D("div",Y,[o(M,{model:a.value,"onUpdate:model":f[0]||(f[0]=e=>a.value=e),onReset:f[1]||(f[1]=e=>U()),onSearch:f[2]||(f[2]=e=>U())},null,8,["model"]),o(b,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:i((()=>[o(y,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:w},{default:i((()=>f[7]||(f[7]=[u("span",{class:"ml-3px"},"手动同步",-1)]))),_:1})])),extra:i((()=>[o(_,{columns:n.value,"onUpdate:columns":f[3]||(f[3]=e=>n.value=e)},null,8,["columns"])])),default:i((()=>[o(k,{columns:n.value,"data-source":p.value,size:"small",bordered:"",loading:m.value,"row-selection":{selectedRowKeys:x.value,onChange:g},"default-expanded-row-keys":v.value,"row-key":"uid","default-expand-all-rows":!0,scroll:{x:2e3,y:"auto"},pagination:t,class:"h-full","custom-row":E,"row-height":23},null,8,["columns","data-source","loading","row-selection","default-expanded-row-keys","pagination"]),o(j,{visible:r.value,"onUpdate:visible":f[6]||(f[6]=e=>r.value=e),"destroy-on-close":!0,title:"手动供应商信息",width:"550px"},{footer:i((()=>[u("div",$,[o(y,{onClick:f[5]||(f[5]=e=>r.value=!1)},{default:i((()=>f[8]||(f[8]=[I("关闭")]))),_:1}),o(y,{type:"primary",onClick:T},{default:i((()=>f[9]||(f[9]=[I("保存")]))),_:1})])])),default:i((()=>[u("div",O,[o(C,{model:d.value,"onUpdate:model":f[4]||(f[4]=e=>d.value=e),"form-list":c},null,8,["model"])])])),_:1},8,["visible"])])),_:1})])}}});export{B as default};
