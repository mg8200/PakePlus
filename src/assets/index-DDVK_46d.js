import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{g as l,Y as a,d as t,K as s,L as n,o,c,w as u,f as i,s as d,h as r,t as m,I as p,v as f,N as v,ad as y,ae as g,O as b,B as x,P as h,Q as _,F as w,n as k,q as T,r as C,a0 as j,dv as z,dw as I,cn as N,de as O,d6 as S,a as R,p as U,dj as P,db as A,a3 as H,a2 as $,dx as F,dy as K,S as M,e as B,a1 as V,i as q,a6 as E,aD as D,dz as J,dA as L,ab as Q,J as G}from"./index-B3PZsRwT.js";import{_ as Y}from"./round-download-DUbhM0Ds.js";import{_ as W}from"./round-delete-DScxCu5A.js";import{_ as X}from"./round-edit-DZi1TDWc.js";import{_ as Z}from"./round-add-MytOGm9O.js";import{_ as ee}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as le}from"./index-BThgVJ70.js";var ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};function te(e){for(var l=1;l<arguments.length;l++){var a=null!=arguments[l]?Object(arguments[l]):{},t=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),t.forEach((function(l){se(e,l,a[l])}))}return e}function se(e,l,a){return l in e?Object.defineProperty(e,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[l]=a,e}var ne=function(e,t){var s=te({},e,t.attrs);return l(a,te({},s,{icon:ae}),null)};ne.displayName="CopyOutlined",ne.inheritAttrs=!1;const oe={class:"w-full flex"},ce={class:"flex"},ue={class:"w-full flex-y-center justify-end gap-12px"},ie={class:"ml-3px"},de={class:"ml-3px"},re=t({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:s(["search","reset"],["update:model"]),setup(e,{emit:a}){const t=a,s=n(e,"model");function k(){t("search",s.value)}function T(){s.value.dictType=null,s.value.dictName=null,s.value.status=null,t("reset",s.value)}return(e,a)=>{const t=p,n=f,C=v,j=y,z=g,I=b,N=x,O=h,S=_,R=w,U=le;return o(),c(U,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:u((()=>[l(R,{model:s.value,"label-col":{span:5,md:7},class:"search-form"},{default:u((()=>[i("div",oe,[l(S,{gutter:[15,8],wrap:"",class:"w-full"},{default:u((()=>[l(C,{span:24,md:12,lg:6,xl:8,xxl:4},{default:u((()=>[l(n,{label:"字典编码",name:"dictType",class:"m-0","label-col":{}},{default:u((()=>[l(t,{value:s.value.dictType,"onUpdate:value":a[0]||(a[0]=e=>s.value.dictType=e),placeholder:"请输入字典编码",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(k,["enter"])},null,8,["value"])])),_:1})])),_:1}),l(C,{span:24,md:12,lg:6,xl:8,xxl:4},{default:u((()=>[l(n,{label:"字典名称",name:"dictName",class:"m-0","label-col":{}},{default:u((()=>[l(t,{value:s.value.dictName,"onUpdate:value":a[1]||(a[1]=e=>s.value.dictName=e),placeholder:"请输入字典名称",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(k,["enter"])},null,8,["value"])])),_:1})])),_:1}),l(C,{span:24,md:12,lg:6,xl:8,xxl:4},{default:u((()=>[l(n,{label:"字典状态",name:"status",class:"m-0","label-col":{}},{default:u((()=>[l(z,{value:s.value.status,"onUpdate:value":a[2]||(a[2]=e=>s.value.status=e),placeholder:"请选择字典状态","allow-clear":"",class:"min-form-control"},{default:u((()=>[l(j,{value:"0"},{default:u((()=>a[3]||(a[3]=[r("正常")]))),_:1}),l(j,{value:"1"},{default:u((()=>a[4]||(a[4]=[r("停用")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),i("div",ce,[l(n,{class:"m-0"},{default:u((()=>[i("div",ue,[l(N,{type:"primary",ghost:"",class:"mini-btn",onClick:k},{icon:u((()=>[l(I,{class:"align-sub text-icon"})])),default:u((()=>[i("span",ie,m(e.$t("common.search")),1)])),_:1}),l(N,{class:"mini-btn",onClick:T},{icon:u((()=>[l(O,{class:"align-sub text-icon"})])),default:u((()=>[i("span",de,m(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),me={__name:"add",props:{currentRow:{type:Object,default:()=>null},operateType:{type:String,default:()=>null}},emits:["success"],setup(e,{expose:a,emit:t}){const s=e,n=t,{formRef:i,validate:d}=k(),{createRequiredRule:m}=T(),y={dictName:m("请输入字典名称"),dictType:m("请输入字典编码")},g=C({dictName:null,dictType:null,status:"0",remark:null});return j((()=>s.currentRow),(e=>{if(e){const{dictName:l,dictType:a,status:t,remark:s}=e;g.value={dictName:l,dictType:a,status:t,remark:s}}else g.value={dictName:null,dictType:null,status:"0",remark:null}}),{deep:!0,immediate:!0}),a({submitForm:async function(){if(!s.operateType)return;let e;await d(),e="edit"===s.operateType?z({dictId:s.currentRow.dictId,...g.value}):I(g.value),e.then((({error:e})=>{var l;e||(null==(l=null==window?void 0:window.$message)||l.success("操作成功!"),n("success"))}))}}),(e,a)=>{const t=p,s=f,n=v,d=N,m=O,b=S,x=_,h=w;return o(),c(h,{ref_key:"formRef",ref:i,model:g.value,rules:y,"label-col":{lg:8,xs:4},"label-wrap":""},{default:u((()=>[l(x,{gutter:20},{default:u((()=>[l(n,{lg:24,xs:24},{default:u((()=>[l(s,{name:"dictName",label:"字典名称","label-col":{}},{default:u((()=>[l(t,{value:g.value.dictName,"onUpdate:value":a[0]||(a[0]=e=>g.value.dictName=e),placeholder:"请输入字典名称",autocomplete:"off"},null,8,["value"])])),_:1})])),_:1}),l(n,{lg:24,xs:24},{default:u((()=>[l(s,{name:"dictType",label:"字典编码","label-col":{}},{default:u((()=>[l(t,{value:g.value.dictType,"onUpdate:value":a[1]||(a[1]=e=>g.value.dictType=e),placeholder:"请输入字典编码",autocomplete:"off"},null,8,["value"])])),_:1})])),_:1}),l(n,{lg:24,xs:24},{default:u((()=>[l(s,{name:"status",label:"字典状态","label-col":{}},{default:u((()=>[l(m,{value:g.value.status,"onUpdate:value":a[2]||(a[2]=e=>g.value.status=e)},{default:u((()=>[l(d,{value:"0"},{default:u((()=>a[4]||(a[4]=[r("正常")]))),_:1}),l(d,{value:"1"},{default:u((()=>a[5]||(a[5]=[r("停用")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),l(n,{lg:24,xs:24,class:"mt-15px"},{default:u((()=>[l(s,{name:"remark",label:"备注","label-col":{}},{default:u((()=>[l(b,{value:g.value.remark,"onUpdate:value":a[3]||(a[3]=e=>g.value.remark=e),placeholder:"请输入备注",rows:4,autocomplete:"off"},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])}}},pe={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},fe={key:0,class:"popup"},ve=["onClick"],ye={class:"modal-footer"};const ge=G(Object.assign({name:"manage_dict"},{__name:"index",setup(a){const{routerPushByKey:t}=R(),s=C({dictName:null,dictType:null,status:null}),n=U({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{n.current=e,n.pageSize=l,p()}}),c=C([{key:"dictId",dataIndex:"dictId",title:"字典编号",align:"center",width:150,checked:!0,ellipsis:!0},{key:"dictName",dataIndex:"dictName",title:"字典名称",align:"center",checked:!0,ellipsis:!0},{key:"dictType",dataIndex:"dictType",title:"字典类型",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>l(x,{type:"link",onClick:()=>{t("manage_ditc-item",{params:{id:e.dictId}})}},{default:()=>[e.dictType]})},{key:"status",dataIndex:"status",title:"状态",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>{if(null===e.status)return null;const a=0==e.status?"正常":"停用";return l(P,{color:{0:"success",1:"error"}[e.status]||"error"},"function"==typeof(t=a)||"[object Object]"===Object.prototype.toString.call(t)&&!D(t)?a:{default:()=>[a]});var t}},{key:"remark",dataIndex:"remark",title:"备注",align:"center",checked:!0,ellipsis:!0},{key:"createTime",dataIndex:"createTime",title:"创建时间",align:"center",checked:!0,width:170,ellipsis:!0,customRender:({record:e})=>null==e.createTime?null:A(e.createTime)},{key:"cz",dataIndex:"createTime",title:"操作",align:"center",width:200,checked:!0,ellipsis:!0,customRender:({record:e})=>l("div",null,[l(x,{type:"link",size:"small",onClick:()=>z("edit",e)},{default:()=>[l(X,{class:"align-sub text-icon"},null),r("修改")]}),H(l(x,{type:"link",size:"small",danger:!0,onClick:()=>{_(e)}},{default:()=>[l(W,{class:"align-sub text-icon"},null),r("删除")]}),[[$("if"),0!==e.parentId]])])}]),d=C([]),m=C(!1);function p(){m.value=!0;const e={...s.value,pageSize:n.pageSize,pageNum:n.current};F(e).then((({data:e,error:l})=>{l||(n.total=(null==e?void 0:e.total)||0,d.value=e.rows)})).finally((()=>{m.value=!1}))}function f(){n.current=1,p()}p();const v=C(null),y=e=>({style:{background:e.dictId===v.value?"#BAEAFA":""},class:e.dictId===v.value?"jl-table-row-selected":"",onClick:()=>{v.value=e.dictId}}),g=C([]);function b(e){g.value=e}function _(e){let l="";l=e?e.dictId:g.value.join(),window.$modal.confirm({title:'是否确认删除字典编号为"'.concat(l,'"的数据项？'),onOk:()=>{K(l).then((({error:e})=>{e||(window.$message.success("删除成功"),p())}))}})}const w=C(null),k=C("add"),T=C(!1),j=C(null);function z(e,l=null){"number"==typeof l&&(l=d.value.find((e=>e.postId==l))),w.value=l,k.value=e,T.value=!0}function I(){j.value.submitForm()}function N(){T.value=!1,w.value=null}function O(){p(),N()}function S(){const e={...s.value,pageSize:n.pageSize,pageNum:n.current};J(e)}function G(){L().then((({error:e})=>{e||window.$message.success("刷新成功")}))}const ae=e=>{const l=document.createElement("input");l.setAttribute("readonly","readonly"),l.setAttribute("value",e),document.body.appendChild(l),l.select(),document.execCommand("copy")&&(document.execCommand("copy"),Q.info("复制成功")),document.body.removeChild(l)};return(a,t)=>{const p=Z,v=x,C=X,R=W,U=Y,P=h,A=e,H=M("STable"),$=le;return o(),B("div",pe,[l(re,{model:s.value,"onUpdate:model":t[0]||(t[0]=e=>s.value=e),onReset:t[1]||(t[1]=e=>f()),onSearch:t[2]||(t[2]=e=>f())},null,8,["model"]),l($,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:u((()=>[l(v,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:t[3]||(t[3]=e=>z("add"))},{icon:u((()=>[l(p,{class:"align-sub text-icon"})])),default:u((()=>[t[9]||(t[9]=i("span",{class:"ml-3px"},"新增",-1))])),_:1}),l(v,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",disabled:1!=g.value.length,onClick:t[4]||(t[4]=e=>z("edit",g.value[0]))},{icon:u((()=>[l(C,{class:"align-sub text-icon"})])),default:u((()=>[t[10]||(t[10]=i("span",{class:"ml-3px"},"修改",-1))])),_:1},8,["disabled"]),l(v,{danger:"",size:"small",ghost:"",class:"mini-btn mr-8px",disabled:0==g.value.length,onClick:t[5]||(t[5]=e=>_())},{icon:u((()=>[l(R,{class:"align-sub text-icon"})])),default:u((()=>[t[11]||(t[11]=i("span",{class:"ml-3px"},"删除",-1))])),_:1},8,["disabled"]),l(v,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:S},{icon:u((()=>[l(U,{class:"align-sub text-icon"})])),default:u((()=>[t[12]||(t[12]=i("span",{class:"ml-3px"},"导出",-1))])),_:1}),l(v,{type:"primary",danger:"",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:G},{icon:u((()=>[l(P,{class:"align-sub text-icon"})])),default:u((()=>[t[13]||(t[13]=i("span",{class:"ml-3px"},"刷新缓存",-1))])),_:1})])),extra:u((()=>[l(A,{columns:c.value,"onUpdate:columns":t[6]||(t[6]=e=>c.value=e)},null,8,["columns"])])),default:u((()=>[l(H,{columns:c.value,"data-source":d.value,size:"small",loading:m.value,"row-selection":{selectedRowKeys:g.value,onChange:b},"row-key":"dictId","default-expand-all-rows":!0,scroll:{x:"auto",y:"auto"},pagination:n,"custom-row":y,class:"h-full","row-height":23},{contextmenuPopup:u((e=>["dictType"===e.column.key?(o(),B("ul",fe,[i("li",{class:V(["popup-item","operation"===e.column.key&&"disabled"]),onClick:l=>(e=>{"operation"!==e.column.key&&(ae(e.text),e.hidePopup())})(e)},[l(q(ne)),t[14]||(t[14]=r(" 复制 "))],10,ve)])):E("",!0)])),_:1},8,["columns","data-source","loading","row-selection","pagination"])])),_:1}),l(ee,{visible:T.value,"onUpdate:visible":t[8]||(t[8]=e=>T.value=e),title:"".concat("add"==k.value?"新增":"修改","字典"),height:"500px",width:"650px","destroy-on-close":!0,onOk:I,onClose:N},{footer:u((()=>[i("div",ye,[l(v,{type:"primary",onClick:t[7]||(t[7]=e=>I())},{default:u((()=>t[15]||(t[15]=[r("确定")]))),_:1}),l(v,{onClick:N},{default:u((()=>t[16]||(t[16]=[r("取消")]))),_:1})])])),default:u((()=>[l(me,{ref_key:"addFormRef",ref:j,"dept-options":d.value,"current-row":w.value,"operate-type":k.value,onSuccess:O},null,8,["dept-options","current-row","operate-type"])])),_:1},8,["visible","title"])])}}}),[["__scopeId","data-v-5885fd16"]]);export{ge as default};
