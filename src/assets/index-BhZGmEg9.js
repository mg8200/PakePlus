import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as l,K as a,L as t,o as n,c as o,w as s,g as u,f as r,s as i,h as c,t as d,I as m,v,N as p,ad as f,ae as x,O as h,B as y,P as w,Q as g,F as _,U as b,cT as k,r as C,p as S,a9 as T,b as U,S as j,e as z,W as I,J as $}from"./index-B3PZsRwT.js";import{a as K,H as M,I as N,J as A}from"./index-DqnulfE2.js";import{_ as L}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as O}from"./index-BThgVJ70.js";const R={class:"w-full flex"},E={class:"flex"},J={class:"w-full flex-y-center justify-end gap-12px"},B={class:"ml-3px"},F={class:"ml-3px"},Q=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:a(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,b=t(e,"model");function k(){a("search",b.value)}function C(){b.value.waveform=null,b.value.min1=null,b.value.min2=null,b.value.front=null,b.value.rear=null,b.value.max1=null,b.value.max2=null,a("reset",b.value)}return(e,l)=>{const a=m,t=v,S=p,T=f,U=x,j=h,z=y,I=w,$=g,K=_,M=O;return n(),o(M,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:s((()=>[u(K,{model:b.value,"label-col":{span:5,md:7},class:"search-form"},{default:s((()=>[r("div",R,[u($,{gutter:[15,8],wrap:"",class:"w-full"},{default:s((()=>[u(S,{span:24,md:12,lg:6,xl:8,xxl:4},{default:s((()=>[u(t,{label:"波形",name:"waveform",class:"m-0","label-col":{}},{default:s((()=>[u(a,{value:b.value.waveform,"onUpdate:value":l[0]||(l[0]=e=>b.value.waveform=e),placeholder:"请输入波形",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:i(k,["enter"])},null,8,["value"])])),_:1})])),_:1}),u(S,{span:24,md:12,lg:6,xl:8,xxl:4},{default:s((()=>[u(t,{label:"小值分子",name:"min1",class:"m-0","label-col":{}},{default:s((()=>[u(a,{value:b.value.min1,"onUpdate:value":l[1]||(l[1]=e=>b.value.min1=e),placeholder:"请输入小值分子",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:i(k,["enter"])},null,8,["value"])])),_:1})])),_:1}),u(S,{span:24,md:12,lg:6,xl:8,xxl:4},{default:s((()=>[u(t,{label:"小值分母",name:"min2",class:"m-0","label-col":{}},{default:s((()=>[u(a,{value:b.value.min2,"onUpdate:value":l[2]||(l[2]=e=>b.value.min2=e),placeholder:"请输入小值分母",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:i(k,["enter"])},null,8,["value"])])),_:1})])),_:1}),u(S,{span:24,md:12,lg:6,xl:8,xxl:4},{default:s((()=>[u(t,{label:"前符号",name:"front",class:"m-0","label-col":{}},{default:s((()=>[u(U,{value:b.value.front,"onUpdate:value":l[3]||(l[3]=e=>b.value.front=e),placeholder:"请选择前符号",class:"min-form-control","allow-clear":""},{default:s((()=>[u(T,{value:"小于"},{default:s((()=>l[7]||(l[7]=[c("＜")]))),_:1}),u(T,{value:"小于等于"},{default:s((()=>l[8]||(l[8]=[c("≤")]))),_:1}),u(T,{value:"等于"},{default:s((()=>l[9]||(l[9]=[c("＝")]))),_:1}),u(T,{value:"大于"},{default:s((()=>l[10]||(l[10]=[c("＞")]))),_:1}),u(T,{value:"大于等于"},{default:s((()=>l[11]||(l[11]=[c("≥")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),u(S,{span:24,md:12,lg:6,xl:8,xxl:4},{default:s((()=>[u(t,{label:"后符号",name:"rear",class:"m-0","label-col":{}},{default:s((()=>[u(U,{value:b.value.rear,"onUpdate:value":l[4]||(l[4]=e=>b.value.rear=e),placeholder:"请选择后符号",class:"min-form-control","allow-clear":""},{default:s((()=>[u(T,{value:"小于"},{default:s((()=>l[12]||(l[12]=[c("＜")]))),_:1}),u(T,{value:"小于等于"},{default:s((()=>l[13]||(l[13]=[c("≤")]))),_:1}),u(T,{value:"等于"},{default:s((()=>l[14]||(l[14]=[c("＝")]))),_:1}),u(T,{value:"大于"},{default:s((()=>l[15]||(l[15]=[c("＞")]))),_:1}),u(T,{value:"大于等于"},{default:s((()=>l[16]||(l[16]=[c("≥")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),u(S,{span:24,md:12,lg:6,xl:8,xxl:4},{default:s((()=>[u(t,{label:"大值分子",name:"max1",class:"m-0","label-col":{}},{default:s((()=>[u(a,{value:b.value.max1,"onUpdate:value":l[5]||(l[5]=e=>b.value.max1=e),placeholder:"请输入大值分子",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:i(k,["enter"])},null,8,["value"])])),_:1})])),_:1}),u(S,{span:24,md:12,lg:6,xl:8,xxl:4},{default:s((()=>[u(t,{label:"大值分母",name:"max2",class:"m-0","label-col":{}},{default:s((()=>[u(a,{value:b.value.max2,"onUpdate:value":l[6]||(l[6]=e=>b.value.max2=e),placeholder:"请输入大值分母",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:i(k,["enter"])},null,8,["value"])])),_:1})])),_:1}),r("div",E,[u(t,{class:"m-0"},{default:s((()=>[r("div",J,[u(z,{type:"primary",ghost:"",class:"mini-btn",onClick:k},{icon:s((()=>[u(j,{class:"align-sub text-icon"})])),default:s((()=>[r("span",B,d(e.$t("common.search")),1)])),_:1}),u(z,{class:"mini-btn",onClick:C},{icon:s((()=>[u(I,{class:"align-sub text-icon"})])),default:s((()=>[r("span",F,d(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),W={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},q={key:0,class:"event-form"},D={key:1,class:"event-form"},H={class:"modal-footer"},P=$(Object.assign({name:"issuance-management_electroplating-pulse"},{__name:"index",setup(l){b((e=>({"82834de6":le.value})));const a=k(),t=C({waveform:null,min1:null,min2:null,front:null,rear:null,max1:null,max2:null}),i=S({pageNum:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{i.pageNum=0==e?1:e,i.pageSize=l,w()}}),d=C([{key:"index",dataIndex:"index",title:"序号",width:100,align:"center",checked:!0},{key:"waveform",dataIndex:"waveform",title:"波形",width:130,align:"center",checked:!0,ellipsis:!0},{key:"inkColor",dataIndex:"inkColor",title:"厚径比",width:100,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>"".concat(e.min1,":").concat(e.min2).concat(e.front,"AR").concat(e.rear).concat(e.max1,":").concat(e.max2)},{key:"intervalMin",dataIndex:"intervalMin",title:"厚区间最小值",width:160,align:"center",checked:!0,ellipsis:!0},{key:"intervalMax",dataIndex:"intervalMax",title:"板厚区间最大值",width:160,align:"center",checked:!0,ellipsis:!0},{key:"waveformListStr",dataIndex:"waveformListStr",title:"适用流程",width:140,align:"center",checked:!0,ellipsis:!0},{key:"remark",dataIndex:"remark",title:"备注",width:120,align:"center",checked:!0,ellipsis:!0}]),m=[{type:"input",key:"waveform",label:"波形",placeholder:"请输入波形",span:8},{type:"input",key:"min1",label:"小值分子",placeholder:"请输入小值分母",span:8},{type:"input",key:"min2",label:"小值分母",placeholder:"请输入小值分子",span:8},{type:"dictionary",key:"front",dictCode:"judgment_symbol",label:"前符号",placeholder:"请选择前符号",selectType:"select",span:8,showTime:!0},{type:"input",key:"max1",placeholder:"请输入大值分母",label:"大值分子",span:8,showTime:!0},{type:"input",key:"max2",placeholder:"请输入大值分子",label:"大值分母",span:8,showTime:!0},{type:"dictionary",key:"rear",dictCode:"judgment_symbol",placeholder:"请选择后符号",selectType:"select",label:"后符号",span:8,showTime:!0},{type:"dictionary",key:"waveformList",label:"适用流程",dictCode:"applicable_process",selectType:"select",mode:"multiple",placeholder:"请选择适用流程",span:8},{type:"input",key:"intervalMin",placeholder:"请填写板厚区间最小值",label:"厚区间最小值",span:8,showTime:!0},{type:"input",key:"intervalMax",placeholder:"请填写板厚区间最大值",label:"板厚区间最大值",span:8,showTime:!0},{type:"input",key:"remark",placeholder:"请填写备注",label:"备注",span:8,showTime:!0}],v=C([]),p=C(!1),f=C([]),x=C(null),h=e=>({style:{background:e.id===x.value?"#BAEAFA":"","background-color":2===Number(e.failureState)?"rgb(247, 109, 109)":""},onClick(){x.value=e.id}});function w(){p.value=!0,t.value.pageNum=i.pageNum,t.value.pageSize=i.pageSize,K("mes/pulse/pulseWaveformSelection/list",{...t.value}).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1})),v.value=e.list,i.total=e.total)})).finally((()=>{p.value=!1}))}const g=C([]);function _(e){g.value=e}const $=C(!1),R=C(""),E=C(""),J=C("");function B(){var e;if(1!=g.value.length)return null==(e=window.$message)?void 0:e.error("请先选择一条数据");J.value="脉冲波形选择修改",R.value=v.value.find((e=>g.value[0]==e.id)),$.value=!0}function F(){J.value="脉冲波形选择新增",E.value={},$.value=!0}const P=C();function G(){R.value.front&&(R.value.front=P.value.find((e=>e.label==R.value.front||e.value==R.value.front)).value),R.value.rear&&(R.value.rear=P.value.find((e=>e.label==R.value.rear||e.value==R.value.rear)).value),M(R.value).then((({data:e,error:l})=>{var a;l||($.value=!1,R.value="",null==(a=window.$message)||a.success("修改成功"),g.value=[],w())}))}function V(){N(E.value).then((({data:e,error:l})=>{var a;l||($.value=!1,E.value="",null==(a=window.$message)||a.success("新增成功"),g.value=[],w())}))}function X(){var e,l;if(0==g.value.length)return null==(e=window.$message)?void 0:e.error("请先选择一条数据");null==(l=window.$modal)||l.confirm({title:"是否确认删除数据?",onOk:()=>{const e=v.value.filter((e=>g.value.includes(e.id)));A(e).then((({data:e,error:l})=>{var a,t;l?null==(t=window.$message)||t.error("删除失败!"):(g.value=[],w(),null==(a=window.$message)||a.success("删除成功!"))}))},onCancel:()=>{}})}function Y(){i.pageNum=1,w()}w(),async function(){try{const e=await a.getDict("judgment_symbol");P.value=e}catch(e){}}();const Z=C(null),{height:ee}=T(Z),le=U((()=>"".concat(ee.value+20,"px")));return(l,a)=>{const x=y,w=e,b=j("STable"),k=O;return n(),z("div",W,[u(Q,{model:t.value,"onUpdate:model":a[0]||(a[0]=e=>t.value=e),onReset:a[1]||(a[1]=e=>Y()),onSearch:a[2]||(a[2]=e=>Y())},null,8,["model"]),u(k,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:s((()=>[u(x,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:F},{default:s((()=>a[8]||(a[8]=[r("span",{class:"ml-3px"},"新增",-1)]))),_:1}),u(x,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:B},{default:s((()=>a[9]||(a[9]=[r("span",{class:"ml-3px"},"修改",-1)]))),_:1}),u(x,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:X},{default:s((()=>a[10]||(a[10]=[r("span",{class:"ml-3px"},"删除",-1)]))),_:1})])),extra:s((()=>[u(w,{columns:d.value,"onUpdate:columns":a[3]||(a[3]=e=>d.value=e)},null,8,["columns"])])),default:s((()=>[u(b,{columns:d.value,"data-source":v.value,size:"small",bordered:"",loading:p.value,"row-selection":{selectedRowKeys:g.value,onChange:_},"default-expanded-row-keys":f.value,"row-key":"id","custom-row":h,"default-expand-all-rows":!0,scroll:{y:"auto"},pagination:i,class:"has-footer-table h-full","row-height":23},null,8,["columns","data-source","loading","row-selection","default-expanded-row-keys","pagination"])])),_:1}),u(L,{visible:$.value,"onUpdate:visible":a[7]||(a[7]=e=>$.value=e),"destroy-on-close":!0,centered:!0,title:J.value,width:"1050px",height:"550px"},{footer:s((()=>[r("div",H,[u(x,{onClick:a[6]||(a[6]=e=>$.value=!1)},{default:s((()=>a[11]||(a[11]=[c("关闭")]))),_:1}),"脉冲波形选择修改"==J.value?(n(),o(x,{key:0,onClick:G},{default:s((()=>a[12]||(a[12]=[c("保存")]))),_:1})):(n(),o(x,{key:1,onClick:V},{default:s((()=>a[13]||(a[13]=[c("保存")]))),_:1}))])])),default:s((()=>["脉冲波形选择修改"==J.value?(n(),z("div",q,[u(I,{model:R.value,"onUpdate:model":a[4]||(a[4]=e=>R.value=e),"form-list":m},null,8,["model"])])):(n(),z("div",D,[u(I,{model:E.value,"onUpdate:model":a[5]||(a[5]=e=>E.value=e),"form-list":m},null,8,["model"])]))])),_:1},8,["visible","title"])])}}}),[["__scopeId","data-v-429dc142"]]);export{P as default};
