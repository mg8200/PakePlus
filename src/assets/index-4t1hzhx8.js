import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as l,K as a,L as t,o as n,c as o,w as s,g as i,f as r,s as d,t as c,I as u,v as p,N as m,O as v,B as f,P as y,Q as h,F as g,U as k,r as x,p as w,db as b,a9 as _,b as C,S as T,e as I,h as U,W as R,J as S}from"./index-B3PZsRwT.js";import{Z as $,_ as q,$ as z,a0 as B}from"./index-DqnulfE2.js";import{_ as j}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as M}from"./index-BThgVJ70.js";const P={class:"w-full flex"},O={class:"flex"},E={class:"w-full flex-y-center justify-end gap-12px"},N={class:"ml-3px"},A={class:"ml-3px"},K=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:a(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,k=t(e,"model");function x(){a("search",k.value)}function w(){k.value.inkModel=null,k.value.inkColor=null,k.value.qrCode=null,a("reset",k.value)}return(e,l)=>{const a=u,t=p,b=m,_=v,C=f,T=y,I=h,U=g,R=M;return n(),o(R,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:s((()=>[i(U,{model:k.value,"label-col":{span:5,md:7},class:"search-form"},{default:s((()=>[r("div",P,[i(I,{gutter:[15,8],wrap:"",class:"w-full"},{default:s((()=>[i(b,{span:24,md:12,lg:6,xl:8,xxl:4},{default:s((()=>[i(t,{label:"油墨型号",name:"inkModel",class:"m-0","label-col":{}},{default:s((()=>[i(a,{value:k.value.inkModel,"onUpdate:value":l[0]||(l[0]=e=>k.value.inkModel=e),placeholder:"请输入油墨型号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(x,["enter"])},null,8,["value"])])),_:1})])),_:1}),i(b,{span:24,md:12,lg:6,xl:8,xxl:4},{default:s((()=>[i(t,{label:"油墨颜色",name:"inkColor",class:"m-0","label-col":{}},{default:s((()=>[i(a,{value:k.value.inkColor,"onUpdate:value":l[1]||(l[1]=e=>k.value.inkColor=e),placeholder:"请输入油墨颜色",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(x,["enter"])},null,8,["value"])])),_:1})])),_:1}),i(b,{span:24,md:12,lg:6,xl:8,xxl:4},{default:s((()=>[i(t,{label:"二维码信息",name:"qrCode",class:"m-0","label-col":{}},{default:s((()=>[i(a,{value:k.value.qrCode,"onUpdate:value":l[2]||(l[2]=e=>k.value.qrCode=e),placeholder:"请输入二维码信息",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(x,["enter"])},null,8,["value"])])),_:1})])),_:1}),r("div",O,[i(t,{class:"m-0"},{default:s((()=>[r("div",E,[i(C,{type:"primary",ghost:"",class:"mini-btn",onClick:x},{icon:s((()=>[i(_,{class:"align-sub text-icon"})])),default:s((()=>[r("span",N,c(e.$t("common.search")),1)])),_:1}),i(C,{class:"mini-btn",onClick:w},{icon:s((()=>[i(T,{class:"align-sub text-icon"})])),default:s((()=>[r("span",A,c(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),L={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},D={class:"event-form"},F={class:"modal-footer"},J={class:"event-form"},Q={class:"modal-footer"},W=S(Object.assign({name:"material-management_solder-mask-ink"},{__name:"index",setup(l){k((e=>({"8abbfa1c":ee.value})));const a=x({moduleNo:"",processId:"",paramCaption:"",wipState:"",pnType:"",modulepnTypeNo:"",time:["",""]}),t=w({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{t.current=e,t.pageSize=l,h()}}),o=x([{key:"index",dataIndex:"index",title:"序号",width:100,align:"center",checked:!0},{key:"inkModel",dataIndex:"inkModel",title:"油墨型号",width:130,align:"center",checked:!0,ellipsis:!0},{key:"inkColor",dataIndex:"inkColor",title:"油墨颜色",width:100,align:"center",checked:!0,ellipsis:!0},{key:"qrCode",dataIndex:"qrCode",title:"二维码信息",width:140,align:"center",checked:!0,ellipsis:!0},{key:"onTime",dataIndex:"onTime",title:"开启时间",width:200,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>null==e.onTime?null:b(e.onTime)},{key:"expirationTime",dataIndex:"expirationTime",title:"失效时间",width:200,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>null==e.expirationTime?null:b(e.expirationTime)},{key:"expirationDays",dataIndex:"expirationDays",title:"距离失效时间",width:120,align:"center",checked:!0,ellipsis:!0},{key:"createBy",dataIndex:"createBy",title:"入库人",width:140,align:"center",checked:!0,ellipsis:!0},{key:"storageTime",dataIndex:"storageTime",title:"入库时间",width:200,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>null==e.storageTime?null:b(e.storageTime)}]),d=[{type:"input",key:"inkModel",label:"油墨型号",placeholder:"请输入油墨型号",span:8},{type:"input",key:"inkColor",label:"油墨颜色",placeholder:"请输入油墨颜色",span:8},{type:"input",key:"qrCode",label:"二维码信息",placeholder:"请输入二维码信息",span:8},{type:"datePicker",key:"onTime",label:"处理时间",span:8,showTime:!0},{type:"datePicker",key:"expirationTime",label:"失效时间",span:8,showTime:!0},{type:"input",key:"expirationDays",label:"距离失效时间",placeholder:"请输入距离失效时间",span:8},{type:"input",key:"createBy",label:"入库人",placeholder:"请输入入库人",span:8},{type:"datePicker",key:"storageTime",label:"入库时间",span:8,showTime:!0}],c=[{type:"input",key:"quantity",label:"数量",placeholder:"请输入数量",span:24},{type:"radio",key:"category",label:"类型",span:24,selectOptions:[{label:"塞孔油打印",value:"1"},{label:"面油打印",value:"2"}]}],u=x([]),p=x(!1),m=x([]),v=x(null),y=e=>({style:{background:e.id===v.value?"#BAEAFA":"","background-color":2===Number(e.failureState)?"rgb(247, 109, 109)":""},onClick(){v.value=e.id}});function h(){p.value=!0,$({pageSize:t.pageSize,pageNum:t.current,...a.value}).then((({data:e,error:l})=>{l||(e.forEach(((e,l)=>{e.index=l+1})),u.value=e,t.total=e.total)})).finally((()=>{p.value=!1}))}const g=x([]);function S(e){g.value=e}const P=x(!1),O=x("");function E(){var e;if(1!=g.value.length)return null==(e=window.$message)?void 0:e.error("请先选择一条数据");O.value=u.value.find((e=>g.value[0]==e.id)),P.value=!0}function N(){q(O.value).then((({data:e,error:l})=>{var a;l||(P.value=!1,O.value="",null==(a=window.$message)||a.success("修改成功"),g.value=[],h())}))}function A(){var e,l;if(0==g.value.length)return null==(e=window.$message)?void 0:e.error("请先选择一条数据");null==(l=window.$modal)||l.confirm({title:"是否确认删除数据?",onOk:()=>{delRoyiUser(delIds).then((({data:e,error:l})=>{var a,t;if(l)null==(t=window.$message)||t.error("删除失败!");else{const e=u.value.filter((e=>g.value.includes(e.id)));z(e).then((({data:e,error:l})=>{l||(g.value=[],h())})),null==(a=window.$message)||a.success("删除成功!")}}))},onCancel:()=>{}})}const W=x(!1);function Z(){W.value=!0}const G=x({});function H(){var e,l;return G.value.quantity?G.value.category?void B(G.value).then((({data:e,error:l})=>{W.value=!1,G.value={};const a=new Blob([e],{type:"application/pdf"}),t=document.getElementById("printPdf");t&&t.parentNode.removeChild(t);const n=document.createElement("iframe");n.style.frameborder="no",n.style.display="none",n.style.pageBreakBefore="always",n.setAttribute("id","printPdf"),n.setAttribute("name","printPdf"),n.src=window.URL.createObjectURL(a),document.body.appendChild(n),function(e){const l=document.getElementById(e).contentWindow;setTimeout((()=>{l.print()}),500)}("printPdf"),window.URL.revokeObjectURL(n.src)})):null==(l=window.$message)?void 0:l.error("请选择类型"):null==(e=window.$message)?void 0:e.error("请输入数量")}function V(){t.current=1,h()}h();const X=x(null),{height:Y}=_(X),ee=C((()=>"".concat(Y.value+20,"px")));return(l,v)=>{const h=f,k=e,x=T("STable"),w=M;return n(),I("div",L,[i(K,{model:a.value,"onUpdate:model":v[0]||(v[0]=e=>a.value=e),onReset:v[1]||(v[1]=e=>V()),onSearch:v[2]||(v[2]=e=>V())},null,8,["model"]),i(w,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:s((()=>[i(h,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:E},{default:s((()=>v[10]||(v[10]=[r("span",{class:"ml-3px"},"修改",-1)]))),_:1}),i(h,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:A},{default:s((()=>v[11]||(v[11]=[r("span",{class:"ml-3px"},"删除",-1)]))),_:1}),i(h,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:Z},{default:s((()=>v[12]||(v[12]=[r("span",{class:"ml-3px"},"二维码",-1)]))),_:1})])),extra:s((()=>[i(k,{columns:o.value,"onUpdate:columns":v[3]||(v[3]=e=>o.value=e)},null,8,["columns"])])),default:s((()=>[i(x,{columns:o.value,"data-source":u.value,size:"small",bordered:"",loading:p.value,"row-selection":{selectedRowKeys:g.value,onChange:S},"default-expanded-row-keys":m.value,"row-key":"id","custom-row":y,"default-expand-all-rows":!0,scroll:{y:"auto"},pagination:t,class:"has-footer-table h-full","row-height":23},{footer:s((()=>[r("div",{ref_key:"tableFooterRef",ref:X,style:{display:"flex","align-items":"center"}},v[13]||(v[13]=[r("div",{style:{width:"20px",height:"14px","background-color":"rgb(247, 109, 109)"}},null,-1),r("span",null,"背景为三小时内过期",-1)]),512)])),_:1},8,["columns","data-source","loading","row-selection","default-expanded-row-keys","pagination"])])),_:1}),i(j,{visible:P.value,"onUpdate:visible":v[6]||(v[6]=e=>P.value=e),"destroy-on-close":!0,centered:!0,title:"阻焊油墨信息修改",width:"1050px",height:"550px"},{footer:s((()=>[r("div",F,[i(h,{onClick:v[5]||(v[5]=e=>P.value=!1)},{default:s((()=>v[14]||(v[14]=[U("关闭")]))),_:1}),i(h,{onClick:N},{default:s((()=>v[15]||(v[15]=[U("保存")]))),_:1})])])),default:s((()=>[r("div",D,[i(R,{model:O.value,"onUpdate:model":v[4]||(v[4]=e=>O.value=e),"form-list":d},null,8,["model"])])])),_:1},8,["visible"]),i(j,{visible:W.value,"onUpdate:visible":v[9]||(v[9]=e=>W.value=e),"destroy-on-close":!0,centered:!0,title:"二维码打印",width:"550px",height:"350px"},{footer:s((()=>[r("div",Q,[i(h,{onClick:v[8]||(v[8]=e=>W.value=!1)},{default:s((()=>v[16]||(v[16]=[U("关闭")]))),_:1}),i(h,{onClick:H},{default:s((()=>v[17]||(v[17]=[U("打印")]))),_:1})])])),default:s((()=>[r("div",J,[i(R,{model:G.value,"onUpdate:model":v[7]||(v[7]=e=>G.value=e),"form-list":c},null,8,["model"])])])),_:1},8,["visible"])])}}}),[["__scopeId","data-v-a50baab6"]]);export{W as default};
