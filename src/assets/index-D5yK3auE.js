import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{_ as l}from"./round-download-DUbhM0Ds.js";import{_ as a}from"./round-delete-DScxCu5A.js";import{_ as t}from"./round-edit-DZi1TDWc.js";import{_ as s}from"./round-add-MytOGm9O.js";import{d as o,K as n,L as u,o as r,c as d,w as c,g as i,f as p,s as m,h as f,t as v,I as g,v as _,N as x,ad as b,ae as h,O as w,B as y,P as k,Q as C,F as S,n as I,q as N,r as z,a0 as j,ds as R,cn as U,de as T,d6 as O,p as F,db as $,a3 as q,a2 as K,S as A,e as B}from"./index-B3PZsRwT.js";import{k as Q,m as E,o as G,p as H,q as J}from"./system-manage-DyXHkc6D.js";import{_ as L}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as M}from"./index-BThgVJ70.js";const P={class:"w-full flex"},D={class:"flex"},V={class:"w-full flex-y-center justify-end gap-12px"},W={class:"ml-3px"},X={class:"ml-3px"},Y=o({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:n(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,t=u(e,"model");function s(){a("search",t.value)}function o(){t.value.postCode=null,t.value.postName=null,t.value.status=null,a("reset",t.value)}return(e,l)=>{const a=g,n=_,u=x,I=b,N=h,z=w,j=y,R=k,U=C,T=S,O=M;return r(),d(O,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:c((()=>[i(T,{model:t.value,"label-col":{span:5,md:7},class:"search-form"},{default:c((()=>[p("div",P,[i(U,{gutter:[15,8],wrap:"",class:"w-full"},{default:c((()=>[i(u,{span:24,md:12,lg:6,xl:8,xxl:4},{default:c((()=>[i(n,{label:"岗位编码",name:"postCode",class:"m-0","label-col":{}},{default:c((()=>[i(a,{value:t.value.postCode,"onUpdate:value":l[0]||(l[0]=e=>t.value.postCode=e),placeholder:"请输入岗位编码",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:m(s,["enter"])},null,8,["value"])])),_:1})])),_:1}),i(u,{span:24,md:12,lg:6,xl:8,xxl:4},{default:c((()=>[i(n,{label:"岗位名称",name:"postName",class:"m-0","label-col":{}},{default:c((()=>[i(a,{value:t.value.postName,"onUpdate:value":l[1]||(l[1]=e=>t.value.postName=e),placeholder:"请输入岗位名称",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:m(s,["enter"])},null,8,["value"])])),_:1})])),_:1}),i(u,{span:24,md:12,lg:6,xl:8,xxl:4},{default:c((()=>[i(n,{label:"岗位状态",name:"status",class:"m-0","label-col":{}},{default:c((()=>[i(N,{value:t.value.status,"onUpdate:value":l[2]||(l[2]=e=>t.value.status=e),placeholder:"请选择岗位状态","allow-clear":"",class:"min-form-control"},{default:c((()=>[i(I,{value:"0"},{default:c((()=>l[3]||(l[3]=[f("正常")]))),_:1}),i(I,{value:"1"},{default:c((()=>l[4]||(l[4]=[f("停用")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),p("div",D,[i(n,{class:"m-0"},{default:c((()=>[p("div",V,[i(j,{type:"primary",ghost:"",class:"mini-btn",onClick:s},{icon:c((()=>[i(z,{class:"align-sub text-icon"})])),default:c((()=>[p("span",W,v(e.$t("common.search")),1)])),_:1}),i(j,{class:"mini-btn",onClick:o},{icon:c((()=>[i(R,{class:"align-sub text-icon"})])),default:c((()=>[p("span",X,v(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),Z={__name:"add",props:{currentRow:{type:Object,default:()=>null},operateType:{type:String,default:()=>null}},emits:["success"],setup(e,{expose:l,emit:a}){const t=e,s=a,{formRef:o,validate:n}=I(),{createRequiredRule:u}=N(),p={postName:u("请输入岗位名称"),postCode:u("请输入岗位编码"),postSort:u("请输入显示顺序")},m=z({postName:null,postCode:null,postSort:null,status:"0",remark:null});return j((()=>t.currentRow),(e=>{if(e){const{postName:l,postCode:a,postSort:t,status:s,remark:o}=e;m.value={postName:l,postCode:a,postSort:t,status:s,remark:o}}else m.value={postName:null,postCode:null,postSort:null,status:"0",remark:null}}),{deep:!0,immediate:!0}),l({submitForm:async function(){if(!t.operateType)return;let e;await n(),e="edit"===t.operateType?Q({postId:t.currentRow.postId,...m.value}):E(m.value),e.then((({error:e})=>{var l;e||(null==(l=null==window?void 0:window.$message)||l.success("操作成功!"),s("success"))}))}}),(e,l)=>{const a=g,t=_,s=x,n=R,u=U,v=T,b=O,h=C,w=S;return r(),d(w,{ref_key:"formRef",ref:o,model:m.value,rules:p,"label-col":{lg:8,xs:4},"label-wrap":""},{default:c((()=>[i(h,{gutter:20},{default:c((()=>[i(s,{lg:24,xs:24},{default:c((()=>[i(t,{name:"postName",label:"岗位名称","label-col":{}},{default:c((()=>[i(a,{value:m.value.postName,"onUpdate:value":l[0]||(l[0]=e=>m.value.postName=e),placeholder:"请输入部门名称",autocomplete:"off"},null,8,["value"])])),_:1})])),_:1}),i(s,{lg:24,xs:24},{default:c((()=>[i(t,{name:"postCode",label:"岗位编码","label-col":{}},{default:c((()=>[i(a,{value:m.value.postCode,"onUpdate:value":l[1]||(l[1]=e=>m.value.postCode=e),placeholder:"请输入岗位编码",autocomplete:"off"},null,8,["value"])])),_:1})])),_:1}),i(s,{lg:24,xs:24},{default:c((()=>[i(t,{name:"postSort",label:"显示顺序","label-col":{}},{default:c((()=>[i(n,{value:m.value.postSort,"onUpdate:value":l[2]||(l[2]=e=>m.value.postSort=e),placeholder:"请输入显示顺序",class:"w-full",autocomplete:"off"},null,8,["value"])])),_:1})])),_:1}),i(s,{lg:24,xs:24},{default:c((()=>[i(t,{name:"status",label:"岗位状态","label-col":{}},{default:c((()=>[i(v,{value:m.value.status,"onUpdate:value":l[3]||(l[3]=e=>m.value.status=e)},{default:c((()=>[i(u,{value:"0"},{default:c((()=>l[5]||(l[5]=[f("正常")]))),_:1}),i(u,{value:"1"},{default:c((()=>l[6]||(l[6]=[f("停用")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),i(s,{lg:24,xs:24,class:"mt-15px"},{default:c((()=>[i(t,{name:"remark",label:"备注","label-col":{}},{default:c((()=>[i(b,{value:m.value.remark,"onUpdate:value":l[4]||(l[4]=e=>m.value.remark=e),placeholder:"请输入备注",rows:4,autocomplete:"off"},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])}}},ee={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},le={class:"modal-footer"},ae=Object.assign({name:"manage_post"},{__name:"index",setup(o){const n=z({postName:null,postCode:null,status:null}),u=F({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{u.current=e,u.pageSize=l,g()}}),d=z([{key:"postId",dataIndex:"postId",title:"岗位编号",align:"center",width:150,checked:!0,ellipsis:!0},{key:"postCode",dataIndex:"postCode",title:"岗位编码",align:"center",checked:!0,ellipsis:!0},{key:"postName",dataIndex:"postName",title:"岗位名称",align:"center",checked:!0,ellipsis:!0},{key:"postSort",dataIndex:"postSort",title:"岗位排序",align:"center",width:150,checked:!0,ellipsis:!0},{key:"status",dataIndex:"status",title:"状态",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>{if(null===e.status)return null;const l=0==e.status?"正常":"停用";return i("span",{class:0==e.status?"color-green":"color-red"},[l])}},{key:"createTime",dataIndex:"createTime",title:"创建时间",align:"center",checked:!0,width:170,ellipsis:!0,customRender:({record:e})=>null==e.createTime?null:$(e.createTime)},{key:"cz",dataIndex:"createTime",title:"操作",align:"center",width:200,checked:!0,ellipsis:!0,customRender:({record:e})=>i("div",null,[i(y,{type:"link",size:"small",onClick:()=>j("edit",e)},{default:()=>[i(t,{class:"align-sub text-icon"},null),f("修改")]}),q(i(y,{type:"link",size:"small",danger:!0,onClick:()=>{k(e)}},{default:()=>[i(a,{class:"align-sub text-icon"},null),f("删除")]}),[[K("if"),0!==e.parentId]])])}]),m=z([]),v=z(!1);function g(){v.value=!0;const e={...n.value,pageSize:u.pageSize,pageNum:u.current};G(e).then((({data:e,error:l})=>{l||(u.total=(null==e?void 0:e.total)||0,m.value=e.rows)})).finally((()=>{v.value=!1}))}function _(){u.current=1,g()}g();const x=z(null),b=e=>({style:{background:e.postId===x.value?"#BAEAFA":""},class:e.postId===x.value?"jl-table-row-selected":"",onClick:()=>{x.value=e.postId}}),h=z([]);function w(e){h.value=e}function k(e){let l="";l=e?e.postId:h.value.join(),window.$modal.confirm({title:'是否确认删除岗位编号为"'.concat(l,'"的数据项？'),onOk:()=>{H(l).then((({error:e})=>{e||(window.$message.success("删除成功"),g())}))}})}const C=z(null),S=z("add"),I=z(!1),N=z(null);function j(e,l=null){"number"==typeof l&&(l=m.value.find((e=>e.postId==l))),C.value=l,S.value=e,I.value=!0}function R(){N.value.submitForm()}function U(){I.value=!1,C.value=null}function T(){g(),U()}function O(){const e={...n.value,pageSize:u.pageSize,pageNum:u.current};J(e)}return(o,g)=>{const x=s,z=y,F=t,$=a,q=l,K=e,Q=A("STable"),E=M;return r(),B("div",ee,[i(Y,{model:n.value,"onUpdate:model":g[0]||(g[0]=e=>n.value=e),onReset:g[1]||(g[1]=e=>_()),onSearch:g[2]||(g[2]=e=>_())},null,8,["model"]),i(E,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:c((()=>[i(z,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:g[3]||(g[3]=e=>j("add"))},{icon:c((()=>[i(x,{class:"align-sub text-icon"})])),default:c((()=>[g[9]||(g[9]=p("span",{class:"ml-3px"},"新增",-1))])),_:1}),i(z,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",disabled:1!=h.value.length,onClick:g[4]||(g[4]=e=>j("edit",h.value[0]))},{icon:c((()=>[i(F,{class:"align-sub text-icon"})])),default:c((()=>[g[10]||(g[10]=p("span",{class:"ml-3px"},"修改",-1))])),_:1},8,["disabled"]),i(z,{danger:"",size:"small",ghost:"",class:"mini-btn mr-8px",disabled:0==h.value.length,onClick:g[5]||(g[5]=e=>k())},{icon:c((()=>[i($,{class:"align-sub text-icon"})])),default:c((()=>[g[11]||(g[11]=p("span",{class:"ml-3px"},"删除",-1))])),_:1},8,["disabled"]),i(z,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:O},{icon:c((()=>[i(q,{class:"align-sub text-icon"})])),default:c((()=>[g[12]||(g[12]=p("span",{class:"ml-3px"},"导出",-1))])),_:1})])),extra:c((()=>[i(K,{columns:d.value,"onUpdate:columns":g[6]||(g[6]=e=>d.value=e)},null,8,["columns"])])),default:c((()=>[i(Q,{columns:d.value,"data-source":m.value,size:"small",loading:v.value,"row-selection":{selectedRowKeys:h.value,onChange:w},"row-key":"postId","default-expand-all-rows":!0,scroll:{x:"auto",y:"auto"},pagination:u,"custom-row":b,class:"h-full","row-height":23},null,8,["columns","data-source","loading","row-selection","pagination"])])),_:1}),i(L,{visible:I.value,"onUpdate:visible":g[8]||(g[8]=e=>I.value=e),title:"".concat("add"==S.value?"新增":"修改","岗位"),height:"500px",width:"650px","destroy-on-close":!0,onOk:R,onClose:U},{footer:c((()=>[p("div",le,[i(z,{type:"primary",onClick:g[7]||(g[7]=e=>R())},{default:c((()=>g[13]||(g[13]=[f("确定")]))),_:1}),i(z,{onClick:U},{default:c((()=>g[14]||(g[14]=[f("取消")]))),_:1})])])),default:c((()=>[i(Z,{ref_key:"addFormRef",ref:N,"dept-options":m.value,"current-row":C.value,"operate-type":S.value,onSuccess:T},null,8,["dept-options","current-row","operate-type"])])),_:1},8,["visible","title"])])}}});export{ae as default};
