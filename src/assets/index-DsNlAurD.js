import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{s as l}from"./index-DSSNONhA.js";import{_ as a}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{d as s,K as t,L as u,o as n,c as o,w as d,g as r,f as i,s as c,h as m,t as p,I as f,v,N as x,ad as _,ae as g,dJ as h,O as b,B as w,P as y,Q as k,F as T,r as Y,p as I,S as j,e as D}from"./index-B3PZsRwT.js";import{C as M}from"./index-BThgVJ70.js";import{D as N,a as S}from"./index-BrhnYIjA.js";const H={class:"w-full flex"},U={class:"flex"},z={class:"w-full flex-y-center justify-end gap-12px"},C={class:"ml-3px"},A={class:"ml-3px"},K=s({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:t(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,s=u(e,"model");function t(){a("search",s.value)}function Y(){s.value.ipaddr=null,s.value.status=null,s.value.userName=null,s.value.beginTime=null,s.value.endTime=null,a("reset",s.value)}return(e,l)=>{const a=f,u=v,I=x,j=_,D=g,N=h,S=b,K=w,O=y,R=k,q=T,B=M;return n(),o(B,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:d((()=>[r(q,{model:s.value,"label-col":{span:5,md:7},class:"search-form"},{default:d((()=>[i("div",H,[r(R,{gutter:[15,8],wrap:"",class:"w-full"},{default:d((()=>[r(I,{span:24,md:12,lg:6,xl:8,xxl:4},{default:d((()=>[r(u,{label:"登录地址",name:"ipaddr",class:"m-0","label-col":{}},{default:d((()=>[r(a,{value:s.value.ipaddr,"onUpdate:value":l[0]||(l[0]=e=>s.value.ipaddr=e),placeholder:"请输入操作地址",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:c(t,["enter"])},null,8,["value"])])),_:1})])),_:1}),r(I,{span:24,md:12,lg:6,xl:8,xxl:4},{default:d((()=>[r(u,{label:"用户名称",name:"userName",class:"m-0","label-col":{}},{default:d((()=>[r(a,{value:s.value.userName,"onUpdate:value":l[1]||(l[1]=e=>s.value.userName=e),placeholder:"请输入系统模块",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:c(t,["enter"])},null,8,["value"])])),_:1})])),_:1}),r(I,{span:24,md:12,lg:6,xl:6,xxl:4},{default:d((()=>[r(u,{label:"状态",name:"status",class:"m-0","label-col":{}},{default:d((()=>[r(D,{value:s.value.status,"onUpdate:value":l[2]||(l[2]=e=>s.value.status=e),placeholder:"请选择状态",class:"min-form-control","allow-clear":""},{default:d((()=>[r(j,{value:"0"},{default:d((()=>l[5]||(l[5]=[m("成功")]))),_:1}),r(j,{value:"1"},{default:d((()=>l[6]||(l[6]=[m("失败")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),r(I,{span:24,md:12,lg:6,xl:8,xxl:5},{default:d((()=>[r(u,{label:"操作日期起始",name:"beginTime",class:"m-0","label-col":{}},{default:d((()=>[r(N,{value:s.value.beginTime,"onUpdate:value":l[3]||(l[3]=e=>s.value.beginTime=e),"value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss",class:"min-form-control w-full"},null,8,["value"])])),_:1})])),_:1}),r(I,{span:24,md:12,lg:6,xl:8,xxl:5},{default:d((()=>[r(u,{label:"操作日期截止",name:"endTime",class:"m-0","label-col":{}},{default:d((()=>[r(N,{value:s.value.endTime,"onUpdate:value":l[4]||(l[4]=e=>s.value.endTime=e),"value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss",class:"min-form-control w-full"},null,8,["value"])])),_:1})])),_:1}),i("div",U,[r(u,{class:"m-0"},{default:d((()=>[i("div",z,[r(K,{type:"primary",ghost:"",class:"mini-btn",onClick:t},{icon:d((()=>[r(S,{class:"align-sub text-icon"})])),default:d((()=>[i("span",C,p(e.$t("common.search")),1)])),_:1}),r(K,{class:"mini-btn",onClick:Y},{icon:d((()=>[r(O,{class:"align-sub text-icon"})])),default:d((()=>[i("span",A,p(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),O={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},R={class:"modal-footer"},q=Object.assign({name:"manage_login-logs"},{__name:"index",setup(s){const t=Y({ipaddr:"",userName:"",status:null,beginTime:"",endTime:""}),u=I({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{u.current=e,u.pageSize=l,x()}}),o=Y([{key:"index",dataIndex:"index",title:"序号",width:100,align:"center",checked:!0},{key:"userName",dataIndex:"userName",title:"用户名称",width:260,align:"center",checked:!0,ellipsis:!0},{key:"ipaddr",dataIndex:"ipaddr",title:"登录地址",width:200,align:"center",checked:!0,ellipsis:!0},{key:"status",dataIndex:"status",title:"登录状态",width:200,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>"0"==e.status?"成功":"1"==e.status?"失败":void 0},{key:"msg",dataIndex:"msg",title:"提示消息",width:200,align:"center",checked:!0,ellipsis:!0},{key:"accessTime",dataIndex:"accessTime",title:"访问时间",width:200,align:"center",checked:!0,ellipsis:!0}]),c=Y([]),f=Y(!1),v=Y([]);function x(){f.value=!0,l({pageSize:u.pageSize,pageNum:u.current,...t.value}).then((({data:e,error:l,otherData:a})=>{l||(a.rows.forEach(((e,l)=>{e.index=l+1})),c.value=a.rows,u.total=a.total)})).finally((()=>{f.value=!1}))}function _(){u.current=1,x()}x();const g=Y(!1),h=Y({}),b=Y(null),y=e=>({style:{background:e.infoId===b.value?"#BAEAFA":""},class:"".concat(e.infoId===b.value?"jl-table-row-selected":""),onClick:()=>{b.value=e.infoId}});return(l,s)=>{const x=e,b=j("STable"),k=M,T=N,Y=S,I=w;return n(),D("div",O,[r(K,{model:t.value,"onUpdate:model":s[0]||(s[0]=e=>t.value=e),onReset:s[1]||(s[1]=e=>_()),onSearch:s[2]||(s[2]=e=>_())},null,8,["model"]),r(k,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:d((()=>s[6]||(s[6]=[]))),extra:d((()=>[r(x,{columns:o.value,"onUpdate:columns":s[3]||(s[3]=e=>o.value=e)},null,8,["columns"])])),default:d((()=>[r(b,{columns:o.value,"data-source":c.value,size:"small",bordered:"",loading:f.value,"default-expanded-row-keys":v.value,"row-key":"infoId","default-expand-all-rows":!0,scroll:{x:"auto",y:"auto"},pagination:u,class:"h-full","row-height":23,"custom-row":y},null,8,["columns","data-source","loading","default-expanded-row-keys","pagination"])])),_:1}),r(a,{visible:g.value,"onUpdate:visible":s[5]||(s[5]=e=>g.value=e),"destroy-on-close":!0,centered:!0,title:"操作日志详细",width:"750px",height:"550px"},{footer:d((()=>[i("div",R,[r(I,{onClick:s[4]||(s[4]=e=>g.value=!1)},{default:d((()=>s[7]||(s[7]=[m("关闭")]))),_:1})])])),default:d((()=>[i("div",null,[r(Y,{title:""},{default:d((()=>[r(T,{span:2,label:"操作模块:"},{default:d((()=>[m(p(h.value.title),1)])),_:1}),r(T,{span:2,label:"请求地址："},{default:d((()=>[m(p(h.value.operIp),1)])),_:1}),r(T,{span:2,label:"登录信息:"},{default:d((()=>[m(p(h.value.operName)+"/"+p(h.value.operIp),1)])),_:1}),r(T,{span:2,label:"请求方式："},{default:d((()=>[m(p(h.value.requestMethod),1)])),_:1}),r(T,{span:3,label:"操作方法："},{default:d((()=>[m(p(h.value.method),1)])),_:1}),r(T,{span:3,label:"请求参数："},{default:d((()=>[m(p(h.value.operParam),1)])),_:1}),r(T,{span:3,label:"返回参数："},{default:d((()=>[m(p(h.value.jsonResult),1)])),_:1}),r(T,{label:"操作状态："},{default:d((()=>[m(p(0==h.value.status?"成功":"失败"),1)])),_:1}),r(T,{label:"消耗时间："},{default:d((()=>[m(p(h.value.costTime+"毫秒"),1)])),_:1}),r(T,{label:"操作时间："},{default:d((()=>[m(p(h.value.operTime),1)])),_:1})])),_:1})])])),_:1},8,["visible"])])}}});export{q as default};
