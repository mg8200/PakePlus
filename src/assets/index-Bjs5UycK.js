import{r as a,o as e,e as l,f as s,t,g as n,w as o,s as c,b6 as u,I as d,v as r,N as i,Q as p,d6 as m,B as v,F as f,J as g}from"./index-B3PZsRwT.js";import{g as b,p as w}from"./api-By23aosn.js";const _={class:"bodyClass"},x={class:"titClass"},h={class:"mt20px"},y={class:"ml-20px flex"},I={class:"w-full flex-y-center justify-end gap-12px"},j=g(Object.assign({name:"issuance-management_plate-count-machine_down"},{__name:"index",setup(g){const j=a({lotId:null}),k=a("");function C(){b("/mes/boardBreakingPointMachine/provide",j.value).then((({data:a,error:e})=>{e||(k.value=JSON.stringify(a,null,2))}))}function M(){var a;k.value?u.confirm({title:"是否确认下发参数吗?",onOk:()=>{const a=JSON.parse(k.value);w("/mes/boardBreakingPointMachine/add/new",a).then((({error:a,data:e,otherData:l})=>{var s;a||(k.value=[],j.value.liaohao="",null==(s=window.$message)||s.success("下发成功!"))}))},onCancel:()=>{}}):null==(a=window.$message)||a.error("请先查询料号再确定下发!")}const O=a("");function B(){const a=new Date,e=a.getFullYear(),l="0".concat(a.getMonth()+1).slice(-2),s="0".concat(a.getDate()).slice(-2),t="0".concat(a.getHours()).slice(-2),n="0".concat(a.getMinutes()).slice(-2),o="0".concat(a.getSeconds()).slice(-2),c="".concat(e,"-").concat(l,"-").concat(s," ").concat(t,":").concat(n,":").concat(o);O.value=c}function D(){k.value=""}return setInterval(B,1e3),B(),(a,u)=>{const g=d,b=r,w=i,B=p,J=m,N=v,S=f;return e(),l("div",_,[s("div",x,[u[2]||(u[2]=s("p",null,"分板点数机下发",-1)),s("p",null,t(O.value),1)]),s("div",h,[n(S,{model:j.value,"label-col":{span:5,md:7}},{default:o((()=>[n(B,{gutter:[15,8],wrap:"",justify:"center"},{default:o((()=>[n(w,{span:24,md:12,lg:6,xl:6,xxl:4},{default:o((()=>[n(b,{label:"批卡号",name:"lotId",class:"m-0","label-col":{}},{default:o((()=>[n(g,{value:j.value.lotId,"onUpdate:value":u[0]||(u[0]=a=>j.value.lotId=a),placeholder:"请输入批卡号","allow-clear":"",autocomplete:"off",onKeypress:c(C,["enter"])},null,8,["value"])])),_:1})])),_:1})])),_:1}),n(B,{wrap:"",class:"ml-20px mt-20px"},{default:o((()=>[n(w,{span:16},{default:o((()=>[n(b,{label:"",name:"",class:"m-0","label-col":{}},{default:o((()=>[n(J,{value:k.value,"onUpdate:value":u[1]||(u[1]=a=>k.value=a),class:"color-brown text-size-16px font-600",style:{color:"brown"},placeholder:"",rows:28},null,8,["value"])])),_:1})])),_:1}),n(w,{span:8},{default:o((()=>[s("div",y,[n(b,{class:"m-0"},{default:o((()=>[s("div",I,[n(N,{class:"mini-btn down-btn",onClick:M},{default:o((()=>u[3]||(u[3]=[s("span",{class:"m-auto"},"确定下发",-1)]))),_:1}),n(N,{class:"mini-btn down-btn",onClick:D},{default:o((()=>u[4]||(u[4]=[s("span",{class:"m-auto"},"清除",-1)]))),_:1})])])),_:1})])])),_:1})])),_:1})])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-ec52a83b"]]);export{j as default};
