import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as l,K as a,L as t,o as d,c as n,w as i,g as s,f as o,s as c,t as r,I as u,v as p,N as m,O as h,B as f,P as g,Q as v,F as x,r as w,p as y,a7 as k,a5 as I,S as b,e as _,ac as N}from"./index-B3PZsRwT.js";import{g as C,a as S,b as T}from"./batch-read-code-info-BrC2ykGO.js";import{C as z}from"./index-BThgVJ70.js";const A={class:"w-full flex"},E={class:"flex"},R={class:"w-full flex-y-center justify-end gap-12px"},j={class:"ml-3px"},q={class:"ml-3px"},D=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:a(["search"],["update:model"]),setup(e,{emit:l}){const a=l,w=t(e,"model");function y(){a("search",w.value)}function k(){w.value={productName:null,lotId:null},a("search",w.value)}return(e,l)=>{const a=u,t=p,I=m,b=h,_=f,N=g,C=v,S=x,T=z;return d(),n(T,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:i((()=>[s(S,{ref:"formRef",model:w.value,"label-col":{span:5,md:7},class:"search-form"},{default:i((()=>[o("div",A,[s(C,{gutter:[15,8],wrap:"",class:"w-full"},{default:i((()=>[s(I,{span:24,md:12,lg:6,xl:6,xxl:4},{default:i((()=>[s(t,{label:"生产批号",name:"lotId",class:"m-0","label-col":{}},{default:i((()=>[s(a,{value:w.value.lotId,"onUpdate:value":l[0]||(l[0]=e=>w.value.lotId=e),placeholder:"请输入生产批号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:c(y,["enter"])},null,8,["value"])])),_:1})])),_:1}),s(I,{span:24,md:12,lg:6,xl:6,xxl:4},{default:i((()=>[s(t,{label:"产品型号",name:"productName",class:"m-0","label-col":{}},{default:i((()=>[s(a,{value:w.value.productName,"onUpdate:value":l[1]||(l[1]=e=>w.value.productName=e),placeholder:"请输入产品型号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:c(y,["enter"])},null,8,["value"])])),_:1})])),_:1}),o("div",E,[s(t,{class:"m-0"},{default:i((()=>[o("div",R,[s(_,{type:"primary",ghost:"",class:"mini-btn",onClick:y},{icon:i((()=>[s(b,{class:"align-sub text-icon"})])),default:i((()=>[o("span",j,r(e.$t("common.search")),1)])),_:1}),s(_,{class:"mini-btn",onClick:k},{icon:i((()=>[s(N,{class:"align-sub text-icon"})])),default:i((()=>[o("span",q,r(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),U={class:"jl-main-page outer-printed-code h-full h-full min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},K=l({name:"trace_batch-read-code-info",__name:"index",setup(l){const a=w({pageNum:1,pageSize:200}),t=w({lotId:null,productName:null}),n=y({current:a.value.pageNum,pageSize:a.value.pageSize,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:(e,l)=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{n.current=e,n.pageSize=l,a.value.pageNum=e,a.value.pageSize=l,f()}}),o=w(null),c=w([]),r=w([{key:"index",dataIndex:"index",title:"序号",width:50,align:"center",checked:!0},{key:"lotId",dataIndex:"lotId",title:"生产批号",width:130,align:"center",checked:!0,ellipsis:!0},{key:"productName",dataIndex:"productName",title:"产品型号",width:150,align:"center",checked:!0,ellipsis:!0},{key:"qty",dataIndex:"qty",title:"批次数量",width:80,align:"center",checked:!0,ellipsis:!0},{key:"printCount",dataIndex:"printCount",title:"打码数量",width:80,align:"center",checked:!0,ellipsis:!0},{key:"printedCodeState",dataIndex:"printedCodeState",title:"打码状态",width:120,align:"center",checked:!0,ellipsis:!0},{key:"customerCode",dataIndex:"customerCode",title:"客户代码",width:80,align:"center",checked:!0,ellipsis:!0},{key:"customerName",dataIndex:"customerName",title:"客户名称",width:250,align:"center",checked:!0,ellipsis:!0},{key:"createTime",dataIndex:"createTime",title:"下发时间",width:140,align:"center",checked:!0,ellipsis:!0}]),u=w([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0},{key:"modifiedEquipmentLineName",dataIndex:"modifiedEquipmentLineName",title:"线体名称",width:100,align:"center",checked:!0,ellipsis:!0},{key:"sumCode",dataIndex:"sumCode",title:"打码数量",width:80,align:"center",checked:!0,ellipsis:!0},{key:"readingCount",dataIndex:"readingCount",title:"读码数量",width:80,align:"center",checked:!0,ellipsis:!0},{key:"codeRate",dataIndex:"codeRate",title:"读码率",width:80,align:"center",checked:!0,ellipsis:!0},{key:"firstDate",dataIndex:"firstDate",title:"初次读码时间",width:150,align:"center",checked:!0,ellipsis:!0},{key:"lastDate",dataIndex:"lastDate",title:"最后读码时间",width:150,align:"center",checked:!0,ellipsis:!0}]),p=w([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0},{key:"pnlId",dataIndex:"pnlId",title:"PNL码",width:150,align:"center",checked:!0,ellipsis:!0},{key:"trackType",dataIndex:"trackType",title:"动作类型",width:100,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>({TRACKIN:"上机",TRACKOUT:"下机"}[e.trackType]||"")},{key:"sliceType",dataIndex:"sliceType",title:"片型",width:70,align:"center",checked:!0,ellipsis:!0},{key:"dateTime",dataIndex:"dateTime",title:"读码时间",width:150,align:"center",checked:!0,ellipsis:!0}]),h=w(!1);function f(){const{lotId:e,woId:l,productName:d}=t.value,i={lotId:e,woId:l,productName:d,...a.value};h.value=!0,C(i).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1,e.uid=k.genV4().hexNoDelim})),n.total=e.total,c.value=e.list)})).finally((()=>h.value=!1))}function g(){a.value.pageNum=1,n.current=1,f()}const x=w([]),A=w(!1),E=e=>({style:{background:e.uid===o.value?"#BAEAFA":""},class:e.uid===o.value?"jl-table-row-selected":"",onClick:()=>{o.value=e.uid,A.value=!0,S(e.lotId).then((({data:e,error:l})=>{l||(e.forEach(((e,l)=>{e.index=l+1,e.uid=k.genV4().hexNoDelim})),x.value=e)})).finally((()=>A.value=!1))}}),R=w(null),j=w([]),q=w(!1),K=e=>({style:{background:e.uid===R.value?"#BAEAFA":""},class:e.uid===R.value?"jl-table-row-selected":"",onClick:()=>{R.value=e.uid,q.value=!0;const l={lotId:null,pageSize:"9999",pageNum:"1",equipmentId:null};l.lotId=e.lotId,l.equipmentId=e.mainEqpId,T(l).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1,e.uid=k.genV4().hexNoDelim})),j.value=e.list)})).finally((()=>q.value=!1))}}),L=w(null),B=e=>({style:{background:e.uid===L.value?"#BAEAFA":""},class:e.uid===L.value?"jl-table-row-selected":"",onClick:()=>{L.value=e.uid}});function F(){a.value.pageNum=1,n.current=1,f()}f();const O=w(42);return window.addEventListener("resize",(()=>{I((()=>{const e=document.querySelector(".outer-printed-code .search-box"),l=null==e?void 0:e.clientHeight;O.value=l||42}))})),(l,a)=>{const o=e,f=b("STable"),w=z,y=m,k=v;return d(),_("div",U,[s(D,{model:t.value,"onUpdate:model":a[0]||(a[0]=e=>t.value=e),class:"search-box",onReset:g,onSearch:F},null,8,["model"]),s(k,{gutter:[15,8],wrap:"",class:"w-full",style:N({height:"calc(100% - ".concat(O.value,"px)")})},{default:i((()=>[s(y,{span:8,class:"h-full",style:{"padding-right":"0 !important"}},{default:i((()=>[s(w,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card h-full flex-col-stretch sm:flex-1-hidden card-wrapper"},{extra:i((()=>[s(o,{columns:r.value,"onUpdate:columns":a[1]||(a[1]=e=>r.value=e)},null,8,["columns"])])),default:i((()=>[s(f,{ref:"tableWrapperRef",columns:r.value,"data-source":c.value,bordered:"",size:"small",loading:h.value,"row-key":"uid",pagination:n,scroll:{x:1200,y:2e3},class:"h-full","row-height":23,"custom-row":E},null,8,["columns","data-source","loading","pagination"])])),_:1})])),_:1}),s(y,{span:8,class:"h-fullmin-h-500px h-full flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto",style:{"padding-left":"0 !important"}},{default:i((()=>[s(w,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card h-full flex-col-stretch sm:flex-1-hidden card-wrapper"},{extra:i((()=>[s(o,{columns:u.value,"onUpdate:columns":a[2]||(a[2]=e=>u.value=e)},null,8,["columns"])])),default:i((()=>[s(f,{ref:"tableWrapperRef",columns:u.value,"data-source":x.value,bordered:"",size:"small",loading:A.value,"row-key":"uid",pagination:!1,class:"h-full","row-height":23,"custom-row":K},null,8,["columns","data-source","loading"])])),_:1})])),_:1}),s(y,{span:8,class:"h-fullmin-h-500px h-full flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto",style:{"padding-left":"0 !important"}},{default:i((()=>[s(w,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card h-full flex-col-stretch sm:flex-1-hidden card-wrapper"},{extra:i((()=>[s(o,{columns:p.value,"onUpdate:columns":a[3]||(a[3]=e=>p.value=e)},null,8,["columns"])])),default:i((()=>[s(f,{ref:"tableWrapperRef",columns:p.value,"data-source":j.value,bordered:"",size:"small",loading:q.value,"row-key":"uid",pagination:!1,class:"h-full","row-height":23,"custom-row":B},null,8,["columns","data-source","loading"])])),_:1})])),_:1})])),_:1},8,["style"])])}}});export{K as default};
