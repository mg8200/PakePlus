import{r as a,a2 as e,o as l,e as s,f as t,t as n,g as o,w as c,s as u,a3 as r,c as i,b6 as m,I as p,v as d,N as v,Q as f,d6 as g,B as x,F as h,J as b}from"./index-B3PZsRwT.js";import{g as w,p as _}from"./api-By23aosn.js";const y={class:"bodyClass"},N={class:"titClass"},T={class:"mt20px"},S={class:"ml-20px flex"},j={class:"w-full flex-y-center justify-end gap-12px"},C=b(Object.assign({name:"compression-formula_vcp-parameter-issuance"},{__name:"index",setup(b){const C=a({lotNumber:""}),O=a("");const k=a("");function D(){const a=new Date,e=a.getFullYear(),l="0".concat(a.getMonth()+1).slice(-2),s="0".concat(a.getDate()).slice(-2),t="0".concat(a.getHours()).slice(-2),n="0".concat(a.getMinutes()).slice(-2),o="0".concat(a.getSeconds()).slice(-2),c="".concat(e,"-").concat(l,"-").concat(s," ").concat(t,":").concat(n,":").concat(o);k.value=c}function I(){var a;O.value?m.confirm({title:"是否确认下发参数吗?",onOk:()=>{const a=JSON.parse(O.value);_("/mes/TTST/insert",a).then((({error:a,data:e,otherData:l})=>{var s;a||(O.value=[],C.value.lotNumber="",null==(s=window.$message)||s.success("下发成功!"))}))},onCancel:()=>{}}):null==(a=window.$message)||a.error("请先查询料号再确定下发!")}function J(){O.value=""}return setInterval(D,1e3),D(),(a,m)=>{const b=p,_=d,D=v,$=f,F=g,M=x,U=h,z=e("hasAuth");return l(),s("div",y,[t("div",N,[m[3]||(m[3]=t("span",{class:"ml-10px"},"参数下发TTST裁磨线",-1)),t("p",null,n(k.value),1)]),t("div",T,[o(U,{model:C.value,"label-col":{span:5,md:7}},{default:c((()=>[o($,{gutter:[15,8],wrap:"",justify:"center"},{default:c((()=>[o(D,{span:24,md:12,lg:6,xl:6,xxl:4},{default:c((()=>[o(_,{label:"批卡号",name:"lotNumber",class:"m-0","label-col":{}},{default:c((()=>[o(b,{value:C.value.lotNumber,"onUpdate:value":m[0]||(m[0]=a=>C.value.lotNumber=a),placeholder:"请输入批卡号","allow-clear":"",autocomplete:"off",onKeypress:m[1]||(m[1]=u((a=>{var e;13===C.value.lotNumber.length?w("/mes/TTST/getlotNumber",C.value).then((({error:a,data:e})=>{a||(O.value=JSON.stringify(e,null,2))})):null==(e=window.$message)||e.error("请输入正确的料号查询!")}),["enter"]))},null,8,["value"])])),_:1})])),_:1})])),_:1}),o($,{wrap:"",class:"ml-20px mt-20px"},{default:c((()=>[o(D,{span:16},{default:c((()=>[o(_,{label:"",name:"",class:"m-0","label-col":{}},{default:c((()=>[o(F,{value:O.value,"onUpdate:value":m[2]||(m[2]=a=>O.value=a),style:{"font-size":"16px","font-weight":"600",color:"brown"},placeholder:"",rows:28},null,8,["value"])])),_:1})])),_:1}),o(D,{span:8},{default:c((()=>[t("div",S,[o(_,{class:"m-0"},{default:c((()=>[t("div",j,[r((l(),i(M,{class:"mini-btn",style:{height:"40px !important",width:"200px","margin-left":"10px","line-height":"0"},onClick:I},{default:c((()=>m[4]||(m[4]=[t("span",{class:"m-auto"},"确定下发",-1)]))),_:1})),[[z,["vcp-parameter-issuance:confirm-delivery"]]]),o(M,{class:"mini-btn",style:{height:"40px !important",width:"200px","margin-left":"10px","line-height":"0"},onClick:J},{default:c((()=>m[5]||(m[5]=[t("span",{class:"m-auto"},"清除",-1)]))),_:1})])])),_:1})])])),_:1})])),_:1})])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-6a958753"]]);export{C as default};
