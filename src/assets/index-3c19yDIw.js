import{_ as e}from"./table-DoFSI9NT.js";import{_ as t}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{r as l,a9 as a,S as i,o as d,e as n,f as c,g as s,i as r,V as o,w as u,t as p,ac as h,h as f,a7 as y,a5 as w,J as x}from"./index-B3PZsRwT.js";import{u as k}from"./resetTableRef-DZjcvemm.js";import{g as m}from"./api-By23aosn.js";import{D as g,a as I}from"./index-BrhnYIjA.js";import{C as b}from"./index-BThgVJ70.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";const v={class:"h-full w-full"},_={class:"h-full w-full flex gap-8px"},S={class:"h-full min-h-500px w-430px flex-col-stretch gap-8px overflow-hidden lt-sm:overflow-auto"},P={class:"right-content h-full flex-col-stretch gap-8px overflow-hidden lt-sm:overflow-auto"},Q={class:"content"},N={class:"min-w-100px text-center color-#646cff font-800"},C={class:"min-w-100px text-center color-#646cff font-800"},T={class:"min-w-100px text-center color-#646cff font-800"},D={class:"min-w-100px text-center color-#646cff font-800"},R={class:"min-w-100px text-center color-#646cff font-800"},U={class:"min-w-100px text-center color-#646cff font-800"},j={class:"min-w-100px text-center color-#646cff font-800"},A={class:"mb-0.5% h-50%"},B={class:"h-49.5%"},E=x(Object.assign({name:"work-order-management_model-wip"},{__name:"index",setup(x){const E=l(null),[L,q]=k({moduleNo:null}),O=[{type:"input",key:"moduleNo",label:"生产型号",span:16,placeholder:"请输入生产型号",showTime:!0}],W=l(null),M=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:50,align:"center",checked:!0,ellipsis:!0},{key:"moduleNo",dataIndex:"moduleNo",title:"生产型号",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>s("span",{class:"fonw-800 color-#646cff"},[e.moduleNo])},{key:"peType",dataIndex:"peType",title:"板类型",align:"center",checked:!0,ellipsis:!0,width:80},{key:"custProdNo",dataIndex:"custProdNo",title:"客户型号",align:"center",checked:!0,ellipsis:!0,width:130}];l(!0);const V=l(null),z=l({}),J=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"techName",dataIndex:"techName",title:"工艺名称",align:"center",checked:!0,ellipsis:!0,width:120},{key:"repeatCount",dataIndex:"repeatCount",title:"工步",align:"center",checked:!0,ellipsis:!0,width:120},{key:"wipPnlQty",dataIndex:"wipPnlQty",title:"PNL结存",align:"center",checked:!0,ellipsis:!0,width:120},{key:"wipSetQty",dataIndex:"wipSetQty",title:"SET结存",align:"center",checked:!0,ellipsis:!0,width:120},{key:"wipscrapSet",dataIndex:"wipscrapSet",title:"含废SET",align:"center",checked:!0,ellipsis:!0,width:120},{key:"wipscrapPcs",dataIndex:"wipscrapPcs",title:"含废PCS",align:"center",checked:!0,ellipsis:!0,width:120},{key:"wippcsQty",dataIndex:"wippcsQty",title:"有效PCS",align:"center",checked:!0,ellipsis:!0,width:120},{key:"applyScrapQty",dataIndex:"applyScrapQty",title:"报废申请",align:"center",checked:!0,ellipsis:!0,width:120},{key:"applyReworkQty",dataIndex:"applyReworkQty",title:"重工申请",align:"center",checked:!0,ellipsis:!0,width:120},{key:"assitQty",dataIndex:"assitQty",title:"外发数",align:"center",checked:!0,ellipsis:!0,width:120},{key:"holdPcsQty",dataIndex:"holdPcsQty",title:"暂停PCS数",align:"center",checked:!0,ellipsis:!0,width:120},{key:"iqcPcsQty",dataIndex:"iqcPcsQty",title:"IQC数量",align:"center",checked:!0,ellipsis:!0,width:120},{key:"delayDate",dataIndex:"delayDate",title:"结存小时",align:"center",checked:!0,ellipsis:!0,width:120}],X=l(null),{height:F}=a(X);function G(){W.value.getData()}function H(){q(),G()}const K=l([]),Y=l({totalQty:null,unitArea:null,totalArea:null,pnlArea:null,endOfLife:null,pnlSet:null,setPcs:null}),Z=l(!1),$=[{key:"dataIndex",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"wipState",dataIndex:"wipState",title:"结存状态",align:"center",checked:!0,ellipsis:!0,width:120},{key:"barCode",dataIndex:"barCode",title:"批卡号",align:"center",checked:!0,ellipsis:!0,width:180},{key:"prodOrderNo",dataIndex:"prodOrderNo",title:"工单号",align:"center",checked:!0,ellipsis:!0,width:180},{key:"custDateCode",dataIndex:"custDateCode",title:"客户周期",align:"center",checked:!0,ellipsis:!0,width:180},{key:"dateCode",dataIndex:"dateCode",title:"厂内周期",align:"center",checked:!0,ellipsis:!0,width:180},{key:"wipUnit",dataIndex:"wipUnit",title:"结存单位",align:"center",checked:!0,ellipsis:!0,width:120},{key:"wipQty",dataIndex:"wipQty",title:"结存数量",align:"center",checked:!0,ellipsis:!0,width:120},{key:"wipScrapSet",dataIndex:"wipScrapSet",title:"结存报废SET",align:"center",checked:!0,ellipsis:!0,width:120},{key:"wipScrapPcs",dataIndex:"wipScrapPcs",title:"结存报废PCS",align:"center",checked:!0,ellipsis:!0,width:120},{key:"outUnit",dataIndex:"outUnit",title:"出账单位",align:"center",checked:!0,ellipsis:!0,width:120},{key:"outQty",dataIndex:"outQty",title:"出账数",align:"center",checked:!0,ellipsis:!0,width:120},{key:"outScrapSet",dataIndex:"outScrapSet",title:"出账报废SET",align:"center",checked:!0,ellipsis:!0,width:120},{key:"outScrapPcs",dataIndex:"outScrapPcs",title:"出账报废PCS",align:"center",checked:!0,ellipsis:!0,width:120},{key:"workingQty",dataIndex:"workingQty",title:"在产数量",align:"center",checked:!0,ellipsis:!0,width:120},{key:"finishQty",dataIndex:"finishQty",title:"完成数量",align:"center",checked:!0,ellipsis:!0,width:120},{key:"workDate",dataIndex:"workDate",title:"生产时间",align:"center",checked:!0,ellipsis:!0,width:120},{key:"finishDate",dataIndex:"finishDate",title:"完成时间",align:"center",checked:!0,ellipsis:!0,width:120},{key:"scrapUnit",dataIndex:"scrapUnit",title:"申请单位",align:"center",checked:!0,ellipsis:!0,width:120},{key:"scrapQty",dataIndex:"scrapQty",title:"申请数量",align:"center",checked:!0,ellipsis:!0,width:120},{key:"inDate",dataIndex:"inDate",title:"入账时间",align:"center",checked:!0,ellipsis:!0,width:120},{key:"workDays",dataIndex:"workDays",title:"生产时长",align:"center",checked:!0,ellipsis:!0,width:120},{key:"qty",dataIndex:"qty",title:"批卡数量",align:"center",checked:!0,ellipsis:!0,width:120},{key:"unit",dataIndex:"unit",title:"批卡单位",align:"center",checked:!0,ellipsis:!0,width:120},{key:"weight",dataIndex:"weight",title:"单重",align:"center",checked:!0,ellipsis:!0,width:120},{key:"createBy",dataIndex:"createBy",title:"入账员",align:"center",checked:!0,ellipsis:!0,width:120}];function ee(e){Z.value=!0,m("/erpsyncmes/wip/selectWipPubtechnology",{prodId:e.prodId}).then((({data:e,error:t})=>{t?(Y.value=null,K.value=[]):(Y.value=e,e.pubtechnology.forEach(((e,t)=>{e.dataIndex=t+1,e.tableUuid=y.genV4().hexNoDelim})),K.value=e.pubtechnology)})).finally((()=>{Z.value=!1}))}const te=l(null),le=l({prodId:null,techId:null});function ae(e){le.value={prodId:e.prodId,techId:e.techId},w((()=>{te.value.getData()}))}function ie(e){(null==e?void 0:e.length)&&(W.value.setCurrentRowId(e[0]),w((()=>{ee(e[0])})))}function de(e){(null==e?void 0:e.length)&&(le.value={prodId:e[0].prodId,techId:e[0].techId},V.value.setCurrentRowId(e[0]),w((()=>{te.value.getData()})))}return(l,a)=>{const y=t,w=e,x=g,k=I,m=b,q=i("STableSummaryCell"),ne=i("STableSummaryRow");return d(),n("div",v,[c("div",_,[c("div",S,[s(y,{ref_key:"commonSearchRef",ref:E,searchParams:r(L),"onUpdate:searchParams":a[0]||(a[0]=e=>o(L)?L.value=e:null),"form-list":O,onSearch:G,onReset:H},null,8,["searchParams"]),s(w,{ref_key:"leftTableRef",ref:W,searchParams:r(L),"onUpdate:searchParams":a[1]||(a[1]=e=>o(L)?L.value=e:null),column:M,"show-row-selection":!1,"row-key":"prodId",scroll:{y:"auto"},"is-init-get-data":"","auto-generate-uuid":!0,class:"h-full",url:"/erpsyncmes/Mi/findModuleNo","show-quick-jumper":!1,onTableRowClick:ee,onTableDataLoadSucess:ie},null,8,["searchParams"])]),c("div",P,[s(m,{ref_key:"topCardRef",ref:X,"body-style":{padding:"5px"},class:"top-card"},{default:u((()=>[c("div",Q,[s(k,{title:null,bordered:"",size:"small",column:4,"label-style":{textAlign:"center"}},{default:u((()=>[s(x,{label:"有效单元"},{default:u((()=>[c("div",N,p(Y.value.totalQty),1)])),_:1}),s(x,{label:"单元面积"},{default:u((()=>[c("div",C,p(Y.value.unitArea),1)])),_:1}),s(x,{label:"有效面积"},{default:u((()=>[c("div",T,p(Y.value.totalArea),1)])),_:1}),s(x,{label:"pnl面积"},{default:u((()=>[c("div",D,p(Y.value.pnlArea),1)])),_:1}),s(x,{label:"报废特性"},{default:u((()=>[c("div",R,p(Y.value.endOfLife),1)])),_:1}),s(x,{label:"PNL/Set"},{default:u((()=>[c("div",U,p(Y.value.pnlSet),1)])),_:1}),s(x,{label:"SET/PCS"},{default:u((()=>[c("div",j,p(Y.value.setPcs),1)])),_:1})])),_:1})])])),_:1},512),c("div",{class:"w-full",style:h({height:"calc(100% - ".concat(r(F),"px)")})},[c("div",A,[s(w,{ref_key:"rightTableRef",ref:V,searchParams:z.value,"onUpdate:searchParams":a[2]||(a[2]=e=>z.value=e),column:J,"show-row-selection":!1,"row-key":"tableUuid","data-source":K.value,scroll:{y:"auto"},"is-init-get-data":!1,loading:Z.value,url:"/erpsyncmes/wip/selectWipByProdIdAndTechId","auto-generate-uuid":!1,class:"h-full","is-pagination":!1,"summary-fixed":"",onTableRowClick:ae,onTableDataLoadSucess:de},{title:u((()=>a[4]||(a[4]=[c("span",{class:"mr15px color-#646cff"},"WIP结存",-1)]))),summary:u((()=>[s(ne,null,{default:u((()=>[s(q,{index:0,"col-span":2,class:"text-center color-blue-600 font-bold"},{default:u((()=>a[5]||(a[5]=[f(" 本页合计: ")]))),_:1}),s(q,{index:2,class:"text-center color-blue-600 font-bold"}),s(q,{index:3,class:"text-center color-blue-600 font-bold"},{default:u((({total:e})=>[f(p(Number(e)||""),1)])),_:1}),s(q,{index:4,class:"text-center color-blue-600 font-bold"},{default:u((({total:e})=>[f(p(Number(e)||""),1)])),_:1}),s(q,{index:5,class:"text-center color-blue-600 font-bold"},{default:u((({total:e})=>[f(p(Number(e)||""),1)])),_:1}),s(q,{index:6,class:"text-center color-blue-600 font-bold"},{default:u((({total:e})=>[f(p(Number(e)||""),1)])),_:1}),s(q,{index:7,class:"text-center color-blue-600 font-bold"},{default:u((({total:e})=>[f(p(Number(e)||""),1)])),_:1}),s(q,{index:8,class:"text-center color-blue-600 font-bold"},{default:u((({total:e})=>[f(p(Number(e)||""),1)])),_:1}),s(q,{index:9,class:"text-center color-blue-600 font-bold"},{default:u((({total:e})=>[f(p(Number(e)||""),1)])),_:1}),s(q,{index:10,class:"text-center color-blue-600 font-bold"},{default:u((({total:e})=>[f(p(Number(e)||""),1)])),_:1}),s(q,{index:11,class:"text-center color-blue-600 font-bold"},{default:u((({total:e})=>[f(p(Number(e)||""),1)])),_:1}),s(q,{index:12,class:"text-center color-blue-600 font-bold"},{default:u((({total:e})=>[f(p(Number(e)||""),1)])),_:1})])),_:1})])),_:1},8,["searchParams","data-source","loading"])]),c("div",B,[s(w,{ref_key:"rightBottomTableRef",ref:te,searchParams:le.value,"onUpdate:searchParams":a[3]||(a[3]=e=>le.value=e),column:$,"show-row-selection":!1,scroll:{y:"auto"},"is-init-get-data":!1,loading:Z.value,url:"/erpsyncmes/wip/selectWipByProdIdAndTechId","auto-generate-uuid":!0,class:"h-full","is-pagination":!1,"summary-fixed":""},null,8,["searchParams","loading"])])],4)])])])}}}),[["__scopeId","data-v-f64cadf2"]]);export{E as default};
