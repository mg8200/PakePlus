import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as l,K as a,L as t,o as s,c as n,w as o,g as i,f as r,t as c,W as u,N as d,O as p,B as m,P as v,v as f,Q as h,F as y,U as g,r as x,p as w,a9 as k,b as _,S as b,e as C,h as I,J as U}from"./index-B3PZsRwT.js";import{a as $,v as z}from"./index-DqnulfE2.js";import{_ as S}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as j}from"./index-BThgVJ70.js";const R={class:"w-full flex"},T={class:"flex"},D={class:"w-full flex-y-center justify-end gap-12px"},O={class:"ml-3px"},A={class:"ml-3px"},B=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:a(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,g=t(e,"model");function x(){a("search",g.value)}const w=[{type:"dictionary",key:"copper",label:"底铜",dictCode:"pulse_copper",selectType:"select",placeholder:"请选择区分",span:24}];function k(){g.value.copper=null,a("reset",g.value)}return(e,l)=>{const a=u,t=d,_=p,b=m,C=v,I=f,U=h,$=y,z=j;return s(),n(z,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:o((()=>[i($,{model:g.value,"label-col":{span:5,md:7},class:"search-form"},{default:o((()=>[r("div",R,[i(U,{gutter:[15,8],wrap:"",class:"w-full"},{default:o((()=>[i(t,{span:24,md:12,lg:6,xl:8,xxl:4},{default:o((()=>[i(a,{model:g.value,"onUpdate:model":l[0]||(l[0]=e=>g.value=e),"form-list":w},null,8,["model"])])),_:1}),r("div",T,[i(I,{class:"m-0"},{default:o((()=>[r("div",D,[i(b,{type:"primary",ghost:"",class:"mini-btn",onClick:x},{icon:o((()=>[i(_,{class:"align-sub text-icon"})])),default:o((()=>[r("span",O,c(e.$t("common.search")),1)])),_:1}),i(b,{class:"mini-btn",onClick:k},{icon:o((()=>[i(C,{class:"align-sub text-icon"})])),default:o((()=>[r("span",A,c(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),E={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},F={key:0,class:"event-form"},J={key:1,class:"event-form"},K={class:"modal-footer"},N=U(Object.assign({name:"issuance-management_copper-compensation-for-hole-surface"},{__name:"index",setup(l){g((e=>({abf2f9a4:V.value})));const a=x({copper:""}),t=w({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{t.current=e,t.pageSize=l,U()}}),c=x([{key:"index",dataIndex:"index",title:"序号",width:100,align:"center",checked:!0},{key:"copper",dataIndex:"copper",title:"底铜",width:130,align:"center",checked:!0,ellipsis:!0},{key:"thick",dataIndex:"thick",title:"厚度",width:130,align:"center",checked:!0,ellipsis:!0},{key:"unit",dataIndex:"unit",title:"单位",width:130,align:"center",checked:!0,ellipsis:!0},{key:"operator",dataIndex:"operator",title:"创建人",width:130,align:"center",checked:!0,ellipsis:!0},{key:"createDate",dataIndex:"createDate",title:"创建时间",width:130,align:"center",checked:!0,ellipsis:!0},{key:"updateUser",dataIndex:"updateUser",title:"修改人",width:130,align:"center",checked:!0,ellipsis:!0},{key:"updateDate",dataIndex:"updateDate",title:"修改时间",width:130,align:"center",checked:!0,ellipsis:!0}]),d=[{type:"dictionary",key:"copper",label:"底铜",dictCode:"pulse_copper",selectType:"select",placeholder:"请选择区分",span:8},{type:"input",key:"thick",label:"厚度",placeholder:"请输入厚度",span:8},{type:"dictionary",key:"unit",label:"单位",dictCode:"unit",selectType:"select",placeholder:"请选择单位",span:8}],p=x([]),v=x(!1),f=x([]),h=x(null),y=e=>({style:{background:e.id===h.value?"#BAEAFA":"","background-color":2===Number(e.failureState)?"rgb(247, 109, 109)":""},onClick(){h.value=e.id}});function U(){v.value=!0,$("/mes/pulse/copperRule/pulseCopper/list",a.value).then((({data:e,error:l})=>{l||(e.forEach(((e,l)=>{e.index=l+1})),p.value=e,t.total=e.total)})).finally((()=>{v.value=!1}))}const R=x([]);function T(e){R.value=e}const D=x(!1),O=x(""),A=x(""),N=x("");function Q(){var e;if(1!=R.value.length)return null==(e=window.$message)?void 0:e.error("请先选择一条数据");N.value="底铜规则修改",O.value=p.value.find((e=>R.value[0]==e.id)),D.value=!0}function q(){N.value="底铜规则新增",A.value={},D.value=!0}function L(){z("/mes/pulse/copperRule/pulseCopper/update",O.value).then((({data:e,error:l})=>{var a;l||(D.value=!1,O.value="",null==(a=window.$message)||a.success("修改成功"),R.value=[],U())}))}function M(){z("/mes/pulse/copperRule/pulseCopper/add/new",A.value).then((({data:e,error:l})=>{var a;l||(D.value=!1,A.value="",null==(a=window.$message)||a.success("新增成功"),R.value=[],U())}))}function P(){var e,l;if(0==R.value.length)return null==(e=window.$message)?void 0:e.error("请先选择一条数据");null==(l=window.$modal)||l.confirm({title:"是否确认删除数据?",onOk:()=>{const e=p.value.filter((e=>R.value.includes(e.id)));z("/mes/pulse/copperRule/pulseCopper/deleteBatch",e).then((({data:e,error:l})=>{var a,t;l?null==(t=window.$message)||t.error("删除失败!"):(R.value=[],U(),null==(a=window.$message)||a.success("删除成功!"))}))},onCancel:()=>{}})}function W(){t.current=1,U()}U();const G=x(null),{height:H}=k(G),V=_((()=>"".concat(H.value+20,"px")));return(l,h)=>{const g=m,x=e,w=b("STable"),k=j;return s(),C("div",E,[i(B,{model:a.value,"onUpdate:model":h[0]||(h[0]=e=>a.value=e),onReset:h[1]||(h[1]=e=>W()),onSearch:h[2]||(h[2]=e=>W())},null,8,["model"]),i(k,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:o((()=>[i(g,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:q},{default:o((()=>h[8]||(h[8]=[r("span",{class:"ml-3px"},"新增",-1)]))),_:1}),i(g,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:Q},{default:o((()=>h[9]||(h[9]=[r("span",{class:"ml-3px"},"修改",-1)]))),_:1}),i(g,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:P},{default:o((()=>h[10]||(h[10]=[r("span",{class:"ml-3px"},"删除",-1)]))),_:1})])),extra:o((()=>[i(x,{columns:c.value,"onUpdate:columns":h[3]||(h[3]=e=>c.value=e)},null,8,["columns"])])),default:o((()=>[i(w,{columns:c.value,"data-source":p.value,size:"small",bordered:"",loading:v.value,"row-selection":{selectedRowKeys:R.value,onChange:T},"default-expanded-row-keys":f.value,"row-key":"id","custom-row":y,"default-expand-all-rows":!0,scroll:{y:"auto"},pagination:t,class:"has-footer-table h-full","row-height":23},null,8,["columns","data-source","loading","row-selection","default-expanded-row-keys","pagination"])])),_:1}),i(S,{visible:D.value,"onUpdate:visible":h[7]||(h[7]=e=>D.value=e),"destroy-on-close":!0,centered:!0,title:N.value,width:"1050px",height:"550px"},{footer:o((()=>[r("div",K,[i(g,{onClick:h[6]||(h[6]=e=>D.value=!1)},{default:o((()=>h[11]||(h[11]=[I("关闭")]))),_:1}),"底铜规则修改"==N.value?(s(),n(g,{key:0,onClick:L},{default:o((()=>h[12]||(h[12]=[I("保存")]))),_:1})):(s(),n(g,{key:1,onClick:M},{default:o((()=>h[13]||(h[13]=[I("保存")]))),_:1}))])])),default:o((()=>["底铜规则修改"==N.value?(s(),C("div",F,[i(u,{model:O.value,"onUpdate:model":h[4]||(h[4]=e=>O.value=e),"form-list":d},null,8,["model"])])):(s(),C("div",J,[i(u,{model:A.value,"onUpdate:model":h[5]||(h[5]=e=>A.value=e),"form-list":d},null,8,["model"])]))])),_:1},8,["visible","title"])])}}}),[["__scopeId","data-v-2673583f"]]);export{N as default};
