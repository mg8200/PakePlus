import{r as l,o as a,e,f as s,t,g as n,w as o,h as u,s as c,b6 as d,ad as r,ae as v,v as i,N as p,I as f,Q as m,d6 as _,B as b,F as x,J as g}from"./index-B3PZsRwT.js";import{g as w,p as h}from"./api-By23aosn.js";const y={class:"bodyClass"},N={class:"titClass"},j={class:"mt20px"},C={class:"ml-20px flex"},O={class:"w-full flex-y-center justify-end gap-12px"},U=g(Object.assign({name:"issuance-management_pulse-formula-distribution"},{__name:"index",setup(g){const U=l({lotNo:null,process:null,line:"1#线"}),k=l("");function D(){var l;k.value?d.confirm({title:"是否确认下发参数吗?",onOk:()=>{const l=JSON.parse(k.value);h("/mes/pulse/delivery/save",l).then((({error:l,data:a,otherData:e})=>{var s;l||(k.value=[],U.value.liaohao="",null==(s=window.$message)||s.success("下发成功!"))}))},onCancel:()=>{}}):null==(l=window.$message)||l.error("请先查询料号再确定下发!")}const I=l("");function J(){const l=new Date,a=l.getFullYear(),e="0".concat(l.getMonth()+1).slice(-2),s="0".concat(l.getDate()).slice(-2),t="0".concat(l.getHours()).slice(-2),n="0".concat(l.getMinutes()).slice(-2),o="0".concat(l.getSeconds()).slice(-2),u="".concat(a,"-").concat(e,"-").concat(s," ").concat(t,":").concat(n,":").concat(o);I.value=u}function S(){k.value=""}return setInterval(J,1e3),J(),(l,d)=>{const g=r,h=v,J=i,F=p,M=f,$=m,z=_,B=b,H=x;return a(),e("div",y,[s("div",N,[d[5]||(d[5]=s("p",null,"脉冲配方下发",-1)),s("p",null,t(I.value),1)]),s("div",j,[n(H,{model:U.value,"label-col":{span:5,md:7}},{default:o((()=>[n($,{gutter:[15,8],wrap:"",justify:"center"},{default:o((()=>[n(F,{span:24,md:12,lg:6,xl:6,xxl:4},{default:o((()=>[n(J,{label:"制程线",name:"process",class:"m-0","label-col":{}},{default:o((()=>[n(h,{value:U.value.process,"onUpdate:value":d[0]||(d[0]=l=>U.value.process=l),placeholder:"请选择制程线","allow-clear":""},{default:o((()=>[n(g,{value:"沉铜"},{default:o((()=>d[6]||(d[6]=[u("沉铜")]))),_:1}),n(g,{value:"黑影"},{default:o((()=>d[7]||(d[7]=[u("黑影")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),n(F,{span:24,md:12,lg:6,xl:6,xxl:4},{default:o((()=>[n(J,{label:"脉冲线别",name:"line",class:"m-0","label-col":{}},{default:o((()=>[n(h,{value:U.value.line,"onUpdate:value":d[1]||(d[1]=l=>U.value.line=l),disabled:"",placeholder:"请选择脉冲线别","allow-clear":""},{default:o((()=>[n(g,{value:"1#线"},{default:o((()=>d[8]||(d[8]=[u("1#线")]))),_:1}),n(g,{value:"2#线"},{default:o((()=>d[9]||(d[9]=[u("2#线")]))),_:1}),n(g,{value:"3#线"},{default:o((()=>d[10]||(d[10]=[u("3#线")]))),_:1}),n(g,{value:"4#线"},{default:o((()=>d[11]||(d[11]=[u("4#线")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),n(F,{span:24,md:12,lg:6,xl:6,xxl:4},{default:o((()=>[n(J,{label:"生产批号",name:"lotNo",class:"m-0","label-col":{}},{default:o((()=>[n(M,{value:U.value.lotNo,"onUpdate:value":d[2]||(d[2]=l=>U.value.lotNo=l),placeholder:"请输入生产批号","allow-clear":"",autocomplete:"off",onKeypress:d[3]||(d[3]=c((l=>(U.value.lotNo,void w("/mes/pulse/delivery/calculate",U.value).then((({data:l,error:a})=>{a||(k.value=JSON.stringify(l,null,2))})))),["enter"]))},null,8,["value"])])),_:1})])),_:1})])),_:1}),n($,{wrap:"",class:"ml-20px mt-20px"},{default:o((()=>[n(F,{span:16},{default:o((()=>[n(J,{label:"",name:"",class:"m-0","label-col":{}},{default:o((()=>[n(z,{value:k.value,"onUpdate:value":d[4]||(d[4]=l=>k.value=l),class:"color-brown text-size-16px font-600",style:{color:"brown"},placeholder:"",rows:28},null,8,["value"])])),_:1})])),_:1}),n(F,{span:8},{default:o((()=>[s("div",C,[n(J,{class:"m-0"},{default:o((()=>[s("div",O,[n(B,{class:"mini-btn down-btn",onClick:D},{default:o((()=>d[12]||(d[12]=[s("span",{class:"m-auto"},"确定下发",-1)]))),_:1}),n(B,{class:"mini-btn down-btn",onClick:S},{default:o((()=>d[13]||(d[13]=[s("span",{class:"m-auto"},"清除",-1)]))),_:1})])])),_:1})])])),_:1})])),_:1})])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-2b09841e"]]);export{U as default};
