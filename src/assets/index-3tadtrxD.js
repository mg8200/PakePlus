import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as l,K as a,L as t,o as n,c as s,w as u,g as o,f as i,s as d,h as c,t as r,I as m,v as p,N as v,ad as f,ae as h,O as x,B as _,P as g,Q as w,F as y,r as k,p as b,db as I,a7 as q,S as N,e as U}from"./index-B3PZsRwT.js";import{j as S,k as C,l as D,n as E,u as z,o as T,q as j}from"./index-DqnulfE2.js";import{_ as R}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{C as A}from"./index-BThgVJ70.js";const L={class:"w-full flex"},O={class:"flex"},F={class:"w-full flex-y-center justify-end gap-12px"},K={class:"ml-3px"},M={class:"ml-3px"},P=l({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:a(["search","reset"],["update:model"]),setup(e,{emit:l}){const a=l,k=t(e,"model");function b(){a("search",k.value)}function I(){k.value.equipmentName=null,k.value.lineName=null,k.value.locationId=null,k.value.equipmentStatus=null,k.value.siteId="HBJL",a("reset",k.value)}return(e,l)=>{const a=m,t=p,q=v,N=f,U=h,S=x,C=_,D=g,E=w,z=y,T=A;return n(),s(T,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:u((()=>[o(z,{model:k.value,"label-col":{span:5,md:7},class:"search-form"},{default:u((()=>[i("div",L,[o(E,{gutter:[15,8],wrap:"",class:"w-full"},{default:u((()=>[o(q,{span:24,md:12,lg:6,xl:8,xxl:4},{default:u((()=>[o(t,{label:"设备名称",name:"equipmentName",class:"m-0","label-col":{}},{default:u((()=>[o(a,{value:k.value.equipmentName,"onUpdate:value":l[0]||(l[0]=e=>k.value.equipmentName=e),placeholder:"请输入设备名称",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(b,["enter"])},null,8,["value"])])),_:1})])),_:1}),o(q,{span:24,md:12,lg:6,xl:8,xxl:4},{default:u((()=>[o(t,{label:"线体名称",name:"lineName",class:"m-0","label-col":{}},{default:u((()=>[o(a,{value:k.value.lineName,"onUpdate:value":l[1]||(l[1]=e=>k.value.lineName=e),placeholder:"请输入线体名称",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(b,["enter"])},null,8,["value"])])),_:1})])),_:1}),o(q,{span:24,md:12,lg:6,xl:8,xxl:4},{default:u((()=>[o(t,{label:"工作位置",name:"locationId",class:"m-0","label-col":{}},{default:u((()=>[o(a,{value:k.value.locationId,"onUpdate:value":l[2]||(l[2]=e=>k.value.locationId=e),placeholder:"请输入工作位置",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:d(b,["enter"])},null,8,["value"])])),_:1})])),_:1}),o(q,{span:24,md:12,lg:6,xl:8,xxl:4},{default:u((()=>[o(t,{label:"状态",name:"equipmentStatus",class:"m-0","label-col":{}},{default:u((()=>[o(U,{value:k.value.equipmentStatus,"onUpdate:value":l[3]||(l[3]=e=>k.value.equipmentStatus=e),placeholder:"请选择状态","allow-clear":"",class:"min-form-control"},{default:u((()=>[o(N,{value:"OFF"},{default:u((()=>l[4]||(l[4]=[c("OFF")]))),_:1}),o(N,{value:"DOWN"},{default:u((()=>l[5]||(l[5]=[c("DOWN")]))),_:1}),o(N,{value:"PM"},{default:u((()=>l[6]||(l[6]=[c("PM")]))),_:1}),o(N,{value:"LEND"},{default:u((()=>l[7]||(l[7]=[c("LEND")]))),_:1}),o(N,{value:"IDLE"},{default:u((()=>l[8]||(l[8]=[c("IDLE")]))),_:1}),o(N,{value:"RUN"},{default:u((()=>l[9]||(l[9]=[c("RUN")]))),_:1}),o(N,{value:"READY"},{default:u((()=>l[10]||(l[10]=[c("READY")]))),_:1}),o(N,{value:"PAUSE"},{default:u((()=>l[11]||(l[11]=[c("PAUSE")]))),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),i("div",O,[o(t,{class:"m-0"},{default:u((()=>[i("div",F,[o(C,{type:"primary",ghost:"",class:"mini-btn",onClick:b},{icon:u((()=>[o(S,{class:"align-sub text-icon"})])),default:u((()=>[i("span",K,r(e.$t("common.search")),1)])),_:1}),o(C,{class:"mini-btn",onClick:I},{icon:u((()=>[o(D,{class:"align-sub text-icon"})])),default:u((()=>[i("span",M,r(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),$={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},B={class:"event-form"},J={class:"modal-footer"},V=Object.assign({name:"erpdatasync_equipment-modeling_equipment"},{__name:"index",setup(l){const a=k({equipmentStatus:"",equipmentName:"",lineName:"",locationId:null}),t=b({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{t.current=e,t.pageSize=l,M()}}),s=k([{key:"index",dataIndex:"index",title:"序号",width:100,align:"center",checked:!0},{key:"equipmentName",dataIndex:"equipmentName",title:"设备名称",width:200,align:"center",checked:!0,ellipsis:!0},{key:"equipmentId",dataIndex:"equipmentId",title:"设备代码",width:180,align:"center",checked:!0,ellipsis:!0},{key:"equipmentType",dataIndex:"equipmentType",title:"设备类型",width:120,align:"center",checked:!0,ellipsis:!0},{key:"equipmentVendorModel",dataIndex:"equipmentVendorModel",title:"厂商型号",width:120,align:"center",checked:!0,ellipsis:!0},{key:"lineName",dataIndex:"lineName",title:"线体名称",width:150,align:"center",checked:!0,ellipsis:!0},{key:"lineId",dataIndex:"lineId",title:"线体代码",width:180,align:"center",checked:!0,ellipsis:!0},{key:"userGroup",dataIndex:"userGroup",title:"使用部门",width:120,align:"center",checked:!0,ellipsis:!0},{key:"locationId",dataIndex:"locationId",title:"工作位置",width:150,align:"center",checked:!0,ellipsis:!0},{key:"equipmentStatus",dataIndex:"equipmentStatus",title:"状态",width:80,align:"center",checked:!0,ellipsis:!0},{key:"createTime",dataIndex:"createTime",title:"创建时间",width:150,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>null==e.createDate?null:I(e.createDate)},{key:"lmTime",dataIndex:"lmTime",title:"修改时间",width:150,align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>null==e.lmTime?null:I(e.lmTime)},{key:"lmUser",dataIndex:"lmUser",title:"修改人",width:60,align:"center",checked:!0,ellipsis:!0}]),d=k({}),r=k(!1),f=k([]),h=k(!1),x=k([]);k([{label:"HBJL"}]);const g=k([]);C().then((({error:e,data:l})=>{e||(g.value=l)}));const L=k([]);D().then((({error:e,data:l})=>{e||(L.value=l)}));const O=k([]);E().then((({error:e,data:l})=>{e||(O.value=l)}));const F=k([]);z().then((({error:e,data:l})=>{e||(F.value=l)}));const K=k([]);function M(){h.value=!0,S({pageSize:t.pageSize,pageNum:t.current,...a.value}).then((({data:e,error:l})=>{l||(e.list.forEach(((e,l)=>{e.index=l+1,e.uid=q.genV4().hexNoDelim})),f.value=e.list,t.total=e.total)})).finally((()=>{h.value=!1}))}T().then((({error:e,data:l})=>{e||(K.value=l)}));const V=k("");function G(){crDatas.value={},r.value=!0}const H=k([]);function Q(e){H.value=e}function W(){var e;if(1!==H.value.length)return null==(e=window.$message)?void 0:e.error("请选择一条数据");const l=f.value.filter((e=>H.value.includes(e.equipmentUuid)));V.value="工厂设备数据修改",d.value=l[0],r.value=!0}function Y(){var e;if(0==H.value.length)return null==(e=window.$message)?void 0:e.error("请选择数据");const l=H.value;j(l).then((({error:e,data:l})=>{var a;e||(null==(a=window.$message)||a.success("删除成功"),M())}))}function X(){t.current=1,M()}M();const Z=k(null),ee=e=>({style:{background:e.uid===Z.value?"#BAEAFA":""},class:e.uid===Z.value?"jl-table-row-selected":"",onClick:()=>{Z.value=e.uid}});return(l,g)=>{const k=_,b=e,I=N("STable"),q=m,S=p,C=v,D=w,E=y,z=A;return n(),U("div",$,[o(P,{model:a.value,"onUpdate:model":g[0]||(g[0]=e=>a.value=e),onReset:g[1]||(g[1]=e=>X()),onSearch:g[2]||(g[2]=e=>X())},null,8,["model"]),o(z,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:u((()=>[o(k,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:G},{default:u((()=>g[10]||(g[10]=[i("span",{class:"ml-3px"},"新增",-1)]))),_:1}),o(k,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:W},{default:u((()=>g[11]||(g[11]=[i("span",{class:"ml-3px"},"修改",-1)]))),_:1}),o(k,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:Y},{default:u((()=>g[12]||(g[12]=[i("span",{class:"ml-3px"},"删除",-1)]))),_:1})])),extra:u((()=>[o(b,{columns:s.value,"onUpdate:columns":g[3]||(g[3]=e=>s.value=e)},null,8,["columns"])])),default:u((()=>[o(I,{columns:s.value,"data-source":f.value,size:"small",bordered:"",loading:h.value,"row-selection":{selectedRowKeys:H.value,onChange:Q},"default-expanded-row-keys":x.value,"row-key":"equipmentUuid","default-expand-all-rows":!0,scroll:{x:2e3,y:"auto"},pagination:t,class:"h-full","custom-row":ee,"row-height":23},null,8,["columns","data-source","loading","row-selection","default-expanded-row-keys","pagination"]),o(R,{visible:r.value,"onUpdate:visible":g[9]||(g[9]=e=>r.value=e),"destroy-on-close":!0,title:"新增",width:"700px"},{footer:u((()=>[i("div",J,[o(k,{onClick:g[8]||(g[8]=e=>r.value=!1)},{default:u((()=>g[13]||(g[13]=[c("关闭")]))),_:1}),o(k,{type:"primary",onClick:l.boundUpdata},{default:u((()=>g[14]||(g[14]=[c("保存")]))),_:1},8,["onClick"])])])),default:u((()=>[i("div",B,[o(E,{model:d.value,name:"basic","label-col":{span:6}},{default:u((()=>[o(D,{gutter:24},{default:u((()=>[o(C,{span:12},{default:u((()=>[o(S,{label:"手机号码",name:"phone"},{default:u((()=>[o(q,{value:d.value.phone,"onUpdate:value":g[4]||(g[4]=e=>d.value.phone=e)},null,8,["value"])])),_:1})])),_:1}),o(C,{span:12},{default:u((()=>[o(S,{label:"手机号码",name:"phone2"},{default:u((()=>[o(q,{value:d.value.phone2,"onUpdate:value":g[5]||(g[5]=e=>d.value.phone2=e)},null,8,["value"])])),_:1})])),_:1}),o(C,{span:12},{default:u((()=>[o(S,{label:"手机号码",name:"phone3"},{default:u((()=>[o(q,{value:d.value.phone3,"onUpdate:value":g[6]||(g[6]=e=>d.value.phone3=e)},null,8,["value"])])),_:1})])),_:1}),o(C,{span:12},{default:u((()=>[o(S,{label:"手机号码",name:"phone4"},{default:u((()=>[o(q,{value:d.value.phone4,"onUpdate:value":g[7]||(g[7]=e=>d.value.phone4=e)},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible"])])),_:1})])}}});export{V as default};
