import{_ as e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import{d as a,K as l,L as t,o as s,c as o,w as n,g as i,f as c,s as r,t as d,I as u,v as m,N as p,O as f,B as g,P as h,Q as v,F as x,U as b,r as _,p as y,a9 as k,b as w,S as C,e as j,J as I}from"./index-B3PZsRwT.js";import{g as S}from"./api-By23aosn.js";import{C as z}from"./index-BThgVJ70.js";const U={class:"w-full flex"},A={class:"flex"},F={class:"w-full flex-y-center justify-end gap-12px"},L={class:"ml-3px"},O={class:"ml-3px"},B=a({__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:l(["search"],["update:model"]),setup(e,{emit:a}){const l=a,b=t(e,"model");function _(){l("search",b.value)}function y(){b.value={materiel:"",status:""},l("search",b.value)}return(e,a)=>{const l=u,t=m,k=p,w=f,C=g,j=h,I=v,S=x,B=z;return s(),o(B,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:n((()=>[i(S,{ref:"formRef",model:b.value,"label-col":{span:5,md:7},class:"search-form"},{default:n((()=>[c("div",U,[i(I,{gutter:[15,8],wrap:"",class:"w-full"},{default:n((()=>[i(k,{span:24,md:12,lg:6,xl:6,xxl:6},{default:n((()=>[i(t,{label:"料号",name:"materiel",class:"m-0","label-col":{}},{default:n((()=>[i(l,{value:b.value.materiel,"onUpdate:value":a[0]||(a[0]=e=>b.value.materiel=e),placeholder:"请输入料号",class:"min-form-control","allow-clear":"",autocomplete:"off",onKeypress:r(_,["enter"])},null,8,["value"])])),_:1})])),_:1}),c("div",A,[i(t,{class:"m-0"},{default:n((()=>[c("div",F,[i(C,{type:"primary",ghost:"",class:"mini-btn",onClick:_},{icon:n((()=>[i(w,{class:"align-sub text-icon"})])),default:n((()=>[c("span",L,d(e.$t("common.search")),1)])),_:1}),i(C,{class:"mini-btn",onClick:y},{icon:n((()=>[i(j,{class:"align-sub text-icon"})])),default:n((()=>[c("span",O,d(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),D={class:"jl-main-page one-code-ascend min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},E=I(a({name:"intelligent-iogistics_up-pnl-material-list",__name:"index",setup(a){b((e=>({"53d282cc":x.value})));const l=_({materiel:null}),t=y({current:1,pageSize:200,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,a)=>{t.current=e,t.pageSize=a,p()}}),o=_([]),r=_(!1),d=_([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"materialLot",dataIndex:"materialLot",title:"物料批次",align:"center",checked:!0,ellipsis:!0},{key:"podCode",dataIndex:"podCode",title:"货架编号",align:"center",checked:!0,ellipsis:!0},{key:"positionCode",dataIndex:"positionCode",title:"位置编号",align:"center",checked:!0,ellipsis:!0},{key:"areaCode",dataIndex:"areaCode",title:"区域编号",align:"center",checked:!0,ellipsis:!0},{key:"bindDate",dataIndex:"bindDate",title:"上架时间",align:"center",checked:!0,ellipsis:!0}]);function u(){m()}function m(){t.current=1,p()}function p(){r.value=!0,S("/mes/jlagv/machine/woker/selectMateriel?materiel=".concat(l.value.materiel)).then((({data:e,error:a})=>{a||(e.forEach(((e,a)=>{e.index=a+1})),o.value=e)})).finally((()=>r.value=!1))}p();const f=_(null),g=e=>({style:{background:e.id===f.value?"#BAEAFA":"",backgroundColor:0===Number(e.timeOutFlag)?"rgb(244, 56, 56)":""},class:" ".concat(e.positionCode===f.value?"jl-table-row-selected":""),onClick:()=>{f.value=e.positionCode}}),h=_(null),{height:v}=k(h),x=w((()=>"".concat(v.value+20,"px")));return(a,p)=>{const f=e,h=C("STable"),v=z;return s(),j("div",D,[i(B,{model:l.value,"onUpdate:model":p[0]||(p[0]=e=>l.value=e),onReset:u,onSearch:m},null,8,["model"]),i(v,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{extra:n((()=>[i(f,{columns:d.value,"onUpdate:columns":p[1]||(p[1]=e=>d.value=e)},null,8,["columns"])])),default:n((()=>[i(h,{columns:d.value,"data-source":o.value,bordered:"",size:"small",loading:r.value,"row-key":"positionCode",pagination:t,"custom-row":g,scroll:{y:"auto"},"row-height":23,class:"has-footer-table h-full"},{footer:n((()=>p[2]||(p[2]=[c("div",{style:{display:"flex","align-items":"center"}},[c("div",{style:{width:"20px",height:"14px","background-color":"rgb(244, 56, 56)"}}),c("span",null,"背景为物料上架时间超过8小时")],-1)]))),_:1},8,["columns","data-source","loading","pagination"])])),_:1})])}}}),[["__scopeId","data-v-0cf58a9b"]]);export{E as default};
