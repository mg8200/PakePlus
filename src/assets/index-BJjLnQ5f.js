import{d as e,K as a,L as l,r as s,o as t,c as n,w as o,g as i,f as r,t as c,M as u,v as d,N as m,O as f,B as p,P as v,Q as g,F as h,aa as x,p as w,a5 as y,af as b,S as Y,e as _,ac as k,J as D}from"./index-B3PZsRwT.js";import{b as M,c as S}from"./index-BphokUhD.js";import{C as z}from"./index-BThgVJ70.js";const N={class:"w-full flex"},T={class:"flex"},C={class:"w-full flex-y-center justify-end gap-12px"},j={class:"ml-3px"},q=e({__name:"inquiry",props:{model:{required:!0},modelModifiers:{}},emits:a(["reset","search"],["update:model"]),setup(e,{emit:a}){const w=a,y=l(e,"model"),b=s(null);function Y(){const e=(new Date).setHours(0,0,0,0);return[x(e-864e5).format("YYYY-MM-DD"),x(e).format("YYYY-MM-DD")]}function _(){y.value={sendNo:null,time:Y()},w("reset",y.value)}function k(){w("search",y.value)}return(e,a)=>{const l=u,s=d,x=m,w=f,Y=p,D=v,M=g,S=h,q=z;return t(),n(q,{title:null,bordered:!1,class:"search-card card-wrapper"},{default:o((()=>[i(S,{ref_key:"formRef",ref:b,model:y.value,"label-col":{span:5,md:7},class:"inquiry-form"},{default:o((()=>[r("div",N,[i(M,{gutter:[15,8],wrap:"",class:"w-full"},{default:o((()=>[i(x,{span:24,md:12,lg:6,xl:6,xxl:4},{default:o((()=>[i(s,{label:"日期",name:"model",class:"m-0","label-col":{}},{default:o((()=>[i(l,{value:y.value.time,"onUpdate:value":a[0]||(a[0]=e=>y.value.time=e),"value-format":"YYYY-MM-DD",class:"min-form-control"},null,8,["value"])])),_:1})])),_:1}),r("div",T,[i(s,{class:"m-0"},{default:o((()=>[r("div",C,[i(Y,{type:"primary",ghost:"",class:"mini-btn",onClick:k},{icon:o((()=>[i(w,{class:"align-sub text-icon"})])),default:o((()=>[a[1]||(a[1]=r("span",{class:"ml-3px"},"查询",-1))])),_:1}),i(Y,{class:"mini-btn",onClick:_},{icon:o((()=>[i(D,{class:"align-sub text-icon"})])),default:o((()=>[r("span",j,c(e.$t("common.reset")),1)])),_:1})])])),_:1})])])),_:1})])])),_:1},8,["model"])])),_:1})}}}),E={class:"jl-main-page printed-code h-full h-full min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},I=D(e({name:"plan-scheduling_finished-goods-deliverys",__name:"index",setup(e){const a=s({pageNum:1,pageSize:200});const l=s({sendNo:null,time:function(){const e=(new Date).setHours(0,0,0,0);return[x(e-864e5).format("YYYY-MM-DD"),x(e).format("YYYY-MM-DD")]}()}),n=w({current:a.value.pageNum,pageSize:a.value.pageSize,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:(e,a)=>"共".concat(e,"条"),total:0,onChange:async(e,l)=>{n.current=e,n.pageSize=l,a.value.pageNum=e,a.value.pageSize=l,v()}}),c=s(null),u=s([]),d=s([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0},{key:"description",dataIndex:"description",title:"二维码信息",align:"center",checked:!0,ellipsis:!0},{key:"createTime",dataIndex:"createTime",title:"创建时间",align:"center",checked:!0,ellipsis:!0}]),f=s(!1);function v(){var e;const{sendNo:s="",startTime:t,endTime:o}=l.value,i={sendNo:s,startTime:t,endTime:o,...a.value};(null==(e=l.value.time)?void 0:e[0])&&(i.startTime=l.value.time[0],i.endTime=l.value.time[1]),f.value=!0,M(i).then((({data:e,error:a})=>{a||(e.list.forEach(((e,a)=>{e.index=a+1})),n.total=e.total,u.value=e.list)})).finally((()=>f.value=!1))}function h(){a.value.pageNum=1,n.current=1,v()}function D(){a.value.pageNum=1,n.current=1,v()}v(),s(!1),s([]);const N=s([]);function T(e){N.value=e}s("");const C=e=>({style:{background:e.id===c.value?"#BAEAFA":""}}),j=s(42);return window.addEventListener("resize",(()=>{y((()=>{const e=document.querySelector(".printed-code .search-box"),a=null==e?void 0:e.clientHeight;j.value=a||76}))})),b((()=>{window.removeEventListener("resize",(()=>{}))})),(e,a)=>{const s=p,c=Y("STable"),v=z,x=m,w=g;return t(),_("div",E,[i(q,{model:l.value,"onUpdate:model":a[0]||(a[0]=e=>l.value=e),class:"search-box",onReset:h,onSearch:D},null,8,["model"]),i(w,{wrap:"",class:"w-full",style:k({height:"calc(100% - ".concat(j.value,"px)")})},{default:o((()=>[i(x,{span:24,class:"h-full"},{default:o((()=>[i(v,{bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"table-card h-full flex-col-stretch sm:flex-1-hidden card-wrapper"},{title:o((()=>[i(s,{type:"primary",class:"mini-btn",ghost:"",onClick:a[1]||(a[1]=e=>function(){const e=N.value.join(",");S(e)}())},{icon:o((()=>a[2]||(a[2]=[r("span",{class:"align-sub text-icon"},null,-1)]))),default:o((()=>[a[3]||(a[3]=r("span",{class:"ml-3px"},"导出",-1))])),_:1})])),default:o((()=>[i(c,{ref:"tableWrapperRef",columns:d.value,"data-source":u.value,bordered:"","row-selection":{selectedRowKeys:N.value,onChange:T},size:"small",loading:f.value,"row-key":"id",pagination:n,"custom-row":C,scroll:{x:300,y:1200},class:"h-full","row-height":23},null,8,["columns","data-source","row-selection","loading","pagination"])])),_:1})])),_:1})])),_:1},8,["style"])])}}}),[["__scopeId","data-v-6ca9f126"]]);export{I as default};
