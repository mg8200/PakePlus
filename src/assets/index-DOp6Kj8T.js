import{r as a,a2 as e,o as l,e as t,f as s,t as n,g as c,w as o,s as u,a3 as r,c as i,b6 as d,I as p,v as m,N as v,Q as f,d6 as g,B as x,F as h,J as w}from"./index-B3PZsRwT.js";import{g as _,p as b}from"./api-By23aosn.js";const y={class:"bodyClass"},I={class:"titClass"},j={class:"mt20px"},C={class:"ml-20px flex"},F={class:"w-full flex-y-center justify-end gap-12px"},N=w(Object.assign({name:"electrical-measurement_vcp-parameter-issuance-0"},{__name:"index",setup(w){const N=a({lotId:""}),O=a("");const k=a("");function D(){const a=new Date,e=a.getFullYear(),l="0".concat(a.getMonth()+1).slice(-2),t="0".concat(a.getDate()).slice(-2),s="0".concat(a.getHours()).slice(-2),n="0".concat(a.getMinutes()).slice(-2),c="0".concat(a.getSeconds()).slice(-2),o="".concat(e,"-").concat(l,"-").concat(t," ").concat(s,":").concat(n,":").concat(c);k.value=o}function J(){var a;O.value?d.confirm({title:"是否确认下发参数吗?",onOk:()=>{const a=JSON.parse(O.value);a.machineNo="麦逊",b("/mes/PFixtureTest/add",a).then((({error:a,data:e,otherData:l})=>{var t;a||(O.value=[],N.value.lotId="",null==(t=window.$message)||t.success("下发成功!"))}))},onCancel:()=>{}}):null==(a=window.$message)||a.error("请先查询料号再确定下发!")}function P(){O.value=""}return setInterval(D,1e3),D(),(a,d)=>{const w=p,b=m,D=v,S=f,$=g,M=x,T=h,U=e("hasAuth");return l(),t("div",y,[s("div",I,[d[3]||(d[3]=s("span",{class:"ml-10px"},"参数下发麦逊(夹具测试)",-1)),s("p",null,n(k.value),1)]),s("div",j,[c(T,{model:N.value,"label-col":{span:5,md:7}},{default:o((()=>[c(S,{gutter:[15,8],wrap:"",justify:"center"},{default:o((()=>[c(D,{span:24,md:12,lg:6,xl:6,xxl:4},{default:o((()=>[c(b,{label:"批卡号",name:"lotId",class:"m-0","label-col":{}},{default:o((()=>[c(w,{value:N.value.lotId,"onUpdate:value":d[0]||(d[0]=a=>N.value.lotId=a),placeholder:"请输入批卡号","allow-clear":"",autocomplete:"off",onKeypress:d[1]||(d[1]=u((a=>{var e;13===N.value.lotId.length?_("/mes/PFixtureTest/selectParam",N.value).then((({error:a,data:e})=>{a||(O.value=JSON.stringify(e,null,2))})):null==(e=window.$message)||e.error("请输入正确的料号查询!")}),["enter"]))},null,8,["value"])])),_:1})])),_:1})])),_:1}),c(S,{wrap:"",class:"ml-20px mt-20px"},{default:o((()=>[c(D,{span:16},{default:o((()=>[c(b,{label:"",name:"",class:"m-0","label-col":{}},{default:o((()=>[c($,{value:O.value,"onUpdate:value":d[2]||(d[2]=a=>O.value=a),style:{"font-size":"16px","font-weight":"600",color:"brown"},placeholder:"",rows:28},null,8,["value"])])),_:1})])),_:1}),c(D,{span:8},{default:o((()=>[s("div",C,[c(b,{class:"m-0"},{default:o((()=>[s("div",F,[r((l(),i(M,{class:"mini-btn",style:{height:"40px !important",width:"200px","margin-left":"10px","line-height":"0"},onClick:J},{default:o((()=>d[4]||(d[4]=[s("span",{class:"m-auto"},"确定下发",-1)]))),_:1})),[[U,["vcp-parameter-issuance:confirm-delivery"]]]),c(M,{class:"mini-btn",style:{height:"40px !important",width:"200px","margin-left":"10px","line-height":"0"},onClick:P},{default:o((()=>d[5]||(d[5]=[s("span",{class:"m-auto"},"清除",-1)]))),_:1})])])),_:1})])])),_:1})])),_:1})])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-9690b887"]]);export{N as default};
