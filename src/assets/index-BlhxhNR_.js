import{_ as e}from"./modal.vue_vue_type_style_index_0_lang-Gjmj9w7c.js";import{Z as t,r as a,p as l,g as s,h as r,a0 as i,o as n,e as c,w as d,f as o,i as u,I as p,N as h,ah as y,ai as m,W as k,Q as g,J as v,U as f,cs as w,V as x,X as b,c as I,B as P}from"./index-B3PZsRwT.js";import{_ as S}from"./table-DoFSI9NT.js";import{_ as Q}from"./common-search.vue_vue_type_script_setup_true_lang-BX9APgbN.js";import{u as N}from"./resetTableRef-DZjcvemm.js";import{u as _}from"./searchData-DpjdfxBw.js";import{a as C,v as T}from"./index-DqnulfE2.js";import{E as q}from"./index-DJLjdcIi.js";import{C as D}from"./index-BThgVJ70.js";import{E as R}from"./EditOutlined-5FYoGiVM.js";import{D as j}from"./DeleteOutlined-CWT7lRAZ.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DaxmPPHo.js";import"./api-By23aosn.js";import"./use-form-common-props-DQAdjfyv.js";import"./fromPairs-BI-MgVCs.js";const E={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},U={class:"head-container"},B={class:"head-tree"},L={style:{height:"600px"}},z={class:"event-form"},A=v({__name:"add",props:{upDatasA:{type:Object,required:!0}},emits:["row-clicked"],setup(e,{expose:v,emit:f}){const w=e,x=f,b=a(null),I=a([]),P={children:"children",label:"deptCaption"},Q=a(null),N=l({deptId:null,techId:null,pageNum:1,pageSize:200});t({url:"/erpsyncmes/baseData/qcsBugTable/departStructure",method:"get"}).then((({data:e,error:t})=>{t||(I.value=e)}));const _=l({current:1,pageSize:20,showSizeChanger:!0,pageSizeOptions:["5","10","15","20"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,t)=>{_.current=e,_.pageSize=t,$()}}),C=a([]),T=a(!1),R=a([{key:"index",dataIndex:"index",title:"序号",width:80,align:"center",checked:!0,ellipsis:!0},{key:"ltBugNo",dataIndex:"ltBugNo",title:"缺陷代码",align:"center",checked:!0,ellipsis:!0},{key:"ltBugName",dataIndex:"ltBugName",title:"缺陷名称",align:"center",checked:!0,ellipsis:!0,width:150},{key:"instruction",dataIndex:"instruction",title:"缺陷说明",align:"center",checked:!0,ellipsis:!0},{key:"cause",dataIndex:"cause",title:"缺陷原因",align:"center",checked:!0,ellipsis:!0},{key:"action",dataIndex:"action",title:"预防措施",align:"center",checked:!0,ellipsis:!0},{key:"ipqc",dataIndex:"ipqc",title:"IPQC",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>"1"===e.ipqc?s("span",null,[r("true")]):s("span",null,[r("false")])},{key:"mrb",dataIndex:"mrb",title:"MRB",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>"1"===e.mrb?s("span",null,[r("true")]):s("span",null,[r("false")])},{key:"fqc",dataIndex:"fqc",title:"FQC",align:"center",checked:!0,ellipsis:!0,customRender:({record:e})=>"1"===e.fqc?s("span",null,[r("true")]):s("span",null,[r("false")])}]),j=a(null),A=e=>({style:{background:e.bugId===j.value?"#BAEAFA":""},class:e.bugId===j.value?"jl-table-row-selected":"",onClick:()=>{j.value=e.bugId,x("row-clicked",e,{...J})}});function $(){T.value=!0,function(e){return t({url:"/erpsyncmes/baseData/qcsBugTable/bugTable",method:"get",params:e})}(N).then((({data:e,error:t})=>{t||(e.list.forEach(((e,t)=>{e.index=t+1})),_.total=(null==e?void 0:e.total)||0,C.value=e.list)})).finally((()=>T.value=!1))}function O(e,t){return!e||t.label.includes(e)}function V(e){N.deptId=e.deptId,$()}i((()=>b.value),(e=>{Q.value.filter(e)}));const M=[{type:"input",key:"scrapPnlQty",label:"可判PNL数",span:8,disabled:!0},{type:"input",key:"scrapSetQty",label:"可判SET数",span:8,disabled:!0},{type:"input",key:"scrapPcsQty",label:"可判PSC数",span:8,disabled:!0},{type:"inputNumber",key:"pnlQty",label:"判定PNL数",span:8,rule:[{validator:(e,t)=>t>J.scrapPnlQty?Promise.reject("判定PNL数不能超过可判PNL数"):t<0?Promise.reject("判定PNL数不能为负"):Promise.resolve(),trigger:"change"}]},{type:"inputNumber",key:"setQty",label:"判定SET数",span:8,rule:[{validator:(e,t)=>t>J.scrapSetQty?Promise.reject("判定SET数不能超过可判SET数"):t<0?Promise.reject("判定PNL数不能为负"):Promise.resolve(),trigger:"change"}]},{type:"inputNumber",key:"pcsQty",label:"判定PSC数",span:8,rule:[{validator:(e,t)=>t>J.scrapPcsQty?Promise.reject("判定PSC数不能超过可判PSC数"):t<0?Promise.reject("判定PNL数不能为负"):Promise.resolve(),trigger:"change"}]},{type:"input",key:"remark",label:"备注",span:24}];function F(e){x("row-clicked",e)}const J=l({scrapPnlQty:w.upDatasA.scrapPnlQty,scrapSetQty:w.upDatasA.scrapSetQty,scrapPcsQty:w.upDatasA.scrapPcsQty,pnlQty:0,setQty:0,pcsQty:0,remark:null});return i((()=>w.upDatasA),(e=>{J.scrapPnlQty=e.scrapPnlQty,J.scrapSetQty=e.scrapSetQty,J.scrapPcsQty=e.scrapPcsQty}),{immediate:!0,deep:!0}),v({upDatasA:J}),(e,t)=>{const a=p,l=h,r=D,i=y,v=m,f=k,w=g;return n(),c("div",E,[s(w,{gutter:10,class:"h-full",style:{height:"800px"}},{default:d((()=>[s(l,{span:5,class:"dept h-full"},{default:d((()=>[t[2]||(t[2]=o("div",{class:"title"},[o("span",null,"责任部门")],-1)),o("div",U,[s(a,{value:b.value,"onUpdate:value":t[0]||(t[0]=e=>b.value=e),placeholder:"请输入部门名称"},null,8,["value"])]),o("div",B,[s(u(q),{ref_key:"treeRef",ref:Q,data:I.value,props:P,"expand-on-click-node":!1,"filter-node-method":O,"node-key":"deptId","default-expand-all":"","highlight-current":"","empty-text":"暂无部门数据",onNodeClick:V},null,8,["data"])])])),_:1}),s(l,{span:19,class:"h-full flex-col-stretch gap-16px overflow-hidden"},{default:d((()=>[s(r,{bordered:!1,class:"table-card h-full flex-col-stretch sm:flex-1-hidden card-wrapper"},{default:d((()=>[o("div",L,[s(S,{column:R.value,"data-source":C.value,"show-row-selection":!1,bordered:"",size:"small",loading:T.value,"row-key":"bugId",pagination:_,"custom-row":A,scroll:{x:"auto",y:"2000"},class:"h-full","row-height":24,onTableRowClick:F},null,8,["column","data-source","loading","pagination"])])])),_:1}),o("div",null,[s(v,null,{default:d((()=>[s(i,{key:"1",tab:"判定"})])),_:1})]),o("div",z,[s(f,{model:J,"onUpdate:model":t[1]||(t[1]=e=>J=e),"form-list":M},null,8,["model"])])])),_:1})])),_:1})])}}},[["__scopeId","data-v-d9afe3c9"]]),$={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},O={class:"min-h-450px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},V={key:0,class:"event-form",style:{"margin-bottom":"20px"}},M={key:1,class:"event-form",style:{"margin-bottom":"20px"}},F={style:{height:"200px"}},J={style:{"margin-bottom":"10px"}},K={class:"modal-footer"},G={key:0,class:"event-form",style:{"margin-bottom":"20px"}},H={key:1,class:"event-form",style:{"margin-bottom":"20px"}},W={class:"modal-footer"},X={class:"h-full w-full flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},Z={style:{display:"flex"}},Y={style:{width:"40%","margin-left":"45%","margin-top":"0.5%","margin-right":"20px"}},ee=v(Object.assign({name:"quality-management_scrap-judgment"},{__name:"index",setup(i){f((e=>({"50c960c2":e.footerHeight})));const p=a(null),[h,y]=N({prodNo:null,lotNo:null,time:null}),[m,g]=N({pageNum:1,pageSize:200,lotNo:null,prodNo:null,techName:null}),v=a(!1),q=a(null),D=a(null),E=_(h),U=_(m),B=[{type:"input",key:"prodNo",label:"生产型号",span:24,md:12,lg:10,xl:4,xxl:4,placeholder:"请输入生产型号",showTime:!0},{type:"input",key:"lotNo",label:"批卡号",span:24,md:12,lg:10,xl:8,xxl:4,placeholder:"请输入批卡号",showTime:!0},{type:"dateRangePicker",key:"time",label:"日期",span:24,md:12,lg:10,xl:8,xxl:6,showTime:!0}],L=l({current:1,pageSize:25,showSizeChanger:!0,pageSizeOptions:["50","100","200","300","500"],showQuickJumper:!0,showTotal:e=>"共".concat(e,"条"),total:0,onChange:async(e,t)=>{L.current=e,L.pageSize=t}}),z=a(!1);const ee=a([{key:"index",dataIndex:"dataIndex",title:"序号",width:80,align:"center",checked:!0,class:"index-column"},{key:"state",dataIndex:"state",title:"状态",width:100,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"requestNo",dataIndex:"requestNo",title:"申请单号",width:150,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"mrbno",dataIndex:"mrbno",title:"mrbno",width:110,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"lotNo",dataIndex:"lotNo",title:"批卡号",width:150,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"fullProdNo",dataIndex:"fullProdNo",title:"生产型号",width:150,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"deptCaption",dataIndex:"deptCaption",title:"厂区",align:"center",width:120,checked:!0,ellipsis:!0},{key:"techNo",dataIndex:"techNo",title:"工艺编码",width:130,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"techName",dataIndex:"techName",title:"申请工艺",width:130,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"pnType",dataIndex:"pnType",title:"型号类型",width:100,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"surfTrea1",dataIndex:"surfTrea1",title:"表面处理1",width:130,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"surfTrea2",dataIndex:"surfTrea2",title:"表面处理2",width:130,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"scrapCharacteristic",dataIndex:"scrapCharacteristic",title:"报废特性",width:130,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"rquQty",dataIndex:"rquQty",title:"申请数量",width:120,align:"center",checked:!0,ellipsis:!0,sorter:!0,customRender:({record:e})=>s("span",{class:"fonw-900 color-red"},[e.rquQty])},{key:"rquUnit",dataIndex:"rquUnit",title:"申请单位",width:120,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"rquScrapSet",dataIndex:"rquScrapSet",title:"含废SET数",width:120,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"rquScrapPcs",dataIndex:"rquScrapPcs",title:"含废PCS数",width:120,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"remark",dataIndex:"remark",title:"备注",align:"center",width:150,checked:!0,ellipsis:!0},{key:"scrapPnlQty",dataIndex:"scrapPnlQty",title:"判定PNL数",align:"center",width:130,checked:!0,ellipsis:!0,sorter:!0},{key:"scrapSetQty",dataIndex:"scrapSetQty",title:"判定SET数",align:"center",width:130,checked:!0,ellipsis:!0,sorter:!0},{key:"scrapPcsQty",dataIndex:"scrapPcsQty",title:"判定PCS数",align:"center",width:130,checked:!0,ellipsis:!0,sorter:!0},{key:"pnlSet",dataIndex:"pnlSet",title:"1PNL=?SET",align:"center",width:130,checked:!0,ellipsis:!0,sorter:!0},{key:"setPcs",dataIndex:"setPcs",title:"1SET=?PCS",width:130,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"pcsArea",dataIndex:"pcsArea",title:"单元面积",align:"center",width:150,checked:!0,ellipsis:!0,sorter:!0},{key:"dateCode",dataIndex:"dateCode",title:"周期",width:120,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"createBy",dataIndex:"createBy",title:"申请人",width:120,align:"center",checked:!0,ellipsis:!0,sorter:!0},{key:"createDate",dataIndex:"createDate",title:"申请日期",align:"center",width:180,checked:!0,ellipsis:!0,sorter:!0}]),te=a([{key:"index",dataIndex:"dataIndex",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0,class:"index-column"},{key:"deptCaption",dataIndex:"deptCaption",title:"责任部门",sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"techName",dataIndex:"techName",title:"责任工艺",sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"ltBugName",dataIndex:"ltBugName",title:"缺陷名称",sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"pnlQty",dataIndex:"pnlQty",title:"判定PNL数",sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"setQty",dataIndex:"setQty",title:"判定SET数",width:200,sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"pcsQty",dataIndex:"pcsQty",title:"判定PCS数",sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"unitArea",dataIndex:"unitArea",title:"单元面积",width:200,sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"scrapArea",dataIndex:"scrapArea",title:"报废面积",sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"createBy",dataIndex:"createBy",title:"判定人",sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"createDate",dataIndex:"createDate",title:"判定日期",sorter:!0,align:"center",checked:!0,ellipsis:!0}]),ae=a([{key:"index",dataIndex:"index",title:"序号",width:70,align:"center",checked:!0,ellipsis:!0},{key:"deptCaption",dataIndex:"deptCaption",title:"责任部门",width:120,sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"techName",dataIndex:"techName",title:"责任工艺",width:120,sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"ltBugName",dataIndex:"ltBugName",title:"缺陷名称",width:130,sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"pnlQty",dataIndex:"pnlQty",title:"判定PNL数",width:110,sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"setQty",dataIndex:"setQty",title:"判定SET数",width:110,sorter:!0,align:"center",checked:!0,ellipsis:!0},{key:"pcsQty",dataIndex:"pcsQty",title:"判定PCS数",sorter:!0,align:"center",checked:!0,ellipsis:!0,width:110},{key:"remark",dataIndex:"remark",title:"备注",sorter:!0,align:"center",checked:!0,ellipsis:!0,width:150}]),le=[{type:"tabs",name:"MRB判定",span:24},{type:"input",key:"lotNo",label:"批卡号",placeholder:"请选择批卡号",rule:{required:!0,message:"请选择批卡号",trigger:"change"},suffixSlot:s(w,{class:"cursor-pointer",onClick:()=>{z.value=!0}},null),span:8},{type:"",name:"",span:8},{type:"",name:"",span:8},{type:"input",key:"requestNo",label:"申请单号",span:8,disabled:!0},{type:"input",key:"fullProdNo",label:"生产型号",span:8,disabled:!0},{type:"input",key:"custProdNo",label:"客户型号",span:8,disabled:!0},{type:"input",key:"pnlSet",label:"1PNL=?SET",span:8,disabled:!0},{type:"input",key:"setPcs",label:"1SET=?PCS",span:8,disabled:!0},{type:"input",key:"deptCaption",label:"申请部门",span:8,disabled:!0},{type:"input",key:"techName",label:"申请工艺",span:8,disabled:!0},{type:"input",key:"wipUnit",label:"申请单位",span:8,disabled:!0},{type:"input",key:"scrapCharacteristic",label:"报废特性",span:8,disabled:!0,placeholder:"null费null"},{type:"input",key:"wipQty",label:"数　　量",span:8,disabled:!0},{type:"input",key:"surfTrea1",label:"表面处理1",span:8,disabled:!0},{type:"input",key:"mrbno",label:"MRBNo",span:8,disabled:!0},{type:"inputNumber",key:"rquQty",label:"申请数量",span:8}],se=a(!1),re=a(!1),ie=a({pageNum:1,pageSize:25,requestId:""}),ne=a(null),ce=a(""),de=a(""),oe=a(""),ue=a(""),pe=a("");function he(){ue.value="报废申请单新增",ce.value={rquQty:1,rquScrapSet:0,rquScrapPcs:0,scrapPnlQty:0,scrapSetQty:0,scrapPcsQty:0,lotNo:null},se.value=!0;ce.value.lotNo}function ye(){q.value.getData(1)}function me(){y(),ye()}function ke(e){ie.value.requestId=e.requestId,D.value.getData()}const ge=a([]),ve=[{type:"input",key:"lotNo",label:"批卡号",span:6,placeholder:"请输入批卡号",showTime:!0},{type:"input",key:"prodNo",label:"生产型号",span:6,placeholder:"请输入生产型号",showTime:!0},{type:"select",key:"techName",label:"工艺名称",span:6,placeholder:"请选择工艺名称",showTime:!0,selectOptions:ge}];var fe;t({url:"/erpsyncmes/baseData/proscraprequest/scarpTechName/list",method:"GET",params:fe}).then((({data:e,error:t})=>{ge.value=null==e?void 0:e.map((e=>({label:e,value:e})))}));const we=a([]),xe=a([{key:"index",dataIndex:"index",title:"序号",width:60,align:"center",checked:!0},{key:"pnType",dataIndex:"pnType",title:"型号类型",sorter:!0,align:"center",checked:!0,width:100},{key:"fullProdNo",dataIndex:"fullProdNo",title:"生产型号",sorter:!0,align:"center",checked:!0,width:130},{key:"lotNo",dataIndex:"lotNo",title:"批卡号",sorter:!0,align:"center",checked:!0,width:150,customRender:({record:e})=>s("span",{class:"color-#646cff"},[e.lotNo])},{key:"techName",dataIndex:"techName",title:"工艺",sorter:!0,align:"center",checked:!0,width:140},{key:"surfTrea1",dataIndex:"surfTrea1",title:"表面处理1",sorter:!0,align:"center",checked:!0,width:180},{key:"wipUnit",dataIndex:"wipUnit",title:"单位",sorter:!0,align:"center",checked:!0,width:80},{key:"wipQty",dataIndex:"wipQty",title:"数量",sorter:!0,align:"center",checked:!0,width:80},{key:"wipScrapPcs",dataIndex:"wipScrapPcs",title:"含废PCS",sorter:!0,align:"center",checked:!0,width:110},{key:"outUnit",dataIndex:"outUnit",title:"出账单位",sorter:!0,align:"center",checked:!0,width:120},{key:"outQty",dataIndex:"outQty",title:"出账数",sorter:!0,align:"center",checked:!0,width:120},{key:"outScrapSet",dataIndex:"outScrapSet",title:"出账SET",sorter:!0,align:"center",checked:!0,width:120},{key:"outScrapPcs",dataIndex:"outScrapPcs",title:"出账PCS",sorter:!0,align:"center",checked:!0,width:120},{key:"createDate",dataIndex:"createDate",title:"入账时间",sorter:!0,align:"center",checked:!0,width:160},{key:"workState",dataIndex:"workState",title:"生产状态",sorter:!0,align:"center",checked:!0,width:120},{key:"wipState",dataIndex:"wipState",title:"结存状态",sorter:!0,align:"center",checked:!0,width:120},{key:"workDate",dataIndex:"workDate",title:"生产时间",sorter:!0,align:"center",checked:!0,width:160},{key:"finishDate",dataIndex:"finishDate",title:"完成时间",sorter:!0,align:"center",checked:!0,width:160},{key:"workDays",dataIndex:"workDays",title:"生产时长",sorter:!0,align:"center",checked:!0,width:120},{key:"unitArea",dataIndex:"unitArea",title:"单元面积",sorter:!0,align:"center",checked:!0,width:150},{key:"createBy",dataIndex:"createBy",title:"入账员",sorter:!0,align:"center",checked:!0,width:120}]);function be(){C("/erpsyncmes/baseData/proscraprequest/scarpLotInfo/list",m.value).then((({data:e,error:t})=>{t||(e.list.forEach(((e,t)=>{e.index=t+1})),we.value=e.list)}))}function Ie(){g(),be()}const Pe=a([]);function Se(e){m.value.wipId=e,ce.value=e}function Qe(){oe.value=m.value.wipId,oe.value.rquQty=1,oe.value.rquScrapSet=0,oe.value.rquScrapPcs=0,v.value=!1,"SET"===oe.value.outUnit&&(v.value=!0);const e=oe.value.lotNo;C("/erpsyncmes/baseData/proscraprequest/list",{prodNo:e,pageSize:200,pageNum:1}).then((({data:e,error:t})=>{t||(oe.value.bugRequestLogList=e.list)})),Pe.value=[],z.value=!1}const Ne=a({scrapPnlQty:1,scrapSetQty:0,scrapPcsQty:0,pnlQty:0,setQty:0,pcsQty:0});function _e(){var e;null===ce.value.lotNo?(re.value=!1,null==(e=window.$message)||e.error("批卡号不能为空")):(pe.value="新增责任判定",Ne.value={scrapPnlQty:oe.value.rquQty,scrapSetQty:oe.value.pnlSet*oe.value.rquQty,scrapPcsQty:oe.value.pnlSet*oe.value.setPcs},re.value=!0)}function Ce(e){p.value=e,null!==e.bugId?p.value=e:p.value=null}const Te=a(null);function qe(){var e,t;const a={...Te.value}.upDatasA,l=p.value;if(null===l)null==(e=window.$message)||e.error("请选择报废缺陷"),v.value=!1;else{const e={...a,...l};Pe.value.push(e),Pe.value.forEach(((e,t)=>{e.index=t+1})),Pe.value=[...Pe.value],null==(t=window.$message)||t.success("新增成功")}}function De(e){Pe.value=e}function Re(){var e;1!=Pe.value.length&&(null==(e=window.$message)||e.error("请选择要修改的单条数据")),ue.value="报废申请单修改",ce.value=Pe.value,se.value=!0}function je(e){}function Ee(e){ne.value=e,1===e.length?ne.value=e[0]:ne.value=null}function Ue(e){var t;if(!ne.value||0===ne.value.length)return null==(t=window.$message)?void 0:t.error("请选择一条数据");pe.value="责任判断修改",ne.value=e,re.value=!0}function Be(){var e;if(!ne.value)return null==(e=window.$message)?void 0:e.error("请选择一条数据");window.$modal.confirm({title:"提示",content:"确认删除该行数据吗？",onOk(){var e;Pe.value.splice(ne.value.index-1,1),Pe.value.forEach(((e,t)=>{e.index=t+1})),Pe.value=[...Pe.value],null==(e=window.$message)||e.success("删除成功"),0===Pe.value.length&&(ne.value=null)},onCancel(){}})}function Le(){var e,t;if(null===ce.value.lotNo)re.value=!1,null==(e=window.$message)||e.error("批卡号不能为空");else{const e=ce.value;if(Pe.value.length>0){const t=Pe.value.map((e=>({bugId:e.bugId,techId:e.techId,deptId:e.deptId,pnlQty:e.pnlQty,setQty:e.setQty,pcsQty:e.pcsQty,remark:e.remark})));T("/erpsyncmes/baseData/proscraprequest/add/new/scrapLog",{...e,bugRequestLogList:t}).then((({data:e,error:t})=>{var a;t||(se.value=!1,oe.value="",null==(a=window.$message)||a.success("新增成功"),selectedRowKeys.value=[],getData())}))}else null==(t=window.$message)||t.error("缺少责任判定数据")}}return(t,a)=>{const l=Q,i=P,p=S,y=k,g=e;return n(),c("div",$,[s(l,{searchParams:u(h),"onUpdate:searchParams":a[0]||(a[0]=e=>x(h)?h.value=e:null),"form-list":B,onSearch:ye,onReset:me},null,8,["searchParams"]),o("div",O,[s(p,{ref_key:"tableRef",ref:q,searchParams:u(E),"onUpdate:searchParams":a[1]||(a[1]=e=>x(E)?E.value=e:null),column:ee.value,"show-row-selection":!0,"auto-generate-uuid":!0,"row-height":24,scroll:{y:"450px"},"is-init-get-data":"",url:"/erpsyncmes/baseData/proscraprequest/list",onTableSelectChange:De,onTableRowClick:ke},{title:d((()=>[a[19]||(a[19]=o("span",{class:"mr15px color-#646cff"},"报废申请单",-1)),s(i,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:he},{icon:d((()=>[s(u(b),{class:"align-sub"})])),default:d((()=>[a[17]||(a[17]=r(" 新增 "))])),_:1}),s(i,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:Re},{icon:d((()=>[s(u(R),{class:"align-sub"})])),default:d((()=>[a[18]||(a[18]=r(" 修改 "))])),_:1})])),_:1},8,["searchParams","column"])]),s(p,{ref_key:"tableRefs",ref:D,searchParams:ie.value,"onUpdate:searchParams":a[2]||(a[2]=e=>ie.value=e),column:te.value,"show-row-selection":!1,"auto-generate-uuid":!0,"row-key":"recId",scroll:{x:"auto",y:"auto"},"row-height":24,url:"/erpsyncmes/baseData/bugRequestLog/list","is-init-get-data":!1},{title:d((()=>a[20]||(a[20]=[o("span",{class:"mr15px color-#646cff"},"责任判定",-1)]))),_:1},8,["searchParams","column"]),s(g,{visible:se.value,"onUpdate:visible":a[7]||(a[7]=e=>se.value=e),"destroy-on-close":!0,centered:!0,title:ue.value,width:"1000px",height:"750px"},{footer:d((()=>[o("div",K,[s(i,{onClick:a[6]||(a[6]=e=>se.value=!1)},{default:d((()=>a[25]||(a[25]=[r("关闭")]))),_:1}),"判定修改"==ue.value?(n(),I(i,{key:0,onClick:Le},{default:d((()=>a[26]||(a[26]=[r("保存")]))),_:1})):(n(),I(i,{key:1,onClick:Le},{default:d((()=>a[27]||(a[27]=[r("保存")]))),_:1}))])])),default:d((()=>["型号定义修改"==ue.value?(n(),c("div",V,[s(y,{model:ce.value,"onUpdate:model":a[3]||(a[3]=e=>ce.value=e),"form-list":le},null,8,["model"])])):(n(),c("div",M,[s(y,{model:ce.value,"onUpdate:model":a[4]||(a[4]=e=>ce.value=e),"form-list":le},null,8,["model"])])),o("div",F,[s(p,{ref_key:"tableRefs",ref:D,searchParams:ie.value,"onUpdate:searchParams":a[5]||(a[5]=e=>ie.value=e),column:ae.value,"show-row-selection":!0,"auto-generate-uuid":!1,"row-key":"index","data-source":Pe.value,scroll:{x:"auto",y:"150px"},"is-init-get-data":!1,onTableSelectChange:Ee,onTableRowClick:je},{title:d((()=>[o("div",J,[a[24]||(a[24]=o("span",{style:{color:"#646cff","margin-right":"10px"}},"责任判定",-1)),s(i,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:_e},{icon:d((()=>[s(u(b),{class:"align-sub"})])),default:d((()=>[a[21]||(a[21]=r(" 新增 "))])),_:1}),s(i,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:Ue},{icon:d((()=>[s(u(R),{class:"align-sub"})])),default:d((()=>[a[22]||(a[22]=r(" 修改 "))])),_:1}),s(i,{type:"primary",size:"small",ghost:"",class:"mini-btn mr-8px",onClick:Be},{icon:d((()=>[s(u(j),{class:"align-sub"})])),default:d((()=>[a[23]||(a[23]=r(" 删除 "))])),_:1})])])),_:1},8,["searchParams","column","data-source"])])])),_:1},8,["visible","title"]),s(g,{visible:re.value,"onUpdate:visible":a[11]||(a[11]=e=>re.value=e),"destroy-on-close":!0,centered:!0,title:pe.value,width:"1200px",height:"930px",mask:"","modal-warp-style":{padding:"5px"}},{footer:d((()=>[o("div",W,[s(i,{onClick:a[10]||(a[10]=e=>re.value=!1)},{default:d((()=>a[28]||(a[28]=[r("关闭")]))),_:1}),"新增责任判定"==pe.value?(n(),I(i,{key:0,type:"primary",onClick:qe},{default:d((()=>a[29]||(a[29]=[r("添加")]))),_:1})):(n(),I(i,{key:1,type:"primary",onClick:qe},{default:d((()=>a[30]||(a[30]=[r("修改")]))),_:1}))])])),default:d((()=>["责任判定添加"==pe.value?(n(),c("div",G,[s(A,{modelValue:de.value,"onUpdate:modelValue":a[8]||(a[8]=e=>de.value=e),"up-datas-a":Ne.value,onRowClicked:Ce},null,8,["modelValue","up-datas-a"])])):(n(),c("div",H,[s(A,{ref_key:"addRef",ref:Te,modelValue:de.value,"onUpdate:modelValue":a[9]||(a[9]=e=>de.value=e),"up-datas-a":Ne.value,onRowClicked:Ce},null,8,["modelValue","up-datas-a"])]))])),_:1},8,["visible","title"]),s(g,{visible:z.value,"onUpdate:visible":a[16]||(a[16]=e=>z.value=e),mask:!0,"z-index":1001,"destroy-on-close":!1,centered:!1,title:"批卡号查询",width:"1200px",height:"800px"},{footer:d((()=>[o("div",Z,[o("div",Y,[s(y,{model:oe.value,"onUpdate:model":a[14]||(a[14]=e=>oe.value=e),"form-list":t.formListEidtThe},null,8,["model","form-list"])]),o("div",null,[s(i,{type:"primary",onClick:Qe},{default:d((()=>a[31]||(a[31]=[r("确定")]))),_:1}),s(i,{onClick:a[15]||(a[15]=e=>z.value=!1)},{default:d((()=>a[32]||(a[32]=[r("关闭")]))),_:1})])])])),default:d((()=>[o("div",X,[s(l,{searchParams:u(m),"onUpdate:searchParams":a[12]||(a[12]=e=>x(m)?m.value=e:null),"form-list":ve,onSearch:be,onReset:Ie},null,8,["searchParams"]),s(p,{ref_key:"tableRefs",ref:D,searchParams:u(U),"onUpdate:searchParams":a[13]||(a[13]=e=>x(U)?U.value=e:null),column:xe.value,"show-row-selection":!1,"show-card-header":!1,"auto-generate-uuid":!1,"row-key":"wipId",class:"h-full",scroll:{x:"auto",y:"500px"},"is-init-get-data":"","data-source":we.value,"row-height":28,onTableRowClick:Se},null,8,["searchParams","column","data-source"])])])),_:1},8,["visible"])])}}}),[["__scopeId","data-v-a980391e"]]);export{ee as default};
